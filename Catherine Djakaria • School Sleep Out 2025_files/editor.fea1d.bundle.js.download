(window.wpRaisely=window.wpRaisely||[]).push([[3],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(5);var n=a(0),o=a.n(n),r=a(7),i=a.n(r),l=a(59);function s(e={}){const t=[],a=(e,a)=>(t.push(()=>Object(l.a)(e)),()=>a?i()(window,a,null):null),n=()=>Promise.all(t.map(e=>e()));if(e.asPromise)return[a,n];return[a,function(e){return o.a.lazy(async()=>(await n(),{default:e}))}]}},103:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(1),u=a.n(c),d=a(21),m=a.n(d),p=a(32),f=a.n(p),g=a(707),b=a(3),h=a(988),y=a(989),v=a(990),_=a(991),E=a(992),k=a(160),w=a(993),O=a(994),S=a(995),T=a(996),N=a(662),C=a(997),x=a(998),j=a(658),P=a(999),A=a(1e3),D=a(663),R=a(1001),F=a(1002),I=a(254),M=a(334),L=a(123),B=a(30),U=a.n(B),H=a(77),V=a(11);var $=Object(L.b)({mapPropsToValues:H.mapPropsToValues,validate:H.validate,enableReinitialize:!0,handleSubmit:async(e,t)=>{const a=Object(H.filterValuesFromFields)(e,t.props.fields);return t.props.beforeSubmit&&t.props.beforeSubmit(),await t.props.action(a,t)}})((function(e){const{t:t,tD:a}=Object(b.d)(),{values:n,errors:o,touched:r,handleSubmit:i,onChange:l,isSubmitting:c,isValidating:u,setFieldValue:d,handleCustomConditions:m,actionText:p,children:f,unlocked:g,buttons:h,className:y,formUuid:v,buttonFullWidth:_,global:E,integrations:k,setError:w,setFieldError:O,validateField:S,submitCount:T,onSubmitClick:N,validateForm:C,fields:x,focusFirst:j,append:P}=e,A=u||c,D=T>0,R=!g&&null,F=Object.keys(r).length>0,I=Object.keys(o).length>0,M=y;return s.a.createElement("form",{"data-form-uuid":v,onSubmit:i,className:M&&M+"__form"},Object(H.conditionalLogic)(x,n,m).map(t=>{const a=Object(H.generateId)(t),i=(x.find(e=>!0===e.active),{...t,id:a,touched:D||Object(L.a)(r,a),errors:o[a],allErrors:o,key:"custom-field-"+a,value:Object(L.a)(n,a),values:n,global:E,integrations:k,locked:"boolean"==typeof R?R:t.locked,setError:w,setFieldError:O,validateField:S,validateForm:C,change(...t){if(d(...t),"function"==typeof l){const[a,o]=t;l(U.a.set(n,a,o),a,()=>{},e)}},blur:e.setFieldTouched});return f(i)}),Boolean(P)&&s.a.createElement("div",{className:(M||"form")+"__append"},P),s.a.createElement("div",{className:(M||"form")+"__navigation"},h?h({fields:x,values:n,isValidating:u,isSubmitting:c,handleSubmit:i,setFieldValue:d,onSubmitClick:N,formWasTouched:F,formHasErrors:I}):s.a.createElement(V.a,{type:"submit",className:_?"button--full":"",onClick:N,disabled:A},c?t("Loading..."):a(p))))})),q=a(16),G=a(87);class z extends l.Component{constructor(...e){super(...e),i()(this,"state",{formUuid:f()(),componentHasMounted:!1,clearPrompt:!1}),i()(this,"getFormAsNativeNode",()=>document.querySelector(`form[data-form-uuid="${this.state.formUuid}"]`)),i()(this,"getRelativeRowContainer",()=>{let e=this.getFormAsNativeNode();if(!e)return null;for(;e!==document.body;){if(e.className&&-1!==e.className.indexOf("row__container"))return e;e=e.parentNode}return null}),i()(this,"handleSubmitClick",()=>setTimeout(()=>{const e=this.getFormAsNativeNode();if(!e)return;const[t]=e.querySelectorAll(".form-field--error");Object(G.a)(t,{block:"start"})},50)),i()(this,"renderField",e=>{const t=this.props,{tD:a}=Object(b.a)();switch(e.type){case"interval":return s.a.createElement(h.a,e);case"password":return s.a.createElement(y.a,e);case"number":return s.a.createElement(v.a,e);case"array":return s.a.createElement(_.a,e);case"boolean":return s.a.createElement(E.a,e);case"select":case"select-other":return s.a.createElement(k.a,o()({},e,{allowOtherInput:"select-other"===e.type}));case"textarea":return s.a.createElement(w.a,e);case"currency":return s.a.createElement(O.a,e);case"select-currency":return s.a.createElement(S.a,e);case"select-country":return s.a.createElement(T.a,e);case"path":return s.a.createElement(N.a,o()({campaign:e.global&&e.global.campaign},e));case"checkbox":return s.a.createElement(C.a,e);case"date":return s.a.createElement(x.a,e);case"heading":return s.a.createElement("h3",{className:"form-heading"},e.default&&-1!==e.default.indexOf("</")?m()(a(e.default)):a(e.default));case"rich-description":{const t="string"==typeof e.default?e.default:"";return s.a.createElement("div",{className:"form-description"},-1!==t.indexOf("</")?m()(t):m()(`<p>${t}</p>`))}case"file":return s.a.createElement(j.a,e);case"image":return s.a.createElement(j.a,o()({},e,{isImage:!0}));case"hidden":return s.a.createElement(P.a,e);case"phone":return s.a.createElement(A.a,e);case"html":return s.a.createElement(M.a,e);case"address":return s.a.createElement(D.a,o()({},e,{user:"user"===t.formType&&t.values,donation:"donation"===t.formType&&t.values,source:e.config&&e.config.source?e.config.source:"google",country:e.config&&e.config.country?e.config.country:null,showManualInput:!0}));case"exercise-goal":return s.a.createElement(R.a,e);case"fundraiser-theme":return s.a.createElement(F.a,e);case"custom":return e.render(e,t);default:return s.a.createElement(I.a,e)}})}componentDidMount(){const e=this.getRelativeRowContainer();e&&e.classList.add("row__container--contains-form"),this.setState({componentHasMounted:!0})}componentWillUnmount(){const e=this.getRelativeRowContainer();e&&e.classList.remove("row__container--contains-form")}render(){const{props:e,state:t}=this,{t:a,tD:n}=Object(b.a)();return s.a.createElement(l.Fragment,null,e.promptOnLeave&&t.componentHasMounted&&!t.clearPrompt&&s.a.createElement(g.a,{message:e.promptOnLeave}),s.a.createElement($,o()({},e,{onSubmitClick:this.handleSubmitClick,formUuid:this.state.formUuid,beforeSubmit:()=>this.setState({clearPrompt:!0})}),t=>s.a.createElement(s.a.Fragment,null,!1!==t.active&&s.a.createElement("div",{className:"field-wrapper field-wrapper--"+t.id,key:t.id},this.renderField({...t,disabled:e.lockedFields&&e.lockedFields.includes(t.id)}),t.help&&"hidden"!==t.type&&s.a.createElement("p",{className:"field-help"},s.a.createElement(q.a,{name:"info",size:"small"}),m()(n(t.help)))))))}}z.propTypes={action:u.a.func,className:u.a.string,actionText:u.a.string,values:u.a.object,enableReinitialize:u.a.bool,fields:u.a.arrayOf(u.a.shape({label:u.a.string.isRequired,id:u.a.string.isRequired,type:u.a.string.isRequired,confidential:u.a.bool,active:u.a.bool,required:u.a.bool,core:u.a.bool,locked:u.a.bool,default:u.a.any,classes:u.a.string,validations:u.a.arrayOf(u.a.object),errors:u.a.arrayOf(u.a.string)})).isRequired,promptOnLeave:u.a.string,append:u.a.element},z.defaultProps={actionText:"Save",values:{},fields:[],promptOnLeave:null};t.a=z},104:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i}));var n=a(216);const o=660,r=50,i=Object(n.a)()?0:300},105:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(23),o=a.n(n),r=a(318),i=a.n(r),l=a(43);function s(e,t){if("campaign"===t)return{type:"campaign",uuid:e.campaign.profile.uuid,currency:e.campaign.currency};if("user"===t){const{user:t}=e,a=t&&t.profile;return{type:"user",uuid:a?t.profile.uuid:null,currency:a?t.profile.currency:null}}return{type:"auto",uuid:null,currency:null}}function c(e){var t;const a=Number(o.a.parse(window.location.href.split("?")[1]||"").amount);return a?a*(null!==(t=l[e])&&void 0!==t&&t.zeroDecimal?1:100):null}function u(){return o.a.parse(window.location.href.split("?")[1]||"").frequency}function d(e){const t=u();if(!t||!e)return null;return m(i()(e.map(e=>e.interval)),t)?t.toUpperCase():null}function m(e,t){return e.includes(t.toUpperCase())}function p(e,t){const{...a}=t,n=e.currencySelection;function o(t,n=null){const o=e[t],r=a[n||t];return l=r,void 0!==(i=o)?i:l;var i,l}return{currencySelection:void 0!==n?n:"common",customAmountPlaceholder:o("customAmountPlaceholder"),giftAid:o("giftAid"),isSwiftAidEnabled:o("isSwiftAidEnabled"),mainHeading:a.title,detailsHeading:o("detailsHeading"),paymentsHeading:o("paymentsHeading"),thankYouTitle:o("thankYouTitle"),thankYouMessage:o("thankYouMessage"),customShareUrl:o("customShareUrl"),defaultDonationAmount:o("defaultDonationAmount"),existingCards:o("existingCards")}}},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(61);const s=e=>"profile-image__rank"+(e||"");function c({rank:e}){const t=Object(n.useMemo)(()=>(e=>{const t=[s(),s("--rank-"+e)];return 1===e?t.push(s("--first"),s("--gold")):2===e?t.push(s("--second"),s("--silver")):3===e?t.push(s("--third"),s("--bronze")):t.push(s("--other"),s("--contending")),t.join(" ")})(e),[e]);return o.a.createElement("div",{className:t,"data-rank":e},e)}function u({profile:e,defaultImage:t,size:a,align:n,className:r,maxWidth:i,showRank:s,onClick:u}){var d;const m=t&&t.length>0?t:`https://storage.googleapis.com/raisely-assets/default-profile-${(null==e||null===(d=e.type)||void 0===d?void 0:d.toLowerCase())||"individual"}.svg`,p=Object(l.a)(((e,t)=>e&&e.photoUrl?e.photoUrl:t)(e,m),{maxWidth:2*i||600}),f=p?`url(${p})`:null;return o.a.createElement("div",{className:`profile-image profile-image--size-${a||"normal"} profile-image--align-${n||"left"} ${r||""} ${i?"profile-image--max-width":""}`,style:{maxWidth:i&&i+"px"},onClick:u||null},o.a.createElement("div",{className:"profile-image__photo",style:{backgroundImage:f}}),s&&e.rank?o.a.createElement(c,{rank:e.rank}):null)}u.propTypes={profile:i.a.object.isRequired,defaultImage:i.a.string,className:i.a.string,showRank:i.a.bool,size:i.a.oneOf(["small","normal"]),align:i.a.oneOf(["left","center","right"])}},11:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(63);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(29);const s=["base","primary","primary-hollow","secondary","inverse","cta","facebook","saml"],c=(e,t,a="")=>`button button--${e} button--${t} ${a}`.trim();function u(e){const{isBasicLink:t,title:a,children:n,href:r,onClick:i,theme:u,tool:d,disabled:m,type:p,className:f,cyId:g,testId:b,ariaLabel:h}=e,y=s.includes(u)?u:"primary";if(r&&"string"==typeof r){const e=r.includes("://")&&!r.includes("admin.raisely.com");return t||r.includes("://")||r.startsWith("#")?o.a.createElement("a",{title:a,className:c("link",y,f),href:r,target:e?"_blank":"_self",rel:e?"noreferrer":null,"data-cy":g||null,"data-testid":b||null,"aria-label":h},n||""):o.a.createElement(l.a,{title:a,className:c("link",y,f),to:r,"data-cy":g||null,"data-testid":b||null,"aria-label":h},n||"")}return o.a.createElement("button",{type:p,title:a,disabled:Boolean(m),className:c(d?"tool":"standard",y,f),onClick:i,"data-cy":g||null,"data-testid":b||null,"aria-label":h},n||"")}u.propTypes={children:i.a.node.isRequired,isBasicLink:i.a.bool,disabled:i.a.bool,title:i.a.string,href:i.a.string,className:i.a.string,onClick:i.a.func,theme:i.a.oneOf(s),ariaLabel:i.a.strings}},111:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));a(5);var n=a(3),o=a(57),r=a(7),i=a.n(r),l=a(0),s=a.n(l),c=a(75),u=a(135),d=a.n(u),m=a(11),p=a(76),f=a(180),g=a(16),b=a(127),h=a(128),y=a(207),v=a(9),_=a(50),E=a.n(_),k=a(21),w=a.n(k),O=a(10);function S(e){const{t:t}=Object(n.d)(),{accountTitle:a,accountButton:r,global:u,enableFacebook:_,passwordLength:k,api:S,values:T,updateValues:N,updateStep:C,step:x,isV4:j,enableMultipleSignups:P}=e,A=Object(o.b)("user",e.fields),D=i()(u,"campaign.config.signup.enablePartialCollection",!1),[R,F]=Object(l.useState)({email:"",alreadyExists:!1}),{integrations:I,actions:M}=useRaisely(!0);Object(c.a)({form:"signup",stage:"user",data:{user:e.values.user,isDisabled:e.disableAnalytics}}),Object(l.useEffect)(()=>{d()(e.global.user)||e.disableNavPrompt()},[e.global.user]);const{fbSDK:L}=e.integrations,{user:B}=u;if(R.alreadyExists)return s.a.createElement("div",{className:"signup-form__exists"},s.a.createElement("p",null,s.a.createElement("strong",null,"It looks like ","you're"," already signed up to this campaign with ",R.email,"."),"You can access your dashboard by logging in with your email and password."),s.a.createElement(m.a,{theme:"primary",href:"/login"},"Log In"),B.isSamlLogin||s.a.createElement(m.a,{theme:"primary",href:"/reset"},"Reset my Password"));const U=e=>{e.preventDefault(),C(x-1)},H=_&&u.campaign.config.site.facebook.active||i()(u,"campaign.config.saml.onClient",!1)&&i()(u,"campaign.config.saml.passwordSignUpOffered",!0),V=i()(u,"campaign.config.saml.onClient",!1)&&!i()(u,"campaign.config.saml.passwordSignUpOffered",!0),$=i()(u,"campaign.config.signup.partialCollectionMessage",null);return s.a.createElement("div",{className:"signup-form__field-container signup-form__account"},!j&&T.profile.parentUuid&&s.a.createElement("div",{className:"signup-form__team-preview"},s.a.createElement(b.a,{api:S,heading:"You are joining:",uuid:T.profile.parentUuid,cancel:()=>N({profile:{parentUuid:null}})})),s.a.createElement("h3",{className:"signup-form__title signup-form__account--heading"},a),d()(e.global.user)&&s.a.createElement(s.a.Fragment,null,_&&u.campaign.config.site.facebook.active&&s.a.createElement("div",{className:"signup-form__facebook"},s.a.createElement(h.a,{intent:"signup",onAuth:t=>{e.updateValues({user:{...t.user},profile:{photoUrl:t.user.photoUrl},wasFacebookSignup:!0})}})),i()(u,"campaign.config.saml.onClient",!1)&&s.a.createElement("div",{className:"signup-form__saml"},s.a.createElement(y.a,{values:T,isSignUp:!0,step:x,buttonText:i()(u,"campaign.config.saml.signInButtonText")})),H&&s.a.createElement("div",{className:"signup-form__alternate"},s.a.createElement("p",null,t("or use an email and password")))),(!V||B)&&s.a.createElement(v.a,{unlocked:!0,global:u,fields:[...A,...T.user.facebookId&&T.user.facebookId.length>0||B?[]:[{active:!0,core:!0,id:"password",label:"Password",locked:!1,private:!1,required:!0,type:"password",minLength:k}]],formType:"user",lockedFields:B?["email"]:[],values:d()(e.values.user)?E()(B,["public","private","firstName","lastName","email","fullName","preferredName","address1","address2","suburb","state","postcode","country","phoneNumber"]):e.values.user,actionText:r,action:async t=>{if(await(async t=>"OK"!==(await e.api.users.checkUser({email:t,campaignUuid:e.global.campaign.uuid})).body().data().data.status)(t.email)&&!P)return e.disableNavPrompt(),void F({alreadyExists:!0,email:t.email});if(D)try{!async function({user:e,integrations:t,actions:a,global:n}){const{campaign:o}=n;if(null==e||!e.email)return;const r=(await O.a.users.upsert({data:{...e,interaction:{categoryPath:"registration-started",detail:{comment:"Entered their details on a signup form.",private:{formName:"signup",url:window.location.href,campaignUuid:o.uuid}}}}})).body().data();r.token&&(t.broadcast("user.authenticated",{user:e}),a.addUser(r.data))}({user:t,global:u,integrations:I,actions:M})}catch(e){console.error(e),window.raiselyReportError&&window.raiselyReportError(e,{isCriticalComponent:!0})}e.updateValues({user:t},()=>{e.updateStep(e.step+1),e.disablePrompt||e.enableNavPrompt()})},className:"signup-form",buttons:({onSubmitClick:t,isSubmitting:a})=>j?s.a.createElement(p.a,{onSubmit:t,actionText:r,isSubmitting:a}):s.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},s.a.createElement(m.a,{className:"signup-form__profile--next button--full in-form--next",onClick:t,type:"submit"},e.showTransitionBar&&s.a.createElement(f.a,{isTransitioning:a}),r),x>0&&s.a.createElement(l.Fragment,null,s.a.createElement("br",null),s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back in-form--back",onClick:U},s.a.createElement(g.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,"Back")))),separateField:j?"password":null,append:D&&Boolean($)&&s.a.createElement("p",{className:"form-append__partial-completion-message"},$.includes("<")?w()($):$)}))}},112:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(5),a(39);var n=a(20),o=a(3),r=a(7),i=a.n(r),l=a(0),s=a.n(l),c=a(76),u=a(11),d=a(16);const m=({exerciseGoals:e,updateValues:t,values:a,step:r,updateStep:m,global:p,integrations:f,exerciseTitle:g,exerciseDescription:b,isV4:h})=>{const{unit:y,multiplier:v,singularUnit:_,metric:E}=Object(n.f)(p.campaign.config),{t:k}=Object(o.d)(),w=!(e&&e.length),O=!w||i()(p.campaign.config,"activity.enableCustomGoals"),S=w?i()(p.campaign.config,"activity.goals",[]).map(e=>({...e,goal:Object(n.n)(e.goal,y),convertedGoal:e.goal})):e.map(e=>({title:e.description,goal:Object(n.n)(e.value,y),convertedGoal:e.value})),T=Object(n.l)(E)?"exerciseGoal":"exerciseGoalTime",N=Number(i()(a,"profile."+T)),C=S.find(e=>e.isDefault);let x=C?C.goal:null,j=0;if(N){S.find(e=>Number(e.goal)===N)?(x=N,j=null):(j=Object(n.a)(N,y),x=N)}const[P,A]=Object(l.useState)(x),[D,R]=Object(l.useState)(j),F=()=>{const e=a.profile?"profile":a.teamProfile?"teamProfile":"organisationProfile";t({[e]:{exerciseGoal:P,exerciseGoalTime:P}},()=>m(r+1)),f.broadcast("signupForm.exerciseGoalSelected",{stage:r,exerciseGoal:P,exerciseGoalTime:P})},{tD:I,i18n:M}=Object(o.d)();return s.a.createElement("div",{className:"signup-form__exercise"},g&&s.a.createElement("h3",{className:"signup-form__step-heading signup-form__exercise__heading"},I(g)),b&&s.a.createElement("p",{className:"signup-form__step-description signup-form__exercise__description"},b),(S||[]).map((e,t)=>s.a.createElement("div",{className:"signup-form__exercise__btn "+(Number(P)===Number(e.goal)?"signup-form__exercise__btn--selected":""),key:t,onClick:t=>{A(e.goal),R(null)}},s.a.createElement("span",{className:"signup-form__exercise__btn__amount"},e.convertedGoal," ",Object(n.m)(y,e.convertedGoal,null,_)),s.a.createElement("span",{className:"signup-form__exercise__btn__description"},I(e.title)))),O&&s.a.createElement(s.a.Fragment,null,h&&s.a.createElement("p",{className:"signup-form__field-section-heading"},k("Or enter your own")),s.a.createElement("div",{className:"signup-form__exercise__other"},s.a.createElement("span",{className:"signup-form__exercise__other__label"},"Other:"),s.a.createElement("input",{type:"number",value:null!==D?D:"",className:"signup-form__exercise__other__input",onChange:e=>{if(""===e.target.value)return A(null),void R(null);A(Object(n.n)(e.target.value,y)),R(e.target.value)}}),s.a.createElement("span",{className:"signup-form__exercise__other__unit"},y))),h?s.a.createElement(c.a,{onSubmit:F}):s.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},s.a.createElement(u.a,{onClick:F,className:"signup-form__exercise--next button--full in-form--next",type:"submit"},"Next"),r>0&&s.a.createElement(l.Fragment,null,s.a.createElement("br",null),s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back in-form--back",onClick:()=>m(r-1)},s.a.createElement(d.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,"Back")))))}},113:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));a(124);var n=a(0),o=a.n(n),r=a(1005),i=a(92),l=a(4),s=a.n(l),c=a(2),u=a.n(c),d=(a(5),a(1)),m=a.n(d),p=a(7),f=a.n(p),g=a(116),b=a(48),h=a(134),y=a(26);class v extends o.a.Component{constructor(...e){super(...e),u()(this,"state",{...Object(y.o)(this.props)}),u()(this,"initChallenge",()=>{this.friendlyChallenge=new b.a("donation",this.props.global.campaign),this.friendlyChallenge.start(),this.friendlyChallenge.getPromise().catch(this.friendlyChallengeError)}),u()(this,"getAvailableStages",()=>{const e=void 0!==this.props.giftAid?this.props.giftAid:f()(this.props.global,"campaign.config.donation.giftAid",!1);return[!this.props.amount&&"amount",this.props.perks&&this.state.loadedPerks.length&&"perks",e&&"giftaid",!this.props.onTokenSuccess&&!this.props.combineDetailsAndPayment&&"details",this.props.combineDetailsAndPayment&&"details-and-payment",(!this.props.combineDetailsAndPayment||this.state.values.includePaymentStep)&&"payment","success"].filter(e=>!!e)}),u()(this,"friendlyChallengeError",()=>{this.setState({error:"There is a problem loading payment processing. Please contact Raisely support"})}),u()(this,"updateValues",y.q.bind(this))}static withLoader(e,t=null){return e.embed||e.global.userAuthAttempted?o.a.createElement(this,e):t}async componentDidMount(){var e;null===(e=this.props.integrations)||void 0===e||e.broadcast("donation.formLoaded",{formUuid:this.state.formUuid}),this.props.perks&&this.setState({loadedPerks:await Object(y.n)()})}componentWillUnmount(){this.destroyChallenge()}componentDidUpdate(e,t){var a;this.state.step!==t.step&&(null===(a=this.props.integrations)||void 0===a||a.broadcast("donation.stage",{stage:this.state.step+1,values:this.state.values,profile:this.props.global.current.profile}),Object(y.c)(this.state.formUuid));if(this.state.step>0&&!this.friendlyChallenge&&this.initChallenge(),this.state.lastResult&&this.state.lastResult!==t.lastResult){var n;const e="ONCE"===this.state.lastResult.processing?"donation":"subscription",t={values:this.state.values,response:this.state.lastResult,profile:this.props.global.current.profile};null===(n=this.props.integrations)||void 0===n||n.broadcast(e+".success",{...t,formUuid:this.state.formUuid}),"function"==typeof this.props.onSuccess&&this.props.onSuccess(t)}e.amount!==this.props.amount&&this.updateValues({amount:this.props.amount})}destroyChallenge(){this.friendlyChallenge&&(this.friendlyChallenge.destroy(),this.friendlyChallenge=null)}render(){const{props:e,state:t}=this,{error:a}=this.state,r=this.getAvailableStages(),i={amount:g.a,perks:g.e,giftaid:g.c,details:g.b,"details-and-payment":g.h,payment:g.d,success:g.g}[r[t.step]],l=Object(y.j)(e),{currency:c,config:u}=e.global.campaign;let d;d="Registration"===e.feeType?c:t.values.currency||l.currency||e.global.detectedCurrency;const m=Object(h.a)({config:u}),p=o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"donation-form__header"},e.title?o.a.createElement("h4",{className:"donation-form__header__title"},e.title):null,o.a.createElement(g.f,{formProps:e,step:t.step,stages:r,onSelect:e=>this.setState({step:e})})),o.a.createElement("div",{className:"donation-form__body donation-form__body--"+r[t.step]},a&&o.a.createElement("p",{className:"donation-form__message donation-form__message--error"},a),o.a.createElement(i,s()({},t,{updateValues:this.updateValues,preferSCAMode:m,formProps:e,global:e.global,stages:r,donationTarget:l,campaignCurrency:c,targetCurrency:d,integrations:e.integrations,paymentButton:e.paymentButton,detailsHeading:e.detailsHeading,paymentHeading:e.paymentHeading,autoFocus:void 0===e.autoFocus||e.autoFocus}))));return o.a.createElement("div",{id:"donate",className:`donation-form donation-form--active-step-${t.step+1} ${e.additionalClassname||""}`,"data-form-uuid":t.formUuid},p)}}v.propTypes={global:m.a.object.isRequired,integrations:m.a.object.isRequired,profileUuid:m.a.any,currency:m.a.string,amount:m.a.number,onTokenSuccess:m.a.func,title:m.a.string,detailsHeading:m.a.string,paymentHeading:m.a.string,thankYouTitle:m.a.string,thankYouMessage:m.a.string,public:m.a.object,private:m.a.object,perks:m.a.bool,existingCards:m.a.bool,giftAid:m.a.bool,recurring:m.a.bool};var _=a(147),E=a(184),k=a(105),w=(a(27),a(261));const O=/{{([_a-zA-Z01-9.\\]+)}}/g,S=/{{[_a-zA-Z01-9.\\]+}}/g;function T(e,t={}){const a=useRaisely(),o=[];t.staticTemplate||o.push(e);const r=Object(n.useMemo)(()=>function(e){let t=JSON.stringify(e,null,2);const a=[];t.replace(O,(e,t)=>{a.push(t)});const n=t.split(S);return t=null,e=>{let t=[];return n.forEach((n,o)=>{t.push(n,Object(w.b)(f()(e,a[o],"")))}),t=t.join(""),JSON.parse(t)}}(e),o);return Object(n.useMemo)(()=>r(a),[r,a])}function N(e){const t=useRaisely(),a=function(e){var t,a;const{campaign:o}=useRaisely(),i=Boolean(null===(t=o.config.donation)||void 0===t?void 0:t.isV3Enabled),l=Boolean(null===(a=o.config.flags)||void 0===a?void 0:a.donationFormV2);return Object(n.useMemo)(()=>{const t=[i&&"3",l&&"2","1"].filter(Boolean),a=""+(e||"");if(a){let e,n=0;for(;n<t.length;n++)if(e=t[n],Object(r.a)(e,a))return e}return t[0]},[e,i,l])}(e.version),l=T(t.campaign.config.donation||{},{staticTemplate:!0});if("3"===a){const t=C(e,l);return o.a.createElement(i.a,null,o.a.createElement(E.a,Object(E.b)(t)))}if("2"===a){const t=C(e,l);return o.a.createElement(i.a,null,o.a.createElement(_.a,Object(_.b)(t)))}return o.a.createElement(v,e)}function C(e,t){return e.preferCampaignSettings?{...e,...Object(k.a)(t,e)}:{...Object(k.a)(t,e),...e,customShareUrl:t.customShareUrl||e.customShareUrl}}N.withLoader=function(e,t){return e.global.userAuthAttempted?o.a.createElement(N,e):t}},115:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c}));a(5),a(27);var n=a(0),o=a.n(n),r=a(8),i=(a(33),a(43));function l({challengeProgress:e}){return o.a.createElement("div",{className:"donation-form__verifying"},"Initialising payment processing ...")}a.d(t,"d",(function(){return i}));const s=({targetCurrency:e,values:t,feeAmount:a,formProps:i,updateValues:l,raiselyFee:s})=>t.amount>0&&a>0&&o.a.createElement("label",{className:"donation-form__raisely-fee"},o.a.createElement("input",{onClick:()=>l({feeOptIn:!t.feeOptIn}),type:"checkbox",name:"fee",defaultChecked:t.feeOptIn}),s.feeMessage?s.feeMessage.replace("[fee]",Object(r.f)(a,e)):o.a.createElement(n.Fragment,null,"Add ",Object(r.f)(a,e)," to help cover our"," ",o.a.createElement("span",{className:"donation-form__fundraising-costs donation-form__has-tooltip"},"fundraising costs",o.a.createElement("div",{className:"donation-form__tooltip"},"Adding this small percentage will help Raisely, a for-purpose giving platform, cover our website and platform costs.")))),c=({isProcessing:e,showWhenProcessing:t,finalTotal:a,children:r})=>{const i=e&&"function"==typeof t;return o.a.createElement(n.Fragment,null,i&&t(a),o.a.createElement("div",{style:{display:i?"none":null}},r))}},116:function(e,t,a){"use strict";a.d(t,"f",(function(){return j})),a.d(t,"a",(function(){return M})),a.d(t,"e",(function(){return L})),a.d(t,"c",(function(){return B})),a.d(t,"b",(function(){return U})),a.d(t,"d",(function(){return H})),a.d(t,"g",(function(){return V})),a.d(t,"h",(function(){return G}));var n=a(4),o=a.n(n),r=(a(27),a(5),a(39),a(32)),i=a.n(r),l=a(0),s=a.n(l),c=a(21),u=a.n(c),d=a(7),m=a.n(d),p=a(46),f=a.n(p),g=a(66),b=a(93),h=a(253),y=a(115),v=a(26),_=a(103),E=a(99),k=a(8),w=a(11),O=a(16),S=a(56),T=a(45),N=a(37),C=a(143);function x(e){return e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}function j({stages:e,step:t,onSelect:a}){const n=e.filter(e=>"success"!==e);return s.a.createElement("div",{className:"donation-form__stages donation-form__stages--total-"+e.length},n.map((e,n)=>{return s.a.createElement("div",{role:"button",tabIndex:"0",onKeyPress:()=>n<t?a(n):null,key:e,className:(o=n,r=n===t,i=n<t,Object(k.q)(`\n\t\t\tdonation-form__stage donation-form__stage--${o}\n\t\t\t${r?" donation-form__stage--active":""}\n\t\t\t${i?" donation-form__stage--previous":""}\n\t\t`)),onClick:()=>n<t?a(n):null,disabled:n>t},n+1);var o,r,i}))}const P=e=>Object(k.q)(`\n\t\tdonation-form__amount-type-btn\n\t\t${e?"donation-form__amount-type-btn--active":"donation-form__amount-type-btn--inactive"}\n\t`),A=(e,t,a="in ")=>`${e.donating?f()(e.donating):"Donating"} ${Object(C.a)(t,a)}`,D=({onSelect:e,...t})=>{const a=Object(v.f)(t);return s.a.createElement("div",{className:"donation-form__amount-type"},a.length>1?a.map(({type:t,isActive:a,interval:n,count:o})=>s.a.createElement("button",{key:t,className:P(a),onClick:()=>e({interval:n,count:o})},C.b[t])):null)},R=({amount:e,image:t,title:a,class:n,currency:o,campaignCurrency:r,onClick:i,selectedAmount:l,disableAutomaticNext:c,lowestPerk:u})=>{const d=r===o?e:Object(k.w)(e,r,o,!0),m=Object(k.f)(d,o),p=d>=u;return s.a.createElement("button",{className:Object(k.q)(`\n\t\t\t\t\tdonation-form__amount-btn button--donation\n\t\t\t\t\t${t?"donation-form__amount-btn--image":""}\n\t\t\t\t\t${p?" donation-form__amount-btn--has-perk":""}\n\t\t\t\t\t${l===d?"donation-form__amount-btn--selected":""}\n\t\t\t\t\t${n||""}\n\t\t\t\t`),type:"button",onClick:()=>i(d,c)},t&&s.a.createElement(N.a,{src:t+"?w=500",alt:a,className:"donation-form__amount-img"}),s.a.createElement("span",{className:"donation-form__amount-value"},m),a&&s.a.createElement("span",{className:"donation-form__amount-title"},Object(k.l)(a)))},F=({campaignCurrency:e,amountConfig:t,values:a,targetCurrency:n,onSelect:r,lowestPerk:i,formProps:c,minimal:u,calculatedAmount:d,disableAutomaticNext:p,global:f,formUuid:g})=>{const b=t.find(e=>e.interval===a.interval&&e.count===a.count)||{},h=JSON.parse(JSON.stringify(b));h.amounts=h.amounts.filter(e=>{if(!e.rules)return!0;try{return Object(k.b)({rules:e.rules,condition:"ALL"},{user:m()(f,"user",{}),profile:m()(f,"current.profile",{})})}catch(e){return console.error(e),!0}});const y=m()(h,"amounts[1].amount"),_=e===n?y:Object(k.w)(y,e,n,!0),[E,w]=Object(l.useState)(null);if(Object(l.useEffect)(()=>{y&&c.defaultDonationAmount&&r(_,!0)},[_,n]),!Array.isArray(h.amounts))return null;const O=Object(v.e)(h.amounts);return s.a.createElement("div",{className:(h.amounts,Object(k.q)(`\n\t\t\tdonation-form__amount donation-form__amount--width-${O}\n\t\t\t${Boolean(h.amounts.find(e=>e.title&&e.title.length>0))?"donation-form__amount--has-text":""}\n\t\t`))},h.amounts.map((t,l)=>s.a.createElement(R,o()({key:l},t,{buttonWidth:O,currency:n,campaignCurrency:e,minimal:u,onClick:(e,t)=>((e,t)=>{var a;r(e,t),w(!1),null===(a=c.integrations)||void 0===a||a.broadcast("donation.amountClicked",{formUuid:g,amount:e,currency:n})})(e,t),lowestPerk:i,selectedAmount:d(a.amount,!0),disableAutomaticNext:p||c.defaultDonationAmount}))),s.a.createElement(S.a,{type:"currency",id:"amount",label:"Other Amount",placeholder:"Other",classes:"donation-form__other-field",change:(e,t)=>(e=>{let t=Number(e);w(0===t?"":t,!0),r(t,!0,!0)})(t),value:E||"",values:a,currency:n}))},I=({targetCurrency:e,languageConfig:t,allCurrencies:a,onSelect:n,values:o})=>s.a.createElement("div",{className:"donation-form__amount-currency"},s.a.createElement("hr",null),A(t,o),s.a.createElement("span",{className:"donation-form__currency"},k.c[e].name,s.a.createElement("select",{className:"donation-form__currency-select","aria-label":"Select donation currency",value:e,onChange:e=>n(e.target.value)},Object.values(k.c).filter(e=>a||e.active).map(e=>s.a.createElement("option",{value:e.code,key:e.code,name:e.name},e.name))))),M=({formUuid:e,global:t,values:a,formProps:n,targetCurrency:o,updateValues:r,preferSCAMode:i,campaignCurrency:l,loadedPerks:c,minimal:u,amountsTitle:d,enableRego:m,disableAutomaticNext:p,registrationAmount:f})=>{const{language:g,amounts:b}=t.campaign.config,h=n.minAmount>0?n.minAmount:0,y=!(h&&!(a.amount>=h)),{lowestPerk:_}=Object(v.g)({loadedPerks:c,campaignCurrency:l,targetCurrency:o,values:a}),E=f&&Number(f)||0,k=(e,t=!1)=>m?!e&&m?E:t?Number(e)-E:Number(e)+E:Number(e);return s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{global:t,values:a,preferSCAMode:i,formProps:n,onSelect:({interval:e,count:t})=>r({interval:e,count:t})}),d&&s.a.createElement("h5",{className:"donation-form__amounts-title"},d),s.a.createElement(F,{key:o,values:a,targetCurrency:o,amountConfig:b,campaignCurrency:l,minAmount:h,lowestPerk:_&&_.amount,formProps:n,formUuid:e,minimal:u,calculatedAmount:k,disableAutomaticNext:p,onSelect:(e,t=null)=>{r({amount:k(e)},{nextStep:Boolean((!h||e>=h)&&!t)})},global:t}),!u&&s.a.createElement(I,{targetCurrency:o,languageConfig:g,allCurrencies:n.allCurrencies,onSelect:e=>r({currency:e}),values:a}),y&&Boolean(a.amount)&&!u&&s.a.createElement("nav",{className:"donation-form__nav"},s.a.createElement(w.a,{type:"submit",onClick:()=>{n.integrations.broadcast("donation.amountSelected",{formUuid:e,amount:a.amount,currency:o}),r(null,{nextStep:!0})},className:"donation-form__next-button"},"Next")))},L=({updateValues:e,...t})=>{const{claimablePerks:a,unclaimablePerks:n,lowestPerkDisplay:o}=Object(v.g)(t),r=s.a.createElement(w.a,{theme:"secondary",className:"donation-form__perk-skip-btn",onClick:()=>e({perkUuid:null},{nextStep:!0})},"Continue");return a.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},"Select a gift"),s.a.createElement("div",{className:"donation-form__amount donation-form__amount--perks donation-form__amount--width-full"},a.map(t=>s.a.createElement("button",{key:t.uuid,className:"donation-form__perk-btn donation-form__amount-btn button--donation",onClick:()=>e({perkUuid:t.uuid},{nextStep:!0})},s.a.createElement("span",{className:"donation-form__amount-value"},t.name),t.description&&s.a.createElement("span",{className:"donation-form__amount-title"},t.description)))),r):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"donation-form__perk-eligibility"},"No rewards are available at this donation amount. If you donate ",s.a.createElement("b",null,o)," or more you will be eligible to claim a reward."),s.a.createElement("div",{className:"donation-form__perk-back-group"},s.a.createElement(w.a,{className:"donation-form__perk-back-btn",onClick:()=>e(null,{previousStep:!0})},"Select a new amount"),r))},B=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},"Add Gift Aid"),s.a.createElement("p",null,"Increase your donation by"," ",s.a.createElement("strong",null,Object(k.f)(.25*e.values.amount,e.targetCurrency))," ","at no extra cost to you."),s.a.createElement("div",{className:"donation-form__giftaid"},s.a.createElement(_.a,{values:e.values,fields:Object(v.l)(e),action:({private:t})=>e.updateValues({private:t},{nextStep:!0}),buttons:({onSubmitClick:t})=>s.a.createElement("nav",{className:"donation-form__nav"},e.step>0&&s.a.createElement(w.a,{theme:"primary-hollow",className:"donation-form__back",onClick:t=>{t.preventDefault(),e.updateValues(null,{previousStep:!0})}},s.a.createElement(O.a,{name:"chevron_left",size:"small"})),s.a.createElement(w.a,{onClick:a=>{e.formProps.integrations.broadcast("donation.giftAidCompleted",{formUuid:e.formUuid}),t(a)},type:"submit",className:"donation-form__next"},"Next ",s.a.createElement(O.a,{name:"chevron_right",size:"small"})))}))),U=({formUuid:e,global:t,values:a,updateValues:n,targetCurrency:o,step:r,detailsHeading:i,formProps:l})=>s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},Object(k.l)(Object(v.d)({lastResult:{...a,currency:a.currency||o}},[i||"Your Details"],!1)[0])),s.a.createElement(_.a,{values:a,global:t,fields:t.customFields.donation,handleCustomConditions:e=>Object(v.a)(e,o,t),action:e=>n(e,{nextStep:!0}),buttons:({onSubmitClick:i})=>s.a.createElement("nav",{className:"donation-form__nav"},r>0&&s.a.createElement(w.a,{theme:"primary-hollow",className:"donation-form__back",type:"button",onClick:e=>{e.preventDefault(),n(null,{previousStep:!0})}},s.a.createElement(O.a,{name:"chevron_left",size:"small"})),s.a.createElement(w.a,{onClick:n=>{var r,s;null===(r=l.integrations)||void 0===r||r.broadcast("donation.detailsCompleted",{formUuid:e,amount:a.amount,currency:a.currency||o,frameId:null===(s=t.query)||void 0===s?void 0:s.frameId}),i(n)},type:"submit",className:"donation-form__next"},"Next ",s.a.createElement(O.a,{name:"chevron_right",size:"small"})))})),H=e=>{const{updateValues:t,availableProviders:a,global:n,campaign:r}=e,c=Object(v.h)(e),u=()=>i()(),[d,p]=Object(l.useState)(u);if(!c)return s.a.createElement("div",{className:"donation-form__message donation-form__message--warning"},s.a.createElement("p",null,s.a.createElement("i",{className:"material-icons"},"error"),s.a.createElement("strong",null,"Connect a Payment Provider")),s.a.createElement("p",null,"In order to take live payments, you'll need to"," ",s.a.createElement("a",{href:`https://admin.raisely.com/campaigns/${r.path}/setup/payments`,target:"_blank",rel:"noopener noreferrer"},"add a Payment Gateway")," ","in your Raisely Dashboard"));const g=/MicroMessenger/i.test(navigator&&navigator.userAgent),b="ONCE"===m()(e,"values.interval")&&!e.formProps.onTokenSuccess&&!g,y=a.filter(({providerType:e})=>b||"PAYPAL"!==e),_=m()(n,"campaign.config.language.donating")?f()(n.campaign.config.language.donating):"Donating";return s.a.createElement(s.a.Fragment,null,y.length>1&&s.a.createElement("div",{className:"donation-form__payment-buttons"},y.map(({providerType:e})=>s.a.createElement(w.a,{key:e,size:"small",theme:"base",className:"donation-form__payment-buttons-btn donation-form__payment-buttons-btn--"+(e===c.providerType?"active":"inactive"),onClick:()=>t({method:Object(v.m)(e)})},f()(Object(v.m)(e))))),s.a.createElement(h.a,o()({},e,{setError:function(e){e.status>=400&&e.status<500&&p(u())},idempotencyKey:d,paymentIntervalLabel:A({donating:_},e.values),showWhenProcessing:t=>s.a.createElement("h3",{className:"donation-form__submitting"},s.a.createElement(E.a,null),s.a.createElement("span",{className:"donation-form__submitting-label"},_," ",Object(k.f)(t,e.targetCurrency))),currentProvider:c})))};class V extends s.a.Component{componentDidMount(){Object(v.r)(this.props)}render(){const{props:e}=this,{lastResult:t}=e;if("OK"!==t.status)return console.error("Success screen showing, but donation did not complete",t),s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},"An unknown error occurred"),s.a.createElement("p",null,"We could not process your donation due to an unknown error. Please contact support"));if(e.formProps.thankYou){const{thankYou:t}=e.formProps;return"function"==typeof t?t(e):t}const[a,n]=Object(v.d)(e,[e.formProps.thankYouTitle||"Thank You",e.formProps.thankYouMessage||"You've successfully made a donation of [donation.amount]!"]),o="special-inMemoriam"===e.global.campaign.theme?"Share this page with your friends and family:":"Now let's get the word out there:";return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},u()(x(a))),s.a.createElement("p",null,u()(x(n))),s.a.createElement("br",null),s.a.createElement("p",{className:"donation-form__social-copy"},o),s.a.createElement(T.a,{networks:"campaign",theme:"filled",size:"medium",url:e.formProps.customShareUrl||"current",global:e.global}))}}const $=e=>{const t=e.formProps.stripeStyles||{base:{"::placeholder":{color:"#d1d1d1"}}},a=Object(v.k)(e);return s.a.createElement("div",null,s.a.createElement(b.a,{label:"Payment details",classes:"form-field--stripe--1line"},s.a.createElement(g.CardElement,{id:"cardnumber",style:t})),!e.formProps.hideFee&&s.a.createElement(y.a,o()({},e,{feeAmount:a})),s.a.createElement("p",{className:"donation-form__currency-message"},A(e.languageConfig,e.values),k.c[e.targetCurrency].name))},q=Object(g.injectStripe)(e=>{const{global:t,values:a,updateValues:n,targetCurrency:r,availableProviders:i}=e,c=Object(v.k)(e),u=i.filter(({providerType:t})=>!("PAYPAL"===t&&"ONCE"!==m()(e,"values.interval"))),d=[...t.customFields.donation,{id:"payment",type:"custom",active:!0,label:"",render:a=>s.a.createElement(s.a.Fragment,null,s.a.createElement($,e),u.find(e=>"PAYPAL"===e.providerType)&&s.a.createElement("a",{href:"#",style:{marginTop:"1rem",display:"block"},onClick:async e=>{e.preventDefault();const o=await a.validateForm();Object.keys(o).length?t.customFields.donation.forEach(e=>{a.blur(e.id,!0)}):n({...a.values,method:"PAYPAL",includePaymentStep:!0},{nextStep:!0})}},"Prefer to pay with PayPal?"))}],[p,f]=Object(l.useState)(!1),[g,w]=Object(l.useState)(null),O=t=>{"string"==typeof t&&(t=new Error(t)),"ONCE"===e.values.interval?e.integrations.broadcast("donation.error",t):e.integrations.broadcast("subscription.error",t),w(t)},S=parseInt(e.values.amount,10)+(e.values.feeOptIn?parseInt(c,10):0),T="function"==typeof e.CustomAppendDonationForm?e.CustomAppendDonationForm:()=>null,N="function"==typeof e.CustomDonateButton?e.CustomDonateButton:b.b;return s.a.createElement(y.c,{isProcessing:p,showWhenProcessing:t=>s.a.createElement("h3",{className:"donation-form__submitting"},s.a.createElement(E.a,null),s.a.createElement("span",{className:"donation-form__submitting-label"},"Donating"," ",Object(k.f)(t,e.targetCurrency))),finalTotal:S},s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"donation-form__title"},"Your Details"),s.a.createElement(_.a,{global:t,values:a,fields:d,setError:O,handleCustomConditions:e=>Object(v.a)(e,r,t),action:(t,a)=>{n(t,{callback:t=>{Object(h.b)(e.stripe,{...e,values:t,setProcessing:f,setError:O})}})},buttons:({onSubmitClick:t})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(T,e),g&&s.a.createElement("p",{className:"donation-form__message donation-form__message--error"},g),s.a.createElement("div",{className:"donation-form__stripe-buttons"},s.a.createElement(N,o()({},e,{onClick:t,finalTotal:S}))))})))}),G=e=>{const{global:t}=e,a=Object(v.h)(e),n="LIVE"===t.campaign.mode,o=e.preferSCAMode;return s.a.createElement(g.StripeProvider,{apiKey:n?"pk_live_IuO9apxOM1AclLg9TOTxjUS0":"pk_test_F4jZ0EjLCG6xXvdpqjGyUiSv",stripeAccount:o?a.accountId:void 0},s.a.createElement(g.Elements,null,s.a.createElement(q,e)))}},125:function(e,t,a){"use strict";a(803);var n=a(0),o=a.n(n),r=a(157),i=a.n(r);t.a=({style:e,reverse:t=!1,longer:a=!1})=>{const n=a?384:256,r=o.a.createElement("rect",{x:"0",y:t?15:0,rx:"8",ry:"8",width:"96",height:"15"}),l=o.a.createElement("rect",{x:"0",y:t?0:25,rx:"5",ry:"5",width:n,height:"10"});return o.a.createElement(i.a,{speed:1,height:40,width:n,style:e},r,l)}},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(2),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(1),s=a.n(l),c=a(10),u=a(3),d=a(11),m=a(41);class p extends i.a.Component{constructor(...e){super(...e),o()(this,"state",{profile:null}),o()(this,"loadProfile",e=>{this.setState({profile:null}),c.a.profiles.get({id:e}).then(e=>{this.setState({profile:e.body().data().data})}).catch(e=>{})})}componentDidMount(){this.loadProfile(this.props.uuid)}componentWillReceiveProps(e){e.uuid!==this.props.uuid&&this.loadProfile(e.uuid)}render(){const{t:e,tF:t,tD:a}=Object(u.a)();return this.state.profile?i.a.createElement("div",{className:"profile-select__selected"},this.props.heading&&i.a.createElement("h5",null,a(this.props.heading)),i.a.createElement(m.a,{profile:this.state.profile,detail:"info",openNewTab:this.props.openNewTab}),i.a.createElement(d.a,{className:"profile-select__cancel",theme:"primary",onClick:this.props.cancel},t(this.props.buttonLabel,e("Choose Another Team")))):null}}p.propTypes={uuid:s.a.uuid,heading:s.a.any,cancel:s.a.func,buttonLabel:s.a.string,openNewTab:s.a.bool}},128:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(5);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(16),s=a(11),c=a(3),u=a(32),d=a.n(u),m=a(10);const p=(e,...t)=>new Promise(a=>e(...t,e=>{a(e)}));async function f(e,t,a,n){if("connected"!==e){if("unknown"===e)throw new Error("An unexpected error was returned by Facebook");return{}}const o=window.FB,r=t&&{access_token:t},i=await p(o.api,"/me?fields=email,first_name,last_name,name,picture.height(300),id","get",r||{});let l;if("signup"===a)try{var s,c;l=(null===(s=i.picture)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.url)&&await async function(e){const t=await(await fetch(e)).blob();if(!["image/png","image/jpeg"].includes(t.type))throw new Error("Could not load profile image due to incompatible type "+t.type);const a=["signup-image-",d()(),"image/png"===t.type?".png":".jpeg"].join(""),n=new FormData;n.append("photo",t,a);const o=[m.a.baseUrl,"/campaigns/",window.campaignData.uuid,"/media/","fb-signup-images"].join(""),r=await fetch(o,{method:"POST",body:n});return(await r.json()).data.url}(i.picture.data.url)}catch(e){console.error(e),console.error("Unable to upload photo")}return null==n||n.broadcast("facebookFundraiser.fbDetailsBuilt",{fbDetails:i}),{user:{photoUrl:l,firstName:i.first_name,preferredName:i.first_name,lastName:i.last_name,fullName:i.name,email:i.email,facebookId:i.id},accessToken:t||window.FB.getAccessToken()}}function g(e,t,a){var o,r,i;const{actions:l,integrations:s}=useRaisely(!0),{campaign:c,query:u}=useRaisely(),[d,g]=Object(n.useState)(!1),b=e.includes("manage_fundraisers"),h=null==c||null===(o=c.config)||void 0===o||null===(r=o.site)||void 0===r||null===(i=r.facebook)||void 0===i?void 0:i.appId;async function y(n){const o={scope:e.join(","),fallback_redirect_uri:window.location.origin+window.location.pathname};if(n&&(o.auth_type="rerequest"),!h)return alert("No Facebook app ID configured");const{status:r}=await((e,...t)=>new Promise(a=>e(e=>{a(e)},...t)))(window.FB.login,o),i=await f(r,null,t,s);a&&a({...i,scope:e})}return Object(n.useEffect)(()=>{u.code&&(g(!0),async function(n){try{const o=(await m.a.all("facebook-oauth").post({data:{code:n,campaignUuid:c.uuid,organisationUuid:c.organisationUuid,redirectUri:window.location.origin+window.location.pathname}})).body().data(),{access_token:r}=JSON.parse(o),[i,l]=await Promise.all([f("connected",r,t,s),p(window.FB.api,"/me/permissions","get",{access_token:r})]);if(b&&!l.data.some(e=>"manage_fundraisers"===e.permission&&"granted"===e.status))throw new Error("In order to manage Facebook fundraising, the Manage Fundraisers permission is required but was not provided");a&&a({...i,scope:e})}catch(e){console.error(e),window.raiselyReportError(e,{isCriticalComponent:!0}),l.addErrorMessage(e),g(!1)}}(u.code))},[u.code]),[async function(){const n=window.FB;if(!n)return alert("Your browser is blocking Facebook. Please disable adblockers to continue.");null==s||s.broadcast("facebookFundraiser.signupInitiated",{isFacebookFundraiser:b});try{if(b)return await y(!0);const o=await p(n.getLoginStatus);if("connected"!==o.status)return await y();const r=await f(o.status,null,t,s);a&&a({...r,scope:e})}catch(e){console.error(e),window.raiselyReportError(e,{isCriticalComponent:!0}),l.addErrorMessage(e),g(!1)}},d]}function b({onAuth:e,scope:t=[],intent:a,buttonText:n}){const{t:r}=Object(c.d)(),{query:i}=useRaisely(),u=!Array.isArray(t)||!t.length?["public_profile","email"]:t,[d,m]=g(u,a,e),p=n||r("Continue with Facebook");return o.a.createElement("div",{className:"facebook-connect-button"},o.a.createElement(s.a,{theme:"facebook",className:"facebook-connect-button__button",isLoading:m,onClick:e=>{e.preventDefault(),d()}},i.code?o.a.createElement(l.a,{name:"check_circle",theme:"inverted"}):o.a.createElement(l.a,{name:"facebook_rounded",theme:"inverted"})," ",p))}b.propTypes={onAuth:i.a.func,scope:i.a.array,intent:i.a.string,buttonText:i.a.string}},132:function(e,t,a){"use strict";function n(e,t){var a,n,o,r,i,l,s,c,u,d;if(e)switch(e){case"always":return!0;case"logged-in":if(null==t||null===(a=t.user)||void 0===a||!a.uuid)return null;break;case"logged-out":if(null!=t&&null!==(n=t.user)&&void 0!==n&&n.uuid)return null;break;case"has-profile":if(null==t||null===(o=t.user)||void 0===o||!o.profile||"INDIVIDUAL"!==(null==t||null===(r=t.user)||void 0===r?void 0:r.profile.type))return null;break;case"no-profile":if(null!=t&&null!==(i=t.user)&&void 0!==i&&i.profile&&"INDIVIDUAL"===(null==t||null===(l=t.user)||void 0===l?void 0:l.profile.type))return null;break;case"has-team":if(null==t||null===(s=t.user)||void 0===s||!s.teamProfile)return null;break;case"no-team":if(null!=t&&null!==(c=t.user)&&void 0!==c&&c.teamProfile)return null;break;case"has-organisation":if(null==t||null===(u=t.user)||void 0===u||!u.organisationProfile)return null;break;case"no-organisation":if(null!=t&&null!==(d=t.user)&&void 0!==d&&d.organisationProfile)return null}return!0}a.d(t,"a",(function(){return n}))},142:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return $})),a.d(t,"a",(function(){return q})),a.d(t,"c",(function(){return G}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(27),a(39),a(0)),s=a.n(l),c=a(3),u=a(23),d=a.n(u),m=a(7),p=a.n(m),f=a(44),g=a.n(f),b=a(50),h=a.n(b),y=a(131),v=a.n(y),_=a(662),E=a(206),k=a(22),w=a(165),O=a(78),S=a(11),T=a(16),N=a(57),C=a(9),x=a(127),j=a(156),P=a(8),A=a(6),D=a(48),R=a(20),F=a(75),I=a(327),M=a(167),L=a(169),B=a(111),U=a(209),H=a(112);class V extends s.a.Component{constructor(e){super(e),i()(this,"setChallengerType",e=>{this.setState({challengerType:this.state.challengerType!==e&&e}),setTimeout(()=>{this.profileOptionsRef.current&&this.profileOptionsRef.current.scrollIntoView({behavior:"smooth"})},10),"join"===e&&this.props.updateValues({profile:{...this._formikValues||{},type:A.h.individual,team:null},settings:{searchGroup:!0,createTeam:!1}}),"team"===e&&this.props.updateValues({profile:{...this._formikValues||{},type:A.h.individual,teamProfile:{type:A.h.group}},settings:{searchGroup:!1,createTeam:!0}})}),i()(this,"action",async e=>{const{updateStep:t,step:a,sendProfileFormEvents:n}=this.props;let{teamProfile:o,...r}=e;"join"!==this.state.challengerType&&(r.parentUuid=null),"team"!==this.state.challengerType&&(o=null),this.props.updateValues({error:null,profile:r,teamProfile:o},()=>{t(a+1),n()},"team"!==this.state.challengerType?["teamProfile"]:null)}),i()(this,"back",e=>{e.preventDefault();const{step:t}=this.props;this.props.updateStep(t-1)}),this.profileOptionsRef=Object(l.createRef)(),this.state={challengerType:this.props.values.profile.parentUuid?"join":!!this.props.values.teamProfile&&"team"}}componentDidMount(){const{values:t,fields:a}=this.props,{teamProfile:n,profile:o}=this.props.values;if(this.props.updateValues({profile:{...o,teamProfile:n}}),!this.props.avoidDefaultNames&&!t.profile.name&&a.length>0){const n=a.find(e=>"name"===e.id),o=n&&n.default&&n.default.length>0&&Object(P.r)(n.default,e)||Object(L.a)(t.user);this.props.updateValues({profile:{name:o}})}}render(){const{t:e}=Object(c.d)(),{updateValues:t,global:a,values:n,api:o,enableTeams:r,teamLanguage:i,completeButton:u="Complete",profileTitle:d,joinButtonTitle:m,joinButtonDescription:f,teamButtonTitle:b,teamButtonDescription:h,showTitleIcons:y,fields:v,teamFields:E,avoidDefaultNames:w,alphabeticalProfileSearch:O,...N}=this.props,{profiles:D}=a.campaign.config,R=i||Object(A.c)(A.h.group,D,!1,!1),F=Object(A.d)(A.h.group,D),I=this.props.profileLanguage||"Profile",M=({onSubmitClick:t,isSubmitting:a})=>s.a.createElement(l.Fragment,null,s.a.createElement(S.a,{className:"signup-form__profile--next button--full in-form--next",onClick:t,type:"submit"},N.showTransitionBar&&s.a.createElement(k.d,{isTransitioning:a}),N.enableRego||N.enableDonation?e("Continue"):u),s.a.createElement("br",null),s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back in-form--back",onClick:this.back},s.a.createElement(T.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,e("Back")))),B=({fields:e,teamFields:i})=>{if(!e||!e.length)return null;const l=e=>{const t=e.map(e=>({...e,id:"teamProfile."+e.id,label:e.label.includes(I)&&!e.label.includes(R)?e.label.replace(I,R):e.label})),a=t.find(e=>"teamProfile.name"===e.id),o=t.find(e=>"teamProfile.path"===e.id);if(a&&!a.value&&!w){let e=Object(L.a)(n.user);e=e.endsWith("s")?e+"'":e+"'s",Object.assign(a,{default:`${e} ${R}`})}const r=t.find(e=>"teamProfile.currency"===e.id);return r&&Object.assign(r,{default:n.profile.currency}),o&&(Object.assign(o,{default:Object(_.b)(a.default),compareDuplicate:"path"}),o.config&&"streamline"===o.config.pathFormat&&Object.assign(o,{config:{pathFormat:"streamline",pathHelper:o.config.pathHelper&&o.config.pathHelper.replace(I,R+"'s")||`Your ${R}'s page will be live at`}})),t};return s.a.createElement(C.a,{values:n.profile,onChange:(...e)=>(this._formikValues=e[0],Object(P.o)(...e)),handleCustomConditions:({field:e,condition:t,test:a,values:n})=>{if(e.id.startsWith("teamProfile")){let e=p()(n,"teamProfile."+t.field);return"string"==typeof e?e=e.toLowerCase():"boolean"==typeof e&&(e=e.toString()),a(e,t)}},global:a,fields:r?(()=>{e.map(e=>{var t;return"goal"===e.id&&e.core&&null!==(t=e.options)&&void 0!==t&&t.minimumValue&&(e.validateFunction=(t,n,o)=>{var r;return Object(A.j)(t,null===(r=e.options)||void 0===r?void 0:r.minimumValue,a.campaign.currency,o)}),e});const r={active:!0,id:"type",type:"custom",render:e=>s.a.createElement("div",{className:"signup-form__profile-type"},s.a.createElement("div",{className:"signup-form__profile-options",ref:this.profileOptionsRef},s.a.createElement(S.a,{className:`\n\t\t\t\t\t\t\t\t\t\tbutton--primary\n\t\t\t\t\t\t\t\t\t\tsignup-form__profile-options__button\n\t\t\t\t\t\t\t\t\t\tsignup-form__profile-options__button--${"join"===this.state.challengerType?"active":"inactive"}\n\t\t\t\t\t\t\t\t\t`,type:"button",onClick:()=>this.setChallengerType("join")},y&&s.a.createElement("i",{className:"material-icons signup-form__profile-options__button__icon"},"group"),s.a.createElement("span",{className:"signup-form__button__title"},m||"Join "+F),f&&f.length>0&&s.a.createElement("span",{className:"signup-form__button__description"},f)),s.a.createElement(S.a,{className:`\n\t\t\t\t\t\t\t\t\t\tbutton--primary\n\t\t\t\t\t\t\t\t\t\tsignup-form__profile-options__button\n\t\t\t\t\t\t\t\t\t\tsignup-form__profile-options__button--${"team"===this.state.challengerType?"active":"inactive"}\n\t\t\t\t\t\t\t\t\t`,type:"button",onClick:()=>this.setChallengerType("team")},y&&s.a.createElement("i",{className:"material-icons signup-form__profile-options__button__icon"},"group_add"),s.a.createElement("span",{className:"signup-form__button__title"},b||"Start "+F),h&&h.length>0&&s.a.createElement("span",{className:"signup-form__button__description"},h))))},c=[{type:"custom",active:!0,id:"profile.parentUuid",validate:(e,t,a,n)=>{a.parentUuid||(g()(n,e)||(n[e]=[]),n[e].push("You need to choose "+F))},render:e=>s.a.createElement("div",{className:"signup-form__profile-select"},n.profile.parentUuid?s.a.createElement(x.a,{api:o,heading:"You are joining:",uuid:n.profile.parentUuid,cancel:()=>t({profile:{parentUuid:null}})}):s.a.createElement(j.a,{api:o,global:a,teamLanguage:R,errors:e.errors,touched:e.touched,customFilter:(e,t)=>!(a.campaign.config.maximumTeamSize&&a.campaign.config.maximumTeamSize<=e.value.memberCount),onBlur:t=>e.blur(e.id,!0,t),label:`Search for ${F}${m?"":" to join"}`,placeholder:`Enter the ${R}'s name`,alphabeticalProfileSearch:O,update:e=>t({profile:{parentUuid:e}}),autofocus:!0}))}];return[...e,r,..."team"===this.state.challengerType?l(i):[],..."join"===this.state.challengerType?c:[]]})():e,action:this.action,buttons:M,className:"signup-form",focusFirst:!0})};return s.a.createElement("div",{className:"signup-form__field-container signup-form__profile"},s.a.createElement("h3",{className:"signup-form__title "+(y?"signup-form__title--has-icon":"")},y&&s.a.createElement("i",{className:"material-icons signup-form__icon"},"person"),d),s.a.createElement(B,{fields:v,teamFields:E}))}}function $(e){var t,a,n;const r=Object(N.b)("profile",e.fields);let i=Object(N.b)("teamProfile",e.fields);null!==(t=i)&&void 0!==t&&t.length||(i=r);const{global:c}=e,u=(null===(a=c.campaign.config)||void 0===a||null===(n=a.fundraiserThemes)||void 0===n?void 0:n.length)>0,d=Object(l.useMemo)(()=>u?r.filter(e=>"fundraiserTheme"!==e.id):r,[r,u]),m=Object(l.useMemo)(()=>u?i.filter(e=>"fundraiserTheme"!==e.id):i,[i,u]),[p]=Object(F.a)({form:"signup",stage:"profile",data:{isDisabled:e.disableAnalytics}});return s.a.createElement(V,o()({},e,{fields:d,teamFields:m,sendProfileFormEvents:p}))}class q extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{loading:!1}),i()(this,"next",()=>this.props.updateStep(this.props.step+1)),i()(this,"back",()=>this.props.updateStep(this.props.step-1)),i()(this,"submit",async({data:e,processSCADonation:t})=>{const a=[];if(this.props.enableRego){const{amount:t}=this.getRegistrationAmount(),{registrationTaxRate:n}=this.props;if(t&&a.push({amount:t,type:"REGISTRATION",includeInTotals:!1,description:"Registration Fee",taxRate:n}),this.props.enableDonation){const n=e.amount-t;n&&a.push({amount:n,type:"DONATION",includeInTotals:!0,description:"Self-donation"})}}else this.props.enableDonation&&e.amount&&a.push({amount:e.amount,type:"DONATION",includeInTotals:!0,description:"Self-donation"});if(Object.assign(e,{items:[...e.items||[],...a]}),t){this.setState({loading:!0});const a={...e,...h()(this.props.values.user,["firstName","lastName","preferredName","fullName","email"]),forRegistration:this.props.values.profile.path||"_NO_PATH_SET"};Object(w.b)(this.props.global.campaign)&&(a.profile=Object(O.c)(this.props.global.campaign,{profile:this.props.values.profile,teamProfile:this.props.values.teamProfile}));const{api:n}=this.props;try{await Object(M.a)({api:n,campaignUuid:this.props.global.campaign.uuid,name:this.props.values.profile.name,path:this.props.values.profile.path});const e=new D.a("donation",this.props.global.campaign),o=await e.awaitSolution();o&&e.reset();const r=(await n.donations.create({data:a,challengeSolution:o})).body().data(),i=await t(r);if(null!=i&&i.error)return this.props.updateValues({error:{message:i.error.message},loginToken:r.token},null,["donation"]),void this.props.integrations.broadcast("donation.error",i.error);this.props.updateValues({donation:{uuid:r.data.uuid},loginToken:r.token},this.next)}finally{this.setState({loading:!1})}}else this.props.updateValues({donation:e},this.next)}),i()(this,"getRegistrationAmount",()=>{const{registrationAmount:e,registrationAmountField:t,global:a}=this.props;let n=e,o="Registration fee total";if(t){const e=p()(this.props.values,t);n=e?Object(P.a)(e.split(":")[0],a.campaign.currency):n,o=e&&e.split(":")[1]?e.split(":")[1]:o}return{amount:n,description:o}}),i()(this,"customPaymentButton",e=>s.a.createElement(I.a,o()({},e,{loading:this.state.loading,error:this.props.values.error,updateValues:this.props.updateValues})))}render(){const{enableRego:e,completeButton:t,paymentDonationTitle:a,paymentRegistrationTitle:n,global:r}=this.props,{t:i}=Object(c.a)(),{loading:u}=this.state,d=this.props.global.campaign.providers.find(e=>"PAYPAL"!==e.providerType);if(e){d||this.props.updateValues({error:{message:"This campaign needs to have a Stripe account connected to complete registration."}},this.props.back);const{amount:e,description:t}=this.getRegistrationAmount();return s.a.createElement(l.Fragment,null,u&&s.a.createElement("div",{className:"signup-form__loading"},s.a.createElement(C.d,null),s.a.createElement("p",null,i("One moment..."))),s.a.createElement("div",{className:"signup-form__payment signup-form__payment--registration",style:{display:u?"none":"block"}},n&&s.a.createElement("h3",{className:"signup-form__title"},n),s.a.createElement("div",{className:"signup-form__payment-total"},s.a.createElement("span",{className:"signup-form__payment-total__label"},t),s.a.createElement("span",{className:"signup-form__payment-total__amount"},Object(P.f)(e,r.campaign.currency,{displayCurrencyCodeSuffix:!0}))),e&&"0"!==e?s.a.createElement(w.a,o()({},this.props,{perks:!1,recurring:!1,existingCards:!1,user:this.props.values.user,onTokenSuccess:this.submit,amount:e&&Number(e),registrationAmount:e&&Number(e),CustomDonateButton:this.customPaymentButton,appendToForm:()=>s.a.createElement(l.Fragment,null,s.a.createElement("div",{className:"signup-form__navigation"},s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},s.a.createElement(T.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,i("Back")))))})):s.a.createElement("div",{className:"signup-form__navigation"},s.a.createElement(S.a,{className:"signup-form__profile--next",onClick:this.next},i("Continue")),s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},s.a.createElement(T.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,i("Back"))))))}return d||this.props.updateValues({},this.props.next),s.a.createElement("div",{className:"signup-form__payment signup-form__payment--donation"},a&&s.a.createElement("h3",{className:"signup-form__title"},a),s.a.createElement(w.a,o()({},this.props,{perks:!1,recurring:!1,existingCards:!1,user:this.props.values.user,onTokenSuccess:this.submit,CustomDonateButton:this.customPaymentButton,appendToForm:e=>s.a.createElement("div",{className:"signup-form__navigation"},(!e||0===e)&&s.a.createElement(l.Fragment,null,s.a.createElement(S.a,{className:"signup-form__skip-payment signup-form__navigation__button--next",theme:"primary",onClick:this.next,type:"submit"},t),s.a.createElement("br",null)),s.a.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},s.a.createElement(T.a,{name:"chevron_left",size:"small"}),s.a.createElement("span",null,i("Back"))),e>0&&s.a.createElement(l.Fragment,null," - ",s.a.createElement("button",{className:"signup-form__navigation__link signup-form__skip",onClick:this.next},s.a.createElement("span",null,"Skip and continue to your dashboard"),s.a.createElement(T.a,{name:"chevron_right",size:"small"}))))})))}}class G extends l.Component{constructor(e){super(e),i()(this,"initChallenge",()=>{this.friendlyChallenge=new D.a("signupForm",this.props.global.campaign),this.friendlyChallenge.start(),this.friendlyChallenge.getPromise().catch(this.friendlyChallengeError)}),i()(this,"friendlyChallengeError",()=>{this.setState({error:"There is a problem loading payment processing. Please contact Raisely support"})}),i()(this,"updateValues",(e,t,a)=>{if("function"==typeof e)return this.setState(e,t);const{state:n}=this,o={};return["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken","disableBack"].forEach(t=>{e[t]&&(o[t]={...n[t],...e[t]},"object"!=typeof e[t]&&(o[t]=e[t]))}),(a||[]).forEach(e=>o[e]=null),this.setState(o,t)});const t={currency:e.global.campaign.currency,type:A.h.individual},{defaultValue:a,fieldName:n}=Object(R.e)(e.global.campaign.config);n&&(t[n]=a);const{multiplier:o}=Object(R.f)(e.global.campaign.config),r=window.location.href.split("?")[1],l=r?d.a.parse(r):{};l.exerciseGoal&&(t.exerciseGoal=l.exerciseGoal*o,t.exerciseGoalTime=l.exerciseGoal*o),l.exerciseGoalTime&&(t.exerciseGoal=l.exerciseGoalTime*o,t.exerciseGoalTime=l.exerciseGoalTime*o),this.state={user:{},profile:t,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:!1,feeFixed:50,feePercent:.045},error:null},l.parentId&&this.fetchTeam(l.parentId)}componentWillUnmount(){this.destroyChallenge()}destroyChallenge(){this.friendlyChallenge&&(this.friendlyChallenge.destroy(),this.friendlyChallenge=null)}async fetchTeam(e){const t=(await this.props.api.profiles.get({id:e})).body().data().data;this.setState({profile:{...this.state.profile,parentUuid:t.uuid},parentProfile:t})}render(){const{props:e}=this,t=[];return e.enableExerciseGoal&&t.push(H.a),t.push(B.a),t.push($),(e.enableRego||e.enableDonation)&&t.push(q),t.push(U.a),s.a.createElement(E.a,o()({name:"signup-form",variant:"signup-form--v2",promptOnLeave:!e.disablePrompt&&"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},e,{values:this.state,updateValues:this.updateValues,steps:t,error:this.state.error,onNavigate:e=>(this.props.integrations.broadcast("signup.stage",{stage:e,user:v()(this.state.user,["password"]),profile:this.state.profile,donation:this.state.donation}),e>0&&!this.friendlyChallenge&&this.initChallenge(),e),disableAnalytics:!0}))}}}).call(this,a(106))},143:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r}));var n=a(26);const o={ONCE:"One-time",WEEK:"Weekly","2WEEK":"Fortnightly","4WEEK":"4 Weeks","3MONTH":"Quarterly",MONTH:"Monthly",YEAR:"Yearly"},r=(e,t)=>{let a=o[Object(n.p)(e)];return"One-time"===a?t||"":("4 Weeks"===a&&(a="every "+a),`${a&&a.toLowerCase()+" "}${t||""}`)}},145:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(64),o=a(0),r=a(14),i=a(320);function l(){const{send:e}=Object(n.b)(i.a),t=useRaisely().campaign.currency;return Object(o.useCallback)((a,n)=>null==e?void 0:e({state:"open",props:{...a,amount:a.currency!==t?Object(r.b)(a.amount,a.currency,t):a.amount,initialState:{inModal:!0,isModalPreview:a.isModalPreview,initialStep:n,interval:a.interval,count:a.count,step:n}}}),[t,e])}},146:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return y}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(27),a(5),a(386),a(0)),s=a.n(l),c=a(3),u=a(60),d=a.n(u),m=a(7),p=a.n(m),f=a(330),g=a(132);function b(e,t){return"string"!=typeof e?e:t(e)}function h(e,t=null){const a=e.data.get("editable");if(!a)return{};const n=t?function(e,t){const{props:a}=t.editor;return Object(f.a)(e,a.dynamicImageFields,{campaign:a.campaign})}(a,t):a,o=Object(c.a)().tD;return Object.assign({},...Object.keys(n).map(e=>({[e]:b(n[e].value,o)})))}class y extends l.Component{constructor(...e){super(...e),i()(this,"state",{didCrash:!1}),i()(this,"hasDisabledCover",()=>{var e,t;return!!["RaiselyFlipCard"].includes(null===(e=this.props)||void 0===e||null===(t=e.node)||void 0===t?void 0:t.data.get("customComponent"))||("boolean"==typeof this.disableCover?this.disableCover:"function"==typeof this.disableCover&&this.disableCover(h(this.props.node)))}),i()(this,"renderBlock",e=>{var t,a,n,r;const{props:i}=this,l=(e=>{var t;let a="raisely-blockwrapper";return e.type&&(a+=" raisely-blockwrapper--"+d()(e.type)),null!==(t=e.data)&&void 0!==t&&t.get("customComponent")&&(a+=" raisely-blockwrapper--"+d()(e.data.get("customComponent").replace("Raisely",""))),a})(i.node),c=Object(g.a)(null===(t=i.node)||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.editable)||void 0===n||null===(r=n.visibility)||void 0===r?void 0:r.value,i.global);if(!i.editor&&!c)return null;if(this.state.didCrash)return s.a.createElement("div",{style:i.style,className:`${l} ${i.className||""}`},s.a.createElement("div",{className:"raisely-blockwrapper__failure"},"There was an error loading this block."));const u=s.a.createElement(e,o()({},i,{getValues:()=>h(i.node,i.editor&&i)}));if(i.disableBlockWrapperBoundary)return u;const m={className:`${l} ${i.className||""}`,id:p()(i.node,"data.editable.anchor.value",null),"data-editor-key":i["data-key"]};return i.readOnly?s.a.createElement("div",o()({style:i.style},m),u):s.a.createElement("div",o()({},m,i.attributes,{spellCheck:"false"}),u,!this.hasDisabledCover()&&s.a.createElement("div",{className:"raisely-cover"}),i.children)})}componentDidCatch(e){this.setState({didCrash:!0}),console.error("Raisely Block Failure:",this.props.node.toJSON(),e)}}},147:function(e,t,a){"use strict";a.d(t,"b",(function(){return Z})),a.d(t,"a",(function(){return K}));a(5);var n=a(0),o=a.n(n),r=a(18),i=a(54),l=a(3),s=a(220),c=a(17),u=a(319),d=a(69);function m(){const{values:e,updateValues:t,availableFrequencies:a}=Object(c.b)();return 1===a.length?null:o.a.createElement("div",{className:"donation-form__amount-type"},a.map(a=>o.a.createElement("button",{key:a.interval+a.count,className:Object(r.a)("donation-form__amount-type-btn",e.interval===a.interval&&e.count===a.count?"donation-form__amount-type-btn--active":"donation-form__amount-type-btn--inactive"),onClick:()=>t(e=>e.set("interval",a.interval).set("count",a.count).set("regularIntervalToggled","ONCE"!==a.interval))},a.frequencyLabel)))}var p=a(224),f=a(225),g=a(226),b=a(227),h=a(168),y=a(186),v=a(257),_=a(187),E=a(7),k=a.n(E),w=a(10),O=a(38),S=a(45),T=a(178);function N({closeModal:e,title:t,message:a,customShareUrl:i,amountIncludesFee:s=!1}){const{t:u,tF:m}=Object(l.d)(),{integrations:p,global:f}=useRaisely(!0),{values:g}=Object(c.b)(),{tempToken:b,result:h,anonymous:y}=g,v=h.preferredName||h.firstName,_=k()(f.customFields.donation.find(e=>!0===e.core&&"message"===e.id),"label",u("Leave a message")),E=Object(d.a)(m(t,u("Thank you for donating [donation.amount]")),s),N=Object(d.a)(m(a,u("Thank you so much [[parsedDonorName]] for helping our fundraiser.",{parsedDonorName:v})),s),[C,x]=Object(n.useState)(!1),[j,P]=Object(n.useState)(!1),[A,D]=Object(n.useState)(),[R,F]=Object(n.useState)(v),I=(e,t)=>{e.preventDefault();const a={preferredName:R,firstName:R};"message"===t&&(a.message=A),(async(e,t)=>{x(t);const a=await w.a.donations.update({id:h.uuid,data:{data:e},headers:{Authorization:"Bearer "+b}});p.broadcast("donation.updated",{formUuid:g.formUuid,amount:g.amount,currency:g.currency,updatedKey:t}),x(!1),a&&e.message&&P(!0)})(a,t)},M=k()(f.campaign.config.donation,"thankYouConfetti",!1);return o.a.createElement(n.Fragment,null,o.a.createElement(O.a,{automatic:!0,onClose:e,dockToBottom:!0,modalCelebration:M,button:!1,modalContent:()=>o.a.createElement("div",{className:Object(r.a)("donation-form__post-donate")},o.a.createElement("h3",{className:Object(r.a)("donation-form__post-donate__heading")},E),o.a.createElement("p",{className:Object(r.a)("donation-form__post-donate__lead")},N),o.a.createElement("hr",{className:"donation-form__post-donate__break"}),o.a.createElement("h6",{className:Object(r.a)("donation-form__post-donate__subheading")},u("Let's get the word out there!")),o.a.createElement(S.a,{networks:"campaign",theme:"filled",size:"large",url:i||"current",global:f}),b&&o.a.createElement(n.Fragment,null,o.a.createElement("hr",{className:"donation-form__post-donate__break"}),o.a.createElement("div",{className:"donation-form__post-donate__two-columns"},o.a.createElement("div",{className:"donation-form__post-donate__two-columns__column"},o.a.createElement("h6",{className:Object(r.a)("donation-form__post-donate__subheading")},_),o.a.createElement(T.a,{name:"message",placeholder:u("Write a short message..."),type:"text",formClassName:Object(r.a)("donation-form__post-donate__message-container"),onSubmit:e=>I(e,"message"),value:A,onChange:D,loading:"message"===C,completed:j,disabled:j,buttonLabel:j?"Sent":"Send",buttonTitle:"Send message"})),!y&&o.a.createElement(n.Fragment,null,o.a.createElement("hr",{className:"donation-form__post-donate__break"}),o.a.createElement("div",{className:"donation-form__post-donate__two-columns__column"},o.a.createElement("h6",{className:Object(r.a)("donation-form__post-donate__subheading")},u("How your name will appear")),o.a.createElement(T.a,{name:"updateName",type:"text",formClassName:Object(r.a)("donation-form__post-donate__message-container"),onSubmit:e=>I(e,"updateName"),value:R||v,initialValue:v,onChange:F,loading:"updateName"===C,buttonLabel:u("Update"),buttonTitle:u("Update your name")}))))))}))}function C({customRender:e,title:t="Thank You",message:a="You've successfully made a donation of [donation.amount]!",customShareUrl:n,amountIncludesFee:r=!1}){const{t:i}=Object(l.d)(),s=useRaisely(),c=Object(d.a)(t,r),u=Object(d.a)(a,r);return e?e({title:c,titleProp:t,message:u,messageProp:a}):o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"donation-form__title"},c),o.a.createElement("p",null,u),o.a.createElement("br",null),o.a.createElement("p",{className:"donation-form__social-copy"},i("Now let's get the word out there:")),o.a.createElement(S.a,{networks:"campaign",theme:"filled",size:"medium",url:n||"current",global:s}))}var x=a(4),j=a.n(x),P=(a(27),a(63),a(28)),A=a(8),D=a(143),R=a(46),F=a.n(R),I=a(94);function M(e){const{disablePayment:t,isPaymentGatewayProcessing:a,values:n,error:r}=Object(c.b)(),{cardFormValidationErrors:i}=Object(I.c)(),l=a||i[0]||t||n.disableSPEPayment||"raiselyConfirm"===(null==r?void 0:r.cause),s="function"==typeof e.CustomDonateButton?e.CustomDonateButton:L;return o.a.createElement(s,j()({},e,{disabled:l,isProcessing:a}))}function L({paymentButton:e,disabled:t,isProcessing:a}){const{t:n,tF:r}=Object(l.d)(),{calculatedTotal:i,values:s}=Object(c.b)(),{campaign:u}=useRaisely(),d=r("string"==typeof e&&e,F()(u.config.language.donate)||n("Donate")),m=n("Loading..."),p="function"==typeof e?e(Object(A.f)(i,s.currency),s):(e=>e.includes("{amount}")?e.replace("{amount}",Object(A.f)(i,s.currency)):`${e} ${Object(A.f)(i,s.currency)} ${Object(D.a)(s)}`.trim())(d);return o.a.createElement("div",{className:"donation-form__stripe-buttons"},o.a.createElement(P.Button,{disabled:t,type:"submit",className:"donation-form__submit-button"},a?m:p))}function B({stepCount:e}){const{values:t,updateStep:a,isPaymentGatewayProcessing:n}=Object(c.b)(),i=Array(e).fill(),l=n||t.result;return o.a.createElement("div",{className:Object(r.a)("donation-form__stages","donation-form__stages--total-"+i.length)},i.map((e,n)=>o.a.createElement("div",{role:"button",tabIndex:"0","data-step-index":n,key:n,className:Object(r.a)("donation-form__stage","donation-form__stage--"+n,n===t.step&&"donation-form__stage--active",n<t.step&&"donation-form__stage--previous"),onClick:e=>{e.preventDefault(),a(n)},disabled:n>=t.step||l},n+1)))}var U=a(228),H=a(78),V=a(64),$=a(262),q=a(321),G=a(322),z=a(95),Y=a(229),W=a(230);const Z=e=>({renderStep:e.renderStep,className:e.className,mainHeading:e.mainHeading,detailsHeading:e.detailsHeading,paymentsHeading:e.paymentsHeading,giftAid:e.giftAid,giftAidFields:e.giftAidFields,thankYouTitle:e.thankYouTitle,thankYouMessage:e.thankYouMessage,customShareUrl:e.customShareUrl,currencySelection:e.currencySelection,customAmountPlaceholder:e.customAmountPlaceholder,disableThankYouModal:e.disableThankYouModal,defaultDonationAmount:e.defaultDonationAmount,amount:e.amount,startOnAmountScreen:e.startOnAmountScreen,minAmount:e.minAmount,items:e.items,profileUuid:e.profileUuid,currency:e.currency,registrationProfile:e.registrationProfile,user:e.user,initialState:e.initialState,onStepChange:e.onStepChange,onSuccess:e.onSuccess,onFailure:e.onFailure,onTokenSuccess:e.onTokenSuccess,paymentButton:e.paymentButton,CustomDonateButton:e.CustomDonateButton,recurring:e.recurring,additionalAmount:e.additionalAmount,autoconfigure:e.autoconfigure,additionalClassname:e.additionalClassname,hideFee:e.hideFee,disableAnalytics:e.disableAnalytics,enableModal:e.enableModal,version:e.version});function K({renderStep:e,className:t,mainHeading:a,detailsHeading:l,paymentsHeading:E,currencySelection:k,customAmountPlaceholder:w,giftAidFields:O,thankYouTitle:S,thankYouMessage:T,customShareUrl:x,giftAid:j,recurring:P=!0,disableThankYouModal:A,amount:D,minAmount:R,items:F,profileUuid:L,currency:$,defaultDonationAmount:q,user:G,registrationProfile:Z,startOnAmountScreen:K,initialState:Q,onStepChange:X,onSuccess:ee,onFailure:te,paymentButton:ae,CustomDonateButton:ne,onTokenSuccess:oe,additionalAmount:re,additionalClassname:ie,hideFee:le,disableAnalytics:se,version:ce,...ue}){var de,me,pe,fe,ge,be,he;const ye=Object(n.useRef)(null),{integrations:ve,global:_e}=useRaisely(!0),Ee=Object(n.useRef)(0);Z||(Z=Object(H.c)(_e.campaign,ue.values));const ke=Object(s.b)({amount:D,items:F,currency:$,user:G,registrationProfile:Z,startOnAmountScreen:K,giftAidEnabled:j,...Q||{}},{defaultDonationAmount:q,minAmount:R,profileUuid:L,onTokenSuccess:oe,additionalAmount:re,hideFee:le,disableAnalytics:se,version:ce});Object(n.useEffect)(()=>{const e=ke.values.step;X&&Ee.current!==e&&X(e,ye.current),Ee.current=e},[ke.values.step]),Object(n.useEffect)(()=>{var e,t,a,n,o,r,i,l;se||ve.broadcast("donation.stage",{stage:ke.values.step,values:ke.values,profile:null==_e||null===(e=_e.current)||void 0===e?void 0:e.profile,formUuid:ke.values.formUuid,availableAmounts:ke.availableAmounts,availableFrequencies:ke.availableFrequencies,campaignCurrency:_e.campaign.currency,isDefaultDonationAmountEnabled:ke.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(_e.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:Boolean(!_e.campaign.showRaiselyCheckbox)&&Boolean(null===(t=_e.campaign.config)||void 0===t||null===(a=t.fees)||void 0===a?void 0:a.custom)&&Boolean(null===(n=_e.campaign.config)||void 0===n||null===(o=n.fees)||void 0===o?void 0:o.optInOnly),formSteps:ke.steps,targetProfileUuid:ke.targetProfileUuid,isPaymentDisabled:ke.disablePayment,isExpress:Boolean(null===(r=_e.campaign.config.donation)||void 0===r?void 0:r.express),isGiftAidEnabled:ke.values.giftAidEnabled,donationCustomFields:null===(i=_e.campaign.config)||void 0===i||null===(l=i.customFields)||void 0===l?void 0:l.donation,stageName:ke.steps[ke.values.step],selectedAmount:ke.values.amount,selectedCurrency:ke.values.currency,selectedInterval:ke.values.interval,isFeeOptInChecked:ke.values.feeOptIn,presentedOptInAmount:ke.optInAmount,isDonationFormV3:!1})},[ve,ke.values.step,se,ke.availableFrequencies]),Object(n.useEffect)(()=>{var e,t,a,n,o,r,i,l;se||_e.userAuthAttempted&&ve.broadcast("donation.formLoaded",{profile:null===(e=_e.current)||void 0===e?void 0:e.profile,formUuid:ke.values.formUuid,availableAmounts:ke.availableAmounts,availableFrequencies:ke.availableFrequencies,campaignCurrency:_e.campaign.currency,selectedAmount:ke.values.amount,selectedCurrency:ke.values.currency,selectedInterval:ke.values.interval,isDefaultDonationAmountEnabled:ke.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(_e.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(_e.campaign.showRaiselyCheckbox)&&Boolean(null===(t=_e.campaign.config)||void 0===t||null===(a=t.fees)||void 0===a?void 0:a.custom)&&Boolean(null===(n=_e.campaign.config)||void 0===n||null===(o=n.fees)||void 0===o?void 0:o.optInOnly),formSteps:ke.steps,targetProfileUuid:ke.targetProfileUuid,isExpress:Boolean(null===(r=_e.campaign.config.donation)||void 0===r?void 0:r.express),isGiftAidEnabled:ke.values.giftAidEnabled,donationCustomFields:null===(i=_e.campaign.config)||void 0===i||null===(l=i.customFields)||void 0===l?void 0:l.donation,isDonationFormV3:!1})},[ve,_e.userAuthAttempted,ke.values.formUuid,se]);const{send:we}=Object(V.b)("raisely-donationform-amount");Object(n.useEffect)(()=>{we&&ke.values.amount&&we({amount:ke.values.amount,currency:ke.values.currency})},[ke.values.amount,ke.values.currency,we]),Object(n.useEffect)(()=>{const{friendlyChallenge:e}=ke.payments;ke.values.prevStep>ke.values.step?async function(){e.getPromise()&&await e.awaitSolution(),e.reset({startNow:!0,force:!0})}():1===ke.values.step&&(e.start(),e.getPromise().catch(e=>{console.error(e)}))},[ke.values.step]);const Oe=e||J,[Se,Te]=Object(u.a)(ke,ee,te);return o.a.createElement("div",{className:Object(r.a)("donation-form",(null===(de=_e.campaign.config.donation)||void 0===de?void 0:de.express)&&"donation-form--express","donation-form--active-step-"+(ke.values.step+1),t,ie),id:"donate",ref:ye},o.a.createElement(i.Elements,{stripe:ke.payments.stripePromise,options:{...(null==ke||null===(me=ke.payments)||void 0===me?void 0:me.donationIntent)&&{clientSecret:null==ke||null===(pe=ke.payments)||void 0===pe?void 0:pe.donationIntent.client_secret},appearance:{theme:"stripe",labels:"floating"},loader:"never"},key:`${null==ke||null===(fe=ke.payments)||void 0===fe||null===(ge=fe.campaignStripeProvider)||void 0===ge?void 0:ge.accountId}${null==ke||null===(be=ke.payments)||void 0===be||null===(he=be.donationIntent)||void 0===he?void 0:he.id}`},o.a.createElement(c.a,{value:ke},o.a.createElement(Oe,{mainHeading:a,detailsHeading:l,paymentsHeading:E,giftAidFields:O,currencySelection:k,customAmountPlaceholder:w,paymentButton:ae,CustomDonateButton:ne,afterPaymentSelect:Se,onManualSubmit:Te,giftAidEnabled:j,thankYouTitle:S,thankYouMessage:T,customShareUrl:x,recurring:P,defaultDonationAmount:q,disableThankYouModal:A,builtIns:{FrequencySelect:m,AmountSelect:p.a,Upsell:Y.a,GivingLabel:z.b,GivingLabelWithHearts:z.c,MissingProviderNotice:U.a,OptIn:f.a,OptInV3:W.a,CurrencySelect:g.a,PaymentDetails:b.a,PaymentMethodSelect:h.a,GiftAidOptIn:y.a,AnonymousToggle:v.a,ErrorFeedback:_.a,PostDonateModal:N,ThankYouScreen:C,ManualPaymentForm:I.b,StepSelect:B,PaymentSubmitButton:M,StripeFields:I.a,useDonationFormContext:c.b,useInterpolatedMessage:d.a},onTokenSuccess:oe,amount:D,startOnAmountScreen:K}))))}function J({mainHeading:e,detailsHeading:t,paymentsHeading:a,currencySelection:i,customAmountPlaceholder:s,giftAidEnabled:u,giftAidFields:E,thankYouTitle:k,thankYouMessage:w,customShareUrl:O,paymentButton:S,CustomDonateButton:T,recurring:x,onTokenSuccess:j,defaultDonationAmount:P,disableThankYouModal:A,afterPaymentSelect:D,onManualSubmit:R}){var F;const{campaign:L,isEmbed:H}=useRaisely(),{t:V}=Object(l.d)(),{values:Z,amountMessageWithCurrency:K,payments:J,isExpressForm:Q,showStripePaymentElements:X,steps:ee,totalAmount:te,calculatedTotal:ae,experimentFlags:ne}=Object(c.b)(),oe=Object(d.a)(t,Q),re=Object(d.a)(a),ie=!L.showRaiselyCheckbox&&null!==(F=L.config.fees)&&void 0!==F&&F.custom?f.a:W.a,le=ee[Z.step];if("amount"===le){var se,ce,ue,de,me,pe;const t=!(null!==(se=L.config.donation)&&void 0!==se&&se.express||P||X);return o.a.createElement(n.Fragment,null,!(null!==(ce=L.config.donation)&&void 0!==ce&&ce.express)&&o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:"donation-form__body"},o.a.createElement(U.a,null),e&&o.a.createElement("h2",{className:"donation-form__title"},e),x&&o.a.createElement(m,null),o.a.createElement(p.a,{autoContinueOnAmountSelect:t,customAmountPlaceholder:s}),(null===(ue=L.config.donation)||void 0===ue?void 0:ue.express)&&o.a.createElement(ie,null),(null===(de=L.config.donation)||void 0===de?void 0:de.express)&&o.a.createElement(v.a,null),u&&(null===(me=L.config.donation)||void 0===me?void 0:me.express)&&o.a.createElement(y.a,{giftAidFields:E}),o.a.createElement(g.a,{currencySelection:i}),o.a.createElement(h.a,{afterSelect:(e,t)=>D(e,t,ee.length-1),hideWallets:!(null!==(pe=L.config.donation)&&void 0!==pe&&pe.express),hidePaypal:Boolean(j)}),o.a.createElement(_.a,null),ne.paymentLogosExperiment&&!Q&&o.a.createElement(G.a,null)))}return"upsell"===le?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:"donation-form__body donation-form__body--upsell"},o.a.createElement(Y.a,null))):"details"===le?o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:Object(r.a)("donation-form__body","donation-form__body--details")},o.a.createElement(z.c,null),t&&o.a.createElement("h3",{className:"donation-form__title"},oe),o.a.createElement(b.a,{includeAnonymousToggle:!(null!==(fe=L.config.donation)&&void 0!==fe&&fe.express),hideCustomFields:null===(ge=L.config.donation)||void 0===ge?void 0:ge.express,includeBackButton:ee.includes("amount")}))):"giftAid"===le?o.a.createElement(n.Fragment,null,!(null!==(be=L.config.donation)&&void 0!==be&&be.express)&&o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:"donation-form__body"},o.a.createElement(y.a,{giftAidFields:E}))):"payment"===le?o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:Object(r.a)("donation-form__body","donation-form__body--payment")},a&&o.a.createElement("h3",{className:"donation-form__title"},re),null!==(he=L.config.donation)&&void 0!==he&&he.express?null:o.a.createElement(h.a,{afterSelect:(e,t)=>D(e,t,ee.length-1),hidePaypal:Boolean(j),hideManual:!0,customRender:(e,t)=>e?o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:t},X?o.a.createElement("fieldset",{className:"donation-form__method-payment__border"},o.a.createElement("legend",{className:"donation-form__method-payment__legend"},"Express Checkout"),e):e),J.onlySupportsPaypal?null:X?o.a.createElement(q.a,{text:V("OR")}):o.a.createElement("span",{className:"donation-form__method-divider"},V("OR"))):null}),o.a.createElement("div",null,o.a.createElement(I.b,{onSubmit:(e,t)=>R(e,t,ee.length-1)},X?o.a.createElement($.a,null):J.campaignStripeProvider&&o.a.createElement(I.a,null),(!(null!==(ye=L.config.donation)&&void 0!==ye&&ye.express)||!ee.includes("amount"))&&o.a.createElement(ie,null),o.a.createElement("p",{className:"donation-form__currency-message"},K),o.a.createElement(_.a,null),J.campaignStripeProvider?o.a.createElement(M,{paymentButton:S,CustomDonateButton:T}):o.a.createElement("p",{className:Object(r.a)("donation-form__spacer")})))),o.a.createElement("span",{"data-cy":"total",style:{display:"none"}},te),o.a.createElement("span",{"data-cy":"calculated-total",style:{display:"none"}},ae)):"thankyou"===le?o.a.createElement("div",null,o.a.createElement("div",{className:"donation-form__header"},o.a.createElement(B,{stepCount:ee.length-1})),o.a.createElement("div",{className:Object(r.a)("donation-form__body","donation-form__body--success")},o.a.createElement(C,{title:k,message:w,customShareUrl:O})),!H&&!A&&o.a.createElement(N,{title:k,message:w,customShareUrl:O})):void 0;var fe,ge,be,he,ye}},15:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a(0);const o=Object(n.createContext)();function r(){return Object(n.useContext)(o)}o.displayName="SignupFormContext";const i=o.Provider},150:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return u}));a(5),a(27);var n=a(0),o=a.n(n),r=a(3),i=a(17),l=a(8);function s(e={fundraisingCostTooltip:null}){const{t:t,Trans:a,tD:s}=Object(r.d)(),{values:c,raiselyOptIn:u,optInAmount:d}=Object(i.b)(),m=t("__OPT_IN_TOOLTIP_MESSAGE",{defaultValue:"Adding this small percentage will help Raisely, a for-purpose giving platform, cover our website and platform costs."}),p=t("__OPT_IN_OUR_PLATFORM_COSTS",{defaultValue:"Cover our platform costs"}),f=t("__OPT_IN_CHIP_ASK_PLATFORM_COSTS",{defaultValue:"Chip in a bit"}),g=t("__OPT_IN_PLATFORM_COSTS",{defaultValue:"Cover platform costs"}),b=t("__OPT_IN_GENEROSITY_MESSAGE",{defaultValue:"Your generosity will help our donation platform to continue to support us for free."});return{feeMessage:Object(n.useMemo)(()=>{const t=Object(l.f)(d,c.currency);if(u.message)return s(u.message.replace(/\[fee\]/g,t));const n=e.fundraisingCostTooltip||(({children:e})=>e);return o.a.createElement(a,{i18nKey:"__OPT_IN_FEE_MESSAGE",values:{optInAmount:t}},"Add ",o.a.createElement("b",null,"[[optInAmount]]")," to help cover our ",o.a.createElement(n,{optInToolTipMessage:m},"fundraising costs"))},[e.fundraisingCostTooltip,m,d,c.currency,u.message]),optInToolTipMessage:m,platformCostsLabel:p,platformCostsChipAsk:f,platformCostsShortLabel:g,yourGenerosityMessage:b}}function c(e=!1){const{values:t,payments:a}=Object(i.b)(),{feeOptIn:o,hasSelectedChipIn:r,chipInAmount:l}=t,{donationIntent:s,createOrUpdateDonationIntent:c}=a,u=Object(n.useRef)(o),d=Object(n.useRef)(r),m=Object(n.useRef)(l);Object(n.useEffect)(()=>{const t=e&&(r!==d.current||l!==m.current);s&&(o!==u.current||t)&&(c({forceUpdate:!0}),u.current=o,d.current=r,m.current=l)},[o,s,r,l])}function u(e,t,a,n){var o,r,i,l,s,c,u,d,m,p,f,g,b,h,y,v;let _,E,k;n?(_=n,E="donation.optInChecked"===_,k=a.values.initialSuggestedOptIn):(_=a.values.feeOptIn?"donation.optInUnchecked":"donation.optInChecked",E=!a.values.feeOptIn,k=a.optInAmount),e.broadcast(_,{formUuid:a.values.formUuid,amount:a.values.amount,currency:a.values.currency,stage:a.values.step,formSteps:a.steps,profile:null===(o=t.current)||void 0===o?void 0:o.profile,availableFrequencies:a.availableFrequencies,availableAmounts:a.availableAmounts,campaignCurrency:t.campaign.currency,isDefaultDonationAmountEnabled:a.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(t.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(t.campaign.showRaiselyCheckbox)&&Boolean(null===(r=t.campaign.config)||void 0===r||null===(i=r.fees)||void 0===i?void 0:i.custom)&&Boolean(null===(l=t.campaign.config)||void 0===l||null===(s=l.fees)||void 0===s?void 0:s.optInOnly),targetProfileUuid:a.targetProfileUuid,isExpress:a.isExpressForm,isGiftAidEnabled:a.values.giftAidEnabled,donationCustomFields:null===(c=t.campaign.config)||void 0===c||null===(u=c.customFields)||void 0===u?void 0:u.donation,stageName:a.steps[a.values.step],selectedAmount:a.values.amount,isFeeOptInChecked:E,selectedOptInAmount:a.values.selectedOptInAmount,selectedInterval:a.values.interval,selectedCurrency:a.values.currency,presentedOptInAmount:k,isDonationFormV3:a.isV3,isUserInModal:Boolean(a.values.inModal),isModalPreviewEnabled:Boolean(a.values.inModal&&(null===(d=t.campaign.config)||void 0===d||null===(m=d.donation)||void 0===m||null===(p=m.campaignPreview)||void 0===p?void 0:p.isEnabled)),isRegularGivingNudgeEnabled:Boolean(null===(f=t.campaign.config)||void 0===f||null===(g=f.donation)||void 0===g||null===(b=g.upsell)||void 0===b?void 0:b.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(h=t.campaign.config)||void 0===h||null===(y=h.donation)||void 0===y||null===(v=y.upsell)||void 0===v?void 0:v.isStepEnabled)})}},156:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(181),u=a(1),d=a.n(u),m=a(254),p=a(3),f=a(6),g=a(294);class b extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{searchValue:""})}render(){const{t:e,tF:t}=Object(p.a)(),{props:a}=this,n="ANY"===a.profileType?"":a.profileType||f.h.group,{profiles:r}=a.global.campaign.config,i=Object(f.d)(f.h.group,r),l=Object(f.c)(f.h.group,r,!1,!1),u=Object(f.c)(f.h.group,r,!0,!1);return s.a.createElement("div",{className:"profile-select"},s.a.createElement(c.a,{onSelect:({value:e})=>{a.update(e.uuid)},inputValue:this.state.searchValue,itemToString:e=>e?e.value:""},({getInputProps:r,getItemProps:c,getMenuProps:d})=>s.a.createElement("div",null,s.a.createElement(m.a,o()({className:"profile-select__input",label:t(a.label,e("Search for [[aTeam]] to join",{aTeam:i})),placeholder:t(a.placeholder,e("Enter the [[teamTerm]]'s name",{teamTerm:l}))},r({change:(e,t)=>this.setState({searchValue:t})}),{blur:a.onBlur,errors:a.errors,touched:a.touched,autofocus:a.autofocus,required:!0,inputAppend:this.state.searchValue?s.a.createElement(g.a,{getMenuProps:d,inputValue:this.state.searchValue,getItemProps:c,teamLanguage:a.teamLanguage?a.teamLanguage+"s":u,customFilter:a.customFilter,request:e=>{return a.api.campaigns.profiles.getAll({id:a.global.campaign.uuid,query:(t={q:e,sort:a.alphabeticalProfileSearch?"name":"total",order:a.alphabeticalProfileSearch?"asc":"desc",type:n},{...t,limit:3,offset:0})});var t}}):null})))))}}b.propTypes={name:d.a.string,profileType:d.a.string,customFilter:d.a.func},t.a=b},16:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a(4),o=a.n(n),r=a(0),i=a.n(r),l=a(1),s=a.n(l),c=a(333);const u=["small","normal","medium","large","x-large"],d=(e,t,a,n="")=>`icon ${e?"icon--"+e:"icon--default"} icon--${t} icon--id-${a} ${n}`;function m(e){const{name:t,size:a,color:n,theme:r,className:l,fullClass:s,href:m,title:p,...f}=e,g=u.includes(a)?a:"normal",b=c.a[t];if(b)return i.a.createElement(b,{title:p,className:s||d(r,g,t,l)});const h={};return n&&(h.color=n),m?i.a.createElement("a",{href:m,style:h,title:p,className:s||d(r,g,t,l)},i.a.createElement("i",o()({"data-icon-name":t,className:"material-icons"},f),""+t)):i.a.createElement("span",{style:h,title:p,className:s||d(r,g,t,l)},i.a.createElement("i",o()({"data-icon-name":t,className:"material-icons"},f),""+t))}m.propTypes={name:s.a.string.isRequired,size:s.a.oneOf(u),color:s.a.string,theme:s.a.string,className:s.a.string,fullClass:s.a.string}},162:function(e,t,a){"use strict";var n=a(0),o=a(58),r=a.n(o);function i(e){const t=Object(n.useRef)(null);return Object(n.useEffect)((function(){const a=document.querySelector("#"+e),n=a||function(e){const t=document.createElement("div");return t.setAttribute("id",e),t}(e);var o;return a||(o=n,document.body.insertBefore(o,document.body.lastElementChild.nextElementSibling)),n.appendChild(t.current),function(){t.current.remove(),n.childElementCount||n.remove()}}),[e]),t.current||(t.current=document.createElement("div")),t.current}t.a=({id:e,children:t})=>{const a=i(e);return r.a.createPortal(t,a)}},164:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(2),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(9),s={internalEditable:{title:{label:"Title",type:"text"},profile:{label:"Donations should go to",type:"select",options:[{value:"auto",label:"Automatic (Profile page or campaign)"},{value:"campaign",label:"Only the current campaign"},{value:"user",label:"Only the currently logged-in user"}]},detailsHeading:{label:"Details Heading",type:"text",group:"headings",help:"You can use the merge field [donation.amount] to display the amount chosen by the donor.",disableFlag:"donationFormV2"},paymentHeading:{label:"Payment Heading",type:"text",group:"headings",help:"You can use the merge field [donation.amount] to display the amount chosen by the donor.",disableFlag:"donationFormV2"},thankYouTitle:{group:"thankyou",label:"Thank You Title",type:"text",disableFlag:"donationFormV2"},thankYouMessage:{group:"thankyou",label:"Thank You Message",type:"textarea",help:"You can use the following merge fields to personalise your thank you message: [donation.amount], [donation.firstName], [donation.lastName]",disableFlag:"donationFormV2"},customShareUrl:{label:"Thank You Share URL",type:"text",group:"thankyou",disableFlag:"donationFormV2"},existingCards:{label:"Allow saved cards",type:"boolean",group:"advanced",disableFlag:"donationFormV2"},allCurrencies:{label:"Show full currency list",type:"boolean",group:"advanced",disableFlag:"donationFormV2"},giftAid:{label:"Enable Gift Aid step",type:"boolean",group:"advanced",disableFlag:"donationFormV2"},defaultDonationAmount:{label:"Select the second amount option by default",type:"boolean",group:"advanced",disableFlag:"donationFormV2"},donationSettingInfo:{type:"block-comment",help:'You can edit all of your donation form settings in your <a target="_blank" href="../setup/donation">Donation Form Settings</a>.'}},schema:{data:{customComponent:"RaiselyDonationForm",editable:{title:{value:""},thankYouTitle:{value:"Thank You"},thankYouMessage:{value:"You've successfully made a donation of [donation.amount]!"},perks:{value:!1},existingCards:{value:!0},allCurrencies:{value:!1},profile:{value:"auto"},giftAid:{value:!1},customShareUrl:{value:null},detailsHeading:{value:"Your Details"},paymentHeading:{value:"Your Payment Details"}}}}},c=a(64),u=a(38),d=a(217);class m extends i.a.Component{constructor(...e){super(...e),o()(this,"state",{})}render(){const e=this.props.getValues(),t=Object(d.a)(this.props,e);return i.a.createElement(r.Fragment,null,t,i.a.createElement(f,{donationFormRender:t,title:e.title}))}}o()(m,"description","A donation form"),o()(m,"group","form"),o()(m,"icon","favorite"),o()(m,"disableBlockColorStyles",!0),o()(m,"internalEditable",s.internalEditable),o()(m,"schema",s.schema);const p=({global:e,profile:t})=>{const a=Object(d.a)({global:e},{profile:t});return i.a.createElement(f,{donationFormRender:a})},f=({donationFormRender:e,title:t})=>{const{current:a,send:n}=Object(c.b)("raisely-donationform-modal"),[o,l]=Object(r.useState)(!1);Object(r.useEffect)(()=>{"show"===a&&(l(!0),document.body.style="overflow-y: hidden")},[a]);const s=()=>{l(!1),document.body.style="overflow-y: auto",n("hide")};return o?i.a.createElement(u.a,{automatic:!0,onClose:s,modalContent:()=>i.a.createElement("div",{className:"donation-form--modal"},e),theme:"full",title:t||"Donate",button:!1}):null};m.displayName="RaiselyDonationForm",Object(l.f)(m)},165:function(e,t,a){"use strict";a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return E}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(124),a(5),a(0)),s=a.n(l),c=a(1),u=a.n(c),d=a(134),m=a(116),p=a(26),f=a(7),g=a.n(f),b=a(113),h=a(17);function y({enableDonation:e,enableRego:t,appendToForm:a,registrationAmount:n,paymentDonationTitle:r,hideFee:i,...c}){const{config:u}=useRaisely().campaign,d=Object(l.useMemo)(()=>({paymentButton:n,onManualSubmit:o,afterPaymentSelect:d,CustomDonateButton:m,builtIns:p})=>{var f;const{totalAmount:g,values:b,payments:y}=Object(h.b)(),{ManualPaymentForm:v,PaymentMethodSelect:_,StripeFields:E,OptIn:k,PaymentSubmitButton:w,AmountSelect:O}=p;return s.a.createElement("div",null,s.a.createElement(v,{onSubmit:async(e,t)=>await o(e,t,b.step)},t&&e&&s.a.createElement("h5",{className:"donation-form--checkout-form__subheading"},r),e&&s.a.createElement(O,{customAmountPlaceholder:null===(f=u.donation)||void 0===f?void 0:f.customAmountPlaceholder}),g>0&&s.a.createElement(l.Fragment,null,s.a.createElement("hr",{className:"donation-form--checkout-form__separator"}),!i&&s.a.createElement(k,null),s.a.createElement(_,{hidePaypal:Boolean(c.onTokenSuccess),hideManual:!0,afterSelect:(e,t)=>{d(e,t,b.step)},customRender:(e,t)=>e?s.a.createElement(l.Fragment,null,s.a.createElement("div",{className:t},e),y.onlySupportsPaypal?null:s.a.createElement("span",{className:"donation-form__method-divider"},"OR")):null}),s.a.createElement(E,null),s.a.createElement(w,{paymentButton:n,CustomDonateButton:m})),"function"==typeof a&&a(g)))},[e,t,n]);return s.a.createElement(b.a,o()({},c,{version:"<=2",additionalAmount:t&&n,key:t&&n,renderStep:d,className:"donation-form--checkout-form",defaultDonationAmount:!1,hideFee:i}))}var v=a(78);const _=e=>{var t;return Boolean(null==e||null===(t=e.config.flags)||void 0===t?void 0:t.donationFormV2)};class E extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{...Object(p.o)(this.props)}),i()(this,"getAvailableStages",()=>{const e=this.props.giftAid||g()(this.props.global,"campaign.config.donation.giftAid",!1);return[!this.props.amount&&"amount",this.props.perks&&this.state.loadedPerks.length&&"perks",e&&"giftaid",!this.props.onTokenSuccess&&"details","payment","success"].filter(e=>!!e)}),i()(this,"updateValues",p.q.bind(this))}static withLoader(e,t=null){return e.embed||e.global.userAuthAttempted?s.a.createElement(this,e):t}async componentDidMount(){this.props.perks&&this.setState({loadedPerks:await Object(p.n)()})}componentDidUpdate(e,t){if(this.state.lastResult&&this.state.lastResult!==t.lastResult){const e="ONCE"===this.state.lastResult.processing?"donation":"subscription";this.props.integrations.broadcast(e+".success",{values:this.state.values,response:this.state.lastResult,profile:this.props.global.current.profile})}e.amount!==this.props.amount&&this.updateValues({amount:this.props.amount})}render(){const{props:e,state:t}=this,a=Object(v.c)(this.props.global.campaign,e.values);if(_(this.props.global.campaign)){const{enableDonation:e,enableRego:t,appendToForm:n,registrationAmount:o,user:r,onTokenSuccess:i,paymentButton:l,CustomDonateButton:c,paymentDonationTitle:u,paymentRegistrationTitle:d,hideFee:m,items:p}=this.props;return s.a.createElement(y,{items:p,enableDonation:e,enableRego:t,appendToForm:n,registrationAmount:o,currency:Boolean(t)&&this.props.global.campaign.currency,recurring:!1,user:r,registrationProfile:a,onTokenSuccess:i,paymentButton:l,CustomDonateButton:c,paymentDonationTitle:u,paymentRegistrationTitle:d,hideFee:m,initialState:{details:{private:this.props.private||{},public:this.props.public||{}}}})}const n=Object(p.j)(e),{currency:r,config:i}=e.global.campaign;let l;l=e.enableRego?r:t.values.currency||n.currency||r;const c=Object(d.a)({config:i}),u=s.a.createElement(m.a,o()({},t,{key:l,minimal:!0,updateValues:this.updateValues,preferSCAMode:c,formProps:e,global:e.global,donationTarget:n,campaignCurrency:r,targetCurrency:l,integrations:e.integrations,paymentButton:e.paymentButton,enableRego:e.enableRego,registrationProfile:a,amountsTitle:e.enableRego&&e.paymentDonationTitle,registrationAmount:e.registrationAmount,disableAutomaticNext:!0}));return s.a.createElement("div",{id:"donate",className:"donation-form donation-form--minimal","data-form-uuid":t.formUuid},e.enableDonation&&!e.enableRego&&u,t.values.amount>0&&s.a.createElement(m.d,o()({},t,{minimal:!0,useSingleCard:!0,autoFocus:!1,formProps:e,registrationProfile:a,global:e.global,paymentButton:e.paymentButton,integrations:e.integrations,updateValues:this.updateValues,preferSCAMode:c,donationTarget:n,campaignCurrency:r,targetCurrency:l,appendInput:e.enableRego&&e.enableDonation&&u})),"function"==typeof e.appendToForm&&e.appendToForm(t.values.amount))}}E.propTypes={global:u.a.object.isRequired,integrations:u.a.object.isRequired,profileUuid:u.a.any,currency:u.a.string,amount:u.a.number,onTokenSuccess:u.a.func,title:u.a.string,thankYouTitle:u.a.string,thankYouMessage:u.a.string,public:u.a.object,private:u.a.object,perks:u.a.boolean,existingCards:u.a.bool,giftAid:u.a.bool,recurring:u.a.bool}},167:function(e,t,a){"use strict";async function n({api:e,campaignUuid:t,name:a,path:n}){const o=await e.utils.profileUrl.get({query:{campaignUuid:t,name:a,url:n}}),{available:r}=o.body().data();if(!r)throw new Error(`Profile path "${n}" already taken`)}a.d(t,"a",(function(){return n}))},168:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(5);var n=a(0),o=a.n(n),r=a(58),i=a.n(r),l=a(54),s=a(18),c=a(17),u=a(16),d=a(3),m=a(144),p=a(81);function f({disabled:e,type:t,handleMethodSelect:a,disabledText:n}){var r;const l=null===(r=window.paypal)||void 0===r?void 0:r.Buttons.driver("react",{React:o(),ReactDOM:i()});return l?o.a.createElement("div",{className:Object(s.a)("donation-form__method-payment-button-wrapper",e&&"donation-form__method-payment-button-wrapper--disabled","donation-form__paypal-button-wrapper")},o.a.createElement(l,{fundingSource:window.paypal.FUNDING.PAYPAL,style:{color:"gold",label:"pay",shape:"rect"},disabled:e,createOrder:async(e,n)=>await a({phase:"create",data:e,actions:n},t),onApprove:async(e,n)=>await a({phase:"process",data:e,actions:n},t),onError:e=>a({phase:"error",error:e},t),onCancel:({orderID:e})=>a({phase:"cancel",orderId:e},t)}),e&&n&&o.a.createElement("div",null,n)):null}function g({afterSelect:e,customRender:t,hideManual:a,hideWallets:r,hidePaypal:i}){var g;const{t:b}=Object(d.d)(),{disablePayment:h,updateValues:y,payments:v,values:_,totalAmount:E,isExpressForm:k,experimentFlags:w}=Object(c.b)(),O=useRaisely(),S=function(){const{t:e}=Object(d.d)(),[t,a]=Object(n.useState)(null),o=Object(n.useRef)(null),{isEmbed:r}=useRaisely(),{values:i,payments:s,calculatedTotal:u,totalAmount:m}=Object(c.b)(),p=Object(l.useStripe)(),f=useRaisely();return Object(n.useEffect)(()=>{if(!p)return;const t={currency:i.currency.toLowerCase(),total:{label:"Donation to "+f.campaign.name,amount:u},displayItems:[{label:"Donation to "+f.campaign.name,amount:m}]};i.feeOptIn&&t.displayItems.push({label:e("Help cover our fundraising costs"),amount:u-m});let n=o.current;n?n.update(t):(t.country=s.campaignStripeProvider.country,t.requestPayerName=!0,t.requestPayerEmail=!0,n=p.paymentRequest(t),o.current=n),s.setupExpressPaymentRequest(n,r).then(e=>a(e))},[p,u,m,i.currency,i.feeOptIn]),t}(),T=function(){const[e,t]=Object(n.useState)(null),{values:a,payments:o,calculatedTotal:r,optInAmount:i,isMinimumAmount:l,raiselyOptIn:s,totalAmount:u}=Object(c.b)();return Object(n.useEffect)(()=>{var e;u&&t({country:null===(e=o.campaignPaypalProvider)||void 0===e?void 0:e.country,currency:a.currency.toUpperCase(),total:r,amount:u,optInAmount:i,isMinimumAmount:l,raiselyOptIn:s,type:"ONLINE"})},[r,a.currency,u,s,i,l,o.campaignPaypalProvider]),e}(),N=Object(m.a)(p.a.TBD_109_PAYPAL_REGULAR_GIVING).enabled,C=!i&&("ONCE"===_.interval||N)&&v.campaignPaypalProvider&&v.paypalScriptLoaded&&!r,x=Boolean(Object(l.useStripe)())||r&&v.paypalScriptLoaded,[j,P]=Object(n.useState)(42),[A,D]=Object(n.useState)(!1);if(!E)return null;const R=async(t,a="paymentmethod")=>{if(A)return;D(!0);let n,o=y(e=>e.set("methodType",a));if(e)if("paypal"===a){const a={...T,...t};n=await e(o,a)}else await e(o,S);return D(!1),n},F=(null==S?void 0:S.instantMethods.googlePay)||(null==S?void 0:S.instantMethods.applePay),I=!a||C||F,M="connect"===(null===(g=v.campaignPaypalProvider)||void 0===g?void 0:g.gatewayVersion)&&"TEST"===O.campaign.mode&&"staging"!==window._env.env,L=I?o.a.createElement(n.Fragment,null,!r&&F&&o.a.createElement("div",{className:Object(s.a)("donation-form__method-payment-button-wrapper",(h||A)&&"donation-form__method-payment-button-wrapper--disabled")},o.a.createElement(l.PaymentRequestButtonElement,{options:{paymentRequest:S.paymentRequest,style:{paymentRequestButton:{height:j+"px"}}},onClick:R})),C&&o.a.createElement(f,{disabled:h||M,type:"paypal",handleMethodSelect:R,key:v.paypalScriptLoaded,disabledText:M&&"You cannot take TEST payments on PayPal"}),!a&&x&&o.a.createElement("div",{className:Object(s.a)("donation-form__method-payment-button-wrapper",!k&&!w.paymentLogosExperiment&&"donation-form__nav")},o.a.createElement("button",{className:Object(s.a)("button button--primary donation-form__method-button","donation-form__method-button--manual"),disabled:h,"aria-label":"Pay with Credit Card",onClick:e=>R(e,"manual"),ref:e=>{e&&P(e.getBoundingClientRect().height)}},k?o.a.createElement("span",null,o.a.createElement(u.a,{name:"lock",size:"normal"})," ",b("Enter Payment Details")):o.a.createElement("span",null,b("Next"))))):null;return"function"==typeof t?t(L,"donation-form__method"):o.a.createElement("div",{className:"donation-form__method"},L)}},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e.fullName||e.preferredName||`${e.firstName||e.first_name||""} ${e.lastName||e.last_name||""}`},17:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a(0);const o=Object(n.createContext)();function r(){return Object(n.useContext)(o)}const i=o.Provider},176:function(e,t,a){var n=a(939),o=a(632),r=/[T ]/,i=/:/,l=/^(\d{2})$/,s=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],c=/^(\d{4})/,u=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,m=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,f=/^-?W(\d{2})$/,g=/^-?W(\d{2})-?(\d{1})$/,b=/^(\d{2}([.,]\d*)?)$/,h=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,v=/([Z+-].*)$/,_=/^(Z)$/,E=/^([+-])(\d{2})$/,k=/^([+-])(\d{2}):?(\d{2})$/;function w(e,t,a){t=t||0,a=a||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var o=7*t+a+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+o),n}e.exports=function(e,t){if(o(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var a=(t||{}).additionalDigits;a=null==a?2:Number(a);var O=function(e){var t,a={},n=e.split(r);i.test(n[0])?(a.date=null,t=n[0]):(a.date=n[0],t=n[1]);if(t){var o=v.exec(t);o?(a.time=t.replace(o[1],""),a.timezone=o[1]):a.time=t}return a}(e),S=function(e,t){var a,n=s[t],o=u[t];if(a=c.exec(e)||o.exec(e)){var r=a[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(a=l.exec(e)||n.exec(e)){var i=a[1];return{year:100*parseInt(i,10),restDateString:e.slice(i.length)}}return{year:null}}(O.date,a),T=S.year,N=function(e,t){if(null===t)return null;var a,n,o,r;if(0===e.length)return(n=new Date(0)).setUTCFullYear(t),n;if(a=d.exec(e))return n=new Date(0),o=parseInt(a[1],10)-1,n.setUTCFullYear(t,o),n;if(a=m.exec(e)){n=new Date(0);var i=parseInt(a[1],10);return n.setUTCFullYear(t,0,i),n}if(a=p.exec(e)){n=new Date(0),o=parseInt(a[1],10)-1;var l=parseInt(a[2],10);return n.setUTCFullYear(t,o,l),n}if(a=f.exec(e))return r=parseInt(a[1],10)-1,w(t,r);if(a=g.exec(e)){r=parseInt(a[1],10)-1;var s=parseInt(a[2],10)-1;return w(t,r,s)}return null}(S.restDateString,T);if(N){var C,x=N.getTime(),j=0;if(O.time&&(j=function(e){var t,a,n;if(t=b.exec(e))return(a=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=h.exec(e))return a=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),a%24*36e5+6e4*n;if(t=y.exec(e)){a=parseInt(t[1],10),n=parseInt(t[2],10);var o=parseFloat(t[3].replace(",","."));return a%24*36e5+6e4*n+1e3*o}return null}(O.time)),O.timezone)C=6e4*function(e){var t,a;if(t=_.exec(e))return 0;if(t=E.exec(e))return a=60*parseInt(t[2],10),"+"===t[1]?-a:a;if(t=k.exec(e))return a=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-a:a;return 0}(O.timezone);else{var P=x+j,A=new Date(P);C=n(A);var D=new Date(P);D.setDate(A.getDate()+1);var R=n(D)-n(A);R>0&&(C+=R)}return new Date(x+j+C)}return new Date(e)}},177:function(e,t,a){"use strict";a(27),a(5);var n=a(0),o=a.n(n),r=a(706),i=a(23),l=a.n(i),s=a(1),c=a.n(s),u=a(313),d=a.n(u),m=a(21),p=a.n(m),f=a(24),g=a.n(f),b=a(7),h=a.n(b),y=a(29),v=a(11),_=a(108),E=a(37),k=a(73),w=a(3);const O=["vertical","horizontal"],S=["item","full"];function T(e){const{post:t,profile:a,campaign:r,isOwner:i,deletePost:s}=e,c=t||{},{t:u}=Object(w.d)(),m=O.includes(e.direction)?e.direction:"",f=S.includes(e.detail)?e.detail:"full",b="full"===f,T=a&&a.path===r.path,N=c.user?(C=c.user).fullName||C.preferredName:"";var C;const x=T?"/blog":`/${a?a.path:""}/`,j=g()(c.date).format("D MMM YYYY"),[P,A]=Object(n.useMemo)(()=>{if(!c.body)return[];const e=function(e,t="full"){if("full"!==t)return d()(e,200).replace(/<\/?[^>]+(>|$)/g," ");let a=e||"";return a=Object(k.b)(a,k.d,['<div class="video-wrapper"><iframe class="youtube-player" type="text/html" width="320" height="180" src="//www.youtube.com/embed/',1,'?rel=0&showinfo=0" frameborder="0"></iframe></div>']),a=Object(k.b)(a,k.c,['<div class="video-wrapper"><iframe src="https://player.vimeo.com/video/',3,'" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1"></iframe></div>']),a=a.replace(k.a,e=>['<div class="video-wrapper"><iframe src="',"https://www.facebook.com/plugins/video.php?"+l.a.stringify({href:e,show_text:0,width:640,height:360}),'"','width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1"></iframe></div>'].join("")),a}(c.body,f);return[p()(e),-1!==e.indexOf('<div class="video-wrapper"')]},[c.body,f]);if(!c.body)return null;const D=h()(r,"config.theme.defaultProfileUrl");return o.a.createElement("article",{className:(R=m,F=f,I=Boolean(c.photoUrl),M=Boolean(A),`post post--direction-${R} post--detail-${F} ${I?"post--image":""} ${M?"post--has-video":""}`)},!b&&c.photoUrl?o.a.createElement(y.a,{to:e.href},o.a.createElement("div",{className:"post__image"},o.a.createElement(E.a,{src:c.photoUrl+"?fm=jpg",options:{maxWidth:600},alt:c.title}))):null,o.a.createElement("div",{className:"post__wrapper"},!b&&("horizontal"===m?o.a.createElement("h4",{className:"post__title"},o.a.createElement(y.a,{to:e.href},c.title)):o.a.createElement("h3",{className:"post__title"},o.a.createElement(y.a,{to:e.href},c.title))),o.a.createElement("div",{className:"post__meta"},N&&o.a.createElement("div",{className:"post__meta__author"},b&&o.a.createElement(n.Fragment,null,o.a.createElement(y.a,{className:"post__meta__author-overlay",to:x}),o.a.createElement(_.a,{size:"small",className:"post__meta__author-image",profile:c.profile,defaultImage:D||""})),o.a.createElement("span",{className:"post__meta__author-name"},N)),o.a.createElement("span",{className:"post__meta__date"},j)),o.a.createElement("div",{className:"post__content"},b&&c.photoUrl&&o.a.createElement("div",{className:"post__image"},o.a.createElement(E.a,{src:c.photoUrl+"?fm=jpg",isLazy:!1,options:{maxWidth:700},alt:c.title})),P),e.href&&!b&&o.a.createElement(v.a,{size:"small",href:e.href},u("Read more"))),b&&o.a.createElement("div",{className:"post__actions button-row"},o.a.createElement(v.a,{size:"small",theme:"primary",className:"post__actions__back",href:x},u(T?"Back to Blog":"Back To Profile")),i&&o.a.createElement(v.a,{size:"small",theme:"secondary",className:"post__actions__delete",onClick:s},u("Delete Post"))));var R,F,I,M}T.propTypes={post:c.a.shape({title:c.a.string.isRequired,body:c.a.string.isRequired,user:c.a.object}).isRequired,href:c.a.string,detail:c.a.oneOf(S),direction:c.a.oneOf(O)},t.a=Object(r.a)(T)},178:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(4),o=a.n(n),r=(a(5),a(27),a(0)),i=a.n(r),l=a(70),s=a(18),c=a(1),u=a.n(c),d=a(3),m=a(16);let p,f=e=>e;function g({formClassName:e,onSubmit:t,onKeyDown:a,value:n,initialValue:c,onChange:u,isActive:g,appendInput:b,buttonLabel:h,buttonTitle:y,loading:v,disabled:_,type:E,completed:k,...w}){const{tF:O,t:S}=Object(d.d)(),[T,N]=Object(r.useState)(!1),[C,x]=Object(r.useState)(!1),j=Object(r.useRef)(null),P=Object(r.useRef)(null),A=Object(l.a)(p||(p=f`
		--form-height: ${0};
	`),T);Object(r.useEffect)(()=>{if(j&&j.current&&"text"!==E){j.current.style.height="0px";const e=j.current.scrollHeight;j.current.style.minHeight=e+"px",x(j.current.scrollHeight),N(P.current&&P.current.clientHeight+"px")}g&&j.current&&j.current.focus()},[g]),Object(r.useEffect)(()=>{if(j&&j.current&&"text"!==E){j.current.style.height="0px";const e=j.current.scrollHeight;e>C?(j.current.style.height=e+"px",N("unset")):N(P.current&&P.current.clientHeight+"px")}},[n,C]);const D="streamline-input",R="text"===E?"input":"textarea",F=!n||n&&!n.replace(/\s/g,"").length||n===c;return i.a.createElement("div",{className:Object(s.a)(e,D,g&&`${A} ${D}--active`,v&&D+"--submitting",k&&D+"--completed")},i.a.createElement("form",{className:D+"__form",onSubmit:e=>(e=>{j.current&&j.current.blur(),t(e)})(e),ref:P,onKeyDown:a},i.a.createElement("div",{className:D+"__input-container"},i.a.createElement(R,o()({className:D+"__input-container__input",type:"text"===E&&"text",value:n,ref:j,onFocus:e=>(e=>{const t=e.target.value;e.target.value="",e.target.value=t})(e),onChange:e=>u(e.target.value),disabled:_||v},w)),!F&&i.a.createElement("button",{className:D+"__input-container__submit",type:"submit",title:O(y,S("Submit")),disabled:_||v},i.a.createElement(m.a,{name:"keyboard_return",size:"normal",theme:"inherit"}),i.a.createElement("span",{className:D+"__input-container__submit__label"},k&&i.a.createElement(m.a,{name:"done",size:"normal",theme:"inherit"}),O(h,S("Save"))))),b&&b()))}g.propTypes={formClassName:u.a.string,onSubmit:u.a.func,onKeyDown:u.a.func,value:u.a.string,initialValue:u.a.string,onChange:u.a.func,isActive:u.a.bool,appendInput:u.a.func,buttonLabel:u.a.string,buttonTitle:u.a.string,loading:u.a.bool,disabled:u.a.bool,type:u.a.oneOf(["textarea","text"])}},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(27),a(39);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(21),s=a.n(l),c=a(3),u=a(11),d=a(214),m=a(37);const p=({src:e,title:t,isVideo:a})=>{let n=e;return e.endsWith(".pdf")&&(n=e.replace("s3-ap-southeast-2.amazonaws.com/raisely-images","raisely-images.imgix.net")+"?page=1"),o.a.createElement("div",{className:"resource-card__image"},a?Object(d.a)(e,!1,!0):o.a.createElement(m.a,{src:n,alt:t}))};function f({title:e,description:t,file:a,image:n,button:r}){const{t:i}=Object(c.d)(),l=a&&(a.includes("youtube.com")||a.includes("youtu.be")||a.includes("vimeo.com"));return o.a.createElement("a",{href:a,className:"resource-card",target:"_blank",rel:"noopener noreferrer"},a||n?o.a.createElement(p,{src:n||a,title:e,isVideo:!n&&l}):o.a.createElement("div",{className:"resource-card__placeholder"}),o.a.createElement("div",{className:"resource-card__mobile-button"},o.a.createElement("i",{className:"material-icons"},"get_app")),o.a.createElement("div",{className:"resource-card__content"},o.a.createElement("h3",{className:"resource-card__title"},e),o.a.createElement("p",{className:"resource-card__description"},Boolean(t)&&s()(t)),o.a.createElement(u.a,{className:"resource-card__download-button"},l?o.a.createElement("i",{className:"material-icons"},"play_circle_filled"):o.a.createElement("i",{className:"material-icons"},"get_app")," ",r||i(l?"Watch video":"Download"))))}f.propTypes={title:i.a.string,description:i.a.string,button:i.a.string,file:i.a.string,image:i.a.string}},180:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),o=a.n(n),r=a(3);const i=o.a.forwardRef((e,t)=>{const{isTransitioning:a,time:n="3s"}=e,{t:i}=Object(r.d)();return a&&o.a.createElement("span",{ref:t,className:"transition-bar",style:{"--time":n},"aria-label":i("Loading...")})})},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return be})),a.d(t,"b",(function(){return ve}));a(5),a(124);var n=a(0),o=a.n(n),r=a(18),i=a(54),l=a(3),s=a(324),c=a(220),u=a(17),d=a(319),m=a(69),p=a(183),f=a(95);function g(){var e,t;const{values:a,updateValues:i,availableFrequencies:s}=Object(u.b)(),c=Object(n.useRef)(),{tD:d}=Object(l.d)(),{global:m,integrations:p}=useRaisely(!0),g=Boolean(null===(e=m.campaign.config.donation)||void 0===e||null===(t=e.upsell)||void 0===t?void 0:t.isNudgeEnabled);if(1===s.length)return null;const y=s.some(e=>g&&1===e.count&&"MONTH"===e.interval&&"ONCE"===a.interval);return o.a.createElement("div",{className:Object(r.a)("donation-form__amount-type",y&&"with-upsell"),key:null==s?void 0:s.length,"aria-label":"Donation frequency",role:"group"},s.slice(0,4).map((e,t)=>{const n=a.interval===e.interval&&a.count===e.count,l=g&&1===e.count&&"MONTH"===e.interval,s=n&&l,u=!n&&l&&"ONCE"===a.interval;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"button",key:e.interval+e.count,className:Object(r.a)("donation-form__amount-type-btn",!n&&"donation-form__amount-type-btn--inactive"),onClick:()=>{var t,n,o,r,l,s,c,u,d,f;i(t=>t.set("interval",e.interval).set("count",e.count).set("regularIntervalToggled","ONCE"!==e.interval)),p.broadcast("donation.frequencyClicked",{formUuid:a.formUuid,currency:a.currency,interval:e.interval,intervalCount:e.count,frequencyLabel:e.frequencyLabel,inlineFrequencyLabel:e.inlineFrequencyLabel,availableAmounts:e.amounts,campaignCurrency:m.campaign.currency,hasCustomFees:!Boolean(m.campaign.showRaiselyCheckbox),profile:null===(t=m.current)||void 0===t?void 0:t.profile,isDonationFormV3:!0,isRegularGivingNudgeEnabled:Boolean(null===(n=m.campaign.config)||void 0===n||null===(o=n.donation)||void 0===o||null===(r=o.upsell)||void 0===r?void 0:r.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(l=m.campaign.config)||void 0===l||null===(s=l.donation)||void 0===s||null===(c=s.upsell)||void 0===c?void 0:c.isStepEnabled),isUserInModal:Boolean(a.inModal),isModalPreviewEnabled:Boolean(a.inModal&&(null===(u=m.campaign.config)||void 0===u||null===(d=u.donation)||void 0===d||null===(f=d.campaignPreview)||void 0===f?void 0:f.isEnabled))})},"data-interval-index":t,ref:n?c:null,"aria-pressed":n?"true":"false"},n&&o.a.createElement(b,{selectedIndex:t,prevSelected:c.current}),s&&o.a.createElement(f.a,null),u&&o.a.createElement(f.d,{className:"heart-beating"}),o.a.createElement("span",{className:"frequency-label"},d(e.frequencyLabel))),l&&o.a.createElement(h,{index:t,isVisible:u}))}))}function b({prevSelected:e,selectedIndex:t}){const[a,i]=Object(n.useState)({}),[l,s]=Object(n.useState)(!1),{values:c}=Object(u.b)(),d=Object(n.useMemo)(()=>null==e?void 0:e.getBoundingClientRect(),[]);return Object(n.useLayoutEffect)(()=>{if(!d)return;const e=document.querySelector(`[data-df-uuid="${c.formUuid}"] [data-interval-index="${t}"]`),{x:a,width:n}=e.getBoundingClientRect(),o=d.x;i({x:-1*(a-o),width:n})},[]),Object(n.useEffect)(()=>{setTimeout(()=>s(!0),1)},[]),o.a.createElement("span",{className:Object(r.a)("donation-form__amount-type-btn donation-form__amount-type-btn--active",l&&"animate"),style:{transform:`translateX(${a.x}px)`,width:null==d?void 0:d.width,"--width":a.width&&a.width+"px"},"aria-hidden":"true"})}function h({index:e,isVisible:t}){var a,i;const[s,c]=Object(n.useState)({}),d=Object(n.useRef)(),{tF:m}=Object(l.d)(),{values:f}=Object(u.b)();Object(n.useLayoutEffect)(()=>{!async function(){const a=await function(e,t){return new Promise(a=>{!function n(){const o=document.querySelector("iframe#editor-iframe"),r=document.querySelector(`[data-df-uuid="${e}"] [data-interval-index="${t}"]`),i=null==o?void 0:o.contentDocument.querySelector(`[data-df-uuid="${e}"] [data-interval-index="${t}"]`);r?a(r):i?a(i):requestAnimationFrame(n)}()})}(f.formUuid,e);if(!a||!d.current)return;const{bottom:n,x:o,width:r}=a.getBoundingClientRect(),{top:i,x:l}=d.current.getBoundingClientRect();c({top:n-i+10+8,arrowLeft:o+.5*r-(t?l:l-150)})}()},[]);const g=null===(a=useRaisely().campaign.config.donation)||void 0===a||null===(i=a.upsell)||void 0===i?void 0:i.nudgeMessage;return o.a.createElement("div",{className:Object(r.a)("donation-form__amount-type-upsell-nudge",t&&"visible"),style:{top:s.top+"px","--arrow-left":s.arrowLeft+"px"},ref:d,"aria-hidden":"true"},m(g,p.b))}var y=a(224),v=a(225),_=a(230),E=a(226),k=a(227),w=a(168),O=a(186),S=a(257),T=a(187),N=a(323),C=a(216),x=a(45),j=a(104);function P({title:e,message:t,customShareUrl:a,amountIncludesFee:i=!1}){const s=useRaisely(),{t:c,tF:u}=Object(l.d)(),[d,p]=function(){const[e,t]=Object(n.useState)(!1),a=Object(n.useRef)();return Object(n.useEffect)(()=>{setTimeout(()=>t(!0),j.c+200)},[]),Object(n.useEffect)(()=>{e&&a.current.play()},[e]),[a,e]}(),f=c("Thank You for making a difference, [donation.firstName]!"),g=Object(m.a)(u(e,f),i),b=c("Thank you so much for your generous donation of [donation.amount]!"),h=Object(m.a)(u(t,b),i);return o.a.createElement("div",{className:Object(r.a)("donation-form__thankyou-wrapper",p&&"animate")},o.a.createElement(N.a,{style:A,src:D,ref:d,keepLastFrame:!0,onEvent:e=>{"load"===e&&Object(C.a)()&&d.current.setSeeker(d.current.state.instance.totalFrames)}}),o.a.createElement("h3",{className:"donation-form__title"},g),o.a.createElement("p",{className:"donation-form__thankyou-message"},h),o.a.createElement("div",{className:"donation-form__share"},o.a.createElement("p",{className:"donation-form__share__heading"},c("Help by spreading the word!")),o.a.createElement("p",{className:"donation-form__share__subheading"},c("Fundraisers shared on social media raise more.")),o.a.createElement(x.a,{networks:"campaign",theme:"filled-inverted",size:"medium",url:a||"current",global:s})))}const A={width:"250px",height:"250px"},D="https://raisely-images.imgix.net/6c3ef5b0-8423-11ec-9ff9-95d30acd7a5f/uploads/donation-heart-emphasis-json-28faed.json";var R=a(4),F=a.n(R),I=(a(27),a(63),a(46)),M=a.n(I),L=a(8),B=a(143),U=a(94),H=a(28);function V(e){const{disablePayment:t,isPaymentGatewayProcessing:a,values:n,payments:r,showStripePaymentElements:i,isSPEReady:l,error:s}=Object(u.b)(),{cardFormValidationErrors:c}=Object(U.c)(),d=a||c[0]||t||n.disableSPEPayment||r.isUpdatingDonationIntent||i&&!l||"raiselyConfirm"===(null==s?void 0:s.cause)||n.isModalPreview&&n.inModal,m="function"==typeof e.CustomDonateButton?e.CustomDonateButton:$;return o.a.createElement(m,F()({},e,{disabled:d,isProcessing:a}))}function $({paymentButton:e,disabled:t,isProcessing:a}){const{validateFormAndSubmit:i}=Object(U.c)(),s=function(e){const{calculatedTotal:t,values:a}=Object(u.b)(),{campaign:n}=useRaisely(),{t:o,tF:r}=Object(l.d)(),i=r("string"==typeof e&&e,M()(n.config.language.donate)||o("Donate"));return"function"==typeof e?e(Object(L.f)(t,a.currency),a):function(e,t,a){if(e.includes("{amount}"))return e.replace("{amount}",Object(L.f)(t,a.currency));return`${e} ${Object(L.f)(t,a.currency)} ${Object(B.a)(a)}`.trim()}(i,t,a)}(e),[c,d]=function(e){const t=Object(n.useRef)(),a=Object(n.useRef)();return Object(n.useEffect)(()=>{if(!e)return;const n=new MutationObserver(e=>{var n,o,r;t.current&&a.current&&(G(null===(n=e[0])||void 0===n||null===(o=n.addedNodes[0])||void 0===o?void 0:o.childNodes[0])?(t.current.style.animationPlayState="paused",a.current.style.animationPlayState="paused"):G(null===(r=e[1])||void 0===r?void 0:r.removedNodes[0])&&(t.current.style.animationPlayState="running",a.current.style.animationPlayState="running"))});return n.observe(document.body,{childList:!0,subtree:!0}),()=>n.disconnect()},[e]),[t,a]}(a),m=function(e){const{values:t,updateStep:a}=Object(u.b)(),[o,r]=Object(n.useState)(q.idle);return Object(n.useEffect)(()=>{o!==q.processed&&(e?o!==q.idle?o===q.processing&&setTimeout(()=>r(q.processing2),j.c+100):r(q.processing):r(q.idle))},[o,e]),Object(n.useEffect)(()=>{t.result&&(r(q.processed),setTimeout(()=>a(t.step+1),1e3))},[t.result]),o}(a),{t:p}=Object(l.d)();return o.a.createElement("div",{className:"donation-form__stripe-buttons"},o.a.createElement(H.Button,{disabled:t&&!a,type:"button",className:Object(r.a)("donation-form__submit-button",m===q.processing&&"processing",m===q.processing2&&"processing phase2",m===q.processed&&"processed"),onClick:function(){a||i()}},o.a.createElement("span",{className:"donation-form__submit-button__icon-outer"},o.a.createElement("span",{className:"donation-form__submit-button__icon-inner"},o.a.createElement(H.Icon,{name:"favorite_border",size:"small"}))),o.a.createElement("span",{className:"donation-form__submit-button__text"},s),o.a.createElement("span",{className:"mini-progress-bar"},o.a.createElement("span",{className:"mini-progress-bar__inner",ref:c})),a&&o.a.createElement("span",{ref:d,className:"large-progress-bar","aria-label":p("Processing...")})))}const q={idle:"idle",processing:"processing",processing2:"processing2",processed:"processed"};function G(e){var t;return null==e||null===(t=e.name)||void 0===t?void 0:t.includes("__privateStripeFrame")}function z(e){return e.step>e.initialStep&&e.prevStep<=e.initialStep}function Y(e){return e.step<=e.initialStep&&e.prevStep>e.initialStep}function W(){return window.innerWidth<=736}const Z=(e,t,a)=>`Navigate to step ${t} of ${a.filter(e=>"thankyou"!==e).length} to ${{amount:"enter your donation amount",upsell:"upgrade your one time donation to a regular donation",details:"enter your details",giftAid:"opt into gift aid",payment:"enter your payment details"}[e]}`;function K({stepCount:e,domRef:t}){var a,i;const{values:s,updateStep:c,isPaymentGatewayProcessing:d,steps:m}=Object(u.b)(),p=Object(n.useRef)(),{t:f}=Object(l.d)(),{campaign:g}=useRaisely(),b=Array(e).fill(),h=e=>{c(e)},y=(null===(a=g.config.donation)||void 0===a||null===(i=a.campaignPreview)||void 0===i?void 0:i.isEnabled)&&s.inModal,v=d||s.result;return o.a.createElement("div",{className:"donation-form__step-select",ref:t,"aria-hidden":0===s.step},o.a.createElement("button",{type:"button",className:Object(r.a)("donation-form__step-select__back-btn",s.step>0&&"visible"),onClick:()=>h(s.step-1),disabled:!s.step||v},o.a.createElement(H.Icon,{name:"arrow_back",size:"small","aria-hidden":!0}),f("Back")),o.a.createElement("nav",null,b.map((e,t)=>{var a;const n=t===s.step;return o.a.createElement(o.a.Fragment,null,t>0&&o.a.createElement("div",{className:"donation-form__step-select__step__divider"}),o.a.createElement("button",{key:t,type:"button",className:Object(r.a)("donation-form__step-select__step",n&&"donation-form__step-select__step--active"),onClick:()=>h(t),disabled:t>s.step||v,"data-step-index":t,"aria-label":Z(m[t],t+1,m),"aria-current":n,ref:n?p:null},o.a.createElement(J,{isCompleted:s.step>t}),n&&o.a.createElement(Q,{currentIndex:t,prevRect:null===(a=p.current)||void 0===a?void 0:a.getBoundingClientRect(),showCampaignPreview:y}),o.a.createElement("span",{className:"visually-hidden"},f("Step [[stepNumber]]",{stepNumber:t+1}))))})))}function J({isCompleted:e}){return o.a.createElement("div",{className:Object(r.a)("completed",e&&"animate")},o.a.createElement("div",{className:"check"},o.a.createElement("div",{className:"stem"}),o.a.createElement("div",{className:"kick"})))}function Q({prevRect:e,currentIndex:t,showCampaignPreview:a}){const[i,l]=Object(n.useState)({}),[s,c]=Object(n.useState)(!1),{values:d}=Object(u.b)(),m=a&&!W()&&(z(d)||Y(d));return Object(n.useLayoutEffect)(()=>{if(!e||m)return;const a=document.querySelector(`[data-df-uuid="${d.formUuid}"] [data-step-index="${t}"]`),{x:n}=a.getBoundingClientRect(),o=e.x;l({x:-1*(n-o)})},[m]),Object(n.useEffect)(()=>{m||setTimeout(()=>c(!0),1)},[m]),o.a.createElement("div",{className:Object(r.a)("current",s&&"animate"),style:{transform:`translateX(${s?"0":i.x}px)`}},o.a.createElement("div",{className:"inner"}))}var X=a(228),ee=a(1004);function te({name:e,children:t}){var a,n;const{values:r,steps:i}=Object(u.b)(),{campaign:l}=useRaisely(),s=i[r.step]===e;let c="animated-step-"+(r.step>r.prevStep?"next":"back");return(null===(a=l.config.donation)||void 0===a||null===(n=a.campaignPreview)||void 0===n?void 0:n.isEnabled)&&r.inModal&&!W()&&(z(r)||Y(r))&&(c="animated-step-fade"),o.a.createElement(ee.a,{in:s,timeout:300,unmountOnExit:!0,classNames:c},o.a.createElement("div",{className:`donation-form__body__${e}-step`},"function"==typeof t?t():t))}var ae=a(78),ne=a(64),oe=a(262),re=a(321);a(39);function ie({id:e,classNames:t,styles:a}){var n,i;const{campaign:l}=useRaisely(),s=(null===(n=l.config.donation)||void 0===n||null===(i=n.campaignPreview)||void 0===i?void 0:i.logoUrl)||l.config.theme.logoUrl;return s?o.a.createElement(H.Image,{id:e,className:Object(r.a)("campaign-logo",t),src:s,options:{maxWidth:80},isLazy:!1,style:a,alt:""}):null}var le=function({step:e,initialStep:t}){var a;const{campaign:i}=useRaisely(),{t:s,tD:c}=Object(l.d)(),[u,d]=Object(n.useState)(()=>!W());if(W()&&e>t)return null;const[m,p,f]=Object(L.t)(i,null,{displayDollarPrefix:!0}),g=e>t?"animate-forward":"animate-back",{title:b,description:h,bgImageUrl:y=i.config.theme.backgroundUrl,isProgressEnabled:v,isNumDonorsEnabled:_}=null===(a=i.config.donation)||void 0===a?void 0:a.campaignPreview,E=v||_,k=h||E;return o.a.createElement("div",{className:Object(r.a)("campaign-preview",!W()&&g),style:{"--tDuration":j.c+"ms"}},o.a.createElement(ie,{id:"df-campaign-preview-logo"}),o.a.createElement("div",{className:"wrapper",style:{"--wrapperHeight":j.a+"px"}},o.a.createElement("div",{className:"title-with-image",style:{"--image-url":`url('${y}')`}},o.a.createElement("h4",null,c(b))),k&&o.a.createElement("div",{className:"details"},o.a.createElement("div",{className:Object(r.a)("details-wrapper",u&&"expanded")},h&&o.a.createElement("p",{className:"description"},c(h)),E&&o.a.createElement("div",{className:"data"},v&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"campaign-goal-progress"},o.a.createElement("div",null,o.a.createElement("p",{className:"heading"},s("Raised so far")),o.a.createElement("span",{className:"stat"},m),o.a.createElement("span",null,Math.ceil(f),"%")),o.a.createElement("div",null,o.a.createElement("p",{className:"heading"},s("Target")),o.a.createElement("span",{className:"stat"},p))),o.a.createElement(H.ProgressBar,{profile:i,size:"small"})),_&&o.a.createElement("div",{className:"donors"},o.a.createElement(H.Icon,{size:"small",name:"people_outline"}),o.a.createElement("span",null,o.a.createElement("b",null,i.uniqueDonors)," ",s("donors"))))),W()&&o.a.createElement("div",{className:"details-expanded-control"},o.a.createElement("button",{onClick:()=>d(!u)},s(u?"See less":"See more..."))))))},se=a(229),ce=a(258),ue=a(322),de=a(56);function me(){const{values:e,updateValues:t}=Object(u.b)(),a=Object(m.a)(e.fundSelectHeading,!1),n=Object(m.a)(e.fundSelectInputLabel,!1);return o.a.createElement("div",{className:null},o.a.createElement("h4",null,a),o.a.createElement(de.a,{type:"select",options:e.campaignFundOptions,label:n,value:e.selectedFundId,name:"campaignFundSelector",change:(e,a)=>{return n=a,void t(e=>e.set("selectedFundId",n));var n}}))}var pe=a(144),fe=a(81),ge=a(145);function be({renderStep:e,className:t,mainHeading:a,detailsHeading:l,paymentsHeading:p,currencySelection:b,customAmountPlaceholder:h,giftAidFields:N,thankYouTitle:C,thankYouMessage:x,customShareUrl:A,giftAid:D,isSwiftAidEnabled:R,recurring:F=!0,amount:I,minAmount:M,items:L,profileUuid:B,currency:H,user:$,registrationProfile:q,startOnAmountScreen:G,initialState:Z,onStepChange:J,onSuccess:Q,onFailure:ee,paymentButton:re,CustomDonateButton:ue,onTokenSuccess:de,additionalAmount:me,additionalClassname:pe,hideFee:fe,disableAnalytics:be,enableModal:ve,..._e}){var Ee,ke,we,Oe,Se,Te,Ne,Ce;const xe=Object(n.useRef)(null),je=useRaisely();let Pe=q;Pe||(Pe=Object(ae.c)(je.campaign,_e.values));const Ae=Object(c.b)({amount:I,items:L,currency:H,user:$,registrationProfile:Pe,startOnAmountScreen:G,giftAidEnabled:D,isSwiftAidEnabled:R,...Z||{}},{minAmount:M,profileUuid:B,onTokenSuccess:de,additionalAmount:me,hideFee:fe,disableAnalytics:be,enableModal:ve,version:"3"});!function(e,t,a,o){const{integrations:r,global:i}=useRaisely(!0);Object(n.useEffect)(()=>{a&&e.values.prevStep!==e.values.step&&a(e.values.step,o.current)},[e.values.step]),Object(n.useEffect)(()=>{var a,n,o,l,s,c,u,d,m,p,f,g,b,h,y,v;t||r.broadcast("donation.stage",{stage:e.values.step,values:e.values,profile:null==i||null===(a=i.current)||void 0===a?void 0:a.profile,formUuid:e.values.formUuid,availableFrequencies:e.availableFrequencies,availableAmounts:e.availableAmounts,campaignCurrency:i.campaign.currency,isDefaultDonationAmountEnabled:!1,hasCustomFees:!Boolean(i.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:Boolean(!i.campaign.showRaiselyCheckbox)&&Boolean(null===(n=i.campaign.config)||void 0===n||null===(o=n.fees)||void 0===o?void 0:o.custom)&&Boolean(null===(l=i.campaign.config)||void 0===l||null===(s=l.fees)||void 0===s?void 0:s.optInOnly),formSteps:e.steps,targetProfileUuid:e.targetProfileUuid,isPaymentDisabled:e.disablePayment,isExpress:!1,isGiftAidEnabled:e.values.giftAidEnabled,donationCustomFields:null===(c=i.campaign.config)||void 0===c||null===(u=c.customFields)||void 0===u?void 0:u.donation,stageName:e.steps[e.values.step],selectedAmount:e.values.amount,selectedCurrency:e.values.currency,selectedInterval:e.values.interval,isFeeOptInChecked:e.values.feeOptIn,presentedOptInAmount:e.optInAmount,isDonationFormV3:!0,isRegularGivingNudgeEnabled:Boolean(null===(d=i.campaign.config)||void 0===d||null===(m=d.donation)||void 0===m||null===(p=m.upsell)||void 0===p?void 0:p.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(f=i.campaign.config)||void 0===f||null===(g=f.donation)||void 0===g||null===(b=g.upsell)||void 0===b?void 0:b.isStepEnabled),isUserInModal:Boolean(e.values.inModal),isModalPreviewEnabled:Boolean(e.values.inModal&&(null===(h=i.campaign.config)||void 0===h||null===(y=h.donation)||void 0===y||null===(v=y.campaignPreview)||void 0===v?void 0:v.isEnabled))})},[r,e.values.step,t,e.availableFrequencies])}(Ae,be,J,xe),function(e,t){const{global:a,integrations:o}=useRaisely(!0);Object(n.useEffect)(()=>{var n,r,i,l,s,c,u,d,m,p,f,g,b,h,y,v;t||a.userAuthAttempted&&o.broadcast("donation.formLoaded",{profile:null===(n=a.current)||void 0===n?void 0:n.profile,formUuid:e.values.formUuid,availableFrequencies:e.availableFrequencies,availableAmounts:e.availableAmounts,campaignCurrency:a.campaign.currency,selectedAmount:e.values.amount,selectedCurrency:e.values.currency,selectedInterval:e.values.interval,isDefaultDonationAmountEnabled:!1,hasCustomFees:!Boolean(a.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(a.campaign.showRaiselyCheckbox)&&Boolean(null===(r=a.campaign.config)||void 0===r||null===(i=r.fees)||void 0===i?void 0:i.custom)&&Boolean(null===(l=a.campaign.config)||void 0===l||null===(s=l.fees)||void 0===s?void 0:s.optInOnly),formSteps:e.steps,targetProfileUuid:e.targetProfileUuid,isPaymentDisabled:e.disablePayment,isExpress:!1,isGiftAidEnabled:e.values.giftAidEnabled,donationCustomFields:null===(c=a.campaign.config)||void 0===c||null===(u=c.customFields)||void 0===u?void 0:u.donation,isDonationFormV3:!0,isRegularGivingNudgeEnabled:Boolean(null===(d=a.campaign.config)||void 0===d||null===(m=d.donation)||void 0===m||null===(p=m.upsell)||void 0===p?void 0:p.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(f=a.campaign.config)||void 0===f||null===(g=f.donation)||void 0===g||null===(b=g.upsell)||void 0===b?void 0:b.isStepEnabled),isUserInModal:Boolean(e.values.inModal),isModalPreviewEnabled:Boolean(e.values.inModal&&(null===(h=a.campaign.config)||void 0===h||null===(y=h.donation)||void 0===y||null===(v=y.campaignPreview)||void 0===v?void 0:v.isEnabled))})},[o,a.userAuthAttempted,e.values.formUuid,t])}(Ae,be),function(e){const{send:t}=Object(ne.b)("raisely-donationform-amount");Object(n.useEffect)(()=>{t&&e.values.amount&&t({amount:e.values.amount,currency:e.values.currency})},[e.values.amount,e.values.currency,t])}(Ae),function(e){Object(n.useEffect)(()=>{const{friendlyChallenge:t}=e.payments;e.values.prevStep>e.values.step?async function(){t.getPromise()&&await t.awaitSolution(),t.reset({startNow:!0,force:!0})}():1===e.values.step&&(t.start(),t.getPromise().catch(e=>{console.error(e)}))},[e.values.step])}(Ae);const[De,Re]=Object(d.a)(Ae,Q,ee),Fe=(null===(Ee=je.campaign.config.donation)||void 0===Ee||null===(ke=Ee.campaignPreview)||void 0===ke?void 0:ke.isEnabled)&&Ae.values.inModal,[Ie,Me,Le]=function(e,t){const[a,o]=Object(n.useState)();Object(n.useLayoutEffect)(()=>{if(!e||W())return;if(!(z(t)||Y(t)))return;const a=window.innerWidth>=900?35:70;o({x:z(t)?245-a:-245+a})},[t.step,e]);const[r,i]=Object(n.useState)();Object(n.useLayoutEffect)(()=>{if(!e||W())return;if(!z(t))return;const a=window.innerWidth>=900?0:70;i({stepX:-460+a,stepY:-20})},[t.step,e]);const[l,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{(z(t)||Y(t))&&!W()&&setTimeout(()=>s(!0),1)},[t.step,e]),Object(n.useEffect)(()=>{l&&setTimeout(()=>{s(!1),o(null),i(null)},j.c+50)},[l]),[l,a,r]}(Fe,Ae.values);if(function(e){const{actions:t}=useRaisely(!0);Object(n.useEffect)(()=>{if(e.isModalPreview&&e.inModal)return window.addEventListener("message",a),()=>window.removeEventListener("message",a);function a(e){["isEnabled","isProgressEnabled","isNumDonorsEnabled","bgImageUrl","title","description","viewport"].includes(e.data.key)&&t.dispatch(Object(s.a)("donation.campaignPreview."+e.data.key,e.data.value))}},[])}(Ae.values),function(e){const t=Object(ge.a)();Object(n.useEffect)(()=>{e.isModalPreview&&!e.inModal&&t(e,0)},[t])}(Ae.values),Ae.values.isModalPreview&&!Ae.values.inModal)return null;const Be=Fe&&Ae.values.step>Ae.values.initialStep||!Fe&&Ae.values.inModal,Ue=e||he;return o.a.createElement(o.a.Fragment,null,Fe&&o.a.createElement(le,{step:Ae.values.step,initialStep:Ae.values.initialStep}),o.a.createElement("div",{id:"donate",ref:xe,"data-df-uuid":Ae.values.formUuid,className:Object(r.a)("donation-form","donation-form--v3","donation-form--active-step-"+(Ae.values.step+1),Ie&&"animate",t,pe),style:{"--tDuration":j.c+"ms",...Me&&{transform:`translateX(${Me.x}px)`}}},Be&&o.a.createElement(ie,{id:"df-step-logo",classNames:Ie?"animate":null,styles:{...Le&&{"--logoX":Le.stepX+"px","--logoY":Le.stepY+"px"}}}),o.a.createElement(i.Elements,{stripe:Ae.payments.stripePromise,options:{...(null==Ae||null===(we=Ae.payments)||void 0===we?void 0:we.donationIntent)&&{clientSecret:null==Ae||null===(Oe=Ae.payments)||void 0===Oe?void 0:Oe.donationIntent.client_secret},appearance:{theme:"stripe",labels:"floating"},loader:"never"},key:`${null==Ae||null===(Se=Ae.payments)||void 0===Se||null===(Te=Se.campaignStripeProvider)||void 0===Te?void 0:Te.accountId}${null==Ae||null===(Ne=Ae.payments)||void 0===Ne||null===(Ce=Ne.donationIntent)||void 0===Ce?void 0:Ce.id}`},o.a.createElement(u.a,{value:Ae},o.a.createElement(Ue,{mainHeading:a,detailsHeading:l,paymentsHeading:p,giftAidFields:N,customAmountPlaceholder:h,currencySelection:b,paymentButton:re,CustomDonateButton:ue,afterPaymentSelect:De,onManualSubmit:Re,giftAidEnabled:D,thankYouTitle:C,thankYouMessage:x,customShareUrl:A,recurring:F,builtIns:{FrequencySelect:g,AmountSelect:y.a,Upsell:se.a,GivingLabel:f.b,GivingLabelWithHearts:f.c,MissingProviderNotice:X.a,OptIn:_.a,LegacyOptIn:v.a,CurrencySelect:E.a,PaymentDetails:k.a,PaymentMethodSelect:w.a,GiftAidOptIn:O.a,SwiftAidBanner:ce.a,AnonymousToggle:S.a,ErrorFeedback:T.a,ThankYouScreen:P,ManualPaymentForm:U.b,StepSelect:K,PaymentSubmitButton:V,StripeFields:U.a,StripePaymentElements:oe.a,AnimatedStep:te,useDonationFormContext:u.b,useInterpolatedMessage:m.a,useAnimateHeightChange:ye},onTokenSuccess:de,amount:I,startOnAmountScreen:G})))))}function he({mainHeading:e,detailsHeading:t,paymentsHeading:a,currencySelection:n,customAmountPlaceholder:i,giftAidFields:s,thankYouTitle:c,thankYouMessage:d,customShareUrl:p,paymentButton:b,CustomDonateButton:h,recurring:S,onTokenSuccess:N,afterPaymentSelect:C,onManualSubmit:x}){var A,D,R,F,I;const{campaign:M}=useRaisely(),{t:L}=Object(l.d)(),{values:B,amountMessageWithCurrency:H,payments:$,steps:q,totalAmount:G,calculatedTotal:z,experimentFlags:Y}=Object(u.b)(),Z=Object(m.a)(t,!1),J=Object(m.a)(a),[Q,ee,ae,ne]=ye(),ie=(null===(A=M.config.donation)||void 0===A||null===(D=A.campaignPreview)||void 0===D?void 0:D.isEnabled)&&B.inModal&&B.step<=B.initialStep&&!W()?j.a+40:0,le=!M.showRaiselyCheckbox&&null!==(R=M.config.fees)&&void 0!==R&&R.custom?v.a:_.a,de=q[B.step],ge=Boolean(null===(F=M.config.flags)||void 0===F?void 0:F.donationFunds)&&Boolean(null===(I=M.config.funds)||void 0===I?void 0:I.enabledCampaignMultifund)&&B.campaignFundOptions,be=!Object(pe.a)(fe.a.TBD_109_PAYPAL_REGULAR_GIVING).enabled;return o.a.createElement("div",{className:Object(r.a)("donation-form__body","upsell"===de&&"donation-form__body--upsell","details"===de&&"donation-form__body--details","payment"===de&&"donation-form__body--payment","thankyou"===de&&"donation-form__body--success",B.result&&"fade-out-payment-step"),ref:ee,style:{height:ie||Q}},"thankyou"!==de&&o.a.createElement(K,{stepCount:q.length-1,domRef:ne}),o.a.createElement("div",{className:"donation-form__step-wrapper",ref:ae},o.a.createElement(te,{name:"amount"},o.a.createElement(X.a,null),S&&o.a.createElement(g,null),e&&o.a.createElement("h2",{className:"donation-form__title"},e),o.a.createElement(y.a,{autoContinueOnAmountSelect:!0,customAmountPlaceholder:i}),o.a.createElement(E.a,{currencySelection:n}),ge&&o.a.createElement(me,null),o.a.createElement(w.a,{afterSelect:(e,t)=>C(e,t,q.length-1),hideWallets:!0,hidePaypal:be}),!Y.hidePaymentLogosExperiment&&o.a.createElement(ue.a,null)),o.a.createElement(te,{name:"upsell"},o.a.createElement(se.a,null)),o.a.createElement(te,{name:"details"},o.a.createElement(f.c,null),t&&o.a.createElement("h3",{className:"donation-form__title"},Z),o.a.createElement(k.a,{includeAnonymousToggle:!0})),o.a.createElement(te,{name:"giftAid"},o.a.createElement(f.c,null),o.a.createElement(O.a,{giftAidFields:s})),o.a.createElement(te,{name:"payment"},a&&o.a.createElement("h3",{className:"donation-form__title"},J),B.hasActiveSwiftAidAuth&&o.a.createElement(ce.a,null),o.a.createElement(w.a,{afterSelect:(e,t)=>C(e,t,q.length-1),hidePaypal:Boolean(N),hideManual:!0,customRender:(e,t)=>e?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:t},$.onlySupportsPaypal?e:o.a.createElement("fieldset",{className:"donation-form__method-payment__border"},o.a.createElement("legend",{className:"donation-form__method-payment__legend"},"Express Checkout"),e)),!$.onlySupportsPaypal&&o.a.createElement(re.a,{text:L("OR")})):null}),o.a.createElement("div",{className:"payment-form-wrapper"},o.a.createElement(U.b,{onSubmit:(e,t)=>x(e,t,q.length-1)},!$.onlySupportsPaypal&&o.a.createElement(oe.a,null),o.a.createElement(le,null),o.a.createElement("p",{className:"donation-form__currency-message"},H),o.a.createElement(T.a,null),$.campaignStripeProvider?o.a.createElement(V,{paymentButton:b,CustomDonateButton:h}):o.a.createElement("p",{className:"donation-form__spacer"}))),o.a.createElement("span",{"data-cy":"total",style:{display:"none"}},G),o.a.createElement("span",{"data-cy":"calculated-total",style:{display:"none"}},z)),"thankyou"===de&&o.a.createElement(P,{title:c,message:d,customShareUrl:p})))}function ye(){const e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),[o,r]=Object(n.useState)();return Object(n.useEffect)(()=>{if(!window.ResizeObserver||!e.current||!t.current)return;const n=e.current,o=t.current,i=a.current,l=(n.offsetHeight||700)-(o.offsetHeight||610),s=i?parseInt(window.getComputedStyle(i).marginTop||0):0,c=new ResizeObserver(()=>{const e=o.offsetHeight,t=i?parseInt(window.getComputedStyle(i).marginTop):0,c=t>s?t:0;let u=e;if(a.current)u+=l+c;else{const e=window.getComputedStyle(n);u+=parseInt(e.paddingTop)+parseInt(e.paddingBottom)}r(u)});return c.observe(o),()=>c.unobserve(o)},[]),[o,e,t,a]}const ve=e=>({renderStep:e.renderStep,className:e.className,customAmountPlaceholder:e.customAmountPlaceholder,mainHeading:e.mainHeading,detailsHeading:e.detailsHeading,paymentsHeading:e.paymentsHeading,giftAid:e.giftAid,giftAidFields:e.giftAidFields,isSwiftAidEnabled:e.isSwiftAidEnabled,thankYouTitle:e.thankYouTitle,thankYouMessage:e.thankYouMessage,customShareUrl:e.customShareUrl,currencySelection:e.currencySelection,amount:e.amount,startOnAmountScreen:e.startOnAmountScreen,minAmount:e.minAmount,items:e.items,profileUuid:e.profileUuid,currency:e.currency,registrationProfile:e.registrationProfile,user:e.user,initialState:e.initialState,onStepChange:e.onStepChange,onSuccess:e.onSuccess,onFailure:e.onFailure,onTokenSuccess:e.onTokenSuccess,paymentButton:e.paymentButton,CustomDonateButton:e.CustomDonateButton,recurring:e.recurring,additionalAmount:e.additionalAmount,autoconfigure:e.autoconfigure,additionalClassname:e.additionalClassname,hideFee:e.hideFee,disableAnalytics:e.disableAnalytics,enableModal:e.enableModal})},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(5),a(27);var n=a(0),o=a.n(n),r=a(183),i=a(3),l=a(17),s=a(8),c=a(103),u=a(26);function d({providedGiftAidFields:e}){var t,a;const{values:n,updateValues:i,updateStep:d,...p}=Object(l.b)(),{global:f,integrations:g}=useRaisely(!0),b=function(e,t){const a=Array.isArray(e)?e:Object(u.i)(t);return JSON.parse(JSON.stringify(a).replace(/{{amount}}/g,Object(s.f)(t.amount,t.currency)).replace(/{{amountWithGiftAid}}/g,Object(s.f)(1.25*t.amount,t.currency)).replace(/{{giftAidAmount}}/g,Object(s.f)(.25*t.amount,t.currency)))}(e,n),h=f.campaign.config.donation||{};let y=r.a;!n.isSwiftAidEnabled&&h.giftAidDeclaration&&(y=function(e,t){return e.replace(/\[donation.amount\]/g,Object(s.f)(t.amount,t.currency)).replace(/\[donation.amountWithGiftaid\]/g,Object(s.f)(1.25*t.amount,t.currency)).replace(/\[giftaid.amount\]/g,Object(s.f)(.25*t.amount,t.currency))}(h.giftAidDeclaration,n));const v=null===(t=n.details.private)||void 0===t?void 0:t.giftAid,_=f.customFields.donation.some(e=>"address"===e.type),E=Boolean(n.details.address1||(null===(a=n.details.private)||void 0===a?void 0:a.address)),k=v&&!(_&&E);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"donation-form__giftaid donation-form__giftaid--no-padding"},o.a.createElement(c.a,{values:n.details,fields:b,buttons:()=>null,onChange:e=>{!function(e,t,a,n){var o,r,i,l,s,c,u,d,m,p,f,g,b,h,y,v,_,E;if(n.disableAnalytics)return;const k=null!==(o=e.private)&&void 0!==o&&o.giftAid?"donation.giftAidChecked":"donation.giftAidUnchecked";t.broadcast(k,{formUuid:n.values.formUuid,currency:n.values.currency,amount:n.values.amount,stage:n.values.step,formSteps:n.steps,profile:null===(r=a.current)||void 0===r?void 0:r.profile,availableFrequencies:n.availableFrequencies,availableAmounts:n.availableAmounts,campaignCurrency:a.campaign.currency,isDefaultDonationAmountEnabled:n.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(a.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(a.campaign.showRaiselyCheckbox)&&Boolean(null===(i=a.campaign.config)||void 0===i||null===(l=i.fees)||void 0===l?void 0:l.custom)&&Boolean(null===(s=a.campaign.config)||void 0===s||null===(c=s.fees)||void 0===c?void 0:c.optInOnly),targetProfileUuid:n.targetProfileUuid,isExpress:n.isExpressForm,isGiftAidEnabled:n.values.giftAidEnabled,donationCustomFields:null===(u=a.campaign.config)||void 0===u||null===(d=u.customFields)||void 0===d?void 0:d.donation,stageName:n.steps[n.values.step],selectedAmount:n.values.amount,isFeeOptInChecked:n.values.feeOptIn,isGiftAidChecked:null===(m=e.private)||void 0===m?void 0:m.giftAid,selectedInterval:n.values.interval,selectedCurrency:n.values.currency,presentedOptInAmount:n.optInAmount,isDonationFormV3:n.isV3,isUserInModal:Boolean(n.values.inModal),isModalPreviewEnabled:Boolean(n.values.inModal&&(null===(p=a.campaign.config)||void 0===p||null===(f=p.donation)||void 0===f||null===(g=f.campaignPreview)||void 0===g?void 0:g.isEnabled)),isRegularGivingNudgeEnabled:Boolean(null===(b=a.campaign.config)||void 0===b||null===(h=b.donation)||void 0===h||null===(y=h.upsell)||void 0===y?void 0:y.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(v=a.campaign.config)||void 0===v||null===(_=v.donation)||void 0===_||null===(E=_.upsell)||void 0===E?void 0:E.isStepEnabled)})}(e,g,f,{values:n,...p}),i(t=>{var a;const o=(null===(a=e.private)||void 0===a?void 0:a.giftAid)||!1;t.set("details.private.giftAid",o),n.isSwiftAidEnabled&&t.set("details.private.swiftAid",o),o&&t.set("details.giftAidText",y)})}}),o.a.createElement("div",{className:"donation-form__giftaid__declaration"},o.a.createElement("p",null,y),n.isSwiftAidEnabled&&o.a.createElement("p",null,"I accept Swiftaid's"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.swiftaid.co.uk/legal/terms"},"Terms")," ","and"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.swiftaid.co.uk/legal/privacy"},"Privacy Policy")," ","and authorise them to Gift Aid all of my donations since the start of this tax year until its end, including those I have not opted to Gift Aid. I wish this to also apply to the next tax year when this authorisation is given between 1 March and 5 April, inclusive.")),k?o.a.createElement("div",{className:"donation-form__giftaid__address-form"},o.a.createElement("p",null,"Please enter your address"),o.a.createElement(c.a,{global:f,values:n.details,formType:"donation",fields:[{label:"Address",id:"address",type:"address",private:!0,active:!0,core:!1,config:{source:"getAddress"},visible:!0,required:!0}],action:function(e){return i(t=>{t.set("details",{...n.details,...e,private:{...n.details.private,...e.private}}),d(n.step+1,t)})},buttons:({onSubmitClick:e})=>o.a.createElement(m,{onNextClick:e})})):o.a.createElement(m,{onNextClick:()=>d(n.step+1)})))}function m({onNextClick:e}){const{values:t,updateStep:a,isV3:n}=Object(l.b)(),{t:r}=Object(i.d)();return o.a.createElement("div",{className:"form__navigation"},o.a.createElement("nav",{className:"donation-form__nav"},!n&&o.a.createElement("button",{className:"button button--standard button--primary donation-form__back",onClick:e=>{e.preventDefault(),a(t.step-1)}},o.a.createElement("span",{className:"icon icon--default icon--small icon--id-chevron_left "},o.a.createElement("i",{"data-icon-name":"chevron_left",className:"material-icons"},"chevron_left"))),o.a.createElement("button",{type:"submit",className:"button button--standard button--primary donation-form__next in-form--next",onClick:e},r("Next")," ",o.a.createElement("span",{className:"icon icon--default icon--small icon--id-chevron_right "},o.a.createElement("i",{"data-icon-name":"chevron_right",className:"material-icons"},"chevron_right")))))}},187:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),o=a.n(n),r=a(17);function i({customError:e}){const{error:t}=Object(r.b)();return t||e?o.a.createElement("div",{className:"donation-form__message donation-form__message--error","data-cy":"form-error"},o.a.createElement("p",null,(null==t?void 0:t.message)||t||e)):null}},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(1),s=a.n(l),c=a(3),u=a(24),d=a.n(u),m=a(10),p=a(71),f=a(2),g=a.n(f),b=a(33),h=a(16);class y extends i.a.Component{constructor(...e){super(...e),g()(this,"state",{paymentDetails:[],selected:null,completed:!1}),g()(this,"addPaymentDetails",e=>{if(e.length<1)return void this.setState({completed:!0});const t=e.find(e=>e.id===this.props.donation.card),a=e.filter(e=>e.type===t.type);this.setState({paymentDetails:a,selected:t,completed:!0})}),g()(this,"preview",e=>{const{t:t}=Object(c.a)();if(e)return i.a.createElement(i.a.Fragment,null,"card"===e.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"raisely-select-payment-detail__card-logo"},i.a.createElement("img",{src:`https://admin.raisely.com/public/cards/${e.brand}.png`})),i.a.createElement("div",{className:"raisely-select-payment-detail__card-details"},i.a.createElement("span",{className:"raisely-select-payment-detail__card-last-4"},t("[[cardType]] ending in [[lastFour]]",{cardType:e.brand,lastFour:e.last4})),i.a.createElement("span",{className:"raisely-select-payment-detail__card-expiration"},t("Expires [[expirationDate]]",{expirationDate:`${e.expMonth.toString().padStart(2,"0")}/${e.expYear.toString().slice(-2)}`})))),"bacs_debit"===e.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"raisely-select-payment-detail__card-logo"},i.a.createElement(h.a,{name:"account_balance"})),i.a.createElement("span",{className:"raisely-select-payment-detail__card-last-4"}," ",e.sortCode,"-****",e.last4)),"au_becs_debit"===e.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"raisely-select-payment-detail__card-logo"},i.a.createElement(h.a,{name:"account_balance"})),i.a.createElement("span",{className:"raisely-select-payment-detail__card-last-4"}," ",e.bsb_number,"-****",e.last4)))})}componentDidMount(){const e={campaign:this.props.global.campaign.uuid,[m.a.avoidCampaignQuery]:"organisation"===this.props.source};this.props.donation&&(e.subscription=this.props.donation.uuid),m.a.users.paymentDetails.getAll({id:this.props.global.user.uuid,query:e}).then(e=>this.addPaymentDetails(e.body().data().data)).catch(()=>this.setState({completed:!0}))}render(){const{t:e}=Object(c.a)();return 0===this.state.paymentDetails.length&&this.state.completed?null:!this.props.global.user||0===this.state.paymentDetails.length&&!this.state.completed?i.a.createElement("div",{className:"raisely-select-payment-detail raisely-select-payment-detail--loading"},i.a.createElement(b.b,{sceneHeight:"30vh"})):i.a.createElement("div",{className:"raisely-select-payment-detail"},!this.props.hideLabel&&i.a.createElement("label",null,e("Select an existing")),i.a.createElement("ul",{className:"raisely-select-payment-detail__menu"},i.a.createElement("li",null,i.a.createElement("span",{className:"raisely-select-payment-detail__menu-item no-pointer raisely-select-payment-card_menu-item--selected"},this.preview(this.state.selected)))),this.props.extra&&this.props.extra())}}var v=a(11),_=a(160),E=a(38),k=a(213),w=a(219),O=a(102),S=a(81);function T({values:e,change:t,...a}){const{t:n}=Object(c.d)(),r=[{key:"WEEK",interval:"WEEK",count:1,configKey:"enableWEEK",label:n("Weekly")},{key:"2WEEK",interval:"WEEK",count:2,configKey:"enable2WEEK",label:n("Fortnightly")},{key:"4WEEK",interval:"WEEK",count:4,configKey:"enable4WEEK",label:n("4 Weeks")},{key:"MONTH",interval:"MONTH",count:1,configKey:"enableMONTH",label:n("Monthly")},{key:"3MONTH",interval:"MONTH",count:3,configKey:"enableQUARTER",label:n("Quarterly")},{key:"YEAR",interval:"YEAR",count:1,configKey:"enableYEAR",label:n("Yearly")}],{campaign:l}=useRaisely(),s=r.filter(e=>l.config.subscriptions[e.configKey]);let u=s.find(t=>t.interval===e.interval&&t.count===e.count);return u||(u={key:"CUSTOM",interval:e.interval,count:e.count,label:`${e.count} ${e.interval.toLowerCase()}s`},s.push(u)),i.a.createElement(_.a,o()({},a,{options:s.map(e=>({value:e.key,label:e.label})),change:(e,a)=>{const n=s.find(e=>e.key===a);t("interval",n.interval),t("count",n.count)},value:u.key}))}function N(e){const{global:t,actions:a,donation:n,isFeeFixEnabled:l}=e,[s,u]=Object(r.useState)("details"),[d,f]=Object(r.useState)(!1),[g,b]=Object(r.useState)(n),{t:h}=Object(c.d)(),_=[{active:!0,core:!0,id:"amount",label:h("Amount"),locked:!1,private:!1,required:!0,type:"currency"},{active:!0,core:!0,id:"currency",label:h("Currency"),locked:!1,private:!1,required:!0,type:"select-currency"},{active:!0,core:!0,id:"frequency",label:h("Frequency"),locked:!1,private:!1,type:"custom",render:T}],O=t=>()=>m.a.subscriptions.update({id:n.uuid,data:{data:t},query:{[m.a.avoidCampaignQuery]:"organisation"===e.source}}).then(()=>{a.triggerPageStreamRefetch()}),S=O({status:"PAUSED"}),N=O({status:"OK"}),C=O({status:"CANCELLED"}),x=e=>O({card:e.id}),j="OK"===n.status?i.a.createElement(v.a,{onClick:S,theme:"secondary"},h("Pause regular donation")):i.a.createElement(v.a,{onClick:N,theme:"secondary"},h("Activate regular donation")),P=e=>{f(!1),e&&b(e)};return i.a.createElement("div",{className:"raisely-regular-donation-form"},i.a.createElement("nav",{className:"tabs"},i.a.createElement("button",{className:"tabs__tab tabs__tab--"+("details"===s?"active":"inactive"),type:"button",onClick:()=>u("details")},h("Details")),i.a.createElement("button",{className:"tabs__tab tabs__tab--"+("methods"===s?"active":"inactive"),type:"button",onClick:()=>u("methods")},h("Payment Method"))),"details"===s&&i.a.createElement("div",{className:"tabs__tab-content tabs__tab-content--active"},i.a.createElement(p.a,{buttonFullWidth:!0,values:n,fields:_,action:async(t,a)=>{try{await e.api.subscriptions.update({id:n.uuid,data:{data:{amount:t.amount,currency:t.currency,count:t.count,interval:t.interval,fee_opt_in:n.feeOptIn,fee:l?void 0:n.fee}},query:{[m.a.avoidCampaignQuery]:"organisation"===e.source}}),e.actions.addMessage(h("Regular donation was successfully updated")),e.actions.triggerPageStreamRefetch()}catch(t){e.actions.addErrorMessage(t)}a.setSubmitting(!1)},actionText:h("Save")})),"methods"===s&&i.a.createElement("div",{className:"tabs__tab-content tabs__tab-content--active"},n.methodType&&n.methodType.startsWith("DD")?i.a.createElement(i.a.Fragment,null,i.a.createElement(y,{hideLabel:!0,global:t,select:x,donation:g,source:e.source,key:null==g?void 0:g.updatedAt}),i.a.createElement(v.a,{onClick:()=>{f(!0)},className:"button--full"},h("Update your bank details")),i.a.createElement("hr",null),i.a.createElement("div",{className:"raisely-regular-donation-form__buttons button-row"},"CANCELLED"!==n.status&&i.a.createElement(i.a.Fragment,null,j,i.a.createElement(v.a,{onClick:C},h("Cancel"))))):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"raisely-regular-donation-form__card-detail"},i.a.createElement(y,{hideLabel:!0,global:t,select:x,donation:g,source:e.source,key:null==g?void 0:g.updatedAt}),i.a.createElement(v.a,{onClick:()=>{f(!0)},className:"button--full"},h("Edit card details"))),i.a.createElement("hr",null),i.a.createElement("div",{className:"raisely-regular-donation-form__buttons button-row"},"CANCELLED"!==n.status&&j,"CANCELLED"===n.status?i.a.createElement(v.a,{onClick:N,theme:"secondary"},h("Activate regular donation")):i.a.createElement(v.a,{onClick:C,theme:"secondary"},h("Cancel regular donation"))))),d&&i.a.createElement(E.a,{button:!1,onClose:P,classNames:"raisely-regular-donation-form__card-detail__modal",automatic:!0,modalContent:()=>n.methodType&&n.methodType.startsWith("DD")?i.a.createElement(w.a,o()({subscription:n,dismiss:P},e)):i.a.createElement(k.a,o()({subscription:n,dismiss:P},e))}))}N.propTypes={donation:s.a.object,updated:s.a.func,global:s.a.object};var C=Object(O.b)(e=>{var t;return{isFeeFixEnabled:Boolean(null===(t=e.featureFlags[S.a.TBD_115_FEE_ADJUST_FIX_ON_SUBSCRIPTION_UPDATE])||void 0===t?void 0:t.enabled)}})(N),x=a(8);function j({donation:e,onClick:t,isSelected:a,disabledEdit:n=!1,...l}){const{t:s}=Object(c.d)(),[u,m]=Object(r.useState)(a),p=Object(x.f)(e.total,e.currency);return e.status?i.a.createElement("div",{className:`regular-donation-tile regular-donation-tile--${e.status.toLowerCase()}${u?" regular-donation-tile--selected":""}`},i.a.createElement("div",{className:"regular-donation-tile__header"},i.a.createElement("span",{className:"regular-donation-tile__amount"},p),i.a.createElement("div",{className:"regular-donation-tile__content"},i.a.createElement("p",{className:"regular-donation-tile__content__title"},i.a.createElement("span",{className:"regular-donation-tile__label"},e.status),s("Regular Donation to [[target]]",{target:e.profile.name})),i.a.createElement("p",{className:"regular-donation-tile__content__details"},i.a.createElement("span",null,"Every "),1===e.count&&i.a.createElement("strong",null,e.interval.toLowerCase()),e.count>1&&i.a.createElement("strong",null,e.count," "," ",e.interval.toLowerCase(),"s")),e.failed&&i.a.createElement("p",{className:"regular-donation-tile__content__details"},i.a.createElement("span",null,i.a.createElement("span",null,s("Failed [[times]] times",{times:e.failed})),e.failedAt&&i.a.createElement("span",null,"Last Attempt:"," ",d()(e.failedAt).format("YYYY-MM-DD"),""),e.error&&i.a.createElement("span",null,e.error.message," "))),!e.failed&&!e.error&&"CANCELLED"!==e.status&&i.a.createElement("p",{className:"regular-donation-tile__content__details"},i.a.createElement("span",null,i.a.createElement("span",null,s("Next Payment"),": "),i.a.createElement("strong",null,d()(e.nextPayment).format("YYYY-MM-DD")),"  -  "," ",d()().to(e.nextPayment))),!n&&!u&&i.a.createElement("button",{className:"regular-donation-tile__settings-button-manage button button--standard button--primary button--small",onClick:()=>{t(e)||m(!u)}},i.a.createElement("span",{className:"regular-donation-tile__settings-button-manage__text"},s("Manage regular donation")))),!n&&u&&i.a.createElement("button",{className:"regular-donation-tile__settings-button-cancel",onClick:()=>t(e)||m(!u)},i.a.createElement(h.a,{name:"expand_less",size:"small",theme:"inherit","":!0}),s("Close"))),!n&&u&&i.a.createElement(C,o()({},l,{donation:e}))):null}j.propTypes={donation:s.a.object}},202:function(e,t,a){"use strict";a.d(t,"b",(function(){return k})),a.d(t,"a",(function(){return O}));a(5),a(63);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(29),s=a(24),c=a.n(s),u=a(60),d=a.n(u),m=a(7),p=a.n(m),f=a(125),g=a(8),b=a(307),h=a(3);const y=["small","medium","large"],v=["basic","tile"],_=["default","inverted"],E=(e,t,a,n)=>["donation-tile","donation-tile--"+e,"donation-tile--"+t,"donation-tile--"+a,n?"donation-tile--can-thank":null].filter(e=>e).join(" ");function k(e,t,a){const{t:n}=Object(h.d)(),{campaign:o}=useRaisely();if(!e)return[];const[r,i]=function(e,t){const{t:a}=Object(h.a)(),n=a("Anonymous"),o=a("You");let r=[e.firstName];e.lastName&&(r=[e.firstName,e.lastName]);const i=e.fullName&&!e.lastName;if(i&&(r=[e.fullName]),e.anonymous&&(r=[n]),e.user&&t.uuid===e.user.uuid){const{t:e}=Object(h.a)();r=[o]}const l={};return i&&![n,o].includes(r[0])&&(l.isFullName=!0),[r,l]}(e,t),l=1===r.length,s=i.isFullName;let c;if(a){var u,d;const t=Boolean("INDIVIDUAL"===(null===(u=e.profile)||void 0===u?void 0:u.type)&&(null===(d=e.profile)||void 0===d?void 0:d.pronouns))?`(${e.profile.pronouns.trim()})`:null,a=t?`${e.profile.name} ${t}`:e.profile.name;c=Object(h.c)(({firstName:e,fullName:t,lastName:a,target:o})=>l?s?n("[[fullName]] donated to [[target]]",{fullName:t,target:o}):n("[[firstName]] donated to [[target]]",{firstName:e,target:o}):n("[[firstName]] [[lastName]] donated to [[target]]",{firstName:e,lastName:a,target:o}),{firstName:r[0],fullName:r[0],lastName:r[1],target:a})}else c=Object(h.c)(({firstName:e,fullName:t,lastName:a,target:o})=>l?s?n("[[fullName]] donated",{fullName:t,target:o}):n("[[firstName]] donated",{firstName:e,target:o}):n("[[firstName]] [[lastName]] donated",{firstName:e,lastName:a,target:o}),{firstName:r[0],fullName:r[0],lastName:r[1]});const m=c.findIndex(e=>["firstName","lastName","fullName"].includes(e.name)),p=c.findIndex(e=>["firstName","lastName","fullName"].includes(e.name),m);return{beforeNames:c.slice(0,Math.max(0,m-1)),names:c.slice(m,p+1),afterNames:c.slice(p+1)}}function w({donation:e,campaign:t,user:a}){const n=(e=>null!==p()(e,"profile.path",null))(e)&&e.profile.path!==t.path?e.profile.name:null,{beforeNames:r,names:i,afterNames:s}=k(e,a,n),c=({name:t,value:a})=>{if("target"===t)return o.a.createElement(l.a,{key:t||a,to:"/"+e.profile.path},a);if(["firstName","lastName","fullName"].includes(t)){const e=d()(t);return o.a.createElement("em",{key:t||a,className:"donation-tile__content__donor__"+e},a)}return o.a.createElement("span",{key:t||a},a)};return o.a.createElement("p",{className:"donation-tile__content__activity"},r.map(c),o.a.createElement("span",{className:"donation-tile__content__donor"},i.map(c)),s.map(c))}function O({donation:e,detail:t,theme:a,size:n,campaign:r,user:i,showAsLoading:l,displayThanks:s,displayThanksForm:u,onThanksSuccess:d,onThanksFailure:m,actions:h}){var k;const O=y.includes(n)?n:"medium",S=v.includes(t)?t:"basic",T=_.includes(a)?a:"default",N=useRaisely().detectedCurrency,C=(null==e?void 0:e.currency)!=r.currency||((null==i||null===(k=i.profile)||void 0===k?void 0:k.currency)||N)!=r.currency,x=l?" ":Object(g.f)(e.displayTotal,e.currency,{displayDollarPrefix:C}),j=p()(r,"config.thankyou",{}),P=Object(g.n)(i,null==e?void 0:e.profile),A="FACEBOOK"===(null==e?void 0:e.method);switch(S){case"tile":case"basic":return o.a.createElement("div",{className:E(S,T,O,j.enabled&&P&&u)},l&&o.a.createElement(f.a,{reverse:!0,style:{height:"3rem",width:"100%"}}),!l&&o.a.createElement("div",{className:"donation-tile__amount"},o.a.createElement("span",null,x)),!l&&o.a.createElement("div",{className:"donation-tile__content"},o.a.createElement(w,{donation:e,user:i,campaign:r,displayAmount:x}),o.a.createElement("p",{className:"donation-tile__content__timestamp"},c()(e.date).fromNow()),e.message&&o.a.createElement("p",{className:"donation-tile__content__message"},o.a.createElement("em",null,`"${e.message}"`)),!A&&o.a.createElement(b.a,{donation:e,displayThanks:s,profileIsOwnedByLoggedInUser:P,displayThanksForm:u,onThanksSuccess:d,onThanksFailure:m,baseClass:"donation-tile"})));default:return""}}O.propTypes={donation:i.a.object,campaign:i.a.object,user:i.a.object,showAsLoading:i.a.bool,detail:i.a.oneOf(v),theme:i.a.oneOf(_),size:i.a.oneOf(y),displayThanks:i.a.bool,displayThanksForm:i.a.bool,onThanksSuccess:i.a.func,onThanksFailure:i.a.func}},204:function(e,t,a){"use strict";a(5);var n=a(0),o=a.n(n),r=a(157),i=a.n(r);t.a=({total:e,itemHeight:t=60,width:a=400})=>{const[r,l]=Object(n.useMemo)(()=>function(e,t,a){const r=[],i=Math.ceil(t/6);for(let n=0;n<e;n++)r.push(o.a.createElement("rect",{x:"0",y:n*(t+i),rx:"4",ry:"4",width:a,height:t}));const l=e*(t+i);return[o.a.createElement(n.Fragment,null,r),l]}(e,t,a),[e,t,a]);return o.a.createElement(i.a,{speed:1,height:l},r)}},205:function(e,t,a){"use strict";a(5);var n=a(0),o=a.n(n),r=(a(58),a(1)),i=a.n(r),l=a(706),s=a(21),c=a.n(s),u=a(29),d=a(32),m=a.n(d),p=a(80),f=a.n(p);const g=["default"],b=["medium"],h=(e,t)=>`dropdown dropdown--${e} dropdown--${t}`,y=(e,t)=>`dropdown__tab dropdown__tab--${e} dropdown__tab--${t?"open":"closed"}`,v=e=>f()(e)&&"string"==typeof e.link&&"string"==typeof e.title;function _({link:e,title:t,textTitle:a}){const[r,i]=Object(n.useState)(!1);return o.a.createElement("div",{className:y("function"==typeof onMouseOver?"button":"link",r)},o.a.createElement(u.a,{className:"dropdown__tab__label",to:e||"#"},a||c()(t||"")),o.a.createElement("button",{className:"dropdown__tab__toggle dropdown__tab__toggle--"+(r?"open":"closed"),onClick:()=>i(!r)}))}function E({menu:e,title:t,textTitle:a,path:n}){const r=e.filter(v);return o.a.createElement("ul",{className:"dropdown__menu"},o.a.createElement("span",{className:"dropdown__menu__caret"},a||c()(t||"")),o.a.createElement("span",{className:"dropdown__menu__hover-area"}),r.map(({link:e,title:t,textTitle:a,shouldOpenInNewTab:r})=>o.a.createElement("li",{key:m()(),className:"dropdown__menu__item"},o.a.createElement(u.a,{to:e,className:"dropdown__menu__item-link "+(e===n?"dropdown__menu__item--is-active":""),shouldOpenInNewTab:r},a||c()(t||"")))))}const k=({theme:e,size:t,link:a,title:n,textTitle:r,subMenu:i,isAccountMenu:l,location:s})=>{const c=Array.isArray(i)&&i.length>0,u=g.includes(e)?e:"default",d=b.includes(t)?t:"medium";return o.a.createElement("div",{className:h(u,d)},o.a.createElement(_,{link:a,title:n,textTitle:r}),c?o.a.createElement(E,{menu:i,title:n,textTitle:r,path:s.pathname}):"",l&&o.a.createElement("div",{className:"dropdown__image-overlay"}))};t.a=Object(l.a)(k),k.propTypes={title:i.a.string,textTitle:i.a.string,subMenu:i.a.arrayOf(i.a.shape({link:i.a.string.isRequired,title:i.a.string.isRequired})),link:i.a.string,theme:i.a.oneOf(g),size:i.a.oneOf(b)}},206:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(707),u=a(1),d=a.n(u),m=a(32),p=a.n(m),f=a(87);class g extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{step:0,containerUuid:p()(),disablePrompt:!1,componentHasMounted:!1}),i()(this,"containerRef",s.a.createRef()),i()(this,"updateStep",e=>{let t;this.props.onNavigate&&(t=this.props.onNavigate(e)),t||0===t||(t=e),this.setState({step:t},()=>{setTimeout(()=>{Object(f.a)(this.containerRef.current)},10)})}),i()(this,"disableNavPrompt",()=>{this.state.disablePrompt||this.setState({disablePrompt:!0})}),i()(this,"enableNavPrompt",()=>{this.state.disablePrompt&&this.setState({disablePrompt:!1})}),i()(this,"Stages",()=>s.a.createElement("div",{className:this.props.name+"__stages"},s.a.createElement("div",{className:this.props.name+"__stages__inner"},this.props.steps.map((e,t)=>{const a=this.state.step<t||this.props.values.disableBack;return t===this.props.steps.length-1?null:s.a.createElement("button",{"aria-label":"Stage "+(t+1),className:`${this.props.name}__stage ${this.state.step===t?` ${this.props.name}__stage--active `:""}${a?` ${this.props.name}__stage--past-step`:""}`,disabled:a,onClick:()=>a?null:this.setState({step:t})},t+1)})))),i()(this,"next",()=>this.updateStep(Math.min(this.props.steps.length-1,this.state.step+1))),i()(this,"back",()=>this.updateStep(Math.max(0,this.state.step-1)))}componentDidMount(){this.setState({componentHasMounted:!0})}render(){const{Stages:e,props:t,state:a}=this,n=t.steps[a.step],r=t.promptOnLeave&&a.componentHasMounted&&!a.disablePrompt&&0!==a.step;return s.a.createElement("div",{id:"form-"+a.containerUuid,ref:this.containerRef,className:`${t.name}${t.variant?" "+t.variant:""}`},r&&s.a.createElement(c.a,{message:t.promptOnLeave}),s.a.createElement("div",{className:t.name+"__header"},s.a.createElement(e,null)),t.error&&s.a.createElement("div",{className:t.name+"__error"},s.a.createElement("p",null,t.error.message)),s.a.createElement("div",{className:t.name+"__body"},s.a.createElement(n,o()({},t,{step:a.step,updateStep:this.updateStep,next:this.next,back:this.back,disableNavPrompt:this.disableNavPrompt,enableNavPrompt:this.enableNavPrompt}))))}}g.propTypes={name:d.a.string,promptOnLeave:d.a.string,values:d.a.object,updateValues:d.a.func,steps:d.a.arrayOf(d.a.func),onNavigate:d.a.func},t.a=g},207:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(5),a(27);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(11),s=a(3),c=a(13);function u({buttonText:e,isSignUp:t=!1,values:a,step:n}){const{t:r}=Object(s.d)(),i=r(e||"Continue via organisation login"),{campaign:u}=useRaisely();return o.a.createElement("div",{className:"saml-login-button"},o.a.createElement(l.a,{theme:"saml",className:"saml-login-button__button",onClick:e=>(e.preventDefault(),window.location.replace(`${Object(c.f)(!0)}/saml/login?organisationUuid=${window.campaignData.organisationUuid}&campaignUuid=${window.campaignData.uuid}${t?"&isSignUp="+(()=>{const e=(new Date).getTime();return localStorage.setItem(`${u.path}-signup-${e}`,JSON.stringify({...a,currentStep:n})),e})():""}`))},i))}u.propTypes={buttonText:i.a.string}},208:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(5),a(271),a(173),a(27);var n=a(0),o=a.n(n),r=a(3);function i(e,t){const a=Object.values(t.config.languages||{}),o=Object(n.useMemo)(()=>function(e){const t=new Map,a=Array.from(window.translationConfigs||[]);return e.map(e=>{const n=a.find(t=>t.language===e);n&&n.isActive&&t.set(e,{title:n.displayName,selectLabel:n.displayName})}),t.size||t.set("en",{title:"English (fallback)",selectLabel:"English"}),t}(a),[...a]);return{currentLanguage:o.get(e),availableLanguages:o}}function l(){const{i18n:e}=Object(r.d)(),{campaign:t}=useRaisely(),[a,l]=Object(n.useState)(!1),s=e.resolvedLanguage,{currentLanguage:c,availableLanguages:u}=i(s,t);if(1===u.size)return null;const d=()=>l(!a);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"language_select_bar"},o.a.createElement("div",{className:"language_select_bar__select-container"},o.a.createElement("button",{className:"language_select_bar__select-toggle",value:s,onClick:()=>l(!a)},o.a.createElement("i",{className:"material-icons"},"language"),c.title,o.a.createElement("i",{className:"material-icons"},"expand_more")))),o.a.createElement("div",{onClick:d,className:"language_select_menu__backdrop language_select_menu__backdrop--"+(a?"active":"inactive")}),o.a.createElement("div",{className:"language_select_menu language_select_menu--"+(a?"open":"closed")},o.a.createElement("div",{className:"language_select_menu__top"},o.a.createElement("button",{onClick:d,className:"language_select_menu__exit"},o.a.createElement("i",{className:"material-icons"},"close"))),o.a.createElement("div",{className:"language_select_menu__select-box"},Array.from(u.keys()).map(e=>o.a.createElement("button",{key:e,onClick:()=>function(e,t){const a=new URL(window.location.href),n="/"+t,o="/"+e;a.pathname.startsWith(n)?a.pathname=a.pathname.replace(n,o):a.pathname=o+a.pathname,window.location.href=a.toString()}(e,s),className:"language_select_menu__option"},u.get(e).selectLabel,e===s&&o.a.createElement("i",{className:"material-icons"},"done"))))))}},209:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(2),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(48),s=a(6),c=a(8),u=a(33);class d extends i.a.Component{constructor(...e){super(...e),o()(this,"state",{loading:!0,message:null}),o()(this,"submitData",async()=>{const{updateStep:e,step:t,api:a,actions:n,values:o,global:r}=this.props,{loginToken:i}=o,u=this.props.global.campaign.uuid,d=Object.assign({},o);delete d.loginToken,d.settings.createTeam||(d.teamProfile=null);try{var m;const e=new l.a("registration",this.props.global.campaign),t=await e.awaitSolution();t&&e.reset();const p=(await a.campaigns.register({id:u,data:{data:d,challengeSolution:t}})).body().data(),{message:f,profile:g}=p,b=i||p.token;if(this.props.integrations.broadcast("user.signup",{method:o.wasFacebookSignup?"facebook":"email",user:{email:o.user.email,firstName:o.user.firstName,lastName:o.user.lastName,fullName:o.user.fullName,preferredName:o.user.preferredName,public:o.user.public,private:o.user.private}}),this.props.integrations.broadcast("profile.created",{profile:g,user:{email:o.user.email,firstName:o.user.firstName,lastName:o.user.lastName,fullName:o.user.fullName,preferredName:o.user.preferredName,public:o.user.public,private:o.user.private}}),p.donation){const e={...d.donation||{}};delete e.token,Object.assign(e,{email:o.user.email,firstName:o.user.firstName,lastName:o.user.lastName,fullName:o.user.fullName,preferredName:o.user.preferredName});const t={values:e,response:p.donation,profile:p.profile};this.props.integrations.broadcast("donation.success",t)}if(!b&&!r.user&&!r.user.uuid)return this.setState({message:f,loading:!1}),void this.props.updateValues({disableBack:!0});const h=r.user?r.user:(await a.users.setTokenGetUser(b)).body().data().data,{profile:y,profiles:v,collectiveProfiles:_,teamProfile:E,organisationProfile:k}=await Object(s.g)(r,!0);Object.assign(h,{profile:y,profiles:v,collectiveProfiles:_,teamProfile:E,organisationProfile:k}),r.user||n.addUser(h),null!==(m=p.donation)&&void 0!==m&&m.donationTotal&&n.updateProfileTotal("user.profile",Object(c.j)(p.donation.donationTotal,p.donation.currency,y.currency)),this.props.history.push("/dashboard")}catch(a){console.error(a),console.log(this);const n=()=>e(t-1);this.props.updateValues({error:{message:a.response&&a.response.data?a.response.data.errors[0].message:"We couldn't register you due to an unexpected error. Please try again."}},n,["donation"]),d.donation&&this.props.integrations.broadcast("donation.error",a)}})}componentDidMount(){this.props.disableNavPrompt(),this.submitData()}render(){return this.state.loading?i.a.createElement("div",{className:"signup-form__loading"},i.a.createElement(u.b,null),i.a.createElement("p",null,"One moment...")):i.a.createElement("div",{className:"signup-form__complete"},i.a.createElement("p",null,this.state.message))}}},213:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(3),u=a(66),d=a(134),m=a(33),p=a(11),f=a(93),g=a(312);const b=({brandName:e})=>e?s.a.createElement("img",{src:`https://admin.raisely.com/public/cards/${e}.png`,className:"form-field__card-logo",alt:e}):s.a.createElement("i",{className:"material-icons form-field__card-logo"},"credit_card"),h=Object(u.injectStripe)(class extends l.Component{constructor(...e){super(...e),i()(this,"state",{validElements:{},cardBrand:"unknown",error:null,loading:!1,isValid:!1}),i()(this,"handleInputErrors",e=>{const t={...this.state.validElements};t[e.elementType]=e;let a,n=!0;["cardNumber","cardExpiry","cardCvc"].forEach(e=>{const o=t[e];o?(o.error&&(a=a||o.error.message),n=n&&o.complete&&!o.error):n=!1}),this.setState({error:a,isValid:n,validElements:t})}),i()(this,"handleSubmit",async e=>{const{actions:t}=this.props,{t:a}=Object(c.a)();if(e.preventDefault(),this.state.isValid)if(this.props.stripe){this.setState({loading:!0,error:null});try{const e=await Object(g.a)(Object(d.a)(this.props.global.campaign),this.props.stripe,this.props.subscription,this.props.global,{card:this.cardElement},this.props.stripe.confirmCardSetup);this.props.dismiss?this.props.dismiss(null==e?void 0:e.data.data):this.props.actions.redirect("/account/donations"),t.addMessage(a("Card details updated successfully"))}catch(e){console.error(e),t.addMessage(a("Card details update failed")),this.setState({error:e.message||"Unknown error",loading:!1})}}else this.setState({error:"Stripe.js hasn't loaded yet."})}),i()(this,"Submit",()=>{const{t:e}=Object(c.a)(),t=this.state.loading||!this.state.isValid?{disabled:!0}:{};return s.a.createElement(p.a,o()({className:"save-card-button"},t,{type:"submit"}),this.state.loading?e("Loading..."):e("Save new card"))})}render(){const{t:e}=Object(c.a)(),t={visa:"Visa",mastercard:"MasterCard",discover:"Discover",diners:"Diners Club",amex:"American Express",jcb:"JCB"}[this.state.cardBrand];return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"new-card-form"},s.a.createElement("h4",null,e("Enter your new card details")),s.a.createElement("div",{className:"stripe-inputs"},s.a.createElement(f.a,{label:e("Card number"),classes:"form-field--stripe__card-number"},s.a.createElement(u.CardNumberElement,{id:"cardnumber",showIcon:!0,onChange:e=>{this.setState({cardBrand:e.brand}),this.handleInputErrors(e)},onReady:e=>{this.props.global.user.mock||e.focus(),this.cardElement=e}}),s.a.createElement(b,{brandName:t})),s.a.createElement(f.a,{label:e("Expiration date"),classes:"form-field--stripe__expiration-date"},s.a.createElement(u.CardExpiryElement,{onChange:this.handleInputErrors}),s.a.createElement("i",{className:"material-icons"},"calendar_today")),s.a.createElement(f.a,{label:e("CVC"),classes:"form-field--stripe__cvc"},s.a.createElement(u.CardCVCElement,{onChange:this.handleInputErrors}),s.a.createElement("i",{className:"material-icons"},"credit_card"))),this.state.error&&s.a.createElement("p",null,this.state.error),s.a.createElement(this.Submit,null))}});class y extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{})}componentDidMount(){this.load()}async load(){const{props:e}=this,{subscription:t}=e,a=Object(d.a)(this.props.global.campaign),n={};var o;a&&(n.stripeAccount=null===(o=t.provider)||void 0===o?void 0:o.accountId);const r="LIVE"===this.props.global.campaign.mode?"pk_live_IuO9apxOM1AclLg9TOTxjUS0":"pk_test_F4jZ0EjLCG6xXvdpqjGyUiSv";window.stripeLoaded&&window.stripeLoaded.then(()=>{const e=window.Stripe(r,n);this.setState({stripe:e,loaded:!0})})}render(){const{loaded:e,stripe:t}=this.state;return e?s.a.createElement(u.StripeProvider,{stripe:t},s.a.createElement(u.Elements,null,s.a.createElement(h,this.props))):s.a.createElement(m.b,null)}}i()(y,"icon","credit_card")},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return b}));a(5),a(39);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(21),s=a.n(l),c=a(11),u=a(100),d=a(3);const[m,p]=Object(u.a)({asPromise:!0}),f=m("https://unpkg.com/qrcode@1.4.4/build/qrcode.min.js","QRCode"),g=3050;function b({title:e,description:t,button:a,profile:r,foreground:i,background:l,width:u,integrations:m}){const{campaign:b}=useRaisely(),{t:h}=Object(d.d)(),y=r&&0==r.isCampaignProfile?`${window.location.protocol}//${window.location.host}/${r.path}`:`${window.location.protocol}//${window.location.host}`,[v,_]=Object(n.useState)(!1),[E,k]=Object(n.useState)(!1);if(Object(n.useEffect)(()=>{p().then(async()=>{_(!0);const e=f(),t=await e.toDataURL(y+"?utm_source=qrcode",{width:u||g,color:{light:l,dark:i}});k(t)})},[y]),!v)return null;return o.a.createElement("a",{download:"qrcode.png",href:E,className:"resource-card resource-card--qr-code"+(t&&a?"":" resource-card--qr-code--basic"),target:"_blank",rel:"noopener noreferrer",onClick:function(){m.broadcast("qrcode.downloaded",{profile:r.isCampaignProfile?"campaign":"fundraiser"})}},o.a.createElement("div",{className:"resource-card__image"},o.a.createElement("img",{src:E,alt:h("QR Code for [[target]]",{target:r?r.name:b.name})})),(e||t||a)&&o.a.createElement("div",{className:"resource-card__content"},e&&o.a.createElement("h3",{className:"resource-card__title"},e),t&&o.a.createElement("p",{className:"resource-card__description"},s()(t)),a&&o.a.createElement(c.a,{className:"resource-card__download-button"},o.a.createElement("i",{className:"material-icons"},"get_app"),a||h("Download"))))}b.propTypes={profile:i.a.object,title:i.a.string,description:i.a.string,button:i.a.string,foreground:i.a.string,background:i.a.string,width:i.a.string}},217:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(63);var n=a(105),o=a(87),r=a(113),i=a(7),l=a.n(i),s=a(288),c=a(0),u=a.n(c);function d(e,t){const{global:a}=e,{profile:i}=t;delete t.recurring;const c=Object(n.d)(a,i);return r.a.withLoader({...e,...t,onStepChange:(t,a)=>{var n;if("number"!=typeof t||null!==(n=e.initialState)&&void 0!==n&&n.inModal){const e=a.getElementsByClassName("donation-form__step-wrapper")[0];e&&e.scrollTo&&e.scrollTo(0,0)}else Object(o.a)(a)},profileUuid:c.uuid,currency:c.currency||e.currency,preferCampaignSettings:!0,startOnAmountScreen:l()(e,"startOnAmountScreen",!0),amount:Object(n.b)(c.currency)||e.amount,interval:Object(n.c)(a.campaign.config.amounts)||e.interval,className:(e.className||"").split(" ").filter(e=>!e.startsWith("respond--")&&!e.startsWith("css-")).join(" ").trim()},u.a.createElement(s.a,null))}},218:function(e,t,a){"use strict";a.d(t,"b",(function(){return N})),a.d(t,"a",(function(){return x}));var n=a(4),o=a.n(n),r=a(0),i=a.n(r),l=a(10),s=a(259),c=a(99),u=a(146),d=a(102),m=a(702);var p=a(2),f=a.n(p),g=(a(5),a(663)),b=a(7),h=a.n(b),y=a(251),v=a.n(y),_=a(126),E=a.n(_),k=a(394),w=a.n(k);const O={campaign:"campaign.profile",current:"current.profile",user:"user.profile"};function S(e){if(!e)return{};const t={};return Object.keys(e).forEach(a=>v()(t,a,e[a])),t}class T extends i.a.Component{constructor(...e){super(...e),f()(this,"state",{didThrow:!1})}componentDidMount(){this.props.broadcast("component.rendered",{node:this.props.node,locationData:this.props.locationData})}componentDidCatch(e){console.error(e),this.setState({didThrow:!0}),this.props.broadcast("component.failed",{node:this.props.node,locationData:this.props.locationData,error:e})}render(){return this.state.didThrow?this.props.showError?i.a.createElement("div",{className:"raisely-blockwrapper__failure"},"There was an error loading this custom component."):null:this.props.children}}function N(e){return{api:l.a,RaiselyComponents:s.a,resolveTarget:(t,a)=>function(e,t,a){const n={campaignUuid:e.campaign.uuid};return"string"!=typeof t||("profile"===t?n.profileUuid=a:"current"===t?n.profileUuid=e.current.profile&&e.current.profile.uuid:"owned"===t?n.userUuid=e.user&&e.user.uuid:"userTeam"===t&&(n.profileUuid=e.user.profile&&e.user.profile.parent&&e.user.profile.parent.path!==e.campaign.path?e.user.profile.parent.uuid:null)),n}(e.global,t,a),getValues:e.getValues?e.getValues:()=>Object(u.b)(e.node),getProfile:(t,a)=>function(e,t,a="profile",n={}){const o=t.data.get("editable")[a];if(!o||!o.value)return null;const{value:r}=o,i=O[r];if(i){const t=h()(e,i,null);if(t)return t;if(!n.strict)return h()(e,"campaign.profile",null);if(n.strict)return null}return{uuid:r}}(e.global,e.node,t,a),getFormValues:({fields:t,from:a})=>function(e,t,a){let n=e.customFields[t];!n&&["teamProfile","organisationProfile"].includes(t)&&(n=e.customFields.profile);const o="current"===a&&"profile"===t?"current.profile":a,r=E()(a)?a:h()(e,o);if(!n||!r)return{};const i={};return n.forEach(e=>{const{id:a}=e,n=e.private?"private":"public";if("address"===e.type){const e="user"===t;["address1","address2","suburb","state","postcode","country"].forEach(t=>{const o=Object(g.b)(t,a,e);e?i[o]=r[o]:(i[n]||(i[n]={}),i[n][o]=h()(r[n]||{},o))})}if(e.core){const e=-1!==(""+a).indexOf("_");return void(i[a]=r[e?w()(a):a])}if(!r[n])return;const o=r[n][a];i[n]||(i[n]={}),i[n][a]=o}),"profile"===t&&(i.type=r.type),i}(e.global,t,a),processFormData:S}}function C(e){const t=Object(r.useState)(!1)[1],a=e.node.data.get("customComponent"),n=e.store?e.store.getState():e,l=!n.global.userAuthAttempted||n.global.loadingCurrent;Object(r.useEffect)(()=>{l||t(Math.random())},[l]);const s=function(e,t){const a=window[t],n=a&&a.html,o=Object(r.useMemo)(()=>{if(!e||!a||!a.restrictions)return null;const{campaignConfigFlag:t}=a.restrictions;if(t){const[a,o]=t.condition;if(!(h()(e.config,a)!==o))return!1;if(t.hideClient)return!0;if(t.editorMessage)return e=>i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:"raisely-blockwrapper__message"},i.a.createElement("i",{className:"material-icons"},"error"),i.a.createElement(t.editorMessage,null)),i.a.createElement(n,e))}return!1},[a,e]);return n?o?!0===o?null:o:n:null}(e.campaign||n.global.campaign,"CustomComponent"+a);if(!s)return null;if(e.store){const t={...e,...n};return i.a.createElement(s,o()({},t,N(t)))}return i.a.createElement(r.Suspense,{fallback:i.a.createElement(c.a,{sceneHeight:"20vh"})},i.a.createElement(T,{locationData:e.locationData,node:e.node,broadcast:e.integrations.broadcast,showError:!l},i.a.createElement(s,o()({},e,N(e)))))}class x extends u.a{static connect(e){return function(e,t){return Object(d.b)(e=>e,t)(Object(m.a)(e))}(this,e)}render(){return this.renderBlock(C)}}},219:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(3),u=a(54),d=a(667),m=a(668),p=a.n(m),f=a(134),g=a(33),b=a(11),h=a(56),y=a(312);const v={background:"red",color:"white",width:"100%",height:"100%",padding:"20px",display:"inline-block"},_=({message:e})=>s.a.createElement("div",{style:v},s.a.createElement("p",null,e)),E=({message:e,title:t})=>s.a.createElement("div",{style:v},s.a.createElement("h1",null,t),s.a.createElement("p",null,e));E.defaultProps={title:"An Error Has Occurred",message:"Please contact us at support@raisely.com, or click the chat icon in the bottom right corner of your screen."};s.a.Component;s.a.Component;class k extends l.Component{constructor(...e){super(...e),i()(this,"state",{error:null,loading:!1,isValid:!1,sortCode:null,accountNumber:null,hasAddress:!0}),i()(this,"onChangeHandlerBacs",(e,t)=>{this.setState({[e]:t});const a="sortCode"===e?t:this.state.sortCode,n="accountNumber"===e?t:this.state.accountNumber;if(a&&n){let e=new p.a({accountNumber:n,sortCode:a}).isValid();e||"108800"!==a||8===n.length&&(e=!0),e?this.setState({error:null,isValid:!0}):this.setState({error:"The sort code and bank account entered are not valid",isValid:!1})}else this.setState({error:"You need to enter in the sort code and bank account number",isValid:!1})}),i()(this,"handleSubmit",async e=>{const{actions:t,subscription:a,elements:n}=this.props,{sortCode:o,accountNumber:r}=this.state,{t:i}=Object(c.a)();if(e.preventDefault(),"DD_BACS"===a.methodType&&!this.state.isValid)return;let l;"DD_BECS"===a.methodType&&(l=n.getElement(u.AuBankAccountElement));const s="DD_BACS"===a.methodType?this.props.stripe.confirmBacsDebitSetup:this.props.stripe.confirmAuBecsDebitSetup;if(this.props.stripe){this.setState({loading:!0,error:null});try{const e=await Object(y.a)(Object(f.a)(this.props.global.campaign),this.props.stripe,this.props.subscription,this.props.global,{bacs_debit:{sort_code:o,account_number:r},au_becs_debit:l,billing_details:{address:{line1:this.props.global.user.address1,line2:this.props.global.user.address2,city:this.props.global.user.suburb,state:this.props.global.user.state,country:this.props.global.user.country,postal_code:this.props.global.user.postcode},email:this.props.global.user.email,name:this.props.global.user.fullName}},s);this.props.dismiss?this.props.dismiss(null==e?void 0:e.data.data):this.props.actions.redirect("/account/donations"),t.addMessage(i("Bank details updated successfully"))}catch(e){var d,m;console.error(e),t.addMessage(i("Bank details update failed")),this.setState({error:e.message||"Unknown error",loading:!1}),null===(d=(m=window).reportError)||void 0===d||d.call(m,e,{errorContext:{tags:["updateCard_client_DD"]},extra:{subscriptionUuid:null==a?void 0:a.uuid},noBroadcast:!0})}}else this.setState({error:"Stripe.js hasn't loaded yet."})}),i()(this,"Submit",()=>{const{t:e}=Object(c.a)(),t=this.state.loading||!this.state.isValid?{disabled:!0}:{};return s.a.createElement(b.a,o()({},t,{type:"submit"}),this.state.loading?e("Loading..."):e("Save Changes"))})}componentDidMount(){const{subscription:e}=this.props;"DD_BACS"===e.methodType&(!this.props.global.user.address1||!this.props.global.user.suburb||!this.props.global.user.country||!this.props.global.user.postcode)&&this.setState({error:"Your account does not have full address details set up. Configure your address or contact us to update your address in our records",isValid:!1,hasAddress:!1})}render(){const{t:e}=Object(c.a)(),{error:t,sortCode:a,accountNumber:n}=this.state,{subscription:o}=this.props;return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"new-payment-method-form"},s.a.createElement("h4",null,e("Enter your new bank details"),":"),s.a.createElement("div",{className:"new-payment-method-form__spe-box"},s.a.createElement(s.a.Fragment,null,s.a.createElement("table",{className:"new-payment-method-form__spe-box__security-message"},s.a.createElement("tr",null,s.a.createElement("td",{className:"new-payment-method-form__spe-box__security-message__left-column"},s.a.createElement(O,null)),s.a.createElement("td",{className:"new-payment-method-form__spe-box__security-message__right-column"},s.a.createElement("p",{className:"new-payment-method-form__spe-box__security-message__header"},e("Secure payment")),s.a.createElement("p",{className:"new-payment-method-form__spe-box__security-message__text"},e("Our payments are protected by industry best-practice encryption technology."))))),"DD_BACS"===o.methodType&&s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{label:"Sort Code",value:a,id:"sortCode",disabled:!this.state.hasAddress,change:(e,t)=>this.onChangeHandlerBacs("sortCode",t)}),s.a.createElement(h.a,{label:"Account Number",value:n,id:"accountNumber",disabled:!this.state.hasAddress,change:(e,t)=>this.onChangeHandlerBacs("accountNumber",t)})),"DD_BECS"===o.methodType&&s.a.createElement(u.AuBankAccountElement,{onChange:e=>this.setState({isValid:e.complete}),options:{style:{height:"auto"}}}))),t&&s.a.createElement(_,{title:"",message:t}),s.a.createElement(this.Submit,null))}}class w extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{})}componentDidMount(){this.initStripe()}initStripe(){const{subscription:e}=this.props,t={};var a;Object(f.a)(this.props.global.campaign)&&(t.stripeAccount=null===(a=e.provider)||void 0===a?void 0:a.accountId);const n="LIVE"===this.props.global.campaign.mode?"pk_live_IuO9apxOM1AclLg9TOTxjUS0":"pk_test_F4jZ0EjLCG6xXvdpqjGyUiSv",o=Object(d.a)(n,t);this.setState({loadedStripe:o,loaded:!0})}render(){const{loaded:e,loadedStripe:t}=this.state;return e?s.a.createElement(u.Elements,{stripe:t},s.a.createElement(u.ElementsConsumer,null,({stripe:e,elements:t})=>s.a.createElement(k,o()({},this.props,{stripe:e,elements:t})))):s.a.createElement(g.b,null)}}i()(w,"icon","credit_card");const O=()=>s.a.createElement("svg",{width:"69",height:"69",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle"}},s.a.createElement("rect",{width:"90",height:"90",rx:"45",fill:"white",fillOpacity:"0.8"}),s.a.createElement("path",{d:"M38.367 28.0523C38.367 24.3111 41.3999 21.2782 45.1412 21.2782C48.8825 21.2782 51.9153 24.3111 51.9153 28.0523V34.0677H58.1935V28.0523C58.1935 20.8437 52.3498 15 45.1412 15C37.9326 15 32.0889 20.8437 32.0889 28.0523V34.0677H38.367V28.0523Z",fill:"#A4CEFD"}),s.a.createElement("rect",{x:"24.6377",y:"32.5156",width:"41.0078",height:"37.3104",rx:"5.73276",fill:"#0070F3"}),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.251 46.633C38.251 42.9202 41.2608 39.9104 44.9736 39.9104C48.6863 39.9104 51.6962 42.9202 51.6962 46.633C51.6962 49.8889 49.3815 52.6042 46.3079 53.2232L49.0044 60.468C49.0602 60.618 49.0888 60.7768 49.0888 60.937C49.0888 61.657 48.5228 62.2449 47.8114 62.2798L47.7443 62.2815H42.1701C42.0172 62.2815 41.8654 62.2554 41.7213 62.2044C41.0432 61.9643 40.678 61.2357 40.8812 60.554L40.9026 60.4882L43.4864 53.1905C40.4892 52.5137 38.251 49.8347 38.251 46.633Z",fill:"white"}),s.a.createElement("rect",{x:"14.5",y:"49.5",width:"22.7097",height:"22.7097",rx:"11.3549",fill:"#00275B"}),s.a.createElement("path",{d:"M19.7354 60.7834L24.2275 65.3066L31.8306 56.761",stroke:"white",strokeWidth:"1.93784",strokeLinecap:"round",strokeLinejoin:"round"}))},22:function(e,t,a){"use strict";a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(326),s=a(3),c=a(9),u=a(16),d=a(84),m=a(15),p=a(180);function f({className:e,...t}){const{globalFormState:a,containerRef:n,step:r,isFullscreen:l}=Object(m.b)(),s=`signup-form signup-form-base signup-form--active-step-${r+1}${e?" "+e:""}${l?" fullscreen":""}`;return i.a.createElement("div",o()({id:"form-"+a.containerUuid,ref:n,className:s,"data-testid":l?"fullscreen-form":null},t))}function g(e){return i.a.createElement("h3",o()({className:"signup-form__title"},e))}function b(e){return i.a.createElement("p",o()({className:"signup-form__description"},e))}function h({children:e,...t}){const{t:a}=Object(s.d)();return i.a.createElement("div",o()({className:"signup-form__loading"},t),e||i.a.createElement(i.a.Fragment,null,i.a.createElement(c.d,null),i.a.createElement("p",null,a("One moment..."))))}a.d(t,"d",(function(){return p.a})),f.Header=function(e){return i.a.createElement("div",o()({className:"signup-form__header"},e))},f.Body=function({currentStep:e,...t}){const{bodyRef:a,values:n,isFullscreen:r,ticketPurchaseRequired:l}=Object(m.b)(),s=n.total||"ticketSelect"===e&&l&&!n.total?"160px":"130px",c=r&&"payment"!==e;return i.a.createElement("div",o()({className:"signup-form__body",ref:a,style:{"--nav-height":c?s:"0px"}},t))},f.Title=g,f.Description=b,f.Icon=function(e){return i.a.createElement("i",o()({className:"material-icons signup-form__icon"},e))},f.Shell=function({numSteps:e,currentStep:t,className:a,children:n}){return i.a.createElement(f,{className:a},i.a.createElement(f.Header,null,i.a.createElement(d.a,{numSteps:e})),i.a.createElement(f.Body,{currentStep:t},n))},f.Popup=function(e){const{isSubmitting:t,values:a,updateValues:n}=Object(m.b)();return t||a.error?null:i.a.createElement("div",o()({className:"signup-form__popup"},e,{role:"status"}),i.a.createElement("p",null,a.popupMsg),i.a.createElement("button",{onClick:()=>n({},()=>{},["popupMsg"])},i.a.createElement(u.a,{name:"close",size:"normal"})))},f.Error=function({children:e,...t}){const{values:{error:a},updateValues:n,isSubmitting:r}=Object(m.b)();return r?null:i.a.createElement("div",o()({className:"signup-form__error"},t,{role:"alert","data-cy":"form-error"}),e||i.a.createElement("p",null,a.message),i.a.createElement("button",{onClick:()=>n({},()=>{},["error"])},i.a.createElement(u.a,{name:"close",size:"normal"})))},f.LoadingSpinner=h,f.LoadingSkeleton=function(){return i.a.createElement(l.a,{speed:1,width:300,height:320,viewBox:"0 0 300 320"},i.a.createElement("rect",{x:"48",y:"11",rx:"0",ry:"0",width:"200",height:"35"}),i.a.createElement("rect",{x:"0",y:"80",rx:"0",ry:"0",width:"300",height:"45"}),i.a.createElement("rect",{x:"0",y:"140",rx:"0",ry:"0",width:"400",height:"45"}),i.a.createElement("rect",{x:"0",y:"200",rx:"0",ry:"0",width:"300",height:"45"}),i.a.createElement("rect",{x:"0",y:"265",rx:"24",ry:"24",width:"300",height:"35"}))},f.TransitionBar=p.a,t.e=f},220:function(e,t,a){"use strict";a.d(t,"a",(function(){return V})),a.d(t,"b",(function(){return z}));a(27),a(5),a(124);var n=a(0),o=a.n(n),r=a(46),i=a.n(r),l=a(318),s=a.n(l),c=a(135),u=a.n(c),d=a(89),m=a.n(d),p=a(96),f=a.n(p),g=a(30),b=a.n(g),h=a(676),y=a(3),v=a(671),_=a.n(v),E=a(131),k=a.n(E),w=a(7),O=a.n(w),S=a(50),T=a.n(S),N=a(14),C=a(43),x=a(78),j=a(105),P=a(255),A=a(8),D=a(77),R=a(144),F=a(81),I=a(675);const M=e=>{var t,a;return O()(e.campaign,"config.donation.currencySelection",!0)?e.detectedCurrency||(null===(t=e.current.profile)||void 0===t?void 0:t.currency)||e.campaign.currency:(null===(a=e.current.profile)||void 0===a?void 0:a.currency)||e.campaign.currency};function L(e,t,a={}){var n,o,r,i;const l=q(e.campaign);let c;const d=(Object(j.e)()||"").toUpperCase();if(Boolean(d)){const e=s()(l.map(e=>e.interval));c=Object(j.f)(e,d)}let m=l[0];c&&(m=l.find(e=>e.interval===d));const{amounts:p}=null==m?{}:m,g=O()(e.campaign,"config.subscriptions.sortOrder"),b=c&&d||(null===(n=m)||void 0===n?void 0:n.interval)||g&&g[0]||"ONCE";let h=m?B(p,e.user,null===(o=e.current)||void 0===o?void 0:o.profile,a.defaultDonationAmount,t.amount):0;const y=t.currency||M(e);h&&y!==e.campaign.currency&&(h=Object(N.b)(h,e.campaign.currency,y,!0));const v={formUuid:f()(),step:0,prevStep:0,interval:b,count:(null===(r=m)||void 0===r?void 0:r.count)||1,idempotencyKey:Object(x.b)(),...t,amount:h,currency:y,feeOptIn:e.campaign.showRaiselyCheckbox&&!a.hideFee||!e.campaign.showRaiselyCheckbox&&!(null!==(i=e.campaign.config.fees)&&void 0!==i&&i.optInOnly)&&!a.hideFee,details:{},additionalAmount:a.additionalAmount||0,regularIntervalToggled:t.interval?"ONCE"!==t.interval:"ONCE"!==b,onceAmount:"ONCE"===b?h:0};return["email","firstName","lastName","preferredName","fullName"].forEach(t=>{var a,n,o,r,i;null!==(a=e.user)&&void 0!==a&&a[t]&&null!=e&&null!==(n=e.customFields)&&void 0!==n&&null!==(o=n.user)&&void 0!==o&&null!==(r=o.find(e=>e.id===t))&&void 0!==r&&r.active&&(v.details[t]=null===(i=e.user)||void 0===i?void 0:i[t])}),v.details=_()(v.details,function(e){const t=e.customFields.donation.filter(e=>"hidden"===e.type),a={public:{},private:{}};return t.forEach(t=>{const n=Object(D.processDefaultValue)(t.default,e),o=n&&n.constructor===Object&&u()(n)?null:n;t.private?a.private[t.id]=o:a.public[t.id]=o}),a}(e),k()((null==t?void 0:t.user)||{},["public","private","status"]),(null==t?void 0:t.details)||{}),v}function B(e,t,a,n,o){var r,i;if(o)return o;const l=$(e,t,a);return n&&((null===(r=l[1])||void 0===r?void 0:r.amount)||(null===(i=l[0])||void 0===i?void 0:i.amount))||0}function U(e){const{t:t,tD:a}=Object(y.a)(),n=1===e.count;if("ONCE"===e.interval)return t("One-time");if("WEEK"===e.interval){if(n)return t("Weekly");if(2===e.count)return t("Fortnightly");if(4===e.count)return t("4 Weekly")}else if("MONTH"===e.interval){if(n)return t("Monthly");if(3===e.count)return t("Quarterly")}else if("YEAR"===e.interval&&n)return t("Yearly");const o=a(e.interval.toLowerCase()+"s");return i()(`${e.count} ${o}`)}function H(e){const{tD:t}=Object(y.a)();let a=U(e).replace(/ly$/,"").toLowerCase();return"WEEK"===e.interval&&4===e.count&&(a+="s"),t(a)}function V(e,t,a,n,o){var r,i;const l=o||e.config.amounts,s=(null===(r=e.config)||void 0===r||null===(i=r.donation)||void 0===i?void 0:i.intelligentAmounts)&&o||!1,c=l.find(e=>e.interval===t.interval&&e.count===t.count);if(!c)return[];const u=$(c.amounts,a,n);return m()(u).map(a=>{const n=e.currency===t.currency||s?Math.round(a.amount):Object(N.b)(a.amount,e.currency,t.currency,!0);return{...a,currencyAmount:n,currencyDisplayAmount:Object(A.f)(n,t.currency)}})}function $(e,t,a){return(e||[]).filter(e=>{if(!e.rules)return!0;if(!e.rules.filter(e=>e.field).length)return!0;try{return Object(A.b)({rules:e.rules,condition:"ALL"},{user:t||{},profile:a||{}})}catch(e){return console.error(e),!0}})}function q(e,t,a){const n=[],o=a||e.config.amounts;let r=e.config.subscriptions.sortOrder;return t?r=["ONCE"]:a&&(r=a.map(e=>`${1!==e.count?e.count:""}${e.interval}`)),r.forEach(e=>{let t=o.find(t=>`${t.count>1?t.count:""}${t.interval}`===e);if(t||a){if(!t)return}else t={},/^[0-9]/.test(e)?(t.count=parseInt(e.charAt(0)),t.interval=e.slice(1)):(t.count=1,t.interval=e);n.push({...t,frequencyLabel:U(t),inlineFrequencyLabel:H(t)})}),n}function G(e){return(e.amount||0)+(e.additionalAmount||0)}function z(e,t={}){var a,r,i,l,s,c;const u=useRaisely(),[d,m]=Object(n.useState)(null),{enabled:p}=Object(R.a)(F.a.TBD_115_FEE_ADJUST_FIX_ON_SUBSCRIPTION_UPDATE);Object(n.useEffect)(()=>{},[d]);const f=Object(n.useMemo)(()=>L(u,e||{},t),[]),[g,v]=Object(h.a)(f,b.a),[_,E]=Object(n.useState)(!1),[k,w]=Object(n.useState)(!1),O=t.profileUuid||(null===(a=u.current.profile)||void 0===a?void 0:a.uuid)||u.campaign.profile.uuid;!function(e,t,a,o,r,i){const l=useRaisely(),s=M(l),c=Object(n.useRef)(e),u=Object(n.useRef)(s),d=s!==u.current&&!r.currency,m=e!==c.current;Object(n.useEffect)(()=>{var n;if(!d&&!m)return;c.current=e,u.current=s;const r=B(l.campaign.config.amounts.find(e=>e.interval===t.interval&&e.count===t.count).amounts,l.user,null===(n=l.current)||void 0===n?void 0:n.profile,o,i.amount);a(e=>{d&&e.set("currency",s);const a=d?Object(N.b)(r,t.currency,s,!0):r;e.set("amount",a)})},[d,m])}(O,g,v,t.defaultDonationAmount,e,f),function(e,t,a,o){const r=useRaisely(),i=Object(n.useRef)(o);Object(n.useEffect)(()=>{var n;if(i.current===o)return;i.current=o;let l=B(r.campaign.config.amounts.find(e=>e.interval===t.interval&&e.count===t.count).amounts,r.user,null===(n=r.current)||void 0===n?void 0:n.profile,o,e);r.campaign.currency!==t.currency&&(l=Object(N.b)(l,r.campaign.currency,t.currency,!0)),a(e=>e.set("amount",l))},[o])}(e.amount,g,v,null===(r=u.campaign.config.donation)||void 0===r?void 0:r.defaultDonationAmount);const S=Object(n.useMemo)(()=>Number(Object(N.b)(G(g),g.currency,"AUD",!0))>=5e3,[g]),j="<=2"!==t.version&&Boolean(null===(i=u.campaign.config.donation)||void 0===i?void 0:i.isV3Enabled),D=S&&u.campaign.showRaiselyCheckbox&&j&&!Boolean(t.onTokenSuccess);Object(n.useEffect)(()=>{g.initialSuggestedOptIn=null,g.chipInAmount=0,g.hasSelectedChipIn=!1},[g.currency,g.amount]);const U=Object(n.useMemo)(()=>p?function(e,t,a){const n=!1===e.showRaiselyCheckbox,{optInAmount:o,raiselyOptIn:r,totalAmount:i,optInChipOffers:l}=Object(I.a)({campaign:e,hasCustomFees:n,payloadData:t,skipFinalOptInCalculation:!0});return{raiselyOptIn:r,optInAmount:o,calculatedTotal:i+(t.feeOptIn&&i?o:0),totalAmount:i,showOptInChipIn:a,optInChipOffers:a?l:[],hasSelectedChipIn:t.hasSelectedChipIn}}(u.campaign,g,D):function(e,t,a){var n;const o=G(t),r=(null===(n=e.config)||void 0===n?void 0:n.fees)||{percentage:0},i=!1===e.showRaiselyCheckbox,l=i&&Boolean(r.custom),s=Boolean(r.max),c={customFee:l,feeFixed:l?0:50,feePercent:l?r.percentage/100:.045,feeFloor:0,feeMessage:l?r.message:null,feeMax:r.max?r.max:2e4,includeInTotals:"boolean"!=typeof r.includeInTotals||r.includeInTotals,message:i&&r&&r.message};if(i&&!l&&(c.customFee=!0,c.feePercent=0,c.feeFixed=0),!i){var u;let t=[];t=null!==(u=e.config.feeExperiment)&&void 0!==u&&u.tiers?e.config.feeExperiment.tiers:[{minDonationAmount:0,percentage:.045,fixed:90,floor:0,ceiling:2e4},{minDonationAmount:7500,percentage:.045,fixed:50,floor:0,ceiling:2e4}],t.sort((function(e,t){return e.minDonationAmount-t.minDonationAmount}));for(const e of t)o>=e.minDonationAmount&&(c.feePercent=e.percentage?e.percentage:.045,c.feeFixed=e.fixed||0===e.fixed?e.fixed:90,c.feeFloor=e.floor||0===e.floor?e.floor:0,s||(c.feeMax=e.ceiling||0===e.ceiling?e.ceiling:2e4))}const d=t.chipInAmount>0?t.chipInAmount:Math.min(Math.max(parseInt(c.feeFixed+Math.round(o*c.feePercent),10),c.feeFloor),c.feeMax);let m=[];if(a){const e=Math.min(Math.round(.045*o)+c.feeFixed,c.feeMax);m=e===c.feeMax?[.5*e,.8*e,e]:[Math.min(Math.max(Math.round(.028*o)+c.feeFixed,c.feeFloor),c.feeMax),Math.round(.038*o)+c.feeFixed,e]}return{raiselyOptIn:c,optInAmount:d,calculatedTotal:o+(t.feeOptIn&&o?d:0),totalAmount:o,showOptInChipIn:a,optInChipOffers:m,hasSelectedChipIn:t.hasSelectedChipIn}}(u.campaign,g,D),[u.campaign,g,D,p]);U.hasSelectedChipIn&&(g.hasSelectedChipIn=!0),!g.initialSuggestedOptIn&&U.calculatedTotal>0&&(g.initialSuggestedOptIn=g.chipInAmount||U.optInAmount);const H=Object(x.a)(O,e.registrationProfile,g,t.onTokenSuccess,t.additionalAmount,U.calculatedTotal,m,j),$=Boolean(!j&&(null===(l=u.campaign.config.donation)||void 0===l?void 0:l.express)),z=Object(R.a)(F.a.TBD_109_PAYPAL_REGULAR_GIVING).enabled;null!=H&&H.onlySupportsPaypal&&!z&&(g.interval="ONCE");const[Y,W]=(e=>{switch(e){case"AUD":case"NZD":case"CAD":case"SGD":case"JPY":case"USD":return[1e3,25e3];case"SEK":case"NOK":case"DKK":return[5e3,1e5];case"GBP":case"EUR":return[500,1e4];case"AED":return[1500,1e5];case"HKD":return[3e3,5e4];case"ZAR":return[5e3,15e4];case"INR":return[2e4,1e6];default:return[Object(N.b)(1e3,"AUD",e,!0),Object(N.b)(25e3,"AUD",e,!0)]}})(g.currency),Z=Boolean(null===(s=u.campaign.config.donation)||void 0===s||null===(c=s.upsell)||void 0===c?void 0:c.isStepEnabled)&&(!(null!=H&&H.onlySupportsPaypal)||z)&&!g.regularIntervalToggled&&g.amount>=Y&&g.amount<=W,K={amount:(null==e?void 0:e.startOnAmountScreen)||!(null!=e&&e.amount)||$,upsell:Z,details:!t.onTokenSuccess,giftAid:(null==e?void 0:e.giftAidEnabled)&&!$&&"GBP"===g.currency&&!g.hasActiveSwiftAidAuth,payment:!0,thankyou:!0},J=T()(u.campaign.config,["paymentLogosExperiment","hidePaymentLogosExperiment","modalExperiment"]),Q=Object.keys(K).filter(e=>K[e]),X=function(e,t,a,o,r,i){const l=Object(n.useRef)(e.step);return Object(n.useCallback)((n,s)=>{const c=o[n];"payment"===o[l.current]&&(r(null),i(!1));const u=a&&"ONCE"!==e.interval&&"amount"===c;s?(u&&(s.set("interval","ONCE"),s.set("amount",e.onceAmount)),s.set("prevStep",l.current).set("step",n)):t(t=>{u&&(t.set("interval","ONCE"),t.set("amount",e.onceAmount)),t.set("prevStep",l.current).set("step",n)}),l.current=n},[o,a,e.interval,e.onceAmount,t,r,i])}(g,v,Z,Q,m,H.setDonationIntentError);Object(n.useEffect)(()=>{t.onTokenSuccess||v(e=>e.set("stepName",Q[g.step]))},[g.step]),Object(n.useEffect)(()=>{m(H.routingError)},[null==H?void 0:H.routingError]);const ee=Object(P.a)(g.currency,v);!function(e,t){const a=[{uuid:"123-123",name:"General",publicName:"General Fund",status:"ACTIVE"},{uuid:"456-456",name:"Fund 2",publicName:"Fund 2 Public",status:"ACTIVE"},{uuid:"789-789",name:"Fund 3",publicName:"Fund 3 Public",status:"ACTIVE"}];Object(n.useEffect)(()=>{var n,o;if(null===(n=e.campaign.config.flags)||void 0===n||!n.donationFunds||null===(o=e.campaign.config.funds)||void 0===o||!o.enabledCampaignMultifund)return;const r=a.map(e=>({value:e.uuid,label:e.publicName})),i=e.campaign.config.funds.fundSelectHeading,l=e.campaign.config.funds.fundSelectInputLabel;t(e=>{e.set("campaignFundOptions",r),e.set("selectedFundId","456-456"),e.set("fundSelectHeading",i),e.set("fundSelectInputLabel",l)})},[])}(u,v);return Object(n.useMemo)(()=>{var e,a,n,r,i;const l=function(e,t){return!t.minAmount||e.amount>=t.minAmount}(g,t),s={values:g,updateValues:v,updateStep:X,targetProfileUuid:O,currencySymbol:null===(e=C[g.currency])||void 0===e?void 0:e.symbol,currencyName:null===(a=C[g.currency])||void 0===a?void 0:a.name,payments:H,availableAmounts:V(u.campaign,g,u.user,null===(n=u.current)||void 0===n?void 0:n.profile,ee),availableFrequencies:q(u.campaign,H.onlySupportsPaypal&&!z,ee),disablePayment:!(g.amount+g.additionalAmount)||!l||H.hasRouting&&H.isLoading,isMinimumAmount:l,...U,isPaymentGatewayProcessing:_,setIsPaymentGatewayProcessing:E,error:d,setError:m,isExpressForm:$,disableAnalytics:t.disableAnalytics,showStripePaymentElements:!(null!=H&&H.onlySupportsPaypal)&&((null===(r=u.campaign.config)||void 0===r||null===(i=r.payments)||void 0===i?void 0:i.directDebitEnabled)||j)&&!t.onTokenSuccess,isSPEReady:k,setIsSPEReady:w,steps:Q,experimentFlags:J,isV3:j,isDefaultDonationAmountEnabled:Boolean(t.defaultDonationAmount&&!j),enableModal:Boolean(t.enableModal),showUpsellStep:Z},{amountMessage:c,amountMessageWithCurrency:p,amountMessageWithCurrencyCustom:f}=function(e,t,a,n){var r;const{t:i,tD:l}=Object(y.a)();let s="";if("ONCE"!==e.interval){let a=t.find(t=>t.interval===e.interval&&t.count===e.count);s=l(a?a.inlineFrequencyLabel:e.interval.toLowerCase())}const c=a&&n||0!==e.step,u=(Object(y.c)(({amount:e,interval:t})=>s?c?i("Donating [[amount]] every [[interval]]",{amount:e,interval:t}):i("Donating every [[interval]]",{interval:t}):c?i("Donating [[amount]]",{amount:e}):i("Donating"),{amount:Object(A.f)(a,e.currency),interval:s}),Object(y.c)(({amount:t,interval:o,currency:r})=>{const l=a&&n||0!==e.step;return s?l?i("Donating [[amount]] every [[interval]] in [[currency]]",{amount:t,interval:o,currency:r}):i("Donating every [[interval]] in [[currency]]",{interval:o,currency:r}):l?i("Donating [[amount]] in [[currency]]",{amount:t,currency:r}):i("Donating in [[currency]]",{currency:r})},{amount:Object(A.f)(a,e.currency),interval:s,currency:(null===(r=C[e.currency])||void 0===r?void 0:r.name)||e.currency})),d=[],m=[],p=[];return u.forEach(({name:e,value:t})=>"currency"===e?(d.push(t),void m.push(!0)):"amount"===e?(p.push(o.a.createElement("b",{key:"d-amount"},t)),d.push(o.a.createElement("b",{key:"d-amount"},t)),void m.push(o.a.createElement("b",{key:"d-amount"},t))):(p.push(t),d.push(t),void m.push(t))),{amountMessage:p,amountMessageWithCurrency:d,amountMessageWithCurrencyCustom:m}}(s.values,s.availableFrequencies,s.calculatedTotal,$);return s.amountMessage=c,s.amountMessageWithCurrency=p,s.amountMessageWithCurrencyCustom=f,s},[g,d,O,H,_,u.campaign.config,k,ee])}},224:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(5);var n=a(0),o=a.n(n),r=a(18),i=a(17),l=a(8),s=a(56),c=a(26),u=a(37),d=a(3),m=a(87),p=a(28),f=a(145);function g({autoContinueOnAmountSelect:e,customAmountPlaceholder:t}){var a,g;const{t:b,tD:h}=Object(d.a)(),{values:y,updateValues:v,updateStep:_,availableAmounts:E,currencySymbol:k,experimentFlags:w,isV3:O,enableModal:S,isDefaultDonationAmountEnabled:T}=Object(i.b)(),[N,C]=function(){const{values:e,updateValues:t}=Object(i.b)(),[a,o]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(""===a)return;const n=Number(a);e.amount!==n&&t(t=>{t.set("amount",n),"ONCE"===e.interval&&t.set("onceAmount",n)})},[e.amount,e.currency,a]),[a,o]}(),{global:x,integrations:j}=useRaisely(!0),P=Object(f.a)(),A=(null===(a=x.campaign.config)||void 0===a||null===(g=a.donation)||void 0===g?void 0:g.intelligentAmounts)||!1;Object(n.useEffect)(()=>{y.amount&&!E.map(e=>e.currencyAmount).includes(y.amount)&&C(y.amount)},[]);const D=Object(c.e)(E);let R=!1,F=!1;E.forEach(e=>{e.title&&(R=!0),e.image&&(F=!0)});const I=O&&(R||F),M=O&&!1,L=Object(l.q)(`\n\t\t\tdonation-form__amount\n      ${O?"":"donation-form__amount--width-"+D}\n      ${I?"donation-form__amount--width-full":""}\n      ${M?"donation-form__amount--has-recommended-badge":""}\n    `),B=t||b(O?"Enter custom amount":"Other"),U=I?"100%":1===(H=E.length)?"100%":H%3==0?"30%":H%2==0?"40%":5===H?"30%":"20%";var H;return Object(n.useEffect)(()=>{var e,t,a,n,o,r,i,l,s,c,u,d;E&&A&&j.broadcast("donation.intelligentAmountsDisplayed",{formUuid:y.formUuid,availableVariantsAud:y.availableVariantsAud[y.interval],availableAmounts:E,selectedVariantAud:E[0].selectedVariantAud,selectedCurrency:y.currency,selectedInterval:y.interval,profile:null===(e=x.current)||void 0===e?void 0:e.profile,campaignCurrency:x.campaign.currency,selectedAmount:y.amount,isDefaultDonationAmountEnabled:!1,isExpress:!1,isRaiselyCheckboxEnabled:Boolean(x.campaign.showRaiselyCheckbox),isGiftAidEnabled:y.giftAidEnabled,donationCustomFields:null===(t=x.campaign.config)||void 0===t||null===(a=t.customFields)||void 0===a?void 0:a.donation,isRegularGivingNudgeEnabled:Boolean(null===(n=x.campaign.config)||void 0===n||null===(o=n.donation)||void 0===o||null===(r=o.upsell)||void 0===r?void 0:r.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(i=x.campaign.config)||void 0===i||null===(l=i.donation)||void 0===l||null===(s=l.upsell)||void 0===s?void 0:s.isStepEnabled),isUserInModal:Boolean(y.inModal),isModalPreviewEnabled:Boolean(y.inModal&&(null===(c=x.campaign.config)||void 0===c||null===(u=c.donation)||void 0===u||null===(d=u.campaignPreview)||void 0===d?void 0:d.isEnabled)),isDonationFormV3:!0})},[y.currency,y.interval]),o.a.createElement("div",{className:L,"aria-live":"polite"},E.map((t,a)=>{var n;const i=M&&"ONCE"===y.interval&&2===a,s=A&&(null===(n=E.find(e=>e.amount===t.currencyAmount))||void 0===n?void 0:n.amountAud);return o.a.createElement("div",{className:Object(r.a)("donation-form__amount-btn__wrapper",t.image&&"image",M&&"has-recommended-badge",t.title&&"has-text",t.image&&"donation-form__amount--has-image"),style:{"--flex-basis":U},key:`${t.amount}-${y.interval}-${a}`},o.a.createElement("button",{type:"button",className:(c=t.image,d=t.currencyAmount===y.amount,f=t.class,t.title,Object(l.q)(`\n\t\t\tdonation-form__amount-btn button--donation\n\t\t\t${c?"donation-form__amount-btn--image":""}\n\t\t\t${d?"donation-form__amount-btn--selected":""}\n\t\t\t${d?"donation-form__amount-btn--selected":""}\n\n\t\t\t${f||""}\n\t\t`)),"aria-pressed":y.amount===t.amount,onClick:a=>{var n,o,r,i,l,c,u,d,p,f,g,b,h,k;C(""),j.broadcast("donation.amountClicked",{formUuid:y.formUuid,amount:t.currencyAmount,currency:y.currency,interval:y.interval,availableAmounts:E,campaignCurrency:x.campaign.currency,isDefaultDonationAmountEnabled:T,hasCustomFees:!Boolean(x.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(x.campaign.showRaiselyCheckbox)&&Boolean(null===(n=x.campaign.config)||void 0===n||null===(o=n.fees)||void 0===o?void 0:o.custom)&&Boolean(null===(r=x.campaign.config)||void 0===r||null===(i=r.fees)||void 0===i?void 0:i.optInOnly),profile:null===(l=x.current)||void 0===l?void 0:l.profile,isDonationFormV3:O,isUserInModal:Boolean(y.inModal),isModalPreviewEnabled:Boolean(y.inModal&&(null===(c=x.campaign.config)||void 0===c||null===(u=c.donation)||void 0===u||null===(d=u.campaignPreview)||void 0===d?void 0:d.isEnabled)),isRegularGivingNudgeEnabled:Boolean(null===(p=x.campaign.config)||void 0===p||null===(f=p.donation)||void 0===f||null===(g=f.upsell)||void 0===g?void 0:g.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(b=x.campaign.config)||void 0===b||null===(h=b.donation)||void 0===h||null===(k=h.upsell)||void 0===k?void 0:k.isStepEnabled),intelligentAmounts:A?{availableVariantsAud:y.availableVariantsAud[null==y?void 0:y.interval],clickedAmountAud:s,selectedVariantAud:E[0].selectedVariantAud}:null}),v(n=>{if(n.set("amount",t.currencyAmount),"ONCE"===y.interval&&n.set("onceAmount",t.currencyAmount),e)if(O&&!y.inModal&&(w.modalExperiment||S)){const e={...y,amount:t.currencyAmount};P(e,1)}else _(y.step+1,n);else{if(!a.target.closest)return;const e=a.target.closest(".donation-form"),t=null==e?void 0:e.querySelector(".donation-form__method");Object(m.a)(t,{block:"end"})}})}},t.image&&o.a.createElement(u.a,{src:t.image+"?w=500",alt:t.title,className:"donation-form__amount-img",isLazy:!1}),o.a.createElement("span",{className:"donation-form__amount-value"},t.currencyDisplayAmount),t.title&&o.a.createElement("span",{className:"donation-form__amount-title"},Object(l.l)(h(t.title)))),i&&o.a.createElement("div",{className:"donation-form__recommended-badge"},o.a.createElement(p.Icon,{name:"star",size:"small",theme:"inherit"}),"Recommended"));var c,d,f}),o.a.createElement(s.a,{type:"currency",id:"amount",label:b("Other Amount"),placeholder:B,classes:"donation-form__other-field",change:(e,t)=>C(t),value:N||"",values:y,currency:k}))}},225:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(5);var n=a(0),o=a.n(n),r=a(17),i=a(56),l=a(150);function s(){const{values:e,updateValues:t,availableFrequencies:a,steps:s,targetProfileUuid:c,isExpressForm:u,optInAmount:d,totalAmount:m,isV3:p}=Object(r.b)();Object(l.c)();const{integrations:f,global:g}=useRaisely(!0),b=Object(n.useMemo)(()=>function({children:e,optInToolTipMessage:t}){return o.a.createElement("span",{className:"donation-form__fundraising-costs donation-form__has-tooltip"},o.a.createElement("b",null,e),o.a.createElement("div",{className:"donation-form__tooltip"},t))},[]),{feeMessage:h}=Object(l.b)({fundraisingCostTooltip:b});return m&&d?o.a.createElement("div",{className:"donation-form__raisely-fee"},o.a.createElement(i.a,{id:"feeOptIn",type:"checkbox",label:h,name:"fee",value:e.feeOptIn,errors:[],change:()=>{t(t=>t.set("feeOptIn",!e.feeOptIn)),Object(l.a)(f,g,{values:e,steps:s,availableFrequencies:a,targetProfileUuid:c,optInAmount:d,isExpressForm:u,isV3:p})}})):null}},226:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(5);var n=a(0),o=a.n(n),r=a(43),i=a(17);function l({currencySelection:e=!0}){const{values:t,updateValues:a,amountMessageWithCurrencyCustom:l}=Object(i.b)(),s=Object(n.useMemo)(()=>{const e=[],t=[];return Object.values(r).filter(a=>{a.active?e.push(a):t.push(a)}),{common:e,other:t}},[]);return e?o.a.createElement("div",{className:"donation-form__amount-currency"},l.map(e=>!0!==e?e:o.a.createElement("span",{className:"donation-form__currency",key:"currency-select"},o.a.createElement("span",null,r[t.currency].name),o.a.createElement("select",{className:"donation-form__currency-select","aria-label":"Select donation currency",value:t.currency,onChange:e=>a(t=>t.set("currency",e.target.value))},o.a.createElement("option",{disabled:!0},"Common currencies"),s.common.map(e=>o.a.createElement("option",{value:e.code,key:e.name,name:e.name},e.name)),o.a.createElement("option",{disabled:!0},"---------------------"),o.a.createElement("option",{disabled:!0},"Other currencies"),s.other.map(e=>o.a.createElement("option",{value:e.code,key:e.name,name:e.name},e.name)))))):null}},227:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(5);var n=a(0),o=a.n(n),r=a(10),i=a(103),l=a(17),s=a(11),c=a(16),u=a(14),d=a(43),m=a(131),p=a.n(m),f=a(3),g=a(180);function b({includeAnonymousToggle:e,hideCustomFields:t,includeBackButton:a}){const{t:n}=Object(f.d)(),{values:m,updateValues:b,updateStep:h}=Object(l.b)(),{integrations:y,global:v}=useRaisely(!0),_="GBP"===m.currency&&m.giftAidEnabled&&m.isSwiftAidEnabled,E=v.customFields.donation.filter(t=>e||!(t.core&&"anonymous"===t.id)).filter(e=>!t||(e.core||"hidden"===e.type));let k=m.interval;return m.count>1&&(k=`${m.count}${k}`),o.a.createElement(i.a,{global:v,values:{...m.details,amount:m.amount,frequency:k},fields:E,action:async t=>{let a,n,o=!1;if(_)try{const e=(await r.a.users.getSwiftAidAuth({email:t.email})).body().data().data;o=e.activeAuthorisation,a=e.donor,n=e.authExpiry}catch(e){console.error("Error checking user's Swiftaid auth status: "+e)}return b(r=>(r.set("details",p()(t,["amount","anonymous"])),r.set("hasActiveSwiftAidAuth",o),o&&(r.set("details.private.swiftAid",!0),r.set("details.private.giftAid",!0),r.set("details.swiftAidDonorId",a),r.set("details.swiftAidAuthExpiry",n)),e&&r.set("anonymous",t.anonymous),h(m.step+1,r),r))},formType:"donation",handleCustomConditions:e=>function({value:e,condition:t,test:a},n,o){if("amount"===t.field){const r=Number(Object(u.b)(e,n,o.campaign.currency,!0)),i=d[o.campaign.currency].zeroDecimal?r:r/100,l={...t,value:Number(t.value)};return a(i,l)}}(e,m.currency,v),buttons:({onSubmitClick:e,isSubmitting:t})=>o.a.createElement("nav",{className:"donation-form__nav"},a&&o.a.createElement(s.a,{theme:"primary",className:"donation-form__back",type:"button",onClick:e=>{e.preventDefault(),h(m.step-1)}},o.a.createElement(c.a,{name:"chevron_left",size:"small"})),o.a.createElement(s.a,{onClick:t=>{var a;y.broadcast("donation.detailsCompleted",{formUuid:m.formUuid,amount:m.amount,currency:m.currency,frameId:null===(a=v.query)||void 0===a?void 0:a.frameId}),e(t)},type:"submit",className:"donation-form__next"},_&&o.a.createElement(g.a,{isTransitioning:t,time:"8s"}),n("Next")," ",o.a.createElement(c.a,{name:"chevron_right",size:"small"})))})}},228:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),o=a.n(n),r=a(17);function i(){const{campaign:e}=useRaisely(),{payments:t}=Object(r.b)();return t.noAvailableProviders?o.a.createElement("div",{className:"donation-form__message donation-form__message--warning"},o.a.createElement("p",null,o.a.createElement("i",{className:"material-icons"},"error"),o.a.createElement("strong",null,"Connect a Payment Provider")),o.a.createElement("p",null,"In order to take live payments, you'll need to"," ",o.a.createElement("a",{href:`https://admin.raisely.com/campaigns/${e.path}/setup/payments`,target:"_blank",rel:"noopener noreferrer"},"add a Payment Gateway")," ","in your Raisely Dashboard")):null}},229:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(5);var n=a(0),o=a.n(n),r=a(323),i=a(183),l=a(3),s=a(216),c=a(95),u=a(17),d=a(8),m=a(11),p=a(28);const f={width:"150px",height:"150px"};function g(){var e;const{values:t,updateValues:a,updateStep:g,...y}=Object(u.b)(),{global:v,integrations:_}=useRaisely(!0),{t:E,tF:k}=Object(l.d)(),w=(null===(e=v.campaign.config.donation)||void 0===e?void 0:e.upsell)||{},O=Object(n.useRef)(),S=Object(d.f)(t.onceAmount,t.currency),[T,N]=b(t.currency),C=Math.min(Math.max(100*Math.round(1*t.onceAmount/100),T),N);let x,j;x=Math.min(Math.max(100*Math.round(.5*t.onceAmount/100),T),N),Math.abs(C-x)<=100?x=null:j=Object(d.f)(x,t.currency);const P=Object(d.f)(C,t.currency);function A(e){a(a=>{a.set("interval","MONTH"),a.set("amount",e),g(t.step+1,a)}),h(_,"donation.upsellAccepted",v,{values:t,upsellAmount:e,...y})}return function(e){const{values:t,...a}=Object(u.b)(),{global:o,integrations:r}=useRaisely(!0);Object(n.useEffect)(()=>{h(r,"donation.upsellShown",o,{values:t,upsellAmount:e,...a})},[])}(C),o.a.createElement(o.a.Fragment,null,o.a.createElement(c.c,null),o.a.createElement(r.a,{ref:O,style:f,src:"https://raisely-images.imgix.net/6c3ef5b0-8423-11ec-9ff9-95d30acd7a5f/uploads/yh-ttfml-1-g-c-json-113eca.json",autoplay:!0,loop:!0,onEvent:e=>{"load"===e&&Object(s.a)()&&O.current.setSeeker(O.current.state.instance.totalFrames)}}),o.a.createElement("div",{className:"upsell__text"},o.a.createElement("h4",null,k(w.stepTitle,i.d)),o.a.createElement("p",null,k(w.stepDescription,i.c))),o.a.createElement("div",{className:"upsell__buttons"},o.a.createElement(m.a,{className:"button button--full accept",theme:"secondary",onClick:()=>A(C),cyId:"accept"},o.a.createElement(p.Icon,{name:"favorite",size:"small",theme:"inherit"}),E("Donate [[upsellAmount]] monthly",{upsellAmount:P})),x&&o.a.createElement(m.a,{className:"button button--full accept2",theme:"secondary",onClick:()=>A(x),cyId:"accept2"},E("Donate [[upsellAmount]] monthly",{upsellAmount:j})),o.a.createElement(m.a,{className:"button button--full reject",theme:"inverse",onClick:function(){a(e=>{e.set("interval","ONCE"),e.set("amount",t.onceAmount),g(t.step+1,e)}),h(_,"donation.upsellDeclined",v,{values:t,upsellAmount:C,...y})},cyId:"reject"},E("Keep my one-time [[currentAmount]] donation",{currentAmount:S}))))}const b=e=>{switch(e){case"AUD":case"NZD":case"CAD":case"SGD":case"JPY":return[500,1e4];case"SEK":case"NOK":case"DKK":return[2500,3e4];case"USD":return[400,1e4];case"GBP":return[200,5e3];case"EUR":return[300,5e3];case"AED":return[1300,5e4];case"HKD":return[3e3,5e4];case"ZAR":return[5e3,5e4];case"INR":return[1e4,35e4];default:return[Object(d.w)(500,"AUD",e,!0),Object(d.w)(1e4,"AUD",e,!0)]}};function h(e,t,a,n){var o,r,i,l,s,c,u,d,m,p,f,g,b,h,y,v;e.broadcast(t,{stage:n.values.step,values:n.values,profile:null==a||null===(o=a.current)||void 0===o?void 0:o.profile,formUuid:n.values.formUuid,availableFrequencies:n.availableFrequencies,availableAmounts:n.availableAmounts,campaignCurrency:a.campaign.currency,isDefaultDonationAmountEnabled:n.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(a.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(a.campaign.showRaiselyCheckbox)&&Boolean(null===(r=a.campaign.config)||void 0===r||null===(i=r.fees)||void 0===i?void 0:i.custom)&&Boolean(null===(l=a.campaign.config)||void 0===l||null===(s=l.fees)||void 0===s?void 0:s.optInOnly),formSteps:n.steps,targetProfileUuid:n.targetProfileUuid,isExpress:n.isExpressForm,isGiftAidEnabled:n.values.giftAidEnabled,donationCustomFields:null===(c=a.campaign.config)||void 0===c||null===(u=c.customFields)||void 0===u?void 0:u.donation,stageName:n.steps[n.values.step],selectedAmount:n.values.onceAmount,isFeeOptInChecked:n.values.feeOptIn,selectedInterval:n.values.interval,selectedCurrency:n.values.currency,presentedUpsellAmount:n.upsellAmount,presentedOptInAmount:n.optInAmount,isDonationFormV3:n.isV3,isUserInModal:Boolean(n.values.inModal),isModalPreviewEnabled:Boolean(n.values.inModal&&(null===(d=a.campaign.config)||void 0===d||null===(m=d.donation)||void 0===m||null===(p=m.campaignPreview)||void 0===p?void 0:p.isEnabled)),isRegularGivingNudgeEnabled:Boolean(null===(f=a.campaign.config)||void 0===f||null===(g=f.donation)||void 0===g||null===(b=g.upsell)||void 0===b?void 0:b.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(h=a.campaign.config)||void 0===h||null===(y=h.donation)||void 0===y||null===(v=y.upsell)||void 0===v?void 0:v.isStepEnabled)})}},230:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(5);var n=a(0),o=a.n(n),r=a(18),i=a(3),l=a(17),s=a(8),c=a(56),u=a(28),d=a(150);function m(){const{values:e,updateValues:t,optInAmount:a,totalAmount:m,steps:p,availableFrequencies:f,availableAmounts:g,targetProfileUuid:b,isExpressForm:h,isV3:y,showOptInChipIn:v,optInChipOffers:_}=Object(l.b)(),{platformCostsLabel:E,platformCostsChipAsk:k,optInToolTipMessage:w,platformCostsShortLabel:O,yourGenerosityMessage:S}=Object(d.b)(),{global:T,integrations:N}=useRaisely(!0),[C,x]=Object(n.useState)(!1),{t:j}=Object(i.d)();return Object(d.c)(v),m&&a?o.a.createElement("div",{className:Object(r.a)("donation-form__raisely-fee v3",e.feeOptIn&&"donation-form__raisely-fee--active")},o.a.createElement(c.a,{id:"feeOptIn",type:"boolean",label:E,name:"fee",value:e.feeOptIn&&!e.hasSelectedChipIn,errors:[],size:"tiny",change:()=>{t(t=>{t.set("chipInAmount",0),t.set("feeOptIn",!!e.hasSelectedChipIn||!e.feeOptIn),t.set("hasSelectedChipIn",!1);const n=e.hasSelectedChipIn?"donation.optInChecked":e.feeOptIn?"donation.optInUnchecked":"donation.optInChecked";Object(d.a)(N,T,{values:e,steps:p,availableFrequencies:f,availableAmounts:g,targetProfileUuid:b,optInAmount:a,isExpressForm:h,isV3:y},n)})},options:{true:" ",false:" "},labelRight:!0}),o.a.createElement("svg",{width:"34",height:"34",viewBox:"0 0 34 34",className:Object(r.a)("donation-form__raisely-fee__donationHeart",e.feeOptIn&&"donation-form__raisely-fee__donationHeart--active")},o.a.createElement("path",{d:"M12.2,30.3L12.2,30.3L12.2,30.3c0.1,0.2,0.1,0.4,0.2,0.5c0.1,0.2,0.3,0.6,0.6,0.9c0.4,0.4,1,0.8,1.6,0.9 c0.5,0.1,0.9,0.1,1.1,0.1c0.2,0,0.4-0.1,0.5-0.1l0,0l0,0l0,0c1.2-0.2,3.3-0.7,5.5-1.2c2.1-0.5,4.4-1.1,5.8-1.7 c4.2-1.7,6.4-6.3,4.7-10.7c-1.3-3.6-4.6-5.4-7.9-5.2c-1.5-2.9-4.6-5-8.5-4.2c-4.5,0.8-7.5,5-6.9,9.5c0.2,1.5,0.8,3.8,1.5,5.9 C11.1,27.1,11.8,29.2,12.2,30.3 M20.9,2c-3.5-1.6-7-0.5-9.2,1.9c-3.1-1-6.8-0.2-9,3c-2.6,3.8-1.8,8.8,1.8,11.6 c0.6,0.5,1.4,1,2.3,1.5c0.4,0.2,0.8,0.2,1.2,0c0.4-0.2,0.6-0.7,0.5-1.1c-0.5-4.6,2.6-8.8,7.2-9.6c3.3-0.6,6,0.7,7.8,2.8 c0.3,0.3,0.7,0.5,1.1,0.4c0.4-0.1,0.8-0.4,0.9-0.8C26.5,7.8,24.7,3.7,20.9,2",strokeWidth:"2.2857",strokeLinejoin:"round",strokeLinecap:"round"})),e.feeOptIn&&!e.hasSelectedChipIn?o.a.createElement("table",{className:"donation-form__raisely-fee__table"},o.a.createElement("tr",null,o.a.createElement("td",{className:"donation-form__raisely-fee__table__left-column"},j("Your donation")),o.a.createElement("td",{className:"donation-form__raisely-fee__table__right-column"},Object(s.f)(e.amount,e.currency))),o.a.createElement("tr",null,o.a.createElement("td",{className:"donation-form__raisely-fee__table__left-column"},O," ",o.a.createElement("div",{className:"donation-form__raisely-fee__tooltip",onClick:()=>x(!C)},o.a.createElement(u.Icon,{name:"help_outlined",size:"small",className:"donation-form__raisely-fee__tooltip__icon"}),o.a.createElement("div",{className:"donation-form__tooltip"+(C?" donation-form__tooltip--active":"")},w))),o.a.createElement("td",{className:"donation-form__raisely-fee__table__right-column"},Object(s.f)(a,e.currency)))):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"donation-form__raisely-fee__text"},v&&o.a.createElement("span",{className:"donation-form__raisely-fee__text__chip-ask"},k),S),v&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Object(r.a)("donation-form__raisely-fee__chip-options")},_.map(n=>o.a.createElement("div",{key:n,className:Object(r.a)("donation-form__raisely-fee__chip-choice",a===n&&e.feeOptIn&&"donation-form__raisely-fee__chip-choice--active",v&&"donation-form__raisely-fee__chip-choice__default"),onClick:()=>{a===n&&e.feeOptIn?t(e=>{e.set("chipInAmount",0),e.set("feeOptIn",!1),e.set("hasSelectedChipIn",!0)}):t(e=>{e.set("chipInAmount",n),e.set("feeOptIn",!0),e.set("hasSelectedChipIn",!0)});const o=a===n?"donation.variableOptInDeselected":"donation.variableOptInSelected";Object(d.a)(N,T,{values:{...e,selectedOptInAmount:n},steps:p,availableFrequencies:f,targetProfileUuid:b,optInAmount:a,isExpressForm:h,isV3:y},o)}},o.a.createElement("p",null,Object(s.f)(n,e.currency)))))))):null}},231:function(e,t,a){var n=a(938),o=a(943),r=a(633),i=a(176),l=a(946),s=a(947);var c={M:function(e){return e.getMonth()+1},MM:function(e){return m(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return m(e.getDate(),2)},DDD:function(e){return n(e)},DDDD:function(e){return m(n(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return o(e)},WW:function(e){return m(o(e),2)},YY:function(e){return m(e.getFullYear(),4).substr(2)},YYYY:function(e){return m(e.getFullYear(),4)},GG:function(e){return String(r(e)).substr(2)},GGGG:function(e){return r(e)},H:function(e){return e.getHours()},HH:function(e){return m(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return m(c.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return m(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return m(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return m(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return m(e.getMilliseconds(),3)},Z:function(e){return d(e.getTimezoneOffset(),":")},ZZ:function(e){return d(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function u(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function d(e,t){t=t||"";var a=e>0?"-":"+",n=Math.abs(e),o=n%60;return a+m(Math.floor(n/60),2)+t+m(o,2)}function m(e,t){for(var a=Math.abs(e).toString();a.length<t;)a="0"+a;return a}e.exports=function(e,t,a){var n=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",o=(a||{}).locale,r=s.format.formatters,d=s.format.formattingTokensRegExp;o&&o.format&&o.format.formatters&&(r=o.format.formatters,o.format.formattingTokensRegExp&&(d=o.format.formattingTokensRegExp));var m=i(e);return l(m)?function(e,t,a){var n,o,r=e.match(a),i=r.length;for(n=0;n<i;n++)o=t[r[n]]||c[r[n]],r[n]=o||u(r[n]);return function(e){for(var t="",a=0;a<i;a++)r[a]instanceof Function?t+=r[a](e,c):t+=r[a];return t}}(n,r,d)(m):"Invalid Date"}},25:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c}));var n=a(0),o=a.n(n),r=a(42),i=a(3);function l(e="heading",t={}){const a="function"==typeof t.defaultValue?t.defaultValue(e=>e):t.defaultValue||"",n=t.defaultLevel||3,l=t.defaultColor||null,s=t.defaultAlign||"left";return{internalEditable:{[e]:{label:t.label||"Heading",group:t.customGroup||"headings",type:"inline-heading"}},editable:{[e]:{value:{text:a,level:n,color:l}}},render(e){const{tD:t}=Object(i.a)(),c="string"==typeof e.text?e.text:a,u=e.color||l,d=e.align||s,m="h"+(e.level||n);return c?o.a.createElement(m,{style:{color:Object(r.a)(u,e.campaign),textAlign:d}},t(c)):null}}}function s(){return{campaignConfigFlag:{condition:["activity.active",!0],hideClient:!0}}}function c(){return{campaignConfigFlag:{condition:["flags.draftComponents",!0]}}}},253:function(e,t,a){"use strict";a.d(t,"b",(function(){return k})),a.d(t,"a",(function(){return O}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=(a(58),a(7)),s=a.n(l),c=a(80),u=a.n(c),d=a(10),m=a(33),p=a(26),f=a(93),g=(a(27),a(59)),b=a(115);function h(e,t,a){try{const a=JSON.stringify(e.message).includes("/v3");if(JSON.stringify(e.message).includes("No value passed to payment"));else if(JSON.stringify(e.message).includes("invalid value")&&a){const a=e.message.split("{",1),n=JSON.parse(e.message.replace(a,""));t(n.errors[0].message)}else if(JSON.stringify(e.message).includes("CURRENCY_NOT_ALLOWED"))t("Your currency is not supported");else if(JSON.stringify(e.message).includes("Client Authentication failed")||JSON.stringify(e.message).includes("INVALID_EXPERIENCE_PROFILE_ID"))t("PayPal configuration is incorrect");else{t(e.message&&e.message.split(".")[0]||"Something went wrong please try again")}}catch(e){console.log(e),t("Something went wrong, please try again")}a&&a()}function y({isProcessing:e,envConfig:t,createDonation:a,cancelDonation:n,setError:l,...c}){const u=Object(p.k)(c),d=c.values.amount+(c.values.feeOptIn?u:0),m=s()(window,"paypal.Button.react",()=>null),{friendlyChallenge:f}=c;return i.a.createElement(b.c,{isProcessing:e,showWhenProcessing:c.showWhenProcessing,finalTotal:d},!c.minimal&&i.a.createElement(r.Fragment,null,i.a.createElement("img",{className:"method-logo method-logo-paypal",src:"https://www.paypalobjects.com/webstatic/en_US/i/buttons/PP_logo_h_200x51.png",alt:"PayPal"}),i.a.createElement("p",{className:"lead donation-form__paypal-heading"},"Donate with PayPal")),i.a.createElement(r.Fragment,null,c.appendInput,!c.formProps.hideFee&&i.a.createElement(b.a,o()({},c,{feeAmount:u})),!c.minimal&&i.a.createElement("p",{className:"donation-form__currency-message"},c.paymentIntervalLabel,b.d[c.targetCurrency].name),i.a.createElement("div",{className:"donation-form__paypal-button"},i.a.createElement(m,o()({},t,{disabled:f.isWorking,commit:!0,style:{label:"pay",tagline:!1},payment:()=>a(),onAuthorize:e=>a(e),onError:e=>h(e,l,n),onCancel:()=>{n()}}))),f.isWorking&&i.a.createElement(b.b,{challengeProgress:f.challengeProgress})),c.error&&i.a.createElement("p",{className:"donation-form__message donation-form__message--error"},c.error))}function v({isLive:e,currentProvider:t,createProviderDonation:a,...n}){const[l,c]=Object(r.useState)(null),[u,m]=Object(r.useState)(!1),[p,f]=Object(r.useState)(null);Object(r.useEffect)(()=>{Object(g.a)("https://www.paypalobjects.com/api/checkout.js").then(()=>m(!0))},[]);const b=e=>{"string"==typeof e&&(e=new Error(e)),"ONCE"===n.values.interval?n.integrations.broadcast("donation.error",e):n.integrations.broadcast("subscription.error",e),c(e)},v={env:e?"production":"sandbox",client:{sandbox:s()(t,"data.testClientId")||s()(t,"public.testClientId"),production:s()(t,"data.liveClientId")||s()(t,"public.liveClientId")}};return i.a.createElement(y,o()({},n,{envConfig:v,error:l,setError:b,createDonation:e=>a(e,{...n,paymentId:p,setPaymentId:f,setError:b,handlePayPalError:h}),cancelDonation:async()=>{console.log("Payment intent cancelled or failed"),await d.a.donations.cancel.create({id:p,data:{data:{result:{message:"user_cancelled",status:"CANCELLED"}}}})}}))}var _=a(48);const E=e=>{const{raiselyFee:t,values:a,donationTarget:n,targetCurrency:o}=e,r={...a,idempotencyKey:e.idempotencyKey,currency:o,profileUuid:n.profileUuid,campaignUuid:n.campaignUuid,type:"ONLINE",items:Array.isArray(a.items)?a.items.map(e=>({...e,amount:!0===e.amount?a.amount:e.amount})):a.items};if(!t.customFee)return r.fee=a.feeOptIn?Object(p.k)(e):0,r;if(a.feeOptIn){const n=Object(p.k)(e);r.feeOptIn=!1,r.fee=0,r.amount=a.amount+n,t.includeInTotals||(r.items=[...r.items||[],{amount:n,description:"Fee",includeInTotals:!1,type:"OTHER"}]),r.public={...a.public||{},customFee:!0,customFeeAmount:n}}else r.fee=0,r.public={...a.public||{},customFee:!1,customFeeAmount:0};return r};async function k(e,{setProcessing:t,setError:a,existingCard:n,elementRef:o,formProps:r,tokenFromApplePay:i,friendlyChallenge:l,...c}){const m="ONCE"!==c.values.interval&&c.values.interval?"subscriptions":"donations";async function p(t){if(!t.confirmationRequired)return t;const a=t.data.uuid,n=t.data.providerUser.setupToken,i=t.data.providerUser.setupSecret,l={payment_method:{card:o.current}},s=n.startsWith("pi_"),c=await(s?e.confirmCardPayment(i,l):e.confirmCardSetup(i,l)),{error:u}=c,p=c.paymentIntent||c.setupIntent;if(u)throw u;if(!p||!["succeeded","requires_capture","processing"].includes(p.status))throw console.log("Result was not successful, but no error was given.",c),new Error("Unknown processing error. Transaction may have completed. Please contact support");return r.onTokenSuccess?t:(await d.a[m].confirm.create({id:a})).body().data()}const f=E(c);let g={};t(!0);let b=!1;try{g=i?{method:"APPLE_PAY",token:i}:n?{token:"EXISTING_CARD",card:n.id,customer:n.customer}:{},c.preferSCAMode?g.method="STRIPE_INTENT":n||(g={...await e.createToken({currency:f.currency})});const a={...g};if(!n&&!c.preferSCAMode&&g.error)throw new Error(g.error.message);!n&&g.token&&u()(g.token)&&(g.token=g.token.id);const h={...f,...g},{preferSCAMode:y}=c;if(r.onTokenSuccess){const e=["STRIPE_INTENT"].includes(g.method)&&"EXISTING_CARD"!==g.token;return await r.onTokenSuccess({data:h,processSCADonation:e&&p,token:a,elementRef:o,preferSCAMode:y}),void t(!1)}let v;b=!0;let _=0,E=!1;do{try{const e=await l.awaitSolution();v=(await d.a[m].create({data:h,challengeSolution:e})).body().data()}catch(e){if(0!==_||!1!==s()(e,"errorData.more.permanent",!0))throw e;console.error("Additional fraud measures enabled since page load, verifying and retrying"),E=!0,l.reset({startNow:!0,force:!0})}_+=1}while(_<2&&E);const k=await p(v);c.updateValues(null,{nextStep:!0,lastResult:k.data}),l.reset()}catch(e){console.error(e);const n=s()(e,"response.data.errors[0].message");if(n)a(n,e);else{let t=e.message;["CREDIT_CARD"].includes(f.method)&&t&&t.startsWith("NetworkError when attempting to fetch resource")&&(t="There was a network error. Please try again."),a(t,e)}t(!1),b&&l.reset({startNow:!0})}}async function w(e,{setError:t,handlePayPalError:a,setProcessing:n,paymentId:o,setPaymentId:r,friendlyChallenge:i,...l}){const{paypal:c}=window;if(e)return c.request.post(`${d.a.baseUrl}/donations/${o}/confirm`,{rawData:JSON.stringify({paymentId:e.paymentID,payerId:e.payerID})}).then(e=>l.updateValues(null,{lastResult:e.data||e,nextStep:!0}),e=>{console.error("auth fail",e),a(e,t)});const u=E(l),m=await i.awaitSolution();return c.request.post(d.a.baseUrl+"/donations",{rawData:JSON.stringify(u),challengeSolution:m}).then(e=>(r(e.data.uuid),i.reset(),s()(e,"_payment_created.id")||s()(e,"data.token")),e=>{console.error("auth fail",e),a(e,t),i.reset({startNow:!0})})}function O({currentProvider:e,...t}){const[a,n,l]=Object(_.c)("donation"),s={STRIPE:{FormProvider:f.c,providerDonate:k},PAYPAL:{FormProvider:v,providerDonate:w}},{FormProvider:c,providerDonate:u}=s[e.providerType]||{};return c?i.a.createElement(r.Suspense,{fallback:i.a.createElement(m.b,null)},i.a.createElement(c,o()({isLive:"LIVE"===t.global.campaign.mode,createProviderDonation:u,currentProvider:e,friendlyChallenge:l},t))):null}},255:function(e,t,a){"use strict";a(5);var n=a(14),o=a(92),r=a(674),i=a.n(r),l=a(316);const s=[{interval:"ONCE",count:1,amounts:[{amount:5e3,description:"",image:""},{amount:1e4,description:"",image:""},{amount:2e4,description:"",image:""},{amount:5e4,description:"",image:""},{amount:1e5,description:"",image:""}]},{interval:"MONTH",count:1,amounts:[{amount:1500,description:"",image:""},{amount:3e3,description:"",image:""},{amount:5e3,description:"",image:""},{amount:1e4,description:"",image:""},{amount:2e4,description:"",image:""}]}],c={ONCE:[{variant_name:"50-100-200-500",weight:1}]},u={MONTH:[{variant_name:"30-50-100-200",weight:1}]};function d(e,t,a,o="default"){var r,i,l,s,d,m,p,f,g,b,h,y,v,_,E;if(!e)return!1;const k=!1!==(null===(r=a.config.donation)||void 0===r?void 0:r.intelligentAmountsRegularDonations);let w=(null===(i=window)||void 0===i||null===(l=i.intelligentAmounts)||void 0===l||null===(s=l.amounts)||void 0===s||null===(d=s[o])||void 0===d?void 0:d[e])||(null===(m=window)||void 0===m||null===(p=m.intelligentAmounts)||void 0===p||null===(f=p.amounts)||void 0===f||null===(g=f[o])||void 0===g?void 0:g.default)||(null===(b=window)||void 0===b||null===(h=b.intelligentAmounts)||void 0===h||null===(y=h.amounts)||void 0===y?void 0:y[e])||(null===(v=window)||void 0===v||null===(_=v.intelligentAmounts)||void 0===_||null===(E=_.amounts)||void 0===E?void 0:E.default)||{...c,...u};const O=Object.keys(w);O.includes("ONCE")||(w={...c,...w}),!O.includes("MONTH")&&k&&(w={...w,...u}),k||delete w.MONTH;const S=Object.entries(w||{});return S.length?(t&&t(e=>{e.set("availableVariantsAud",w)}),S.map(([t,a])=>{const o=function(e){var t,a;let n=[],o=0;for(let t of e)o+=t.weight,n.push(o);const r=(null===(t=window)||void 0===t||null===(a=t.intelligentAmounts)||void 0===a?void 0:a.randomNumber)||0;for(let t=0;t<n.length;t++)if(r<n[t])return e[t]}(a);return{interval:t,count:1,amounts:o.variant_name.split("-").map(t=>{const a=100*t;return{image:"",description:"",amount:Object(n.c)(a,"AUD",e,!0),amountAud:a,selectedVariantAud:o}})}})):null}t.a=Object(o.d)((function(e=null,t=null){var a,n,r,c;const{campaign:u}=useRaisely(),m=null===(a=window)||void 0===a||null===(n=a.navigator)||void 0===n?void 0:n.userAgent,p=m?i()(m):null,f="mobile"===Object(l.get)(p,"device.type",null)?"mobile":"default";if(Object(o.c)(!0,"IntelligentAmounts:FullDisable"))return null;const g=(null===(r=u.config)||void 0===r||null===(c=r.donation)||void 0===c?void 0:c.intelligentAmounts)||!1,b=Object(o.c)(s,"IntelligentAmounts");return Object(o.b)(()=>b||g&&d(e,t,u,f),[b,g,e],"IntelligentAmounts")||null}),"IntelligentAmounts")},257:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(5);var n=a(0),o=a.n(n),r=a(3),i=a(56),l=a(17);function s(){const{t:e}=Object(r.d)(),{values:t,updateValues:a}=Object(l.b)(),{anonymous:n}=t;return o.a.createElement("div",{className:"donation-form__anonymous"},o.a.createElement(i.a,{id:"anonToggle",type:"checkbox",label:e("Keep my donation anonymous"),name:"anonymousDonation",value:n,errors:[],change:()=>a(e=>e.set("anonymous",!n))}))}},258:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),o=a.n(n),r=a(3);function i(){const{t:e,Trans:t}=Object(r.d)();return o.a.createElement("div",{className:"swiftaid-banner"},o.a.createElement("div",{className:"swiftaid-banner__img-wrapper"},o.a.createElement("img",{src:"https://storage.googleapis.com/raisely-assets/giftaidit.svg",alt:""})),o.a.createElement("div",{className:"swiftaid-banner__text"},o.a.createElement("p",{className:"swiftaid-banner__heading"},e("Gift Aid will be added to this donation automatically with Swiftaid")),o.a.createElement("p",{className:"swiftaid-banner__description"},o.a.createElement(t,null,"Please notify"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.swiftaid.co.uk"},"Swiftaid")," ","if you want to cancel this authorisation, change your home address or no longer pay sufficient tax."))))}},259:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"AddActivity",(function(){return S})),a.d(n,"ActivityList",(function(){return ie})),a.d(n,"DonationStream",(function(){return Se})),a.d(n,"DashboardDonationStream",(function(){return Pe})),a.d(n,"RegularDonationStream",(function(){return Le})),a.d(n,"RegularDonationTile",(function(){return De.a})),a.d(n,"Leaderboard",(function(){return We})),a.d(n,"Share",(function(){return Ze.a})),a.d(n,"RaiselyShare",(function(){return Ke.a})),a.d(n,"StravaConnectButton",(function(){return ae})),a.d(n,"FacebookFundraisingConnectButton",(function(){return at})),a.d(n,"PostFeed",(function(){return dt})),a.d(n,"PostCreator",(function(){return gt})),a.d(n,"Modal",(function(){return Ne.a})),a.d(n,"SelectCard",(function(){return bt.a})),a.d(n,"ProfileControls",(function(){return kt})),a.d(n,"PageNavigation",(function(){return Tt})),a.d(n,"MultiForm",(function(){return Nt.a})),a.d(n,"ProfilePreviewByUuid",(function(){return Ct.a})),a.d(n,"ProfileSelect",(function(){return xt.a})),a.d(n,"ProfileSearch",(function(){return At})),a.d(n,"ProfileSelectList",(function(){return Dt.a})),a.d(n,"SocialLinks",(function(){return Mt})),a.d(n,"DonationForm",(function(){return Bt})),a.d(n,"DonationFormV3",(function(){return Ut})),a.d(n,"donationHelpers",(function(){return Ht.b})),a.d(n,"RaiselyPayment",(function(){return Vt.a})),a.d(n,"DonationFormMinimal",(function(){return $t.a})),a.d(n,"ProfileGrid",(function(){return na})),a.d(n,"TeamInfo",(function(){return oa})),a.d(n,"SignupCounter",(function(){return ra})),a.d(n,"DonorCounter",(function(){return ia})),a.d(n,"Accordion",(function(){return da})),a.d(n,"Badges",(function(){return va})),a.d(n,"ControlPanel",(function(){return Sr})),a.d(n,"CreateTeamButton",(function(){return Nr})),a.d(n,"ProfileHelper",(function(){return xr})),a.d(n,"ResourceList",(function(){return Dr})),a.d(n,"ProfileNotification",(function(){return Ir})),a.d(n,"Logos",(function(){return Mr})),a.d(n,"LeadForm",(function(){return Lr})),a.d(n,"MatchedProgressBar",(function(){return Ur})),a.d(n,"MetricProgressBar",(function(){return Vr})),a.d(n,"StreamlineInput",(function(){return $r.a})),a.d(n,"Countdown",(function(){return Gr})),a.d(n,"ActivityTracker",(function(){return ci})),a.d(n,"EventOverview",(function(){return ui.a})),a.d(n,"MatchedGivingCalculator",(function(){return di})),a.d(n,"FacebookConnectButton",(function(){return et.a})),a.d(n,"FacebookFundraisingSignup",(function(){return pi})),a.d(n,"SamlLoginButton",(function(){return fi.a})),a.d(n,"LanguageSelectBar",(function(){return gi.a})),a.d(n,"Feed",(function(){return bi})),a.d(n,"PersonnelGrid",(function(){return hi})),a.d(n,"DonationButton",(function(){return Oi})),a.d(n,"FundraisingHistory",(function(){return xi})),a.d(n,"SignupForm",(function(){return Li})),a.d(n,"SignupFormV2",(function(){return Bi.c})),a.d(n,"ProfileFormV2",(function(){return Bi.b})),a.d(n,"PaymentFormV2",(function(){return Bi.a})),a.d(n,"SignupFormV3",(function(){return Ui})),a.d(n,"TicketForm",(function(){return qi})),a.d(n,"SignupFormV4",(function(){return lr})),a.d(n,"StravaAddActivity",(function(){return Ki})),a.d(n,"StravaActivityList",(function(){return Ji})),a.d(n,"UserForm",(function(){return rr.a})),a.d(n,"CompleteForm",(function(){return Di.a})),a.d(n,"ExerciseGoalForm",(function(){return ir.a}));var o=a(47),r=a(70),i=a(30),l=a.n(i),s=a(101),c=a.n(s),u=a(10),d=a(3),m=a(29),p=a(28),f=(a(5),a(0)),g=a.n(f),b=a(1),h=a.n(b),y=a(7),v=a.n(y),_=a(71),E=a(56),k=a(20);const w=["RUNNING","SWIMMING","CYCLING","WALKING","WHEELCHAIRING","OTHER"];function O(e,t,a){const n=e.campaign.config.activity.type;if(w.includes(a))return a;const o=t?v()(e.user.profile,t):a||n;return"ANY"===o?"RUNNING":w.includes(o)?o:"OTHER"}function S({header:e,customClass:t,dateLabel:a,unitLabel:n,measureLabel:o,unit:r,singularUnitLabel:i,activity:l,onFailure:s,onSuccess:c,activityField:m,distanceLabel:p,useTime:b,hideDate:h,saveActionText:y,...w}){const{global:S,actions:T}=useRaisely(!0,{campaign:w.campaign,user:w.currentUser}),[N,C]=Object(f.useState)({activity:O(S,m,l),unit:r,measure:0,date:new Date}),x=v()(S.campaign.config,"activity.metric"),j=b?"time":x,P=o||p,A=Object(f.useMemo)(()=>(({dateLabel:e,inputLabel:t,unitLabel:a,activity:n,hideDate:o})=>{const{t:r,tD:i}=Object(d.a)(),l=[];return o||l.push({active:!0,core:!0,id:"date",type:"date",label:e&&i(e)||r("Date"),value:null,format:"auto",config:{after:new Date},default:(new Date).toISOString()}),"ANY"===n&&l.push({active:!0,core:!0,id:"activity",type:"select",label:"Activity Type",required:!0,options:[{value:"RUNNING",label:r("Running")},{value:"SWIMMING",label:r("Swimming")},{value:"CYCLING",label:r("Cycling")},{value:"WALKING",label:r("Walking")},{value:"WHEELCHAIRING",label:r("Wheelchairing")},{value:"OTHER",label:r("Other")}]}),l.push({active:!0,core:!0,id:"measure",type:"custom",required:!0,render:e=>g.a.createElement(E.a,{type:"activity-measure",label:t,required:e.required,unitLabel:a&&i(a)||r("Measurement"),measure:e.values.measure,unit:e.values.unit,onChange:t=>e.change("measure",t,!0),onChangeUnit:t=>e.change("unit",t,!0),errors:e.errors,touched:e.touched})}),l})({values:N,activity:l,metric:j,dateLabel:a,inputLabel:P,hideDate:h}),[N,l,j,a,P,h]);return g.a.createElement("div",{className:"add-activity strava-add-activity "+(t||"")},e,g.a.createElement(_.a,{buttonFullWidth:!0,values:N,actionText:y||"Add Activity",onChange:e=>C(e),fields:A,action:async(e,t)=>{const a={...e,measure:Object(k.n)(e.measure,e.unit),userUuid:S.user.uuid,profileUuid:S.user.profile.uuid};a[Object(k.l)(j)?"measure":"time"]=a.measure,a.data={userUnit:1===a.measure&&i?i:e.unit},a.activity=O(S,m,a.activity);try{const e=(await u.a.exercise.create({data:a})).body().data(),t=e.data.distance,n=e.data.time;S.current&&S.current.profile&&await T.updateCurrent({...S.current,profile:{...S.current.profile,activityTotal:S.current.profile.activityTotal+(t||n),[t?"exerciseTotal":"exerciseTotalTime"]:S.current.profile.activityTotal+(t||n)}}),"function"==typeof c&&(await T.resolveCurrentUser(S.campaign.uuid),c(a)),C({activity:O(S,m,l),unit:r,measure:0,date:new Date})}catch(e){"function"==typeof s&&s(e)}t.setSubmitting(!1)}}))}S.propTypes={campaign:h.a.object.isRequired,header:h.a.any,currentUser:h.a.object,dateLabel:h.a.string,unitLabel:h.a.string,measureLabel:h.a.string,activity:h.a.oneOf([...w,"TIME","ANY"]),activityField:h.a.object,onSuccess:h.a.func,onFailure:h.a.func};var T=a(4),N=a.n(T),C=a(24),x=a.n(C),j=a(119),P=a.n(j),A=a(65),D=a.n(A),R=a(46),F=a.n(R),I=a(2),M=a.n(I),L=a(408),B=a.n(L),U=a(98),H=a.n(U),V=a(11);function $({updatePage:e,currentPage:t,total:a,limit:n}){if(0===a)return null;if(n>=a)return null;const o=(t+1)*n>=a;return g.a.createElement("div",{className:"page-controls"},g.a.createElement(V.a,{tool:!0,theme:"secondary",size:"medium",disabled:0===t,onClick:t=>e(-1,t),ariaLabel:"Previous page"},g.a.createElement("i",{className:"material-icons","aria-hidden":!0},"chevron_left")),g.a.createElement(V.a,{tool:!0,theme:"secondary",size:"medium",onClick:t=>e(1,t),disabled:o,ariaLabel:"Next page"},g.a.createElement("i",{className:"material-icons","aria-hidden":!0},"chevron_right")))}var q=a(99),G=a(8),z=a(87),Y=a(315),W=a.n(Y),Z=a(316);const K=e=>Object(G.m)(e)&&e>0?e:5;class J extends f.Component{constructor(...e){super(...e),M()(this,"state",{pages:[],currentPage:0,paginationData:{total:1,pages:1},attemptedLoad:!1,loading:!1,ref:g.a.createRef(),id:Object(Z.uniqueId)()}),M()(this,"safeUpdateState",(...e)=>this.toBeUnmounted?null:this.setState(...e)),M()(this,"setStaticPaginationData",(e=0,t)=>{const{props:a}=this,n=W()(a.staticPaginationData,this.limit);this.setState({currentPage:e,pages:n,paginationData:{limit:this.limit,pages:n.length,total:a.staticPaginationData.length},attemptedLoad:!0},()=>t&&"function"==typeof t&&t())}),M()(this,"fetchCurrentPage",async(e={},t)=>{const{state:a,props:n}=this;if(!n.showAsLoading){this.setState({loading:!0});try{const t={...n,limit:this.limit},o=e.reset?0:a.currentPage,r=(await n.pollingMethod(t,this.limit*o)).body().data();this.safeUpdateState({currentPage:o,pages:l.a.set(a.pages,a.currentPage,r.data),paginationData:r.pagination,attemptedLoad:!0,loading:!1})}catch(e){console.error("Pagination error",e),this.setState({attemptedLoad:!0,loading:!1})}t&&t()}}),M()(this,"updatePage",async(e=0,t)=>{t&&t.preventDefault&&t.preventDefault();const{state:a,props:n}=this;if(!a.attemptedLoad||0===e)return;const o=e>0?1:-1,r=Math.max(0,Math.min(a.currentPage+o,a.paginationData.pages-1));a.ref.current.focus();this.safeUpdateState({attemptedLoad:!1,currentPage:r},()=>{n.staticPaginationData?this.setStaticPaginationData(r,()=>Object(z.a)(this.state.ref)):this.fetchCurrentPage({},()=>Object(z.a)(this.state.ref))})}),M()(this,"presentPageProps",()=>{const{state:e}=this,t=e.attemptedLoad&&!this.props.showAsLoading?e.pages[e.currentPage]:P()(this.limit,()=>null),a={limit:this.limit,isLoading:!e.attemptedLoad||this.props.showAsLoading,total:e.paginationData.total};return e.attemptedLoad&&!this.props.showAsLoading&&(a.total=e.paginationData.total,a.currentPage=e.currentPage,a.updatePage=this.updatePage),[t,a]})}componentDidMount(){const{props:e}=this;this.limit=K(e.limit),e.staticPaginationData?this.setStaticPaginationData():this.fetchCurrentPage()}componentDidUpdate(e){const{props:t}=this;t.staticPaginationData&&!H()(t,e)?(this.limit=K(t.limit),this.setStaticPaginationData()):!Object(G.u)(e,t)&&H()(t.filter,e.filter)||(this.limit=K(t.limit),this.fetchCurrentPage({reset:!0}))}componentWillUnmount(){this.toBeUnmounted=!0}render(){const{props:e}=this,{id:t}=this.state;if(!this.state.attemptedLoad&&!e.avoidLoader)return g.a.createElement(q.a,{sceneHeight:e.loadHeight||"20vh"});const a=this.presentPageProps();return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:B()("paginated-items","paginated-items--page-"+(a[1].currentPage+1),"paginated-items--limit-"+this.limit,{"paginated-items--loading":this.props.showAsLoading||this.state.loading}),style:{"--pagination-limit":this.limit},ref:this.state.ref,id:"paginated-content:"+t,"aria-label":"Paginated content","aria-describedby":"paginated-content:description:"+t},e.children(...a),g.a.createElement($,N()({},a[1],{id:t}))),g.a.createElement("p",{id:"paginated-content:description:"+t,"aria-live":"polite",className:"visually-hidden"},`You are currently on page ${a[1].currentPage+1} of ${a[1].total+1}`))}}J.propTypes={children:h.a.func.isRequired,pollingMethod:e=>{var t;return(null===(t=e.staticPaginationData)||void 0===t?void 0:t.length)<1&&h.a.func.isRequired},staticPaginationData:h.a.array,limit:h.a.number,showAsLoading:h.a.bool,avoidLoader:h.a.bool,loadHeight:h.a.string};var Q=a(23),X=a.n(Q),ee=a(49);const te=({profilePath:e,campaignPath:t})=>{const a=Object(ee.b)(),n=X.a.stringify({access_token:a,profileId:e,campaignId:t});return`${u.a.baseUrl}/auth/strava?${n}`};function ae({currentUser:e,campaign:t,connectLabel:a,connectedLabel:n,reconnectNotice:o,reconnectLabel:r,consentLabel:i}){const[l,s]=Object(f.useState)(!1),[c,m]=Object(f.useState)(!1),{actions:p}=useRaisely(!0),{t:b,tF:h}=Object(d.d)();if(!e||!t)return null;const{path:y}=e.profile,{path:v}=t,_=(k=e.profile)&&Array.isArray(k.authorisations)?k.authorisations.find(e=>"STRAVA"===e.app):null;var k;const w=_&&_.isExpired;return!_||w?g.a.createElement("div",{className:"strava-connect strava-connect--pending"},w&&g.a.createElement("div",{className:"strava-connect__expired"},h(o,b("Your Strava login has expired. Please re-connect your Strava account to continue recording your exercise to your campaign.")))||null,g.a.createElement("div",{className:"strava-connect__consent"},g.a.createElement(E.a,{id:"consentCheckbox",type:"checkbox",label:h(i,b("I consent to Raisely displaying my Strava activity publicly on my profile.")),value:c,change:()=>m(!c)})),g.a.createElement("div",{style:{textAlign:"center",marginBottom:"1em"},className:c?void 0:"strava-connect__no-consent"},g.a.createElement("a",{href:te({profilePath:y,campaignPath:v}),title:h(a,b("Connect your account to Strava")),className:"button--full"},g.a.createElement("img",{src:"https://storage.googleapis.com/raisely-assets/strava.svg",alt:w?h(r,b("Re-connect Strava")):h(a,b("Connect your account to Strava"))})))):g.a.createElement("div",{className:"strava-connect strava-connect--connected"},g.a.createElement(V.a,{onClick:()=>(async()=>{s(!0),await u.a.authorisations.delete({id:_.uuid}),await p.resolveCurrentUser(t.uuid),p.addSuccessMessage(b("Your Strava account has been disconnected.")),s(!1)})(),theme:"secondary",className:"button--full",isBasicLink:!0,disabled:l},l?b("One moment..."):h(n,b("Disconnect Strava"))))}ae.propTypes={campaign:h.a.object.isRequired,currentUser:h.a.object,connectLabel:h.a.string,connectedLabel:h.a.string,reconnectNotice:h.a.string,reconnectLabel:h.a.string};const ne=(e={},t)=>({offset:t,limit:D()(e.limit)&&e.limit>0?e.limit:10,private:!!e.isUserProfile||void 0}),oe=(e,t)=>{const{profile:a}=e;if(a.mock){const t=(new Date).toISOString(),n=P()(e.limit||10,()=>{const n=Math.round(1e3*Math.random()),o=Math.round(1e3*Math.random());return{createdAt:t,updatedAt:t,distance:n,time:o,rawDistance:n,measure:n,activity:e.activity||"SWIMMING",profile:a,data:null,user:a.user}});return Object(G.p)(n)}return u.a.profiles.exercise.getAll({id:a.path,query:ne(e,t)})};function re({activity:e,onDelete:t,showIcons:a,unit:n,metric:o,showActivityType:r,isUserProfile:i,decimalPlaces:l}){const s=r?Object(G.g)(e.activity)+" ":null,c=Object(k.i)(e,o),u="number"==typeof l?l:0,d=Object(k.c)(c,n,{shortLabel:!0,precision:u}),m=g.a.createElement("div",{className:"activity-list__list-item-container"},a?g.a.createElement("div",{className:"activity-list__list-item-label strava-activity-list__list-item-label"},g.a.createElement("div",{className:"activity-list__icon strava-activity-list__icon"},g.a.createElement("i",{className:"material-icons"},((e,t=null)=>{const a={RUNNING:"directions_run",SWIMMING:"pool",CYCLING:"directions_bike",WALKING:"directions_walk",WHEELCHAIRING:"accessible_forward",TIME:"timer"}[e];return a||(t||"accessibility_new")})(e.activity))),g.a.createElement("span",null,s," ",g.a.createElement("strong",null,d)," on"," ",x()(e.date).format("MMM D, YYYY"))):g.a.createElement("strong",null,F()(s)," ",d," on"," ",x()(e.date).format("MMM D, YYYY")),"STRAVA"===e.sourceApp&&e.activityId&&g.a.createElement("div",{className:"activity-list__list-item-strava-link"},g.a.createElement("a",{href:"https://www.strava.com/activities/"+e.activityId,target:"_blank",rel:"noopener noreferrer"},"View on Strava")));return g.a.createElement(f.Fragment,null,m,t&&i?g.a.createElement("button",{className:"activity-list__list-item__delete-button strava-activity-list__list-item__delete-button",onClick:a=>t(a,e),title:"Delete activity"},g.a.createElement("i",{className:"material-icons"},"delete")):null)}function ie({header:e,emptyLabel:t,showActivityType:a,showIcons:n,enableActivityLogging:o,enableActivityIntegrations:r,field:i,decimalPlaces:l,...s}){const{t:c}=Object(d.d)(),[m,p]=Object(f.useState)(!1),{pollingHash:b,global:h,actions:y}=useRaisely(!0,{campaign:s.campaign}),_=h.campaign.config.activity,E="function"==typeof s.renderActivity?s.renderActivity:re,w=s.onDelete?async(e,t)=>{await u.a.exercise.delete({id:t.uuid}),"function"==typeof s.onDelete&&s.onDelete(t.uuid)}:null,{metric:O,unit:T}=Object(k.f)(h.campaign.config,i),C=h.user&&h.user.profile&&s.profile&&s.profile.uuid===h.user.profile.uuid||!1,x=s.showAsLoading||C&&!h.userAuthAttempted,j=!v()(h,"campaign.config.activity.customTypeLabel")&&r&&C;return g.a.createElement("div",{className:"activity-list strava-activity-list "+(n?"activity-list--with-icons":"")},e,g.a.createElement(J,N()({},s,{showAsLoading:x,isUserProfile:C,pollingHash:b,pollingMethod:oe}),e=>e.length?g.a.createElement("ul",{className:"activity-list__list strava-activity-list__list"},e.map(e=>g.a.createElement("li",{key:e.uuid,className:"activity-list__list-item strava-activity-list__list-item"},E({activity:e,metric:O,unit:e.data&&e.data.userUnit||T,onDelete:w,showIcons:n,showActivityType:a,isUserProfile:C,decimalPlaces:l})))):g.a.createElement("div",{className:"activity-list__empty strava-activity-list__empty"},t||c("There are no activities recorded yet."))),o&&C?g.a.createElement("div",{className:"activity-list__add-activity"},m?g.a.createElement(f.Fragment,null,g.a.createElement(S,{saveActionText:"Add",campaign:h.campaign,unit:_.unit,singularUnitLabel:_.customUnitSingular,onSuccess:()=>{y.addSuccessMessage(c("Added activity")),y.triggerPageStreamRefetch()},activity:_.type,activityField:_.field,onFailure:e=>y.addErrorMessage(e)}),g.a.createElement("a",{className:"activity-list__add-activity__cancel",onClick:()=>p(!1)},c("Cancel"))):g.a.createElement(V.a,{className:"button--full",onClick:()=>p(!0)},c("Add Activity"))):null,j&&!m?g.a.createElement("div",{className:"activity-list__integrations"},g.a.createElement(ae,{campaign:h.campaign,currentUser:h.user,connectLabel:c("Connect to Strava")})):null)}ie.propTypes={campaign:h.a.object,profile:h.a.object.isRequired,onDelete:h.a.func.isRequired,header:h.a.node,emptyLabel:h.a.node,limit:h.a.number,field:h.a.oneOf(["time","distance","custom"]),decimalPlaces:h.a.number,showActivityType:h.a.bool};var le=a(32),se=a.n(le);const ce=e=>Object(G.m)(e)&&e>0?e:5;class ue extends f.Component{constructor(...e){super(...e),M()(this,"state",{models:null,paginationData:null,attemptedLoad:!1}),M()(this,"safeUpdateState",(...e)=>this.toBeUnmounted?null:this.setState(...e)),M()(this,"fetchCurrentStream",async()=>{if(!this.props.showAsLoading)try{const e={...this.props,limit:this.limit},t=(await this.props.pollingMethod(e,0)).body().data();this.safeUpdateState({models:t.data||[],paginationData:t.pagination,attemptedLoad:!0})}catch(e){console.error("Self contained error",e),this.setState({attemptedLoad:!0})}})}componentDidMount(){this.limit=ce(this.props.limit),this.fetchCurrentStream()}componentDidUpdate(e){const{props:t}=this;!Object(G.u)(e,t)&&H()(t.filter,e.filter)||(this.limit=ce(t.limit),this.fetchCurrentStream())}componentWillUnmount(){this.toBeUnmounted=!0}render(){const{props:e,state:t}=this;if(!t.attemptedLoad&&!e.avoidLoader)return g.a.createElement(q.a,{sceneHeight:e.loadHeight||"20vh"});const a=t.attemptedLoad&&!e.showAsLoading?t.models:P()(this.limit,()=>null);return e.children(a,{total:t.paginationData&&t.paginationData.total,limit:this.limit,isLoading:!t.attemptedLoad||this.props.showAsLoading})}}ue.propTypes={children:h.a.func.isRequired,pollingMethod:h.a.func.isRequired,limit:h.a.number,showAsLoading:h.a.bool,avoidLoader:h.a.bool,loadHeight:h.a.string};var de=ue,me=a(202),pe=a(307);function fe({donation:e,campaign:t,title:a,displayThanks:n,displayThanksForm:o,showAsLoading:r,onThanksSuccess:i,onThanksFailure:l,showFullName:s}){var c;const{user:u}=useRaisely(),[d]=r?[null]:e.donationTotal>0?[e]:[null];if(!d)return null;const m=!r&&Object(G.n)(u,d.profile),p=useRaisely().detectedCurrency,f=(null==d?void 0:d.currency)!=t.currency||((null==u||null===(c=u.profile)||void 0===c?void 0:c.currency)||p)!=t.currency,b=r?" ":Object(G.f)(d.displayTotal,d.currency,{displayDollarPrefix:f}),h=r?null:((e,t)=>t?e.fullName||`${e.firstName} ${e.lastName}`:e.firstName)(d,s),y=h&&d.anonymous?"Anonymous":h,v="FACEBOOK"===d.method;return g.a.createElement("div",{className:"highlight-donation"},g.a.createElement("h6",{className:"highlight-donation__title"},a),g.a.createElement("div",{className:"highlight-donation__amount"},b),g.a.createElement("div",{className:"highlight-donation__name"},y),!r&&d.message&&g.a.createElement("div",{className:"highlight-donation__message"},'"',d.message,'"'),!v&&g.a.createElement(pe.a,{donation:d,displayThanks:n,displayThanksForm:o,onThanksSuccess:i,profileIsOwnedByLoggedInUser:m,onThanksFailure:l,baseClass:"highlight-donation"}))}const ge=["vertical","horizontal","grid"],be=["date","createdAt","amount"],he=["desc","asc"],ye={amount:"campaignDisplayTotal",date:"date",createdAt:"createdAt"},ve=(e={},t=0,a)=>{const n=Object(G.n)(e.user,e.profile),o={offset:t,limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:ye[be.includes(e.sort)?e.sort:be[0]],order:he.includes(e.order)?e.order:he[0],highlight:e.highlight,displayTotalGT:0,subtree:0,includePrivate:e.displayThanksForm&&n?"thankyou":void 0};return a?(o.excludeMatched=!0,{...o,limit:1,sort:"campaignDisplayTotal",order:"desc"}):o},_e=(e,t)=>Object(G.p)(Array.from(Array(e)).map((e,a)=>({uuid:se()(),amount:1e3,donationTotal:1e3,displayTotal:1e3,firstName:"Example",preferredName:"Example",currency:t.currency,profile:{name:"Team Incredible",path:"team-incredible"},createdAt:x()().subtract(5*a,"minutes").format(),date:x()().subtract(5*a,"minutes").format()}))),Ee=(e,t,a=!1)=>{const{campaign:n,profile:o}=e;return n.mock?_e(e.limit,n):e.isUser?u.a.users.donations.getAll({id:e.user.uuid,query:{...ve(e,t,a),[u.a.avoidCampaignQuery]:"organisation"===e.source,private:e.global&&e.global.user&&e.user.uuid===e.global.user.uuid}}):!n.profile||o&&o.uuid!==n.profile.uuid?u.a.profiles.donations.getAll({id:e.profile.uuid,query:{...ve(e,t,a)}}):u.a.donations.getAll({query:{campaign:n.uuid,...ve(e,t,a)}})};function ke({currentProfile:e,isUser:t,campaign:a,profile:n,user:o}){const{t:r,Trans:i}=Object(d.d)();if(t)return o?g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,r("You have no donations"))):g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,g.a.createElement(i,null,g.a.createElement(m.a,{to:"/login"},"Log in")," to view your donations")));if(e&&e.path===n.path)return g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,r("Be the first to donate")));const l=({children:e})=>a.theme.includes("peerToPeer")||a.theme.includes("communityHub")?g.a.createElement(m.a,{to:""+(n.path===a.path?"/donate":`/${n.path}#donate`)},e):e;return g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,g.a.createElement(i,null,"Be the first to"," ",g.a.createElement(l,null,"make a donation"))))}function we({donation:e,...t}){return g.a.createElement("div",{className:"donation-stream__item"},t.hasCustomRender?t.renderDonation(e,t.showAsLoading):g.a.createElement(me.a,N()({donation:e,campaign:t.campaign,showAsLoading:t.showAsLoading,detail:"grid"===t.direction?"tile":"basic",user:t.user,displayThanks:t.displayThanks,displayThanksForm:t.displayThanksForm,onThanksSuccess:t.onThanksSuccess,onThanksFailure:t.onThanksFailure},t)))}function Oe(e){const{t:t}=Object(d.d)(),{campaign:a,pollingHash:n}=useRaisely(),o=e.pollingMethod||Ee,[r,i]=Object(f.useState)(!1),l=e.currentProfile;return Object(f.useEffect)(()=>{o({...e,campaign:a},0,!0).then(e=>{i(e.result()[0])})},[n,l]),r?g.a.createElement("div",{className:"donation-stream__top"},g.a.createElement(fe,N()({},e,{campaign:a,title:t("Top Donor"),donation:r}))):null}function Se(e){const{pollingHash:t}=useRaisely(!0),a=ge.includes(e.direction)?e.direction:"horizontal",n="horizontal"===e.direction?de:J,o="function"==typeof e.renderDonation,r=e.pollingMethod||Ee;return g.a.createElement("div",{className:(i=a,l=e.isPaginated,s=e.customClass,`donation-stream donation-stream--direction-${i} ${l?"donation-stream--paginated ":""}${s}`),style:e.style,"aria-label":"Donation stream"},e.header,e.showHighlight&&g.a.createElement(Oe,e),g.a.createElement(n,N()({avoidLoader:!0},e,{pollingHash:t,pollingMethod:r,loadHeight:"76px"}),(t,{isLoading:n})=>{const r=e.isUser&&!e.user?[]:t;return null!=r&&r.length?g.a.createElement(f.Fragment,null,"horizontal"===a&&r.length>2?g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"donation-stream__track donation-stream__track--items-"+r.length},r.map(t=>g.a.createElement(we,N()({key:t?t.uuid:void 0},e,{donation:t,showAsLoading:n,hasCustomRender:o}))),g.a.createElement("div",{className:"donation-stream__track__loop"},r.map(t=>g.a.createElement(we,N()({key:t?t.uuid:void 0},e,{donation:t,showAsLoading:n,hasCustomRender:o,user:e.user})))))):g.a.createElement(f.Fragment,null,r.map(t=>g.a.createElement(we,N()({key:t?t.uuid:void 0},e,{donation:t,hasCustomRender:o,showAsLoading:n,user:e.user}))))):g.a.createElement(ke,{currentProfile:e.currentProfile,isUser:e.isUser,user:e.user,campaign:e.campaign,profile:e.profile})}));var i,l,s}Se.propTypes={profile:h.a.object,donations:h.a.arrayOf(h.a.object),direction:h.a.oneOf(ge),customClass:h.a.string,isPaginated:h.a.bool,showHighlight:h.a.bool,displayThanks:h.a.bool,displayThanksForm:h.a.bool,onThanksSuccess:h.a.func,onThanksFailure:h.a.func,limit:h.a.number,sort:h.a.oneOf(be),order:h.a.oneOf(he),pollingMethod:h.a.func};var Te=a(400),Ne=a(38),Ce=a(309);const xe=(e,t)=>e.campaign.mock?_e(e.limit,e.campaign):u.a.one("profiles",e.targetProfileUuid).all("donations").getAll(((e={},t=0)=>{const a=Object(G.n)(e.user,e.profile);return{offset:t,q:e.search?e.search:void 0,sort:e.sort,order:e.order,limit:D()(e.limit)&&e.limit>0?e.limit:10,displayTotalGT:0,donationTotalGT:0,includePrivate:e.displayThanksForm&&a?"thankyou":void 0}})(e,t));function je(e){const{t:t}=Object(d.d)(),a=Object(f.useMemo)(()=>(e=>[be.includes(e.sort)?e.sort:be[0],he.includes(e.order)?e.order:he[0]])(e),[e.sort,e.order]),[[n,o],r]=Object(f.useState)(a),[i,l]=Object(f.useState)(""),[s,c]=Object(f.useState)(!!e.donationToThank),{global:u,pollingHash:m}=useRaisely(!0),{user:b,campaign:h}=u,y=e.targetProfileUuid||b.profile&&b.profile.uuid||null;return y?g.a.createElement("div",{className:"dashboard-donation-stream"},g.a.createElement("div",{className:"dashboard-donation-stream__header"},g.a.createElement(p.Icon,{name:"search",size:"normal"}),g.a.createElement("input",{type:"text",className:"dashboard-donation-stream__search",placeholder:"Search your donors",value:i,onChange:e=>{e.preventDefault(),l(e.target.value)}}),g.a.createElement("div",{className:"dashboard-donation-stream__sort"},g.a.createElement("select",{value:`${n}:${o}`,onChange:e=>{e.preventDefault();const[t,a]=e.target.value.split(":");r([t,a])}},g.a.createElement("option",{value:"createdAt:desc"},t("Newest")),g.a.createElement("option",{value:"createdAt:asc"},t("Oldest")),g.a.createElement("option",{value:"amount:desc"},t("Highest")),g.a.createElement("option",{value:"amount:asc"},t("Lowest"))),g.a.createElement(p.Icon,{name:"expand_more",size:"small"}))),g.a.createElement(J,N()({},e,{campaign:h,sort:n,order:o,search:i,avoidLoader:!0,profile:b.profile,targetProfileUuid:y,pollingHash:m,pollingMethod:xe,loadHeight:"76px"}),(a,{isLoading:n,limit:o})=>{const r=n?P()(o,()=>null):a;return null!=r&&r.length||n?r.map(t=>g.a.createElement(Te.a,{key:t?t.uuid:void 0,donation:t,campaign:h,showAsLoading:n||!t,detail:"dashboard",user:b,displayThanks:e.displayThanks,displayThanksForm:e.displayThanksForm,onThanksSuccess:e.onThanksSuccess,onThanksFailure:e.onThanksFailure})):g.a.createElement("div",{className:"dashboard-donation-stream__empty"},t(i?"No matches found for the provided search":"You have no donations"))}),s&&g.a.createElement(Ne.a,{automatic:!0,onClose:()=>c(!1),removePadding:!0,modalContent:t=>g.a.createElement(Ae,{donationUuid:e.donationToThank,campaign:h,user:b,onThanksSuccess:e.onThanksSuccess,onThanksFailure:e.onThanksFailure,closeModal:t})})):null}je.propTypes={global:h.a.object.isRequired,user:h.a.object.isRequired,targetProfileUuid:h.a.string,showFullName:h.a.bool,displayThanks:h.a.bool,displayThanksForm:h.a.bool,onThanksSuccess:h.a.func,onThanksFailure:h.a.func,limit:h.a.number,sort:h.a.oneOf(be),order:h.a.oneOf(he)};var Pe=je;function Ae({donationUuid:e,campaign:t,user:a,onThanksSuccess:n,onThanksFailure:o,closeModal:r}){const[i,l]=Object(f.useState)(null);return Object(f.useEffect)(()=>{u.a.donations.get({id:e}).then(e=>l(e.body().data().data))},[e,l]),g.a.createElement(f.Fragment,null,g.a.createElement(Ce.a,{className:"dashboard-donation-stream__modal-heart"}),g.a.createElement(Te.a,{donation:i,campaign:t,showAsLoading:!i,detail:"dashboard",user:a,showFullName:!0,displayThanks:!0,displayThanksForm:!0,onThanksSuccess:()=>{n(),r()},onThanksFailure:o,expandThanksForm:!0,inModal:!0}))}var De=a(201);const Re=["createdAt","amount"],Fe=["desc","asc"],Ie=(e={})=>({limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:Re.includes(e.sort)?e.sort:Re[0],order:Fe.includes(e.order)?e.order:Fe[0],[u.a.avoidCampaignQuery]:"organisation"===e.source,mode:e.global.campaign.mode}),Me=e=>{return e.global.user&&e.global.user.mock?(t=1,a=e.global.campaign,Object(G.p)(Array.from(Array(t)).map((e,t)=>({amount:1e3,total:1e3,firstName:"Example",lastName:"Donor",fullName:"Example Donor",preferredName:"Example",currency:a.currency,status:"OK",interval:"WEEK",count:1,profile:{name:"Team Incredible",path:"team-incredible"},createdAt:x()().subtract(5*t,"minutes").format()})))):u.a.users.subscriptions.getAll({id:"me",query:Ie(e)});var t,a};function Le(e){const{t:t}=Object(d.d)(),[a,n]=Object(f.useState)(null),o=e=>n(a===e.uuid?null:e.uuid);return g.a.createElement("div",{className:"regular-donation-stream"},e.heading,g.a.createElement(J,N()({},e,{pollingMethod:Me}),(n,{isLoading:r})=>n.length?r?t("Loading..."):n.map(t=>g.a.createElement("div",{key:t.uuid,className:"regular-donation-stream__item"},g.a.createElement(De.a,N()({theme:e.streamTheme,donation:t,detail:"basic",size:e.tileSize,isSelected:a===t.uuid,onClick:o},e)))):g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,t("You have no regular donations")))))}var Be=a(6),Ue=a(41);const He=["createdAt","total","donors","name","rank","exerciseTotal.activityTotal","exerciseTotal.total","exerciseTotal.totalTime"],Ve=["desc","asc"],$e=[...Object.values(Be.h),""],qe={INDIVIDUAL:"Profile",GROUP:"Team",ORGANISATION:"Organisation"},Ge=e=>"profilelist profilelist--"+e,ze=(e={},t)=>({offset:t,campaign:e.campaignUuid,subtree:e.subtree?"1":void 0,parent:"string"!=typeof e.profileUuid||e.subtree?void 0:e.profileUuid,profile:"string"==typeof e.profileUuid&&e.subtree?e.profileUuid:void 0,user:"string"==typeof e.userUuid?e.userUuid:void 0,limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:He.includes(e.sort)?e.sort:He[0],order:Ve.includes(e.order)?e.order:Ve[0],q:"string"==typeof e.search?e.search:void 0,type:$e.includes(e.type)?e.type:void 0,rank:Boolean(e.rank)?1:void 0,rankActivityTotal:Boolean(e.rankActivityTotal)?1:void 0,rankExerciseTotal:Boolean(e.rankExerciseTotal)?1:void 0,rankExerciseTotalTime:Boolean(e.rankExerciseTotalTime)?1:void 0,rankDonors:Boolean(e.rankDonors)?1:void 0,...Object(G.i)(e.filter)}),Ye=(e,t)=>{return e.mock?(a=e.limit,n=e.type,Object(G.p)(Array.from(Array(a)).map((e,t)=>{const a=~~(1e3*Math.random()),o=~~(1e3*Math.random()),r=~~(Math.random()*a),i=~~(Math.random()*o);return{name:"Example "+(qe[n]||"Profile"),goal:Math.round(1e5*Math.random()),total:Math.round(1e5*Math.random()),photoUrl:`https://randomuser.me/api/portraits/${Math.random()>.5?"men":"women"}/${Math.round(100*Math.random())}.jpg`,createdAt:x()().subtract(5*t,"days").format(),rank:t+1,exerciseGoal:a,exerciseTimeGoal:o,exerciseTotalTime:i,exerciseTotal:r,activityTotal:r}}))):u.a.profiles.getAll({query:ze(e,t)});var a,n};function We(e){const{theme:t}=e,{Trans:a}=Object(d.d)(),n=Ue.c.includes(t)?t:"default",o="function"==typeof e.renderProfile;return g.a.createElement("div",{className:Ge(n)},e.header,g.a.createElement(J,N()({},e,{pollingMethod:Ye,avoidLoader:!0}),(t,{isLoading:r})=>t.length?t.map((t,a)=>g.a.createElement("div",{key:t?t.uuid:a,className:"profilelist__item"},o&&!r?e.renderProfile(t):g.a.createElement(Ue.a,{defaultImage:e.defaultImage||"",theme:n,profile:t||{},showAsLoading:r,displaySource:e.displaySource,showRank:e.showRank,showInviteLink:e.showInviteLink}))):g.a.createElement("div",{className:"profilelist__empty"},g.a.createElement(a,null,"Be the first to"," ",g.a.createElement(m.a,{to:"/signup"},"sign up")))))}We.propTypes={campaignUuid:h.a.string,profileUuid:h.a.string,userUuid:h.a.string,limit:h.a.number,sort:h.a.oneOf(He),order:h.a.oneOf(Ve),type:h.a.oneOf($e),filter:h.a.arrayOf(h.a.shape({condition:h.a.string,field:h.a.string,filter:h.a.string})),defaultImage:h.a.string,rank:h.a.bool,rankActivityTotal:h.a.bool,rankDonors:h.a.bool,rankExerciseTotal:h.a.bool,rankExerciseTotalTime:h.a.bool,showRank:h.a.bool,subtree:h.a.bool,displaySource:h.a.oneOf(["activityTotal","total","exerciseTotal","exerciseTotalTime"]),mock:h.a.bool};var Ze=a(90),Ke=a(45),Je=a(21),Qe=a.n(Je),Xe=a(16),et=a(128),tt=a(33);function at({modalTitle:e="",modalIntro:t="",align:a="center",thankYouTitle:n="",thankYouText:o=""}){const{t:r}=Object(d.d)(),[i,l]=Object(f.useState)(!1),[s,c]=Object(f.useState)(!1),{actions:m,global:p,integrations:b}=useRaisely(!0),{campaign:h,user:y}=p,_="_raiselypref_fbfundraiser_"+h.uuid,E=window.localStorage&&!window.localStorage.getItem(_),k=()=>{window.localStorage&&(window.localStorage.setItem(_,"seen"),m.fetchAndUpdateUser())},w=async e=>{try{l(!0);const t=(await u.a.campaigns.facebookFundraisers.create({id:h.uuid,data:{data:{accessToken:e.accessToken,profileUuid:y.profile.uuid}}})).body().data().data;c(t.facebookFundraiserId),l(!1)}catch(e){console.error(e),l(!1),m.addErrorMessage(r("Sorry, we couldn't set up your Facebook fundraiser. Please reload the page and try again.")),b.broadcast("profile.facebookFundraiserError",e)}};return v()(h,"config.site.facebookFundraising.active",!1)?y.profile&&y.profile.facebookFundraiserId?null:window.FB||h.mock?g.a.createElement("div",{className:"facebook-fundraising-connect facebook-fundraising-connect--align-"+a},g.a.createElement(Ne.a,{dockToBottom:!0,automatic:E,buttonTitle:r("Add a Facebook Fundraiser"),buttonTheme:"facebook",buttonIcon:g.a.createElement(Xe.a,{name:"facebook_rounded",theme:"inverted"}),onClose:k,modalCelebration:s,modalContent:a=>s?g.a.createElement("div",{className:"facebook-fundraising-connect__modal"},g.a.createElement("h2",null,n.includes("<")?Qe()(n):n),g.a.createElement("p",null,o.includes("<")?Qe()(o):o),g.a.createElement("div",{className:"facebook-fundraising-connect__buttons"},g.a.createElement(V.a,{theme:"primary",href:"https://www.facebook.com/donate/"+s,target:"_blank"},r("View your fundraiser")))):g.a.createElement("div",{className:"facebook-fundraising-connect__modal"},g.a.createElement("h4",null,e.includes("<")?Qe()(e):e),g.a.createElement("p",null,t.includes("<")?Qe()(t):t),g.a.createElement("div",{className:"facebook-fundraising-connect__buttons"},i?g.a.createElement(tt.b,{sceneHeight:"50px"}):g.a.createElement(et.a,{scope:["manage_fundraisers"],onAuth:w,buttonText:r("Create a Facebook Fundraiser")}),g.a.createElement("a",{className:"facebook-fundraising-connect__buttons__close",onClick:e=>{k(),a(e)}},r("Maybe later"))),g.a.createElement("p",null,r("Here's how it works:")),g.a.createElement("ul",null,g.a.createElement("li",null,g.a.createElement("strong",null,r("Connect your Facebook account")),g.a.createElement("br",null),r("Link your Facebook account with your fundraising page. We'll ask for permission to create a fundraiser for you.")),g.a.createElement("li",null,g.a.createElement("strong",null,r("Your fundraiser is automatically created")),g.a.createElement("br",null),r("We'll create a Facebook fundraiser on your account automatically, ready for you to promote!")),g.a.createElement("li",null,g.a.createElement("strong",null,r("You're good to go!")),g.a.createElement("br",null),r("It's as easy as that. Any donations you receive on Facebook will automatically appear on your fundraising page here."))))})):g.a.createElement("div",{className:"facebook-fundraising-connect facebook-fundraising-connect--pending",style:{textAlign:a||"center"}},g.a.createElement(V.a,{theme:"facebook",disabled:!0},r("Add a Facebook Fundraiser"))):null}at.propTypes={modalTitle:h.a.string,modalIntro:h.a.string,thankYouTitle:h.a.string,thankYouDescription:h.a.string,align:h.a.string};var nt=a(670),ot=a.n(nt),rt=a(177),it=a(52);const lt=["date","createdAt"],st=["desc","asc"],ct=(e={},t)=>({limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:lt.includes(e.sort)?e.sort:lt[0],order:st.includes(e.order)?e.order:st[0],q:"string"==typeof e.search?e.search:"",offset:t,tags:(e.tags||[]).map(e=>e.path).join(",")}),ut=(e,t)=>{return e.profile&&e.profile.mock||e.user&&e.user.mock?(a=e.limit,Object(G.p)(Array.from(Array(a)).map((e,t)=>({uuid:se()(),title:"Just an example post",photoUrl:ot()(["https://source.unsplash.com/random/400x300?nature",!1,"https://source.unsplash.com/random/400x300?mountains"]),user:{firstName:"Post",lastName:"Author",fullName:"Post Author",preferredName:"Post"},body:"<p>Duis aliquam massa id metus efficitur accumsan. Donec ut orci neque. Duis sed nibh dolor. Integer fermentum leo vel nunc sodales, ut egestas eros iaculis. Cras maximus commodo congue. Interdum et malesuada fames ac ante ipsum primis in faucibus. Phasellus ullamcorper odio mollis massa faucibus, non auctor justo facilisis. Suspendisse dictum, felis non suscipit ultrices, metus orci consequat massa, et efficitur diam neque vitae leo. Nullam quis varius ante. In sit amet risus aliquam, maximus purus vitae, consectetur sapien.</p><p>Mauris nec eleifend orci, eu vulputate est. Etiam vel euismod tellus.</p>",createdAt:x()().subtract(5*t,"days").format()})))):u.a.profiles.posts.getAll({id:e.profile.uuid,query:ct(e,t)});var a};function dt(e){const t="function"==typeof e.buildHref?e.buildHref:null,{tD:a}=Object(d.d)(),n="function"==typeof e.renderPost,[o,r]=Object(f.useState)(!0),[i,l]=Object(f.useState)(!1);return g.a.createElement("div",{className:(s={empty:o,paginated:i,limit:e.limit},c=e.direction,u=e.header,`postfeed\n\tpostfeed--direction-${c}\n\t${s.limit?"postfeed--limit-"+s.limit:""}\n\tpostfeed--${s.empty?"is-empty":"not-empty"}\n\t${s.paginated?"postfeed--is-paginated":""}\n\t${u?"postfeed--has-heading":""}\n`)},e.header,g.a.createElement(J,N()({},e,{pollingMethod:ut}),(o,{isLoading:i,total:s})=>{const c=e.currentPostUuid&&!i?o.filter(t=>t.uuid!==e.currentPostUuid):o;return c.length>0?(r(!1),s>c.length&&l(!0),c.map(a=>g.a.createElement("div",{key:a?a.uuid:void 0,className:"postfeed__item"},n?e.renderPost(a):g.a.createElement(rt.a,{detail:"item",direction:e.direction,href:a&&t?t(a):null,post:a,isLoading:i})))):g.a.createElement(it.a,{message:a(e.emptyMessage),prefix:"postfeed"})}));var s,c,u}dt.propTypes={direction:h.a.oneOf(["vertical","horizontal"]).isRequired,posts:h.a.arrayOf(h.a.object),profile:h.a.object.isRequired,buildHref:h.a.func,limit:h.a.number,sort:h.a.oneOf(lt),order:h.a.oneOf(st),user:h.a.object,currentPostUuid:h.a.string,emptyMessage:h.a.string,hideEmpty:h.a.boolean,renderPost:h.a.func};var mt=a(254),pt=a(658),ft=a(334);class gt extends f.Component{constructor(...e){super(...e),M()(this,"state",{title:"",content:"",image:null,editorUuid:se()()}),M()(this,"submitPost",async()=>{const{user:e,afterCreate:t,userProfile:a}=this.props,n="function"==typeof t;try{const{title:o,content:r,image:i}=this.state,{uuid:l}=e,{uuid:s}=a,c=await u.a.posts.create({data:{data:{userUuid:l,profileUuid:s,title:o,body:r,photoUrl:i}}}),{data:d}=c.body().data();this.setState({title:"",content:"",image:null,editorUuid:se()()}),n&&t(null,{...d,user:e})}catch(e){n&&t(e)}})}render(){const{t:e}=Object(d.a)(),{enableRichEditing:t}=this.props,{state:a}=this;return g.a.createElement("div",{className:"postcreate"},g.a.createElement("h3",null,e("Create a new post")),g.a.createElement(mt.a,{label:e("Post Title"),value:a.title,change:(e,t)=>this.setState({title:t})}),g.a.createElement(pt.a,{label:e("Post Image"),value:a.image,change:(e,t)=>this.setState({image:t})}),g.a.createElement("div",{className:"form-field form-field--as-border"},g.a.createElement(ft.b,{value:a.content,enableClearProp:!0,clearProp:a.editorUuid,onChange:e=>this.setState({content:e.target.value}),basicMode:!t,disableLists:!t,disableAlign:!t,disableHTMLMode:!t,disableHelp:!0,disableFullscreen:!0,options:{minHeight:"200px"}})),g.a.createElement(V.a,{theme:"primary",className:"button--post-submit",onClick:()=>this.submitPost()},e("Submit")))}}gt.propTypes={user:h.a.object.isRequired,afterCreate:h.a.func};var bt=a(289),ht=a(64);function yt({onConfirm:e,closeModal:t,profilesToShow:a,targetProfile:n,currentAction:o}){const{t:r}=Object(d.d)(),i=1===a.length,[l,s]=Object(f.useState)(Boolean(i)),[c,u]=Object(f.useState)(i?a[0]:null),{headingLabel:m,selectLabel:p,actionLabel:b,confirmationLabel:h}=function(e,t,a){const{campaign:n}=useRaisely(),{t:o}=Object(d.d)();return Object(f.useMemo)(()=>{const r="join"===e,i=Object(Be.e)(a.type,n.config.profiles),l=o(r?"Join [[target]]":"Leave [[target]]",{target:a.name}),s=o(r?"Which profile should join?":"Which profile should leave?"),c=o(r?"Join [[target]]":"Leave [[target]]",{target:i.singular.toLowerCase()}),u=o(r?"Are you sure you want [[selectedProfile]] to join the [[profileType]] [[targetProfile]]?":"Are you sure you want to remove [[selectedProfile]] from the [[profileType]] [[targetProfile]]?",{selectedProfile:null==t?void 0:t.name,profileType:i.singular.toLowerCase(),targetProfile:a.name});return{headingLabel:l,selectLabel:s,actionLabel:c,selectedProfile:t,confirmationLabel:u}},[e,t,a])}(o,c,n);return g.a.createElement("div",{className:"team-management-modal"},g.a.createElement("h2",{className:"team-management-modal__heading"},m),g.a.createElement("div",{className:"team-management-modal__content"},l?g.a.createElement(g.a.Fragment,null,g.a.createElement("div",null,h),g.a.createElement("div",{className:"team-management-modal__confirm"},g.a.createElement(V.a,{disabled:!c,theme:"primary-inverse",onClick:()=>t(!0)},r("Cancel")),g.a.createElement(V.a,{disabled:!c,theme:"primary",onClick:()=>{e(c)}},b))):g.a.createElement(g.a.Fragment,null,g.a.createElement(E.a,{label:p,type:"select",value:null==c?void 0:c.uuid,options:a.map(e=>({label:`${e.name} (${e.path})`,value:e.uuid})),change:(e,t)=>{const n=a.find(e=>e.uuid===t);u(n)}}),g.a.createElement("div",{className:"team-management-modal__confirm"},g.a.createElement(V.a,{disabled:!c,theme:"primary",onClick:()=>{s(!0)}},b)))))}function vt(e,t,a){return e}function _t(e,t){return[function(e,t){var a;const{campaign:n,user:o}=e,r=null===(a=e.user)||void 0===a?void 0:a.profiles;return r&&r.length?r.filter(e=>{var a,r,i;e.path,t.uuid;const l=t.uuid===n.profile.uuid,s=t.type===Be.h.group||t.type===Be.h.organisation,c=t.type===Be.h.group&&n.config.maximumTeamSize&&n.config.maximumTeamSize<=t.memberCount,u=o&&t.user.uuid===o.uuid,d=t.type===Be.h.group&&(null==e||null===(a=e.teamProfile)||void 0===a?void 0:a.uuid)===t.uuid||t.type===Be.h.organisation&&(null==e||null===(r=e.organisationProfile)||void 0===r?void 0:r.uuid)===t.uuid,m=t.type===Be.h.group&&(null==o?void 0:o.teamProfile)||t.type===Be.h.organisation&&(null==o?void 0:o.organisationProfile),p=(null==e?void 0:e.parentUuid)||(null==e||null===(i=e.parent)||void 0===i?void 0:i.uuid);return vt(o)&&vt(!c)&&vt(!l)&&vt(s)&&vt(!d)&&vt(!m)&&vt(!u||p!==t.uuid)}):[]}(e,t),function(e,t){var a;const{campaign:n,user:o}=e,r=null===(a=e.user)||void 0===a?void 0:a.profiles;return r&&r.length?r.filter(e=>{var a,r;e.path,t.path;const i=t.uuid===n.profile.uuid,l=t.type===Be.h.group||t.type===Be.h.organisation,s=o&&t.user.uuid===o.uuid,c=t.type===Be.h.group&&(null==e||null===(a=e.teamProfile)||void 0===a?void 0:a.uuid)===t.uuid||t.type===Be.h.organisation&&(null==e||null===(r=e.organisationProfile)||void 0===r?void 0:r.uuid)===t.uuid;return vt(o)&&vt(!i)&&vt(l)&&vt(c)&&vt(!s)}):[]}(e,t)]}function Et({children:e,targetProfile:t}){return e(function(e){const[t,a]=Object(f.useState)(!1),[n,o]=Object(f.useState)(null),{actions:r,global:i,integrations:l}=useRaisely(!0),{t:s}=Object(d.d)(),[c,m]=Object(f.useMemo)(()=>_t(i,e),[i,e]),p=c.length>1,b=m.length>1,h="join"===n?c:m;function y(t){return async function(i){t(),a(!1);const c="join"===n;try{c?await u.a.profiles.join.update({id:i.uuid,data:{parentUuid:e.uuid},query:{private:!0}}):"leave"===n&&await u.a.profiles.leave.update({id:i.uuid}),r.addMessage(s(c?"You have successfully joined [[target]]":"You have successfully left [[target]]",{target:e.name}));const t=await r.fetchAndUpdateUser();l.broadcast("profile.updated",t)}catch(e){r.addErrorMessage(e)}o(null)}}const v=t&&g.a.createElement(Ne.a,{automatic:!0,button:!1,customContainerClass:"team-management-modal__modal",onClose:()=>{a(!1),o(null)},modalContent:t=>g.a.createElement(yt,{key:h.length,currentAction:n,targetProfile:e,profilesToShow:h,onConfirm:y(t),closeModal:t})});return{canJoin:Boolean(c.length),canLeave:Boolean(m.length),multipleCanJoin:p,multipleCanLeave:b,joinAction(e){e&&e.preventDefault(),o("join"),a(!0)},leaveAction(e){e&&e.preventDefault(),o("leave"),a(!0)},currentAction:n,modalRender:v}}(t))}class kt extends f.Component{constructor(e){super(e),M()(this,"signup",()=>{this.props.history.push("/signup?parentId="+this.props.profile.path)}),M()(this,"fetchAndUpdateCurrentProfile",async()=>{const{global:e,actions:t,profile:a}=this.props,n=(await u.a.profiles.get({id:a.uuid,query:{private:!0}})).data.data;return e.current.profile&&e.current.profile.uuid===a.uuid&&this.updateCurrentProfile(n),n}),M()(this,"updateCurrentProfile",e=>{const{current:t}=this.props.global;this.props.actions.updateCurrent({...t,profile:{...t.profile,...e}})}),M()(this,"getProfileValues",async()=>{const e=Boolean(this.props.profile&&this.props.profile.private)?this.props.profile:await this.fetchAndUpdateCurrentProfile();return this.props.getFormValues({fields:{INDIVIDUAL:"profile",GROUP:"teamProfile",ORGANISATION:"organisationProfile"}[e.type],from:e,values:e})}),M()(this,"profileEditOpen",async()=>{const e=await this.getProfileValues();this.setState({editValues:e,editing:!0,modalKey:Math.random().toString("16")})}),M()(this,"profileEditSubmit",async(e,t,a)=>{const{integrations:n,profile:o,actions:r,global:i}=this.props;try{const t=this.props.processFormData(e),l=await u.a.profiles.update({id:o.uuid,data:{data:t,partial:!0}}),{data:s}=l.data,c=await r.fetchAndUpdateUser();i.current.profile&&i.current.profile.uuid===o.uuid&&this.updateCurrentProfile(s),a(),r.addMessage("Profile updated successfully"),n.broadcast("profile.updated",c)}catch(e){t.setSubmitting(!1),r.addErrorMessage(e)}}),M()(this,"typesToKeys",{[Be.h.individual]:"profile",[Be.h.group]:"teamProfile",[Be.h.organisation]:"organisationProfile"}),this.state={editing:!1,editValues:{},shareModelOpen:!1,modalKey:Math.random().toString("16")};(X.a.parse(window.location.href.split("?")[1]||"").edit||!1)&&this.profileEditOpen()}render(){const{t:e,tD:t,tF:a}=Object(d.a)(),{leaving:n,joining:o,shareModalOpen:r}=this.state,{profile:i,userProfile:l,enablePublicJoin:s,singularLabel:c,global:u,showDashboardButton:m,showDonateButton:p,showShareButton:b,align:h}=this.props,{user:y,campaign:v}=u;if(!i)return null;const E=i.type===Be.h.group||i.type===Be.h.organisation,k=i.type===Be.h.group&&v.config.maximumTeamSize&&v.config.maximumTeamSize<=i.memberCount,w=y&&i.user.uuid===y.uuid,O=!y&&!k&&E&&s,S=y.teamProfile||(null==l?void 0:l.teamProfile),{profiles:T}=v.config,N=e("Join [[term]]",{term:Object(Be.c)(i.type,T,!1,!0)}),C=e("Leave [[term]]",{term:Object(Be.c)(i.type,T,!1,!0)}),x="Edit "+(c||"Profile"),j=this.typesToKeys[i.type]||"profile",P=(u.customFields[j]||u.customFields.profile).filter(e=>!["path"].includes(e.id)).map(e=>{var t;return"goal"===e.id&&e.core&&null!==(t=e.options)&&void 0!==t&&t.minimumValue&&(e.validateFunction=(t,a,n)=>{var o;return Object(Be.j)(t,null===(o=e.options)||void 0===o?void 0:o.minimumValue,v.currency,n)}),e}),A=w&&this.state.editing;return g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:`profile-controls profile-controls--${S?"user-has-team":"user-no-team"} button-row button-row--${h}`},p&&g.a.createElement(ht.a,{channelId:"raisely-donationform-modal"},({send:t})=>g.a.createElement(V.a,{className:"profile-controls__donate",onClick:()=>t("show")},e("Donate"))),b&&g.a.createElement(V.a,{onClick:()=>this.setState({shareModalOpen:!0}),className:"profile-controls__share"},e("Share")),(w||y.mock)&&g.a.createElement(V.a,{onClick:this.profileEditOpen},t(x)),(w||y.mock)&&m&&g.a.createElement(V.a,{href:"/dashboard",className:"profile-controls__dashboard"},e("My Dashboard")),g.a.createElement(Et,{targetProfile:i},({joinAction:a,leaveAction:r,canJoin:i,canLeave:l,modalRender:s,currentAction:c})=>g.a.createElement(g.a.Fragment,null,i&&g.a.createElement(V.a,{className:"profile-controls__join-team",onClick:a,disabled:o},"join"===c?e("Joining..."):t(N)),l&&g.a.createElement(V.a,{className:"profile-controls__leave-team",onClick:r,disabled:n},"leave"===c?e("Leaving..."):t(C)),s)),O&&g.a.createElement(V.a,{onClick:this.signup},t(N))),A?g.a.createElement(Ne.a,{key:this.state.modalKey,promptOnLeave:e("Leaving this page will require you to re-enter your information. Are you sure you want to leave?"),button:!1,automatic:!0,onClose:()=>this.setState({editing:!1,editValues:null}),modalContent:t=>g.a.createElement("div",{className:"raisely-profile-form"},g.a.createElement("h2",null,a(this.props.profileEditHeading,e("Edit your [[term]]",{term:Object(Be.c)(i.type,T,!1,!1)}))),g.a.createElement(_.a,{fields:P,values:this.state.editValues,global:u,action:(e,a)=>this.profileEditSubmit(e,a,t)}))}):null,r&&g.a.createElement(Ne.a,{button:!1,automatic:!0,dockToBottom:!0,onClose:()=>this.setState({shareModalOpen:!1}),modalContent:()=>g.a.createElement("div",{className:"mobile-tab-menu__share-modal"},g.a.createElement("h3",null,"Share"),g.a.createElement(Ke.a,{global:u,networks:"campaign",size:"large",theme:"filled"}))}))}}kt.propTypes={global:h.a.object,profile:h.a.object,userProfile:h.a.object,enablePublicJoin:h.a.bool,label:h.a.string,singularLabel:h.a.string,showDashboardButton:h.a.bool,showDonateButton:h.a.bool,showShareButton:h.a.bool,align:h.a.oneOf(["left","center","right"])};a(27);var wt=a(706),Ot=a(205);const St=({menu:e,location:t,toggleMenuState:a,children:n})=>{const{tD:o}=Object(d.d)();return e?g.a.createElement("div",{className:"page-navigation"},e.map((e,n)=>{if(!e)return null;const r=e.style?"button button--"+e.style:"",i=(l=e.link,["/login","/signup"].includes(l)?"page-navigation__"+l.replace(/^\//,""):"");var l;const s=e.style?"button-"+e.style:"normal";let c=e.link===t.pathname;Array.isArray(e.subMenu)&&e.subMenu.length&&!c&&e.subMenu.map(e=>c=!c&&e.link===t.pathname);const u=["page-navigation__link","page-navigation__link--"+s,""+(c?"page-navigation__link--is-active":""),"page-navigation__link--"+e.link.replace("/",""),`${i} ${r}`].join(" ");if(Array.isArray(e.subMenu)&&e.subMenu.length)return g.a.createElement("div",{key:n,className:"page-navigation__link page-navigation__link--dropdown "+(c?"page-navigation__link--is-active":"")},g.a.createElement(Ot.a,e));const d=Qe()(o(e.title));return e.link.includes("://")?g.a.createElement("a",{href:e.link,className:u,target:e.shouldOpenInNewTab?"_blank":null,rel:e.shouldOpenInNewTab?"noopener noreferrer":null,key:n},d):g.a.createElement(m.a,{to:e.link,className:u,onClick:a,key:n},d)}),n):g.a.createElement("div",{className:"page-navigation"})};St.propTypes={menu:h.a.arrayOf(h.a.shape({style:h.a.string,link:h.a.string,title:h.a.string.isRequired,subMenu:h.a.array})),location:h.a.object.isRequired};var Tt=Object(wt.a)(St),Nt=a(206),Ct=a(127),xt=a(156),jt=a(51),Pt=a.n(jt);class At extends f.Component{constructor(...e){super(...e),M()(this,"state",{query:"",finalQuery:""}),M()(this,"updateFinalQuery",Pt()(e=>this.setState({finalQuery:e}),600)),M()(this,"updateQuery",e=>this.setState({query:e},()=>this.updateFinalQuery(e)))}render(){const{t:e,tF:t}=Object(d.a)(),{props:a,state:n}=this,o=t(a.searchLabel,e("Search"));return g.a.createElement("div",{className:"profile-search"},g.a.createElement("div",{className:"profile-search__search"},g.a.createElement(mt.a,{id:"profile-search",value:n.query,label:o,change:(e,t)=>this.updateQuery(t)}),g.a.createElement("i",{className:"material-icons profile-search__icon"},"search")),(!a.hideInitialResults||Boolean(n.finalQuery.length))&&g.a.createElement("div",{className:"profile-search__results"},g.a.createElement(We,N()({},a,{search:n.finalQuery,subtree:"string"==typeof a.profileUuid}))))}}At.propTypes={searchLabel:h.a.string,hideInitialResults:h.a.bool,campaignUuid:h.a.string,profileUuid:h.a.string,userUuid:h.a.string,limit:h.a.number,sort:h.a.oneOf(He),order:h.a.oneOf(Ve),type:h.a.oneOf($e),filter:h.a.arrayOf(h.a.object),defaultImage:h.a.string,rank:h.a.bool,rankActivityTotal:h.a.bool,rankExerciseTotal:h.a.bool,rankExerciseTotalTime:h.a.bool,showRank:h.a.bool,displaySource:h.a.oneOf(["activityTotal","total","donors","exerciseTotal","exerciseTotalTime"]),mock:h.a.bool};var Dt=a(294),Rt=a(53);function Ft(){const{t:e}=Object(d.a)();return{facebook:{iconName:"facebook",title:e("Facebook"),defaultLabel:e("Find us on Facebook")},twitter:{iconName:"twitter",title:e("X"),defaultLabel:e("Find us on X")},linkedin:{iconName:"linkedin",title:e("LinkedIn"),defaultLabel:e("Find us on Linkedin")},instagram:{iconName:"instagram",title:e("Instagram"),defaultLabel:e("Find us on Instagram")},youtube:{iconName:"youtube",title:e("YouTube"),defaultLabel:e("Find us on YouTube")},tiktok:{iconName:"tiktok",title:e("TikTok"),defaultLabel:e("Find us on TikTok")}}}const It=Ft();Object.keys(It);function Mt(e){const t=Rt.c.includes(e.theme)?e.theme:"outlined",a=Rt.b.includes(e.size)?e.size:"medium",n=Ft();return g.a.createElement("div",{className:(o=t,r=a,i=e.align,`social social--${o} social--${r} social--align-${i}`)},Object.entries(e.targets).map(([o,r])=>{if(!r.url)return null;const i={...n[o],...r};return g.a.createElement(Rt.a,{key:se()(),networkName:o,network:i,theme:t,size:a,url:r.url,extra:e})}));var o,r,i}Mt.propTypes={targets:h.a.object.isRequired,align:h.a.oneOf(["left","center","right"]).isRequired,theme:h.a.oneOf(Rt.c),size:h.a.oneOf(Rt.b)};var Lt=a(113);function Bt(e){return g.a.createElement(Lt.a,N()({},e,{version:"<=2"}))}function Ut(e){return g.a.createElement(Lt.a,N()({},e,{version:"3"}))}var Ht=a(26),Vt=a(253),$t=a(165),qt=(a(39),a(313)),Gt=a.n(qt),zt=a(108),Yt=a(40),Wt=a(678),Zt=a.n(Wt);function Kt(e){const{profile:t}=e,{t:a}=Object(d.d)();if(!t)return"";const n=`${Object(Be.b)(t.type)}${t.path}`;return g.a.createElement("div",{className:"profile-card"},g.a.createElement(m.a,{className:"profile-tile__overlay",to:n},`${a("Link to")} ${t.name}`),g.a.createElement(zt.a,{defaultImage:e.defaultImage,profile:t}),g.a.createElement("div",{className:"profile-card__content"},g.a.createElement("h4",{className:"profile-card__name"},t.name),t.description&&g.a.createElement("p",null,Gt()(Zt()(t.description),100)),g.a.createElement(Yt.a,{profile:t,statPosition:"top",showTotal:!0,showGoal:!0,size:"medium"})))}Kt.propTypes={profile:h.a.object,defaultImage:h.a.string};const Jt=["createdAt","total","name"],Qt=["desc","asc"],Xt=[...Object.values(Be.h),""],ea={INDIVIDUAL:"Example Profile",GROUP:"Example Team",ORGANISATION:"Example Organisation"},ta=(e={},t)=>({offset:t,campaign:e.campaignUuid,parent:"string"==typeof e.profileUuid?e.profileUuid:void 0,user:"string"==typeof e.userUuid?e.userUuid:void 0,limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:Jt.includes(e.sort)?e.sort:Jt[0],order:Qt.includes(e.order)?e.order:Qt[0],q:"string"==typeof e.search?e.search:void 0,type:Xt.includes(e.type)?e.type:void 0,rank:Boolean(e.rank)?1:void 0,rankDonors:Boolean(e.rankDonors)?1:void 0,rankExerciseTotal:Boolean(e.rankExerciseTotal)?1:void 0,rankExerciseTotalTime:Boolean(e.rankExerciseTotalTime)?1:void 0,...Object(G.i)(e.filter),since:"string"==typeof e.userUuid?(new Date).getTime():void 0}),aa=(e,t)=>{return e.mock||e.user&&e.user.mock?(a=e.limit,n=e.type,Object(G.p)(Array.from(Array(a)).map((e,t)=>({name:ea[n]||ea.INDIVIDUAL,description:"This is an example fundraising profile.",currency:"USD",goal:Math.round(1e5*Math.random()),total:Math.round(1e5*Math.random()),photoUrl:`https://randomuser.me/api/portraits/${Math.random()>.5?"men":"women"}/${Math.round(100*Math.random())}.jpg`,createdAt:x()().subtract(5*t,"days").format()})))):u.a.profiles.getAll({query:ta(e,t)});var a,n};function na(e){const t="function"==typeof e.renderProfile,{t:a}=Object(d.d)();return g.a.createElement("div",{className:"profile-grid profile-grid--limit-"+e.limit},e.header,g.a.createElement(J,N()({},e,{pollingMethod:aa,useSpinner:!0}),n=>n&&n.length>0?n.map(a=>g.a.createElement("div",{key:a?a.uuid:void 0,className:"profile-grid__item"},t?e.renderProfile(a):g.a.createElement(Kt,{defaultImage:e.defaultImage,profile:a}))):g.a.createElement(it.a,{message:a("Sorry, there aren't any profiles yet."),prefix:"profile-grid"})))}na.propTypes={campaignUuid:h.a.string,profileUuid:h.a.string,userUuid:h.a.string,limit:h.a.number,sort:h.a.oneOf(Jt),order:h.a.oneOf(Qt),type:h.a.oneOf(Xt),filter:h.a.arrayOf(h.a.object),defaultImage:h.a.string,rank:h.a.bool,rankDonors:h.a.bool,rankExerciseTotal:h.a.bool,rankExerciseTotalTime:h.a.bool,mock:h.a.bool};function oa(e){const t=useRaisely(),{profiles:a}=t.campaign.config,{tD:n,t:o}=Object(d.d)(),r=(({profile:e,user:t,campaign:a})=>{let n;return e.type===Be.h.group?n=e:t.teamProfile?n=t.teamProfile:e.teamProfile&&(n=e.teamProfile),n&&n.uuid&&a.profile&&n.uuid!==a.profile.uuid?n:null})({...e,user:t.user}),i=n(e.label||Object(Be.c)(Be.h.group,a,!1,!1)),l=e.label?"a "+e.label:Object(Be.d)(Be.h.group,a);return r?g.a.createElement("div",{className:"team-info"},g.a.createElement("h5",null,"Invite friends to your ",i),g.a.createElement("input",{className:"team-info__input",type:"text",onChange:()=>{},value:(s=r,`${window.location.protocol}//${window.location.host}${Object(Be.b)(Be.h.group)}${s.path}`)})):g.a.createElement("div",{className:"team-info team-info--no-team"},!e.disableGroupCreate&&!e.disableProfileSearch&&g.a.createElement("p",null,o("You are not part of [[aTeam]] yet.",{aTeam:l})),!t.campaign.config.customFields.teamProfile&&g.a.createElement("div",{className:"button-row"},!e.disableGroupCreate&&g.a.createElement(V.a,{href:"/create/group"},o("Create [[aTeam]]",{aTeam:l})),!e.disableProfileSearch&&g.a.createElement(V.a,{href:"/search"},o("Join [[aTeam]]",{aTeam:l}))));var s}oa.propTypes={profile:h.a.object.isRequired,campaign:h.a.object.isRequired,disableGroupCreate:h.a.bool,disableProfileSearch:h.a.bool,label:h.a.string};function ra({campaign:e,labelAbove:t,labelBelow:a,level:n,align:o,color:r,type:i}){const l="h"+n,s="ALL"===i?"":""===i?Be.h.individual:i,[c,d]=Object(f.useState)(null);Object(f.useEffect)(()=>{e.mock?d(1324):u.a.profiles.getAll({query:{type:s,limit:1}}).then(e=>{d(e.body().data().pagination.total)})},[e.mock]);const m={};return o&&(m.textAlign=o),r&&(m.color=r),g.a.createElement("div",{className:"signup-counter",style:m},Boolean(t&&t.length)&&g.a.createElement("span",{className:"signup-counter__label"},t),g.a.createElement(l,{className:"signup-counter__value",style:m},c?c.toFixed().toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0),Boolean(a&&a.length)&&g.a.createElement("span",{className:"signup-counter__label"},a))}ra.propTypes={campaign:h.a.object.isRequired,labelAbove:h.a.string,labelBelow:h.a.string,level:h.a.number};function ia({campaign:e,labelAbove:t,labelBelow:a,level:n,align:o,color:r}){const i="h"+n,[l,s]=Object(f.useState)(null);Object(f.useEffect)(()=>{e.mock?s(1324):u.a.donations.getAll({query:{limit:1}}).then(e=>{s(e.body().data().pagination.total)})},[e.mock]);const c={};return o&&(c.textAlign=o),r&&(c.color=r),g.a.createElement("div",{className:"donor-counter",style:c},Boolean(t&&t.length)&&g.a.createElement("span",{className:"donor-counter__label"},t),g.a.createElement(i,{className:"donor-counter__value",style:c},l?l.toFixed().toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0),Boolean(a&&a.length)&&g.a.createElement("span",{className:"donor-counter__label"},a))}ia.propTypes={campaign:h.a.object.isRequired,labelAbove:h.a.string,labelBelow:h.a.string,level:h.a.number};var la=a(264),sa=a(159),ca=a.n(sa);const ua=(e="")=>e.toLowerCase().replace(/[^a-zA-Z0-9 ]/g,"").replace(/ /g,"-");function da({items:e=[],isEditor:t}){const[a,n]=Object(f.useState)(null),{t:o,tD:r}=Object(d.d)();return Object(f.useEffect)(()=>{if(window.location&&window.location.hash){const t=window.location.hash.replace("#",""),a=e.findIndex(e=>ua(e.title)===t);n(a||0)}},[]),!e||e.length<1?g.a.createElement(it.a,{message:"Please configure this Accordion Block",prefix:"client-accordion"}):g.a.createElement(la.Accordion,{allowZeroExpanded:!t,className:"client-accordion",onChange:e=>{n(a===e?null:e)},preExpanded:[a]},t&&g.a.createElement("div",{className:"client-accordion__editor-message"},g.a.createElement("i",{className:"material-icons"},"error")," ",o("These will be collapsed by default on your live site.")),e.map((e,n)=>{const i=ua(e.title),l=e.body;return g.a.createElement(la.AccordionItem,{className:"client-accordion__item "+(t||a==n?"client-accordion__item--active":""),key:n,expanded:t,uuid:n,id:n},g.a.createElement(la.AccordionItemTitle,{className:"client-accordion__heading"},g.a.createElement("h5",{id:i},r(e.title),!t&&g.a.createElement("button",{className:"client-accordion__heading__link",onClick:e=>{e.preventDefault(),e.stopPropagation(),(e=>{ca()(`${window.location.href.replace(window.location.hash,"")}#${e}`)})(i)},title:o("Copy anchor link to [[name]]",{name:e.title})},g.a.createElement("i",{className:"material-icons"},"link"))),g.a.createElement("div",{className:"client-accordion__arrow",role:"presentation"})),g.a.createElement(la.AccordionItemBody,{className:"client-accordion__body"},"string"==typeof e.body?g.a.createElement("p",null,Qe()(r(e.body).replace(/(?:\r\n|\r|\n)/g,"<br />"))):l&&g.a.createElement(l,null)))}))}da.propTypes={items:h.a.arrayOf(h.a.shape({title:h.a.string,body:h.a.oneOf([h.a.string,h.a.func])}))};var ma=a(314),pa=a.n(ma),fa=a(223),ga=a.n(fa);const ba=pa()((e,t,a)=>{const{setScrollOffset:n,setTrackWidth:o,setSlideIx:r}=a,i=e.scrollLeft,l=e.offsetWidth,s=e.scrollWidth/(t.length-1),c=e.offsetWidth/2/s,u=Math.round(i/s+c);n(i),o(l),r(u)},300);function ha({children:e,className:t,collapse:a,gutter:n,appendContent:o}){const[r,i]=Object(f.useState)(0),[l,s]=Object(f.useState)(0),[c,u]=Object(f.useState)(1),[d,m]=Object(f.useState)(!1),[p,b]=Object(f.useState)(null),h=Object(f.useRef)(),y=Object(f.useRef)(),v=Object(f.useRef)(),_=Object(f.useRef)(),E=()=>ba(h.current,e,{setScrollOffset:i,setTrackWidth:u,setSlideIx:b});Object(f.useEffect)(()=>{E()},[]);const k=e=>{d&&m(!1)},w=e=>{const t=h.current;d&&(t.scrollLeft-=-v.current+(v.current=e.clientX),t.scrollTop-=-_.current+(_.current=e.clientY))};Object(f.useEffect)(()=>{if(d)return window.addEventListener("mouseup",k),window.addEventListener("mousemove",w),()=>{window.removeEventListener("mouseup",k),window.removeEventListener("mousemove",w)}},[d]),Object(f.useEffect)(()=>{y&&y.current&&s(y.current.offsetLeft+y.current.clientWidth/2)},[y]);return g.a.createElement("div",{className:Object(G.q)(`horizontal-scroll ${d?"horizontal-scroll--dragging":""} ${t||""} ${a?"horizontal-scroll--collapse":""} ${r>20?"horizontal-scroll--has-scrolled":""}`),style:{"--gutter":n&&n+"px"}},g.a.createElement("div",{className:"horizontal-scroll__track",ref:h,onScroll:E,onMouseDown:e=>{d||(m(!0),v.current=e.clientX,_.current=e.clientY,e.preventDefault())}},g.a.createElement("div",{className:"horizontal-scroll__inner"},Array.isArray(e)?e.filter(e=>!!e).map((e,t)=>g.a.createElement("div",{key:e.key||t,className:"horizontal-scroll__item",ref:y},e)):g.a.createElement("div",{className:"horizontal-scroll__item"},e))),g.a.createElement("button",{className:"horizontal-scroll__button horizontal-scroll__button--left "+(r>20?"horizontal-scroll__button--visible":""),onClick:()=>{const e=h.current.children[0].children[Math.max(p-1,0)];ga()(e,{time:500})}},g.a.createElement("i",{className:"material-icons"},"chevron_left")),g.a.createElement("button",{className:"horizontal-scroll__button horizontal-scroll__button--right "+(r+c<l?"horizontal-scroll__button--visible":""),onClick:()=>{const t=h.current,a=e.length,n=t.children[0].children[Math.min(p+1,a-1)];ga()(n,{time:500})}},g.a.createElement("i",{className:"material-icons"},"chevron_right")),o)}var ya=a(37);function va({profile:e,header:t,hideInactive:a}){const{pollingHash:n,global:o}=useRaisely(!0),{t:r,tD:i}=Object(d.d)(),[l,s]=Object(f.useState)([]);Object(f.useEffect)(()=>{u.a.campaigns.badges.getAll({id:o.campaign.uuid}).then(e=>s(e.data.data))},[n]);const c=o.campaign.mock;if(!(e&&e.badges||c))return null;const m=e.badges.length,p=l.sort((e,t)=>e.sortOrder-t.sortOrder).map(t=>{const n=e.badges.find(e=>e.uuid===t.uuid),o=a&&!n||t.hidden&&!n;return o&&!c?null:g.a.createElement(_a,{showHiddenLabel:o,key:t.uuid,title:i(t.name),path:t.path,icon:t.icon,achieved:n,imageUrl:t.imageUrl,incompleteImageUrl:t.incompleteImageUrl})}).filter(e=>!!e),b=p.length;return g.a.createElement("div",{className:"badges"},(b>0||c)&&g.a.createElement(f.Fragment,null,t,0===b?g.a.createElement(it.a,{prefix:"badges",message:r("Once you define badges in your Campaign Settings, they'll appear here")}):g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"badges__count"},g.a.createElement("span",{className:"badges__count__complete"},m)," ","/ ",b),g.a.createElement(ha,null,p))))}function _a({title:e,path:t,icon:a,achieved:n,imageUrl:o,incompleteImageUrl:r,showHiddenLabel:i}){const{t:l,tD:s}=Object(d.d)();return g.a.createElement("div",{className:`badges__badge ${n?"badges__badge--achieved":"badges__badge--unachieved"} badges__badge--id-${t}`},o?n?g.a.createElement(ya.a,{src:o+"?w=400",className:"badges__badge__image badges__badge__image--achieved"}):r?g.a.createElement(ya.a,{src:r+"?w=400",className:"badges__badge__image"}):g.a.createElement(ya.a,{src:o+"?w=400",className:"badges__badge__image badges__badge__image--incomplete-filter"}):g.a.createElement("div",{className:"badges__badge__icon"},g.a.createElement("i",{className:"material-icons"},a)),g.a.createElement("div",{className:"badges__badge__title"},s(e)),i&&g.a.createElement("div",{className:"badges__badge__hidden"},l("Hidden")))}va.propTypes={profile:h.a.object.isRequired,header:h.a.node,hideInactive:h.a.bool};var Ea=a(22),ka=a(84),wa=a(50),Oa=a.n(wa),Sa=a(48),Ta=a(147),Na=a(92),Ca=a(78),xa=a(35),ja=a(15),Pa=a(75),Aa=a(258),Da=a(167);const Ra=Object(f.createContext)();Ra.displayName="PaymentFormContext";const Fa=()=>Object(f.useContext)(Ra);function Ia(e){const{api:t,enableTickets:a,enableDonation:n}=e,{integrations:o,global:r}=useRaisely(!0),{values:i,updateValues:l,ticketTypes:s,handleSubmit:c,ticketConfig:u,submitMsg:d}=Object(ja.b)(),[m]=Object(Pa.a)({form:null===i.profile?"ticket":"signup",stage:"payment",data:{promoCode:i.promoCode}});Object(f.useEffect)(()=>{i.donation&&c()},[i.donation]);const p=Object.values(i.tickets).reduce((e,t)=>e+t,0)>0,[b,h]=Object(f.useState)(!1);function y(e,t,a,n){const o=[];for(let r=0;r<a;r++){const a={amount:e,description:t,type:"TICKET",includeInTotals:n};o.push(a)}return o}Object(f.useEffect)(()=>{d||(a||n)&&(p||i.total)||(h(!0),c(),m(i,s))},[]),Object(f.useEffect)(()=>{if(!i.total)return;r.campaign.providers.some(e=>"PAYPAL"!==e.providerType)||l({error:{message:"This campaign needs to have a Stripe account connected to process this payment"}})},[]);const v={onSubmit:async({data:e,processSCADonation:a})=>{var n;const c=[];if(p){const{includeTicketsInCampaignTotals:e}=u;Object.entries(i.tickets).forEach(([t,a])=>{const n=s.find(e=>e.uuid===t);"BUNDLE"===n.type?c.push(...function(e,t,a){const n=[];for(let o=0;o<t;o++){const t={amount:e.price,description:e.displayName||e.name,type:"TICKET",includeInTotals:a,bundleGroup:o};n.push(t),e.bundle.tickets.map(e=>{const t=s.find(t=>t.uuid===e.productUuid);n.push(...y(0,t.displayName||t.name,e.quantity,a))})}return n}(n,a,e)):c.push(...y(n.price,n.displayName||n.name,a,e))}),i.discount&&c.push({amount:-1*i.discount,type:"DISCOUNT",description:"Discount"})}if(i.donationAmount&&c.push({amount:i.donationAmount,type:"DONATION",description:"Donation",includeInTotals:!0}),i.hasActiveSwiftAidAuth&&(e.private={...e.private,swiftAid:!0,giftAid:!0}),Object.assign(e,{items:[...(null===(n=e.items)||void 0===n?void 0:n.filter(e=>!e.excludeFromPay))||[],...c]}),a){var d,f,g,b;const n={...e,...Oa()(i.user,["firstName","lastName","preferredName","fullName","email",...null!==(d=i.user)&&void 0!==d&&null!==(f=d.private)&&void 0!==f&&f.giftAid?["private",...en]:[]]),forRegistration:(null===(g=i.profile)||void 0===g?void 0:g.path)||"_NO_PATH_SET"};n.profile=Object(Ca.c)(r.campaign,{profile:i.profile,teamProfile:i.teamProfile,organisationProfile:i.organisationProfile}),null!==(b=i.profile)&&void 0!==b&&b.path&&await Object(Da.a)({api:t,campaignUuid:r.campaign.uuid,name:i.profile.name,path:i.profile.path});const c=new Sa.a("donation",r.campaign),u=await c.awaitSolution();u&&c.reset();const p=(await t.donations.create({data:n,challengeSolution:u})).body().data(),h=await a(p);if(null!=h&&h.error)return l({error:{message:h.error.message},loginToken:p.token,disableBack:!1},null,["donation"]),void o.broadcast("donation.error",h.error);const{uuid:y,methodType:v}=p.data;l({donation:{uuid:y,methodType:v},loginToken:p.token}),m(i,s,p.data)}else l({donation:e}),m(i,s,e)},isImmediateSubmit:b,hasTickets:p,steps:e.steps,paymentButton:e.paymentButton,paymentTitle:e.paymentTitle,paymentDescription:e.paymentDescription,noPaymentButton:e.noPaymentButton,addTax:!u.taxInclusive,sendPaymentFormEvents:m,allProps:e};return g.a.createElement(Ra.Provider,N()({value:v},e))}function Ma(e){return g.a.createElement("div",N()({className:"signup-form__payment signup-form__field-container"},e))}function La(){const{values:e}=Object(ja.b)();return e.ticketsTotal||e.promoCode?g.a.createElement("div",{className:"signup-form__payment__promo-code-form__wrapper"},e.discount?g.a.createElement(Ua,null):g.a.createElement(Ba,null)):null}function Ba(){const{allProps:{api:e}}=Fa(),t=useRaisely(),{values:a,updateValues:n}=Object(ja.b)(),[o,r]=Object(f.useState)(!1),[i,l]=Object(f.useState)(""),{t:s}=Object(d.d)();return g.a.createElement("form",{className:"signup-form__payment__promo-code-form"+(o?" loading":""),onSubmit:async function(o){o.preventDefault();try{l(!1),r(!0);const i=o.target.elements.promoCode.value,s=(await e.campaigns.promoCodes.checkValid({attribute:"promo_codes",id:t.campaign.uuid,data:{code:i}})).body().data().data;let c=0;c="PERCENTAGE"===s.discountType?Math.round(a.ticketsTotal*(s.discountAmount/100)):s.discountAmount,c>a.ticketsTotal&&(c=a.ticketsTotal),n({discount:c,promoCode:i})}catch(e){var i,s,c,u;const t=null==e||null===(i=e.response)||void 0===i||null===(s=i.data)||void 0===s||null===(c=s.errors)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.message;l(t||"Sorry, an error has occurred. If the problem persists, please contact support@raisely.com")}finally{r(!1)}}},g.a.createElement("div",{className:"form-field form-field--text form-field"+(i?"--error":"")},g.a.createElement("label",{htmlFor:"promoCode"},g.a.createElement("span",{className:"form-field__label-text"},s("Promo Code"))),g.a.createElement("input",{id:"promoCode",name:"promoCode",placeholder:s("Enter code"),required:!0})),g.a.createElement("button",{disabled:o,"data-cy":"promo-code-submit"},g.a.createElement(Ea.d,{isTransitioning:o}),s("Apply")),i&&g.a.createElement("p",{role:"alert"},i))}function Ua(){const{updateValues:e}=Object(ja.b)(),{t:t}=Object(d.d)();return g.a.createElement("div",{className:"signup-form__payment__promo-code-success"},g.a.createElement("p",null,t("Your promo code was successfully applied")),g.a.createElement("button",{type:"button",onClick:()=>e({discount:0})},g.a.createElement(Xe.a,{name:"highlight_off",size:"small"}),g.a.createElement("span",{className:"visually-hidden"},t("Remove promo code"))))}function Ha(){return g.a.createElement("div",{className:"signup-form__payment__order-summary"},g.a.createElement(Va,null),g.a.createElement("div",{className:"wrapper"},g.a.createElement($a,null),g.a.createElement(qa,null),g.a.createElement(Ga,null)))}function Va(){const{ticketsEnabled:e,updateValues:t,updateStep:a,ticketTypes:n}=Object(ja.b)(),{steps:o}=Fa(),{t:r}=Object(d.d)();return g.a.createElement("div",{className:"signup-form__payment__order-summary__heading"},g.a.createElement("h4",null,r("Order Summary")),e&&n.length?g.a.createElement("button",{onClick:function(){t({optInAmount:0,discount:0},()=>a(o.indexOf("ticketSelect")))}},"Edit Order ",g.a.createElement(Xe.a,{name:"edit"})):null)}function $a(){const{values:e,ticketTypes:t,ticketConfig:a,currency:n}=Object(ja.b)(),{hasTickets:o,addTax:r}=Fa(),{tD:i}=Object(d.d)();if(!o)return null;const{taxRatePercent:l}=a;return g.a.createElement("ul",{className:"signup-form__payment__order-summary__line-items"},t.map((t,a)=>{const{tickets:o}=e;if(void 0===o[t.uuid])return null;const r=o[t.uuid];if(!r)return null;const{displayName:l,name:s}=t,c=t.price*r;return g.a.createElement("li",{key:t.uuid,"data-testid":t.uuid},g.a.createElement("span",{className:"ticket-name"},i(l||s)),g.a.createElement("div",{className:"quantity-total-wrapper"},g.a.createElement("span",null,r,"x"),g.a.createElement("span",{"data-cy":`ticket-${a}-price`},Object(G.f)(c,n))))}),e.discount?g.a.createElement("li",{className:"discount"},g.a.createElement("span",null,"Discount"),g.a.createElement("span",{"data-testid":"discount"},""," ",Object(G.f)(e.discount,n,{showFull:!0}))):null,r&&l>0&&g.a.createElement("li",null,g.a.createElement("span",null,"Tax (",l,"%)"),g.a.createElement("span",{"data-testid":"tax"},Object(G.f)(e.ticketsTax,n))))}function qa(){const{values:e,currency:t}=Object(ja.b)(),{hasTickets:a}=Fa(),{t:n}=Object(d.d)(),{ticketsTotal:o,ticketsTax:r,donationAmount:i,optInAmount:l}=e;return g.a.createElement("ul",{className:"signup-form__payment__order-summary__total-summary"},a&&g.a.createElement("li",{className:"sub-total"},g.a.createElement("span",null,n("Sub-total")),g.a.createElement("span",{"data-testid":"sub-total"},Object(G.f)(o+r,t))),i?g.a.createElement("li",null,g.a.createElement("span",null,n("Donation")),g.a.createElement("span",{"data-testid":"donation-amount"},Object(G.f)(i,t))):null,l?g.a.createElement("li",null,g.a.createElement("span",null,n("Cover fundraising costs")),g.a.createElement("span",{"data-testid":"opt-in"},Object(G.f)(l,t))):null)}function Ga(){const{values:{total:e},currency:t}=Object(ja.b)(),{t:a}=Object(d.d)();return g.a.createElement("div",{className:"signup-form__payment__order-summary__total"},g.a.createElement("span",null,a("Total")),g.a.createElement("span",{"data-testid":"total"},Object(G.f)(e,t)))}function za(){const{values:e,currency:t}=Object(ja.b)(),{allProps:a,onSubmit:n}=Fa(),o=Object.values(e.tickets).reduce((e,t)=>e+t,0)>0?{items:[{type:"TICKET",excludeFromPay:!0}]}:{};return g.a.createElement("div",{className:"signup-form__payment__blocks"},g.a.createElement(Na.a,null,g.a.createElement(Ta.a,N()({},a,{onTokenSuccess:n,renderStep:Ya,initialState:o,currency:t,disableAnalytics:!0}))))}function Ya({builtIns:e,onManualSubmit:t,afterPaymentSelect:a}){var n;const o=useRaisely(),{t:r}=Object(d.d)(),i=Object(f.useRef)(!0),{step:l,values:s,updateValues:c}=Object(ja.b)(),{values:u,updateValues:m,setIsPaymentGatewayProcessing:p,optInAmount:b,payments:h}=e.useDonationFormContext(),{user:y,donationAmount:v,ticketsTotal:_,ticketsTax:E}=s;Object(f.useEffect)(()=>{m(e=>{i.current&&(e.set("user",y),e.set("details",{...u.details,...y}),e.set("amount",v)),e.set("additionalAmount",_+E),i.current=!1})},[_,E]);const{feeOptIn:k}=u;return Object(f.useEffect)(()=>{c({optInAmount:(_||v)&&k?b:0})},[_,v,k,b]),Object(f.useEffect)(()=>{s.error&&p(!1)},[s.error]),Object(f.useEffect)(()=>{if(!h.routingError)return;let e=h.routingError;e instanceof Error&&(e=h.routingError.message),c({error:{message:e}})},[h.routingError,c]),g.a.createElement(e.ManualPaymentForm,{onSubmit:(e,a)=>t(e,a,l)},g.a.createElement(e.OptIn,null),g.a.createElement("div",{className:"signup-form__payment__blocks__payment-details"},null!==(n=o.campaign.config.donation)&&void 0!==n&&n.express?null:g.a.createElement(e.PaymentMethodSelect,{afterSelect:(e,t)=>a(e,t,l),hidePaypal:!0,hideManual:!0,customRender:(e,t)=>e?g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:t},e),h.onlySupportsPaypal?null:g.a.createElement("span",{className:"donation-form__method-divider"},r("OR"))):null}),h.campaignStripeProvider&&g.a.createElement(e.StripeFields,null),h.campaignStripeProvider&&g.a.createElement(e.PaymentSubmitButton,{CustomDonateButton:Wa}),g.a.createElement(Za,null)))}function Wa({isProcessing:e,disabled:t}){const{values:a,updateValues:n,currency:o}=Object(ja.b)(),{paymentButton:r=""}=Fa(),[i,l]=function(e){const t=Object(f.useRef)();return Object(f.useEffect)(()=>{if(!e)return;const a=new MutationObserver(e=>{var a,n,o;t.current&&(Xa(null===(a=e[0])||void 0===a||null===(n=a.addedNodes[0])||void 0===n?void 0:n.childNodes[0])?t.current.style.animationPlayState="paused":Xa(null===(o=e[1])||void 0===o?void 0:o.removedNodes[0])&&(t.current.style.animationPlayState="running"))});return a.observe(document.body,{childList:!0,subtree:!0}),()=>a.disconnect()},[e]),[t,"15s"]}(e),{t:s,tD:c}=Object(d.d)();Object(f.useEffect)(()=>{e&&n({error:null,disableBack:!0})},[e]);const u=r.replace(/{amount}/g,Object(G.f)(a.total,o));return g.a.createElement("div",{className:"donation-form__stripe-buttons"},g.a.createElement(V.a,{disabled:t,type:"submit",className:"donation-form__submit-button"+(e?" loading":"")},g.a.createElement(Ea.d,{ref:i,isTransitioning:e,time:l}),e?s("Processing"):c(u)))}function Za(){const{t:e}=Object(d.d)();return g.a.createElement("p",{className:"donation-form__secure-checkout-label"},g.a.createElement(Ka,null),g.a.createElement("span",null,e("Safe & secure checkout")))}function Ka(){return g.a.createElement("svg",{width:"12",height:"15","aria-hidden":"true",focusable:"false"},g.a.createElement("path",{d:"M11.7 6.967c0 3.515-2.432 6.802-5.7 7.6-3.268-.798-5.7-4.085-5.7-7.6v-3.8L6 .633l5.7 2.534v3.8ZM6 13.3c2.375-.633 4.433-3.458 4.433-6.194V3.99L6 2.014 1.567 3.99v3.116c0 2.736 2.058 5.56 4.433 6.194Zm1.773-6.333v-.95c0-.887-.886-1.584-1.773-1.584-.887 0-1.773.697-1.773 1.584v.95c-.38 0-.76.38-.76.76v2.216c0 .444.38.824.76.824H7.71c.443 0 .823-.38.823-.76V7.79c0-.443-.38-.823-.76-.823Zm-.823 0h-1.9v-.95c0-.507.443-.824.95-.824.507 0 .95.317.95.824v.95Z"}))}function Ja(){const{values:e,updateValues:t,step:a,updateStep:n,handleSubmit:o,isSubmitting:r,ticketTypes:i,submitMsg:l}=Object(ja.b)(),{t:s}=Object(d.d)(),{noPaymentButton:c,sendPaymentFormEvents:u}=Fa();return g.a.createElement("div",{style:{marginTop:"25px"}},e.total?null:g.a.createElement(xa.a.NextBtn,{onClick:function(){o(),u(e,i)},disabled:!!l},g.a.createElement(Ea.d,{isTransitioning:r}),c||s("Complete signup")),g.a.createElement(xa.a.BackBtn,{onClick:function(){t({optInAmount:0,discount:0},()=>n(a-1))}}))}function Qa(){const{submitMsg:e}=Object(ja.b)();return g.a.createElement("div",{className:"signup-form__payment__submit-msg"},g.a.createElement("p",null,e.includes("<")?Qe()(e):e))}function Xa(e){var t;return null==e||null===(t=e.name)||void 0===t?void 0:t.includes("__privateStripeFrame")}const en=["address","address1","address2","suburb","state","country","postcode"];Ia.ContentsBase=Ma,Ia.Contents=function(){const{paymentTitle:e,paymentDescription:t,isImmediateSubmit:a}=Fa(),{values:n,submitMsg:o}=Object(ja.b)();return a?o?g.a.createElement(Qa,null):g.a.createElement(Ea.b,null):g.a.createElement(Ma,null,g.a.createElement(Ea.c,null,e),t&&g.a.createElement(Ea.a,null,t),n.hasActiveSwiftAidAuth&&g.a.createElement(Aa.a,null),g.a.createElement(La,null),g.a.createElement(Ha,null),o?g.a.createElement(Qa,null):n.total>0&&g.a.createElement(za,null),g.a.createElement(Ja,null))},Ia.PromoCode=La,Ia.PromoCodeInput=Ba,Ia.PromoCodeSuccess=Ua,Ia.SummaryHeading=Va,Ia.OrderSummary=Ha,Ia.TicketLineItems=$a,Ia.TotalSummary=qa,Ia.Total=Ga,Ia.PaymentBlocks=za,Ia.PaymentButton=Wa,Ia.SecureCheckoutLabel=Za,Ia.PaymentNavBtns=Ja,Ia.SubmitMsg=Qa;var tn=Ia,an=a(707),nn=a(162),on=(a(173),a(131)),rn=a.n(on);const ln=["user","profile","teamProfile","organisationProfile","parentProfileObject","donation","settings","error","donationUuid","wasFacebookSignup","loginToken","tickets","ticketHolders","showTicketHolder","popupMsg","ticketsTotal","ticketsTax","donationAmount","optInAmount","total","discount","promoCode","disableBack","hasActiveSwiftAidAuth","availableVariantsAud","selectedVariantAud","availableDonationAmounts","isDefaultDonationAmountEnabled","availableFrequencies"];function sn(e={}){const{integrations:t,global:a}=useRaisely(!0),[n,o]=Object(f.useState)(()=>function(e,t={}){var a;const n={currency:e.campaign.currency,type:Be.h.individual},{defaultValue:o,fieldName:r}=Object(k.e)(e.campaign.config);r&&(n[r]=o);const{multiplier:i}=Object(k.f)(e.campaign.config),l=window.location.href.split("?")[1],s=l?X.a.parse(l):{};s.exerciseGoal&&(n.exerciseGoal=s.exerciseGoal*i,n.exerciseGoalTime=s.exerciseGoal*i);s.exerciseGoalTime&&(n.exerciseGoal=s.exerciseGoalTime*i,n.exerciseGoalTime=s.exerciseGoalTime*i);s.fundraiserTheme&&null!==(a=e.campaign.config.fundraiserThemes)&&void 0!==a&&a.some(e=>e.path===s.fundraiserTheme)&&(n.fundraiserTheme=s.fundraiserTheme);return{user:{},profile:n,teamProfile:null,organisationProfile:null,parentProfileObject:null,donation:null,tickets:{},ticketHolders:{},showTicketHolder:!1,popupMsg:null,ticketsTotal:0,ticketsTax:0,donationAmount:0,optInAmount:0,total:0,discount:0,promoCode:"",donationUuid:null,settings:{searchGroup:!1,feeFixed:50,feePercent:.045},error:null,disableBack:!1,...t}}(a,e.formValues)),[r,i]=Object(f.useState)(()=>function(e={}){return{containerUuid:se()(),disablePrompt:!1,componentHasMounted:!1,isLoading:!1,...e}}(e.globalFormState));Object(f.useEffect)(()=>{i(e=>({...e,componentHasMounted:!0}))},[]),Object(f.useEffect)(()=>{var n;if(!a.userAuthAttempted)return;const o=null===(null==e||null===(n=e.formValues)||void 0===n?void 0:n.profile)?"ticket":"signup";t.broadcast(o+"Form.formLoaded")},[t,a.userAuthAttempted]);const l=Object(f.useRef)(),s=Object(f.useCallback)((e,t,a)=>{l.current=t,o("function"!=typeof e?t=>{const n={};return ln.forEach(a=>{const o=e[a];(o||0===o||!1===o)&&(n[a]={...t[a],...o},"object"!=typeof o&&(n[a]=o))}),(a||[]).forEach(e=>n[e]=null),{...t,...n}}:e)},[]);Object(f.useEffect)(()=>{l.current&&(l.current(n),l.current=null)},[n]);return Object(f.useMemo)(()=>({values:n,updateValues:s,globalFormState:r,setGlobalFormState:i}),[n,r])}a(124);const cn=["showTicketHolder","ticketHolders","tickets"];function un(){const{global:e,integrations:t,actions:a}=useRaisely(!0);return{sanitizePayload:Object(f.useCallback)(t=>{var a,n;const o=Object.assign({},t);delete o.loginToken,o.settings.createTeam||(o.teamProfile=null),o.parentProfileObject&&(o.teamProfile?o.teamProfile.parentUuid=o.parentProfileObject.uuid:o.profile.parentUuid=o.parentProfileObject.uuid,o.parentProfileObject.fundraiserTheme&&o.profile&&(o.profile.fundraiserTheme=o.parentProfileObject.fundraiserTheme),delete o.parentProfileObject),o.teamProfile&&(!o.teamProfile.currency&&o.profile&&(o.teamProfile.currency=o.profile.currency),o.teamProfile.path&&delete o.teamProfile.path),o.teamProfile&&null!==(a=o.profile)&&void 0!==a&&a.fundraiserTheme&&(o.teamProfile.fundraiserTheme=o.profile.fundraiserTheme),o.organisationProfile&&null!==(n=o.profile)&&void 0!==n&&n.fundraiserTheme&&(o.organisationProfile.fundraiserTheme=o.profile.fundraiserTheme);if(Object.values(t.tickets).reduce((e,t)=>e+t,0)>0){const e=[];for(const[a,n]of Object.entries(t.tickets)){const o=t.ticketTypes.find(e=>e.uuid===a);for(let r=0;r<n;r++){const n=dn({productUuid:a,details:t.ticketHolders[`${a}-${r}`]||{},bundleGroup:"BUNDLE"===o.type?r:null});e.push(n),"BUNDLE"===o.type&&o.bundle.tickets.map(n=>{for(let o=0;o<n.quantity;o++){const i=dn({productUuid:n.productUuid,details:t.ticketHolders[`${n.productUuid}-${a}-${r}-${o}`]||{},bundleProductUuid:a,bundleGroup:r});e.push(i)}})}}o.order={items:e,promoCode:t.discount?t.promoCode:"",discountTotal:t.discount};for(const e of cn)delete o[e]}return o.campaignCurrency=e.campaign.currency,o},[]),fetchChallenge:Object(f.useCallback)(async()=>{const t=new Sa.a("registration",e.campaign),a=await t.awaitSolution();return a&&t.reset(),a},[e.campaign]),broadcastIntegrations:Object(f.useCallback)(({payload:a,registrationData:n})=>{var o,r,i,l,s,c,u,d,m,p,f,g,b;const{order:h,donation:y,profile:v}=n,_=function(e=[],t){const a=[];return e.forEach(e=>{const n=a.find(t=>t.productUuid===e.uuid);if(n)return void(n.quantity+=1);const o={productUuid:e.product.uuid,productName:e.product.name,type:"TICKET",amount:e.product.price,quantity:1,currency:t};a.push(o)}),a}(null==h||null===(o=h.items)||void 0===o?void 0:o.filter(e=>["TICKET","BUNDLE"].includes(e.type)),null==y?void 0:y.currency);a.donationAmount&&_.push({productUuid:"donation",productName:"donation",currency:y.currency,amount:a.donationAmount,type:"DONATION",quantity:1});const E=(null===(r=e.campaign)||void 0===r||null===(i=r.config)||void 0===i||null===(l=i.flags)||void 0===l?void 0:l.intelligentAmounts)&&(null===(s=e.campaign.config)||void 0===s||null===(c=s.donation)||void 0===c?void 0:c.intelligentAmounts)||!1,k=v?"signup":"ticket";t.broadcast(k+"Form.succeeded",{value:(null==y?void 0:y.amount)||0,currency:(null==y?void 0:y.currency)||a.campaignCurrency,fee:a.optInAmount||0,transactionId:(null==y?void 0:y.uuid)||(null==h?void 0:h.uuid),tax:a.ticketsTax,discount:a.discount,coupon:a.promoCode,payment_type:null===(u=a.donation)||void 0===u?void 0:u.methodType,items:_,intelligentAmounts:E?{availableVariantsAud:null==a?void 0:a.availableVariantsAud,selectedVariantAud:null==a?void 0:a.selectedVariantAud}:null,donationAmount:null==a?void 0:a.donationAmount,includesGiftAid:null==y?void 0:y.includesGiftAid,isGiftAidEnabled:(null===(d=e.campaign.config.donation)||void 0===d?void 0:d.giftAid)&&(null==a?void 0:a.donationAmount)&&"GBP"===(null==y?void 0:y.currency)||!1,profileUuid:null==v?void 0:v.uuid,paymentMethod:null==y?void 0:y.method,campaignCurrency:a.campaignCurrency,hasCustomFees:!Boolean(null===(m=e.campaign)||void 0===m?void 0:m.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(e.campaign.showRaiselyCheckbox)&&Boolean(null===(p=e.campaign.config)||void 0===p||null===(f=p.fees)||void 0===f?void 0:f.custom)&&Boolean(null===(g=e.campaign.config)||void 0===g||null===(b=g.fees)||void 0===b?void 0:b.optInOnly),availableAmounts:null==a?void 0:a.availableDonationAmounts,isDefaultDonationAmountEnabled:null==a?void 0:a.isDefaultDonationAmountEnabled,availableFrequencies:(null==a?void 0:a.availableFrequencies)&&[Object.values(a.availableFrequencies).find(e=>"ONCE"===e.interval)]}),v&&(t.broadcast("user.signup",{method:a.wasFacebookSignup?"facebook":"email",user:{email:a.user.email,firstName:a.user.firstName,lastName:a.user.lastName,fullName:a.user.fullName,preferredName:a.user.preferredName,public:a.user.public,private:a.user.private}}),t.broadcast("profile.created",{profile:v,user:{email:a.user.email,firstName:a.user.firstName,lastName:a.user.lastName,fullName:a.user.fullName,preferredName:a.user.preferredName,public:a.user.public,private:a.user.private}}))},[t]),checkUserToken:Object(f.useCallback)((a,n,o,r)=>!!(a||e.user||e.user.uuid)||(t.broadcast("signupForm.verificationRequired"),n(!1),o(r),!1),[e]),setupUser:Object(f.useCallback)(async t=>{const n=e.user?e.user:(await u.a.users.setTokenGetUser(t)).body().data().data,{profile:o,profiles:r,collectiveProfiles:i,teamProfile:l,organisationProfile:s}=await Object(Be.g)(e,!0);Object.assign(n,{profile:o,profiles:r,collectiveProfiles:i,teamProfile:l,organisationProfile:s}),e.user||a.addUser(n)},[a,e])}}function dn({productUuid:e,details:t,bundleProductUuid:a,bundleGroup:n}){const o={productUuid:e,...t};return a&&(o.bundleProductUuid=a),"number"==typeof n&&(o.bundleGroup=n),delete o.type,o}var mn=a(222);const pn=document.getElementById("raisely-root");function fn({bodyRef:e,step:t,updateStep:a,shouldUseFullscreen:n}){const[o,r]=Object(f.useState)(!1),i=Object(f.useRef)(!0);return Object(f.useLayoutEffect)(()=>{var a;n&&(!function(e,t,a){0===e&&t?a(!1):e>0&&!t&&(!function(){pn&&(pn.style.animation="fadeOut .2s forwards");document.documentElement.style.height="-webkit-fill-available"}(),setTimeout(()=>{a(!0)},250))}(t,o,r),null!==(a=e.current)&&void 0!==a&&a.scrollTo&&e.current.scrollTo(0,0))},[t,e,o]),Object(f.useLayoutEffect)(()=>{n&&(o?Object(mn.b)(e.current):i.current||gn(),i.current=!1)},[o]),function({step:e,updateStep:t,isFullscreen:a,shouldUseFullscreen:n}){const o=Object(f.useRef)();Object(f.useEffect)(()=>{if(n)if(0!==e)o.current="s"+(e+1),window.location.hash=o.current;else if(window.location.hash){const{pathname:e,search:t}=window.location;history.pushState("",document.title,e+t)}},[e]),Object(f.useEffect)(()=>{if(n)return a?window.addEventListener("popstate",r):window.removeEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[a]);const r=Object(f.useCallback)(()=>{const e=window.location.hash;if("#"+o.current===e)return;const a=+e.split("s")[1]||1;t(a-1)},[])}({step:t,updateStep:a,isFullscreen:o,shouldUseFullscreen:n}),Object(f.useEffect)(()=>()=>{gn()},[]),{isFullscreen:o}}function gn(){pn&&(pn.style.animation="fadeIn .2s forwards"),document.documentElement.style.height=null,Object(mn.a)()}function bn(){const{t:e}=Object(d.a)();return e("Leaving this page will require you to re-enter your information. Are you sure you want to leave?")}function hn(){return window.innerWidth<500}let yn;var vn=function({initialState:e={},shouldFetchTeam:t=!0,initialStep:a=0,ticketsSoldOutMessage:n="All tickets have sold out",ticketsUnavailableMessage:o="Unfortunately no tickets are available right now",showNoTicketsIcon:r=!0,customContext:i={},onStepChange:l,onSubmit:s,onSubmitSuccess:c,onSubmitError:m,children:p,...b}){var h,y;const v=Object(f.useRef)(),_=Object(f.useRef)(),E=useRaisely(),k=function(e,t){var a;return e&&t.campaign.currency||(null===(a=t.current.profile)||void 0===a?void 0:a.currency)||t.detectedCurrency||t.campaign.currency}(b.enableTickets,E),w=sn(function(e,t){return{...e,globalFormState:{disablePrompt:t,...e.globalFormState}}}(e,b.disablePrompt)),{values:O,updateValues:S,setGlobalFormState:T}=w,N=E.campaign.config,C=(null==N||null===(h=N.fundraiserThemes)||void 0===h?void 0:h.length)>0,x=function({ticketsEnabled:e,disabledTicketTypes:t,updateValues:a,setGlobalFormState:n,ticketPurchaseRequired:o}){const r=useRaisely(),{ticketing:i}=r.campaign.config,l=i&&Object.keys(i).length>1,s=Object(f.useRef)(l?i:{maxCapacity:null,maxTicketsPerOrder:null,includeTicketsInCampaignTotals:!1,taxInclusive:!1,taxRatePercent:0,displayRemainingTickets:!1}),[c,d]=Object(f.useState)([]),m=Object(f.useRef)(0),p=Object(f.useRef)(),g=Object(f.useRef)();Object(f.useLayoutEffect)(()=>{e&&t&&async function(){let e,i;if(o&&!p.current&&n(e=>({...e,isLoading:!0})),p.current)e=p.current,i=g.current;else{const t=r.campaign.uuid,a=[u.a.campaigns.products.getAll({id:t})];s.current.maxCapacity&&a.push(u.a.campaigns.events.getAll({id:t})),[e,i]=await Promise.all(a),p.current=e,g.current=i}const l=[],c=[],f=e.body().data().data.map(e=>{if("BUNDLE"===e.type&&!t.includes(e.uuid))for(const t of e.bundle.tickets)l.push(t.productUuid);if(e.validFrom){const t=(new Date).getTime(),a=new Date(e.validFrom).getTime(),n=new Date(e.validTo).getTime();e.isOnSale=a<=t&&t<n,e.isOnSale||c.push(e.uuid)}else e.isOnSale=!0;return e}).filter(e=>{if(!(["TICKET","BUNDLE"].includes(e.type)&&e.isActive))return!1;if(t.includes(e.uuid)){if(!l.includes(e.uuid))return!1;e.isDisabled=!0}else e.isDisabled=!1;if("BUNDLE"===e.type&&e.isOnSale)for(const t of e.bundle.tickets)if(c.includes(t.productUuid))return!1;return e.isOnSale});if(d(f),i){const e=i.body().data().data;m.current=e.length?e[0].numGuests:0}a(e=>({...e,ticketTypes:f})),n(e=>({...e,isLoading:!1}))}()},[e,o,t,p]);const[b,h]=Object(f.useState)(!1);return Object(f.useEffect)(()=>{if(!c.length)return;const{maxCapacity:e}=s.current;if(e&&m.current>=e)return void h(!0);const t=c.some(e=>!e.maxQuantity||e.numIssued<e.maxQuantity);h(!t)},[c,m.current]),{ticketTypes:c,isSoldOut:b,ticketConfig:s.current,numGuests:m.current}}({ticketsEnabled:b.enableTickets,ticketPurchaseRequired:b.ticketPurchaseRequired,disabledTicketTypes:b.disabledTicketTypes,updateValues:S,setGlobalFormState:T}),{ticketTypes:j,ticketConfig:P}=x;!function({ticketsEnabled:e,donationEnabled:t,values:a,updateValues:n,ticketConfig:o}){Object(f.useEffect)(()=>{(e||t)&&n(e=>({...e,total:e.ticketsTotal+e.ticketsTax+e.donationAmount+e.optInAmount}))},[a.ticketsTotal,a.ticketsTax,a.donationAmount,a.optInAmount]),Object(f.useEffect)(()=>{if(!e)return;const{taxInclusive:t,taxRatePercent:a}=o;t||n(e=>({...e,ticketsTax:Math.round(e.ticketsTotal*(a/100))}))},[e,a.ticketsTotal]);const r=Object(f.useRef)();Object(f.useEffect)(()=>{e&&n(e=>{let t;return e.discount?(r.current=e.ticketsTotal,t=e.ticketsTotal-e.discount):r.current?(t=r.current,r.current=null):t=e.ticketsTotal,{...e,ticketsTotal:t,...!e.discount&&{promoCode:""}}})},[e,a.discount])}({ticketsEnabled:b.enableTickets&&j.length,donationEnabled:b.enableDonation,values:O,updateValues:S,ticketConfig:P});const A=function({onStepChange:e,containerRef:t,initialStep:a=0}){const[n,o]=Object(f.useState)(a),r=Object(f.useCallback)(t=>{o(t),e(t)},[e]);return Object(f.useEffect)(()=>{0!==n&&Object(z.a)(t)},[n]),{step:n,updateStep:r}}({onStepChange:Object(f.useCallback)(e=>{e>0&&!yn&&function(e,t){const{t:a}=Object(d.a)();yn=new Sa.a("signupForm",e),yn.start(),yn.getPromise().catch(()=>t({error:a("There is a problem loading payment processing. Please contact Raisely support")}))}(E.campaign,S),"function"==typeof l&&l(e,O,S)},[E.campaign,O,S]),containerRef:v,initialStep:a});Object(f.useEffect)(()=>{if(/samlTimestamp/.test(window.location.search)){const e=new URLSearchParams(window.location.search).get("samlTimestamp"),t=JSON.parse(localStorage.getItem(`${b.global.campaign.path}-signup-${e}`));if(t){localStorage.removeItem(`${b.global.campaign.path}-signup-${e}`);const a=t.currentStep;S(rn()(t,["user","currentStep"]),()=>{A.updateStep(a)})}}},[]);const{isFullscreen:D}=fn({bodyRef:_,step:A.step,updateStep:A.updateStep,shouldUseFullscreen:b.enableMobileFullscreen&&hn()}),R=function({formStateUtils:e,stepUtils:t,history:a,customOnSubmit:n,onSuccess:o,onError:r}){const{global:i,integrations:l,actions:s}=useRaisely(!0),[c,d]=Object(f.useState)(!1),[m,p]=Object(f.useState)(""),g=un(),b=Object(f.useCallback)(async m=>{m&&(e.values=m);const f={...{setIsSubmitting:d,setSubmitMsg:p},...e,...t};if(n)return void n({stateUtils:f,helpers:g,global:i,integrations:l,actions:s});const{values:b,updateValues:h,setGlobalFormState:y}=e;if(c)return;d(!0),y(e=>({...e,disablePrompt:!0}));const v=g.sanitizePayload(b);try{var _;const e=g.fetchChallenge(),t=(await u.a.campaigns.register({id:i.campaign.uuid,data:{data:v,challengeSolution:e}})).body().data(),{message:n}=t,r=b.loginToken||t.token;g.broadcastIntegrations({payload:v,registrationData:t});if(!g.checkUserToken(r,d,p,n))return void h({disableBack:!0});var E,k,w;if(await g.setupUser(r),null!==(_=t.donation)&&void 0!==_&&_.donationTotal)s.updateProfileTotal("user.profile",Object(G.j)(t.donation.donationTotal,t.donation.currency,(null===(E=t.profile)||void 0===E?void 0:E.currency)||(null===(k=t.teamProfile)||void 0===k?void 0:k.currency)||(null===(w=t.organisationProfile)||void 0===w?void 0:w.currency)));a.push("/dashboard"),o&&o(f)}catch(e){var O;console.error(e),d(!1),h({error:{message:null!==(O=e.response)&&void 0!==O&&O.data?e.response.data.errors[0].message:"We couldn't register you due to an unexpected error. Please try again."}},()=>{},["donation"]),v.donation&&l.broadcast("donation.error",e),r&&r({error:e,stateUtils:f})}},[n,e,g,i.campaign,i.user,a,o,r,l,c]);return{isSubmitting:c,submitMsg:m,handleSubmit:b}}({formStateUtils:w,stepUtils:A,customOnSubmit:s,onSuccess:c,onError:m,history:b.history});!function(e,t,a){const{currency:n}=useRaisely().campaign;Object(f.useEffect)(()=>{const o=window.location.href.split("?")[1],r=o?X.a.parse(o):{};r.parentId&&e&&async function(e,o){const r=(await t.profiles.get({id:e})).body().data().data;let i={profile:{parentUuid:r.uuid,parentPreSelected:!0,fundraiserTheme:r.fundraiserTheme},parentProfileObject:r};o&&(i.teamProfile={currency:n,type:Be.h.group},i.settings={createTeam:!0},r.type===Be.h.organisation&&(i.teamProfile.parentUuid=r.uuid,delete i.profile.parentUuid)),a(i)}(r.parentId,r.startTeam)},[t.profiles,a,e,n])}(t,b.api,S),function(e){const{t:t}=Object(d.d)();Object(f.useEffect)(()=>{function a(){e({error:{message:t("Sorry, it seems you may not be connected to the Internet at the moment. Please make sure you are connected before continuing.")}})}return window.addEventListener("offline",a),()=>window.removeEventListener("offline",a)},[])}(S),Object(f.useEffect)(()=>()=>{yn&&(yn.destroy(),yn=null)},[]),function(e,t,a,n,o){const{config:r}=useRaisely().campaign;Object(f.useEffect)(()=>{var i,l;e&&n&&"GBP"===a&&null!==(i=r.donation)&&void 0!==i&&i.giftAid&&null!==(l=r.donation)&&void 0!==l&&l.isSwiftAidEnabled&&async function(){let a=!1;try{a=(await o.users.getSwiftAidAuth({email:e})).body().data().data.activeAuthorisation}catch(e){console.error("Error checking user's Swiftaid auth status: "+e)}t({hasActiveSwiftAidAuth:a})}()},[e])}(null===(y=O.user)||void 0===y?void 0:y.email,S,k,b.enableDonation,b.api);const F=Object(f.useCallback)(()=>T(e=>({...e,disablePrompt:!0})),[T]),I=Object(f.useCallback)(()=>T(e=>({...e,disablePrompt:!1})),[T]),M={...w,...A,...R,...x,...i,isFullscreen:D,containerRef:v,bodyRef:_,ticketsEnabled:b.enableTickets,ticketPurchaseRequired:b.ticketPurchaseRequired,ticketsSoldOutMessage:n,ticketsUnavailableMessage:o,showNoTicketsIcon:r,currency:k,fundraiserThemesActive:C};return g.a.createElement(ja.a,{value:M},p({...b,enableNavPrompt:I,disableNavPrompt:F}))};function _n(e,t=Object.keys(Pn)){const{values:a,updateValues:n,step:o,updateStep:r}=Object(ja.b)();return Object(f.useMemo)(()=>{const i={},l={values:a,updateValues:n,step:o,updateStep:r,showTransitionBar:!0,isV4:!0};return t.forEach(t=>{i[t]=En({...l,...e},Pn[t])}),i},[e,a,n,o,r])}function En(e,t){const a={};return t.forEach(t=>{e.hasOwnProperty(t)&&(a[t]=e[t])}),a}const kn=["individualDescription","individualImage","individualTitle","orgDescription","orgImage","orgTitle","profileTypesTitle","teamDescription","teamImage","teamTitle"],wn=["fundraiserThemesTitle","fundraiserThemesDescription","fundraiserActionText","fundraiserSelectedActionText"],On=["enableExerciseGoal","exerciseDescription","exerciseGoals","exerciseTitle","global","isV4","step","updateStep","updateValues","values"],Sn=["accountButton","accountTitle","api","disableNavPrompt","enableFacebook","enableMultipleSignups","enableNavPrompt","fields","global","integrations","isV4","passwordLength","showTransitionBar","step","updateStep","updateValues","values","enablePartialCollection","partialCollectionMessage"],Tn=["alphabeticalProfileSearch","avoidDefaultNames","enableDonation","enableGoalStep","organisationProfileTitle","profileTitle","showTransitionBar","teamProfileTitle"],Nn=["organisationGoalsTitle","profileGoalsTitle","teamGoalsTitle"],Cn=["values","donationButton","enableDonation","enableRego","global","integrations","paymentDonationTitle","skipButton"],xn=["api","enableDonation","enableRego","enableTickets","global","integrations","noPaymentButton","paymentButton","paymentDescription","paymentTitle","values"],jn=[...new Set(["api","disablePrompt","disabledTicketTypes","enableDonation","enableMobileFullscreen","enableTickets","history","initialState","initialStep","onStepChange","onSubmit","onSubmitError","onSubmitSuccess","shouldFetchTeam","showNoTicketsIcon","ticketPurchaseRequired","ticketsSoldOutMessage","ticketsUnavailableMessage","preSelectProfile",...kn,...On,...Sn,"showNoTicketsIcon","ticketHolderButton","ticketHolderTitle","ticketPurchaseRequired","ticketSelectButton","ticketSelectDescription","ticketSelectTitle","ticketsSoldOutMessage","ticketsUnavailableMessage",...Tn,...Nn,...Cn,...xn,...wn])],Pn={profileType:kn,fundraiserThemes:wn,exercise:On,user:Sn,profile:Tn,profileGoals:Nn,donation:Cn,payment:xn};function An(e,t,a,n){return{...Object(Be.i)(),...function(e,t,a,n){return Object(f.useMemo)(()=>{var o,r;const{profiles:i}=n,l=!1!==e;let s=t,c=!0;!1===(null==i||null===(o=i.teams)||void 0===o?void 0:o.enabled)&&(s=!1,c=!1);let u=a,d=!0;return null!=i&&null!==(r=i.organisations)&&void 0!==r&&r.enabled||(u=!1,d=!1),{individualProfilesEnabled:l,createTeamEnabled:s,joinTeamEnabled:c,createOrgEnabled:u,joinOrgEnabled:d}},[e,t,a,n])}(e,t,a,n),...function(){const{profiles:e,flags:t}=useRaisely().campaign.config;return Object(f.useMemo)(()=>{var t,a,n,o,r,i,l,s,c;return{profileGoals:{individuals:{customGoalEnabled:null==e||null===(t=e.individuals)||void 0===t?void 0:t.customGoalEnabled,goals:(null==e||null===(a=e.individuals)||void 0===a?void 0:a.goals)||Be.a.individuals,disableGoalStepV4:Boolean(null==e||null===(n=e.individuals)||void 0===n?void 0:n.disableGoalStepV4)},teams:{customGoalEnabled:null==e||null===(o=e.teams)||void 0===o?void 0:o.customGoalEnabled,goals:(null==e||null===(r=e.teams)||void 0===r?void 0:r.goals)||Be.a.teams,disableGoalStepV4:Boolean(null==e||null===(i=e.teams)||void 0===i?void 0:i.disableGoalStepV4)},organisations:{customGoalEnabled:null==e||null===(l=e.organisations)||void 0===l?void 0:l.customGoalEnabled,goals:(null==e||null===(s=e.organisations)||void 0===s?void 0:s.goals)||Be.a.organisations,disableGoalStepV4:Boolean(null==e||null===(c=e.organisations)||void 0===c?void 0:c.disableGoalStepV4)}}}},[e,t])}()}}function Dn(){const e=useRaisely(),{profile:t}=e.current,{updateValues:a}=Object(ja.b)();Object(f.useEffect)(()=>{t&&(t.type===Be.h.group||t.type===Be.h.organisation?a({parentProfileObject:t,profile:{parentUuid:t.uuid,parentPreSelected:!0}}):a(e=>({...e,parentProfileObject:null,profile:{...e.profile,parentUuid:null,parentPreSelected:!1}})))},[t,a])}var Rn=a(61);const Fn=["grid","carousel"];function In({themes:e,campaign:t,display:a,columns:n,isSignup:o,gutter:r,onTypeClick:i,primaryActionText:l,secondaryActionText:s,selectedActionText:c,selectedTheme:u}){var m;const[p,b]=Object(f.useState)(2),h=Fn.includes(a)?a:"grid",{campaign:y}=useRaisely(!1,{campaign:t}),{t:v,tD:_,tF:E}=Object(d.d)(),k=e&&e.length>0?e:(null==y||null===(m=y.config)||void 0===m?void 0:m.fundraiserThemes)||[];if(Object(f.useState)(()=>{k&&k.length>0&&b(((e,t)=>{let a;return a=e||(t>=3?3:2),a})(n,k.length))},[k]),(null==k?void 0:k.length)<1)return g.a.createElement(it.a,{message:v("No fundraising themes are configured for this campaign"),prefix:"fundraiser-themes"});const w=({title:e,description:t,path:a,image:n,thumbnailImage:r,landingPage:d,selected:m})=>{const p="/signup?fundraiserTheme="+a;return g.a.createElement("li",{className:`fundraiser-themes__item${n?"":" fundraiser-themes__item--no-image"} fundraiser-themes__path--${a}`},g.a.createElement("div",{className:"fundraiser-theme image-tile image-tile--adaptive image-tile--text-yes image-tile--size-rectangle"+(Boolean(u)&&m?" fundraiser-theme--selected":Boolean(u)?" fundraiser-theme--not-selected":"")},g.a.createElement(V.a,{className:"fundraiser-theme__link",onClick:()=>o&&i(a),href:!o&&p}),n&&g.a.createElement("div",{className:"fundraiser-theme__image image-tile__image lazy","data-bg":Object(Rn.a)(r||n,{maxWidth:1024}),style:{backgroundImage:`url(${Object(Rn.a)(r||n,{maxWidth:1024,quality:1})})`}}),g.a.createElement("div",{className:"fundraiser-theme__content image-tile__content"},g.a.createElement("div",{className:"fundraiser-theme__heading image-tile__content-con"},g.a.createElement("p",{className:"fundraiser-theme__heading image-tile__content__title"},_(e)),g.a.createElement("p",{className:"fundraiser-theme__heading image-tile__content__text"},_(t))),g.a.createElement("div",{className:"fundraiser-theme__buttons image-tile__buttons button-row buttons-mb--small buttons-mb--full"},o?g.a.createElement(V.a,{theme:"primary",className:"fundraiser-theme__button fundraiser-theme__button--register",onClick:()=>i(a)},m?E(c,v("Continue")):E(l,v("Register"))):g.a.createElement(f.Fragment,null,g.a.createElement(V.a,{theme:"primary",className:"fundraiser-theme__button fundraiser-theme__button--register",href:p},E(l,v("Register"))),d&&g.a.createElement(V.a,{theme:"secondary",className:"fundraiser-theme__button fundraiser-theme__button--more",href:d},E(s,v("Read more"))))))))};return g.a.createElement("div",{className:"fundraiser-themes fundraiser-themes--"+h},"grid"===h?g.a.createElement("ul",{className:"fundraiser-themes__list fundraiser-themes__list--"+p,style:{"--gutter":r+"px"}},Object.values(k).map(({...e},t)=>g.a.createElement(w,N()({},e,{key:t,selected:u===e.path})))):g.a.createElement(ha,{className:"fundraiser-themes__list",gutter:r},Object.values(k).map(({...e},t)=>g.a.createElement(w,N()({},e,{key:t})))))}var Mn=a(76);var Ln=function({fundraiserThemesTitle:e,fundraiserThemesDescription:t,fundraiserActionText:a,fundraiserSelectedActionText:n}){const{updateStep:o,step:r,values:i,updateValues:l,globalFormState:{isV4:s}}=Object(ja.b)(),{t:c,tD:u}=Object(d.d)(),m=e=>{const t=(i.profile?"profile":i.teamProfile&&"teamProfile")||i.organisationProfile&&"organisationProfile";l({[t]:{fundraiserTheme:e}},()=>o(r+1))},p=i.profile||i.teamProfile||i.organisationProfile;return g.a.createElement("div",{className:"signup-form__fundraiser-theme"},e&&g.a.createElement("h3",{className:"signup-form__title signup-form__fundraiser-theme__heading"},u(e)),t&&g.a.createElement("p",{className:"signup-form__step-description signup-form__fundraiser-theme__description"},u(t)),g.a.createElement(In,{columns:2,gutter:16,display:"grid",isSignup:!0,onTypeClick:m,primaryActionText:a,selectedActionText:n,selectedTheme:p.fundraiserTheme}),s?g.a.createElement(Mn.a,{onSubmit:m,hideNext:!0}):r>0&&g.a.createElement(xa.a,null,g.a.createElement(xa.a.BackBtn,null)))},Bn=a(634),Un=a(679),Hn=a(77);function Vn(e,t,a,n,o,r,i,l){return Math.min(e>0?e:0,t.maxQuantity?t.maxQuantity-t.numIssued-(a[t.uuid]||0):1/0,n?o-r:1/0,i?i-l:1/0)}function $n(e={},t){let a=0;return Object.entries(e).forEach(([e,n])=>{const o=t.filter(t=>t.uuid===e)[0].price;a+=o*n}),a}function qn(e={},t,a,n){let o=a.showTicketHolder;const r=n.ticket;return null!=r&&r.length&&(o=Object.entries(e).some(([e,a])=>{if(!a)return!1;const n=t.filter(t=>t.uuid===e)[0].name;return Object(Hn.conditionalLogic)(r,{type:n}).length>0})),o}function Gn(e={},t){return Object.entries(e).reduce((a,[n,o])=>{for(let r of t)if(r.uuid===n){if("BUNDLE"===r.type&&e[n]>0){const t=r.bundle.tickets.reduce((e,t)=>e+t.quantity,0);return a+e[n]*Number(t)}return a+o}},0)}const zn=e=>`Sorry, only ${e} item${e>1?"s":""} left.`,Yn=Object(f.createContext)();Yn.displayName="TicketSelectFormContext";const Wn=()=>Object(f.useContext)(Yn);function Zn({title:e,description:t,button:a,...n}){const{values:o,step:r,updateStep:i,ticketTypes:l,numGuests:s,currency:c,ticketConfig:{maxCapacity:u}}=Object(ja.b)(),[d]=Object(Pa.a)({form:null===o.profile?"ticket":"signup",stage:"ticket",data:{selectedTickets:o.tickets,ticketTypes:l,currency:c}}),m={title:e,description:t,button:a,numTicketsRemaining:u?u-s:null,onSubmit:()=>{i(r+1),d(o.tickets,l,o.ticketsTotal)}};return g.a.createElement(Yn.Provider,N()({value:m},n))}function Kn(e){return g.a.createElement("div",N()({className:"signup-form__ticket-select signup-form__field-container","data-testid":"ticket-select-form"},e))}function Jn({children:e,...t}){const{ticketsSoldOutMessage:a,ticketConfig:{maxCapacity:n,displayRemainingTickets:o}}=Object(ja.b)(),{numTicketsRemaining:r}=Wn();if(!n||!(o&&r<=10))return null;let i;return r<=0?i=a:o&&(i=`Only ${r} ticket${r>1?"s":""} left!`),e||g.a.createElement("p",N()({className:"signup-form__ticket-select__number-remaining"},t),i)}function Qn(e){const{ticketTypes:t,ticketConfig:a,currency:n,values:o,updateValues:r}=Object(ja.b)(),{numTicketsRemaining:i}=Wn(),l=useRaisely(),{t:s}=Object(d.d)();Object(f.useEffect)(()=>{if(!Object.keys(o.tickets).length)return;const e=function(e,t,a,n){let o=0,r=0;const i={},l={},s="number"==typeof t,{maxTicketsPerOrder:c}=e;return a.forEach(e=>{if(n[e.uuid])if("BUNDLE"===e.type){const u=e.uuid;let d=n[u];e.bundle.tickets.forEach(({quantity:e,productUuid:n})=>{if(d){const i=a.find(e=>e.uuid===n),u=Vn(d*e,i,l,s,t,o,c,r);u<d*e&&(d=Math.floor(u/e))}}),d&&e.bundle.tickets.forEach(({quantity:e,productUuid:t})=>{l[t]=(l[t]||0)+d*e,o+=d*e}),r+=d,i[u]=d}else{const a=Vn(n[e.uuid],e,l,s,t,o,c,r);l[e.uuid]=(l[e.uuid]||0)+a,o+=a,r+=a,i[e.uuid]=a}}),i}(a,i,t,o.tickets);r(a=>({...a,tickets:e,ticketsTotal:$n(e,t),showTicketHolder:qn(e,t,o,l.campaign.config.customFields)}))},[]);const c=Gn(o.tickets,t);return g.a.createElement("ul",N()({className:"signup-form__ticket-select__list"},e),t.filter(e=>!e.isDisabled).map(e=>g.a.createElement(Xn,{key:e.uuid,"data-testid":e.uuid},e.photoUrl&&g.a.createElement(eo,null,g.a.createElement(ya.a,{src:e.photoUrl})),g.a.createElement(to,null,e.displayName||e.name),e.description&&g.a.createElement(ao,null,e.description),g.a.createElement(no,{name:e.displayName||e.name,quantity:o.tickets[e.uuid]||0,numIssued:e.numIssued,totalSelected:c,maxQuantity:e.maxQuantity,onChange:n=>function(e,n){if(n<0)return;r({},null,["error"]);const s={...o.tickets,[e.uuid]:n},c=Gn(s,t),u=Object.values(s).reduce((e,t)=>e+t,0),{maxTicketsPerOrder:d}=a;if(d&&u>d)return void r({error:{message:(m=d,`Sorry, you can only purchase ${m} ticket${m>1?"s":""} per order.`)}});var m;const{maxQuantity:p,numIssued:f}=e;if(p&&n>p-f)return void r({error:{message:(g=p-f,`Sorry, only ${g} of this item left.`)}});var g;if(i&&i-c<0)return void r({error:{message:zn(i)}});const b=$n(s,t),h=qn(s,t,o,l.campaign.config.customFields);let y=!1,v=o.ticketHolders;n<o.tickets[e.uuid]&&(v={},Object.entries(o.ticketHolders).forEach(([t,a])=>{if(t.includes(e.uuid)){const e=t.split("-");if(e[e.length-1]>=n)return void(n&&(y=!0))}v[t]=a})),r(e=>({...e,tickets:s,ticketsTotal:b,showTicketHolder:h,popupMsg:y?"It seems you may have removed a ticket for which you had already filled out attendee details. Please check all attendee details are still correct.":null,ticketHolders:v}))}(e,n),ticket:e,ticketTypes:t}),g.a.createElement(io,null,e.price?Object(G.f)(e.price,n):s("FREE")))))}function Xn(e){return g.a.createElement("li",N()({className:"signup-form__ticket-select__list-item"},e))}function eo(e){return g.a.createElement("div",N()({className:"signup-form__ticket-select__list-item__img","data-testid":"ticket-photo"},e))}function to({children:e,...t}){return g.a.createElement("div",N()({className:"signup-form__ticket-select__list-item__name"},t),g.a.createElement("p",{"data-testid":"ticket-name"},e))}function ao({children:e,...t}){const{t:a}=Object(d.d)(),[n,o]=Object(f.useState)(!0);return g.a.createElement("div",N()({className:"signup-form__ticket-select__list-item__details"},t),g.a.createElement("p",{className:n?"visible":null,"data-testid":"ticket-description"},e),g.a.createElement("button",{type:"button",onClick:()=>o(!n)},a(n?"Hide info":"See more")))}function no({name:e,quantity:t,numIssued:a,totalSelected:n,maxQuantity:o,onChange:r,ticket:i,ticketTypes:l}){var s;const{numTicketsRemaining:c}=Wn(),[u,m]=Object(Bn.a)(),{t:p}=Object(d.d)(),{values:f}=Object(ja.b)();let b=!1;if("BUNDLE"===i.type)for(const e of null===(h=i.bundle)||void 0===h?void 0:h.tickets){var h;if(b)break;const t=l.find(t=>t.uuid===e.productUuid);b=t.numIssued===t.maxQuantity}const y=a===o||null!==c&&c<=0||b;let v=a;"TICKET"===i.type&&(()=>{for(let e of l)for(let[t,a]of Object.entries(f.tickets))if(t===e.uuid&&"BUNDLE"===e.type)for(let t of e.bundle.tickets)t.productUuid===i.uuid&&t.quantity&&(v+=a*t.quantity)})();let _=1;if("BUNDLE"===i.type){const e=i.bundle.tickets.reduce((e,t)=>e+t.quantity,0);_=Number(e)}const E=o&&t>=o-v||c&&c-n-_<0||"BUNDLE"===i.type&&Object(Un.a)(null===(s=i.bundle)||void 0===s?void 0:s.tickets,t+1,l,f.tickets);return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"signup-form__ticket-select__list-item__quantity"},y?g.a.createElement("p",null,p("Sold Out")):g.a.createElement(g.a.Fragment,null,g.a.createElement(oo,{disabled:0===t,onClick:()=>r(t-1)}),g.a.createElement("label",{className:"visually-hidden",htmlFor:"quantity-"+e},p("Quantity for [[itemName]]",{itemName:e})),g.a.createElement("input",{id:"quantity-"+e,name:"quantity-"+e,value:t,disabled:E,onChange:e=>r(Number(e.target.value)),onClick:u,onBlur:m,inputMode:"numeric"}),g.a.createElement(ro,{disabled:E,onClick:()=>r(t+1)}),E&&g.a.createElement("div",{className:"signup-form__ticket-select__list-item__quantity__max-selected"},p("Sold Out")))))}function oo({disabled:e,onClick:t}){const{t:a}=Object(d.d)();return g.a.createElement("button",{type:"button",disabled:e,onClick:t,"data-cy":"remove-ticket"},g.a.createElement("svg",{width:"30",height:"30",fill:"none","aria-hidden":"true",focusable:"false"},g.a.createElement("circle",{cx:"15",cy:"15",r:"14.5",stroke:"#6F6F6F"}),g.a.createElement("path",{d:"M19.714 15.918h-9.428v-1.346h9.428v1.347Z",fill:"#6F6F6F"})),g.a.createElement("span",{className:"visually-hidden"},a("Remove ticket")))}function ro({disabled:e,onClick:t}){const{t:a}=Object(d.d)();return g.a.createElement("button",{type:"button",disabled:e,onClick:t,"data-cy":"add-ticket"},g.a.createElement("svg",{width:"30",height:"30",fill:"none","aria-hidden":"true",focusable:"false"},g.a.createElement("circle",{cx:"15",cy:"15",r:"14.5",stroke:"#6F6F6F"}),g.a.createElement("path",{d:"M19.714 15.673h-4.04v4.041h-1.348v-4.04h-4.04v-1.348h4.04v-4.04h1.348v4.04h4.04v1.347Z",fill:"#6F6F6F"})),g.a.createElement("span",{className:"visually-hidden"},a("Add ticket")))}function io(e){return g.a.createElement("span",N()({className:"signup-form__ticket-select__list-item__price","data-testid":"ticket-price"},e))}function lo(){const{values:e,step:t,ticketPurchaseRequired:a,globalFormState:{isV4:n}}=Object(ja.b)(),{button:o,onSubmit:r}=Wn(),{tD:i}=Object(d.d)();let l=!1;if(a){l=!Object.values(e.tickets).reduce((e,t)=>e+t,0)}return n?g.a.createElement(Mn.a,{actionText:o,onSubmit:r,disabled:l}):g.a.createElement(xa.a,null,g.a.createElement(xa.a.NextBtn,{disabled:l,onClick:r},i(o)),g.a.createElement("br",null),t>0&&g.a.createElement(xa.a.BackBtn,null))}Zn.Contents=function(){const{title:e,description:t}=Wn(),{tD:a}=Object(d.d)();return g.a.createElement(Kn,null,g.a.createElement(Ea.c,null,a(e)),g.a.createElement(Ea.a,null,a(t)),g.a.createElement(Jn,null),g.a.createElement(Qn,null),g.a.createElement(lo,null))},Zn.ContentsBase=Kn,Zn.TicketsRemainingNotice=Jn,Zn.TicketSelect=Qn,Zn.TicketType=Xn,Zn.TicketPhoto=eo,Zn.TicketName=to,Zn.TicketDescription=ao,Zn.TicketQuantity=no,Zn.TicketPrice=io,Zn.TicketSelectNav=lo;var so=Zn,co=a(135),uo=a.n(co),mo=a(57),po=a(9);function fo(e){return g.a.createElement("div",{className:"horizontal-rule",style:e.style},g.a.createElement("div",{className:"horizontal-rule__line"}))}fo.propTypes={width:h.a.string,style:h.a.object};const go=Object(f.createContext)();go.displayName="TicketHolderFormContext";const bo=()=>Object(f.useContext)(go);function ho({title:e,button:t,...a}){const{values:n,ticketTypes:o}=Object(ja.b)(),r=Object(mo.b)("ticket"),[i]=Object(Pa.a)({form:null===n.profile?"ticket":"signup",stage:"attendee"}),l={title:e,button:t,ticketTypes:o,customFields:r,sendAttendeeFormEvents:i};return g.a.createElement(go.Provider,N()({value:l},a))}function yo(e){return g.a.createElement("div",N()({className:"signup-form__ticket-holder signup-form__field-container"},e))}function vo(){const{updateStep:e,step:t,updateValues:a,values:n}=Object(ja.b)(),{ticketTypes:o,customFields:r,sendAttendeeFormEvents:i}=bo(),l=useRaisely(),s=Object(f.useRef)(),c=Object(f.useRef)(),u=Object.keys(n.ticketHolders).length;if(!s.current){s.current=[];let e=0,t=[];Object.entries(n.tickets).forEach(([e,a])=>{o.map(n=>{if(e===n.uuid&&"BUNDLE"===n.type)for(let e=0;e<a;e++)for(const r of n.bundle.tickets){const i=o.find(e=>e.uuid===r.productUuid),l=a>1?"#"+(e+1):"",s=`${n.displayName} ${l}`;t.push({...i,displayBundleName:s,quantity:r.quantity,productUuid:i.uuid,bundleProductUuid:n.uuid,bundleQuantity:e})}else e===n.uuid&&"TICKET"===n.type&&t.push({...n,quantity:a,productUuid:n.uuid})})}),t.map(({name:t,displayName:a,quantity:o,productUuid:i,displayBundleName:l,bundleProductUuid:u,bundleQuantity:d})=>{for(let m=0;m<o;m++){const o=Object(Hn.conditionalLogic)(r,{type:t});if(!o.length)return;const p=`${i}-${u?u+"-":""}${"number"==typeof d?d+"-":""}${m}`;s.current.push({id:p,name:t,displayName:a,displayBundleName:l,fields:o}),n.ticketHolders[p]||c.current<e||(c.current=e),e++}}),void 0===c.current&&(c.current=s.current.length-1)}const[d,m]=Object(f.useState)(c.current),p=s.current[d],b={render:()=>g.a.createElement("button",{type:"button",className:"signup-form__ticket-holder__ticket-form-action",onClick:h},"Copy previous"),type:"custom",label:"Copy previous",id:"copy-previous"};function h(){if(0===d)return;const e=s.current[d-1].fields.filter(e=>s.current[d].fields.includes(e));let t={},o={},r={};for(let t of e){var i,l;if(t.private)r={...r,[t.id]:null===(i=n.ticketHolders[s.current[d-1].id].private)||void 0===i?void 0:i[t.id]};else o={...o,[t.id]:null===(l=n.ticketHolders[s.current[d-1].id].public)||void 0===l?void 0:l[t.id]}}t[p.id]={type:p.name,public:o,private:r},a(e=>({...e,ticketHolders:{...e.ticketHolders,[p.id]:t[p.id]}}))}return g.a.createElement("div",{className:"ticket-holder__wrapper","data-testid":p.id},s.current.slice(0,d+1).map((e,t)=>g.a.createElement(g.a.Fragment,null,g.a.createElement(Eo,{key:e.id,ticketHolderForms:s.current,ticket:e,currentStep:d,setCurrentStep:m,index:t,numFormsCompleted:u}),t<d&&g.a.createElement(fo,{style:{opacity:.2,padding:"15px 0px 5px"}}))),g.a.createElement(po.a,{key:p.id,unlocked:!0,global:l,fields:(()=>{let e=[...r,_o];if(0!==d){return s.current[d-1].fields.filter(e=>s.current[d].fields.includes(e)&&"hidden"!==e.type).length?[b,...e]:e}return e})(),values:{...uo()(n.ticketHolders[p.id])?{}:n.ticketHolders[p.id],type:p.name},buttons:({onSubmitClick:e})=>g.a.createElement(Oo,{onSubmitClick:e,currentStep:d,setCurrentStep:m}),action:function(n){const o=d<s.current.length-1?()=>m(d+1):()=>{e(t+1),i()};a(e=>({...e,ticketHolders:{...e.ticketHolders,[p.id]:n}}),o)}}),s.current.slice(d+1).map((e,t)=>g.a.createElement(g.a.Fragment,null,g.a.createElement(fo,{style:{opacity:.2,padding:"15px 0px 5px"}}),g.a.createElement(Eo,{key:e.id,ticketHolderForms:s.current,ticket:e,currentStep:d,setCurrentStep:m,index:t+d+1,numFormsCompleted:u}))))}const _o={active:!0,core:!0,id:"type",label:"type",type:"hidden"};function Eo({ticketHolderForms:e,ticket:t,currentStep:a,setCurrentStep:n,index:o,numFormsCompleted:r}){const i=o<a||r===e.length;return g.a.createElement("div",{className:"signup-form__ticket-holder__list-item",style:{"--cursor":""+(i?"pointer":"default"),justifyContent:"space-between"},"data-testid":"ticket-list-item",onClick:function(){i&&n(o)}},g.a.createElement(wo,{index:o,quantity:e.length,isCompleted:i,setCurrentStep:n,ticketName:t.displayName||t.name,displayBundleName:t.displayBundleName}),g.a.createElement(ko,{isCompleted:i}))}function ko({isCompleted:e}){const{t:t}=Object(d.d)();return g.a.createElement(g.a.Fragment,null,g.a.createElement("svg",{opacity:e?1:.3,width:"24",height:"24",fill:"none","aria-hidden":"true",focusable:"false"},g.a.createElement("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2Zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z"})),g.a.createElement("span",{className:"visually-hidden"},t(e?"Completed":"Not completed")))}function wo({index:e,quantity:t,ticketName:a,displayBundleName:n}){const{t:o}=Object(d.d)();return g.a.createElement("div",{className:"signup-form__ticket-holder__description",type:"button","data-testid":"ticket-description"},g.a.createElement("span",{className:"signup-form__ticket-holder__quantity-count"},o("Item [[itemNumber]] of [[totalNumber]]",{itemNumber:e+1,totalNumber:t})),g.a.createElement("span",{className:"ticket-type"},a),g.a.createElement("span",{className:"ticket-type-parent-bundle"},n))}function Oo({onSubmitClick:e,currentStep:t,setCurrentStep:a}){const{button:n}=bo(),{updateStep:o,step:r,globalFormState:{isV4:i}}=Object(ja.b)();function l(){t>0?a(t-1):o(r-1)}return i?g.a.createElement(Mn.a,{actionText:n,onBack:l,onSubmit:e}):g.a.createElement(xa.a,null,g.a.createElement(xa.a.NextBtn,{onClick:e},n),g.a.createElement("br",null),g.a.createElement(xa.a.BackBtn,{onClick:l}))}ho.Contents=function(){const{title:e}=bo();return g.a.createElement(yo,null,g.a.createElement(Ea.c,null,e),g.a.createElement(vo,null))},ho.ContentsBase=yo,ho.FormStep=vo,ho.TicketListItem=Eo,ho.TicketDescription=wo,ho.TicketHolderNavBtns=Oo;var So=ho,To=a(14),No=a(184);const Co=Object(f.createContext)();Co.displayName="SelfDonationFormContext";function xo({mainHeading:e,paymentButton:t,builtIns:a}){var n;const{updateValues:o}=Object(ja.b)(),{values:r,availableAmounts:i={},isDefaultDonationAmountEnabled:l=!1,availableFrequencies:s={}}=a.useDonationFormContext(),{config:c}=useRaisely().campaign;return Object(f.useEffect)(()=>{var e,t;o({donationAmount:r.amount,availableVariantsAud:null==r||null===(e=r.availableVariantsAud)||void 0===e?void 0:e.ONCE,selectedVariantAud:null===(t=i[0])||void 0===t?void 0:t.selectedVariantAud,availableDonationAmounts:i,isDefaultDonationAmountEnabled:l,availableFrequencies:s})},[r.amount]),g.a.createElement(g.a.Fragment,null,g.a.createElement(Ea.c,null,e),g.a.createElement(a.AmountSelect,{autoContinueOnAmountSelect:!1,customAmountPlaceholder:null===(n=c.donation)||void 0===n?void 0:n.customAmountPlaceholder}),g.a.createElement(jo,{nextButton:t}))}function jo({nextButton:e}){const{step:t,updateStep:a,currency:n,values:o,updateValues:r,globalFormState:{isV4:i}}=Object(ja.b)(),{skipButton:l}=Object(f.useContext)(Co),{tD:s}=Object(d.d)(),[c]=Object(Pa.a)({form:null===o.profile?"ticket":"signup",stage:"donation",data:{currency:n}});function u(){a(t+1),c(o.donationAmount)}function m(){r({donationAmount:0},({donationAmount:e})=>{a(t+1),c(e)})}return i?g.a.createElement(g.a.Fragment,null,g.a.createElement(Mn.a,{onSubmit:u,actionText:e}),g.a.createElement(Po,{handleSkip:m,skipButton:l})):g.a.createElement(xa.a,null,g.a.createElement(xa.a.NextBtn,{theme:"primary",onClick:u},s(e)),g.a.createElement("br",null),t>0&&g.a.createElement(xa.a.BackBtn,{onClick:()=>a(t-1)}),g.a.createElement(Po,{handleSkip:m,skipButton:l}))}function Po({handleSkip:e,skipButton:t}){const{tD:a}=Object(d.d)();return g.a.createElement("button",{className:"signup-form__navigation__link signup-form__skip in-form--skip",onClick:e},g.a.createElement("span",null,a(t)),g.a.createElement(Xe.a,{name:"chevron_right",size:"small"}))}function Ao(){}var Do=function({paymentDonationTitle:e,donationButton:t,skipButton:a,...n}){var o;const{values:r,currency:i}=Object(ja.b)(),{currency:l,config:s}=useRaisely().campaign,{t:c,tD:u}=Object(d.d)(),m=null!==(o=s.donation)&&void 0!==o&&o.isV3Enabled?No.a:Ta.a;let p=r.donationAmount;l!==i&&(p=Object(To.b)(r.donationAmount,i,l,!0));const f=Object.values(r.tickets).reduce((e,t)=>e+t,0)>0?{items:[{type:"TICKET",excludeFromPay:!0}]}:{},b={skipButton:a?u(a):c("Skip")};return g.a.createElement(Co.Provider,{value:b},g.a.createElement("div",{className:"signup-form__donation-select signup-form__field-container"},g.a.createElement(Na.a,null,g.a.createElement(m,N()({},n,{mainHeading:e,renderStep:xo,initialState:{amount:p,...f},currency:i,paymentButton:t,disableAnalytics:!0,onTokenSuccess:Ao})))))};function Ro({builtIns:e}){const{values:t,updateValues:a,step:n,updateStep:o}=Object(ja.b)(),{values:r}=e.useDonationFormContext();return Object(Pa.a)({form:null===t.profile?"ticket":"signup",stage:"giftAid",data:{giftAid:r.details.private.giftAid}}),Object(f.useEffect)(()=>{0!==r.step&&(a({user:{...r.details}}),o(n+1))},[r.step,r.details]),g.a.createElement(e.GiftAidOptIn,null)}function Fo(){}var Io=function(e){var t,a;const{values:n,currency:o}=Object(ja.b)(),{currency:r,config:i}=useRaisely().campaign,l=null!==(t=i.donation)&&void 0!==t&&t.isV3Enabled?No.a:Ta.a;let s=n.donationAmount;return r!==o&&(s=Object(To.b)(n.donationAmount,o,r,!0)),g.a.createElement("div",{className:"signup-form__giftaid signup-form__field-container"},g.a.createElement(Na.a,null,g.a.createElement(l,N()({},e,{renderStep:Ro,initialState:{amount:s,hasActiveSwiftAidAuth:n.hasActiveSwiftAidAuth,isSwiftAidEnabled:null===(a=i.donation)||void 0===a?void 0:a.isSwiftAidEnabled,details:{...n.user,private:{...n.user.private}}},currency:"GBP",disableAnalytics:!0,onTokenSuccess:Fo}))))};let Mo;var Lo={Header:function({numSteps:e,exclude:t}){const{updateStep:a}=Object(ja.b)(),n=Array(e).fill();return g.a.createElement(ka.a,{className:"signup-form__stages--fullscreen"},g.a.createElement("div",{className:"signup-form__stages__inner"},n.map((e,a)=>t===a?null:g.a.createElement(ka.a.StepBtn,{key:a,index:a}))),g.a.createElement("button",{className:"signup-form__stages__close",onClick:()=>a(0)},g.a.createElement(Xe.a,{name:"close",size:"normal"})))},Footer:function({currentStep:e,skipButton:t,...a}){const{t:n}=Object(d.d)(),{bodyRef:o,step:r,values:i,ticketPurchaseRequired:l}=Object(ja.b)(),s=["user","profile"],[c,u]=Object(f.useState)(!1);Object(f.useEffect)(()=>{c&&u(!1)},[r]),Object(f.useEffect)(()=>()=>{Mo&&clearTimeout(Mo)},[]);let m=!1;if("ticketSelect"===e&&l){m=!Object.values(i.tickets).reduce((e,t)=>e+t,0)}return g.a.createElement(xa.a,N()({className:"override signup-form__nav--fullscreen"},a),g.a.createElement("div",{className:"signup-form__nav--fullscreen__wrapper"},m?g.a.createElement("span",{className:"signup-form__nav__required-msg"},n("Select an item to continue")):g.a.createElement(xa.a.Total,null),g.a.createElement("div",{className:"signup-form__nav__buttons"},g.a.createElement(xa.a.BackBtn,{onClick:function(){const e=o.current.querySelector(".in-form--back");null==e||e.click()},isInForm:!1,"data-testid":"mobile-back"},n("Back")),g.a.createElement("div",{style:{display:"flex"}},"donation"===e&&g.a.createElement(xa.a.SkipBtn,{onClick:function(){const e=o.current.querySelector(".in-form--skip");null==e||e.click()}},t),g.a.createElement(xa.a.NextBtn,{onClick:function(){s.includes(e)&&(Mo=setTimeout(()=>{o.current.querySelector(".form-field--error")||u(!0)}));const t=o.current.querySelector(".in-form--next");null==t||t.click()},isInForm:!1,disabled:m,"data-testid":"mobile-next"},g.a.createElement(g.a.Fragment,null,g.a.createElement(Ea.d,{isTransitioning:c}),n("Next")))))))}};function Bo(){return g.a.createElement("svg",{width:"78",height:"77",fill:"none","data-testid":"no-tickets-icon"},g.a.createElement("circle",{cx:"39",cy:"38.5",r:"38.5",fill:"#F1F1F7"}),g.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.891 28.685a1 1 0 0 0-1 1v1.577a8.35 8.35 0 0 1 0 15.585v1.577a1 1 0 0 0 1 1H55.11a1 1 0 0 0 1-1v-1.577a8.35 8.35 0 0 1 0-15.585v-1.577a1 1 0 0 0-1-1H23.89Zm35.218 1a4 4 0 0 0-4-4H23.89a4 4 0 0 0-4 4v4.021a5.348 5.348 0 0 1 0 10.696v4.022a4 4 0 0 0 4 4H55.11a4 4 0 0 0 4-4v-4.022a5.348 5.348 0 1 1 0-10.696v-4.021Z",fill:"#B8B8C1"}),g.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M61.06 19.06a1.5 1.5 0 0 1 0 2.122L22.183 60.061a1.5 1.5 0 1 1-2.121-2.122l38.878-38.878a1.5 1.5 0 0 1 2.122 0Z",fill:"#B8B8C1"}),g.a.createElement("path",{fill:"#B8B8C1",d:"M46.5 47h3v3h-3zM46.5 42h3v3h-3zM46.5 37h3v3h-3zM46.5 32h3v3h-3z"}))}var Uo=function({soldOut:e}){const{showNoTicketsIcon:t,ticketsSoldOutMessage:a,ticketsUnavailableMessage:n}=Object(ja.b)();return g.a.createElement("div",{className:"signup-form__tickets-unavailable"},t&&g.a.createElement(Bo,null),g.a.createElement("p",null,e?a:n))},Ho=a(181);var Vo=function({profile:e}){const t=useRaisely(),a=e.currency!==t.campaign.currency||t.detectedCurrency!==t.campaign.currency,[n]=e?Object(G.t)(e,"total",t.campaign.config.activity,{displayDollarPrefix:a}):[],o=v()(t,"campaign.config.theme.defaultProfileUrl")||null;return g.a.createElement("div",{className:"profile-tile profile-tile--detail-default"},g.a.createElement(p.ProfileImage,{defaultImage:o,profile:e||{}}),g.a.createElement("div",{className:"profile-tile__content"},g.a.createElement("p",{className:"profile-tile__name"},e.name),g.a.createElement("span",{className:"profile-tile__total"},n),g.a.createElement(p.ProgressBar,{profile:e,showTotal:!1,showGoal:!1,size:"small",style:"rounded",displaySource:"total"})))};var $o=function({inputValue:e,request:t,getMenuProps:a,getItemProps:n,typesToSearch:o,profileTerms:r}){const[i,l]=Object(f.useState)({state:"idle"}),[s,c]=Object(f.useState)([]),u=useRaisely(),{t:m}=Object(d.d)(),p=o===`${Be.h.group},${Be.h.organisation}`;Object(f.useEffect)(()=>{e&&b(e)},[e]);const b=Object(f.useMemo)(()=>Pt()((async function(e){l({state:"fetching"});try{const a=(await t(e)).body().data().data,{maximumTeamSize:n}=u.campaign.config,o=a.map(e=>({value:e,label:e})).filter(e=>e.value.type===Be.h.organisation||!n||n>e.value.memberCount);c(o),l({state:"success"})}catch(e){l({state:"error",data:m("Sorry, an error occurred")})}}),300),[]);if(!e)return null;if("fetching"===i.state)return g.a.createElement("div",{className:"profile-select__list__spinner"},g.a.createElement(tt.b,{size:".4",sceneHeight:"1rem"}));const h=[],y=[];return p&&s.forEach(e=>{e.value.type===Be.h.group?h.push(e):y.push(e)}),g.a.createElement("ul",N()({className:"profile-select__list"},a()),s.length>0?g.a.createElement("div",{className:"profile-select__list-container"},!p&&s.map(e=>g.a.createElement("li",N()({key:e.value.uuid,className:"profile-select__list-item"},n({key:e.value.uuid,index:e.value.uuid,item:e})),g.a.createElement(Vo,{profile:e.value}))),p&&h.length>0&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"profile-select__list-subheading"},g.a.createElement("p",null,m("[[teamTerm]]",{teamTerm:r.teams.plural.upper}))),h.map(e=>g.a.createElement("li",N()({key:e.value.uuid,className:"profile-select__list-item"},n({key:e.value.uuid,index:e.value.uuid,item:e})),g.a.createElement(Vo,{profile:e.value})))),p&&y.length>0&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"profile-select__list-subheading"},g.a.createElement("p",null,m("[[organisationTerm]]",{organisationTerm:r.organisations.plural.upper}))),y.map(e=>g.a.createElement("li",N()({key:e.value.uuid,className:"profile-select__list-item"},n({key:e.value.uuid,index:e.value.uuid,item:e})),g.a.createElement(Vo,{profile:e.value}))))):g.a.createElement(g.a.Fragment,null,"success"===i.state&&g.a.createElement("div",{className:"profile-select__list-container"},g.a.createElement("p",{className:"profile-select__list-empty",role:"alert"},m("There are no profiles with this name"))),"error"===i.state&&g.a.createElement("div",{className:"profile-select__list-container"},g.a.createElement("p",{className:"profile-select__list-empty",role:"alert"},i.data))))};const qo={sort:"name",order:"asc",limit:4,offset:0};var Go=function({isSelected:e,setIsSearchShowing:t,typesToSearch:a}){const[n,o]=Object(f.useState)(),{updateValues:r,updateStep:i,profileTerms:l}=Object(ja.b)(),[s,c]=Object(f.useState)(""),m=useRaisely(),{t:p}=Object(d.d)();function b(e){const t=m.campaign.uuid,n={q:e,type:a,...qo};return u.a.campaigns.profiles.getAll({id:t,query:n})}const h=function(e,t){const{t:a}=Object(d.d)();return Object(f.useMemo)(()=>e===Be.h.group?a("Select the [[teamTerm]]",{teamTerm:t.teams.singular.lower}):e===Be.h.organisation?a("Select the [[organisationTerm]]",{organisationTerm:t.organisations.singular.lower}):a("Select the [[teamTerm]] and/or [[organisationTerm]]",{teamTerm:t.teams.singular.lower,organisationTerm:t.organisations.singular.lower}),[e,t,a])}(a,l),y=function(e,t){const{t:a}=Object(d.d)();return Object(f.useMemo)(()=>e===Be.h.group?a("Start typing your [[teamTerm]] name",{teamTerm:t.teams.singular.lower}):e===Be.h.organisation?a("Start typing your [[organisationTerm]] name",{organisationTerm:t.organisations.singular.lower}):a("Start typing the [[teamTerm]] or [[organisationTerm]] name",{teamTerm:t.teams.singular.lower,organisationTerm:t.organisations.singular.lower}),[e,t,a])}(a,l),v=p(n?"Join":"Skip this step");return g.a.createElement("div",{className:"profile-select"},n?g.a.createElement("div",{className:"profile-select--selected"},g.a.createElement(Vo,{profile:n}),g.a.createElement("button",{onClick:function(){o(null)}},p("Choose another"))):g.a.createElement(Ho.a,{onSelect:function({value:e}){o(e),c("")},inputValue:s,itemToString:e=>e?e.value:""},({getInputProps:e,getItemProps:t,getMenuProps:n})=>g.a.createElement("div",null,g.a.createElement(mt.a,N()({className:"profile-select__input",label:h,placeholder:y},e({change:(e,t)=>c(t)}),{inputAppend:s?g.a.createElement($o,{inputValue:s,request:b,getMenuProps:n,getItemProps:t,typesToSearch:a,profileTerms:l}):null,autofocus:!0})))),g.a.createElement(Mn.a,{onBack:function(){t(!1)},onSubmit:function(){if(n){const t=e.individual?"profile":"teamProfile";r({[t]:{parentUuid:n.uuid},parentProfileObject:n},()=>i(1))}else i(1)},actionText:v}))};function zo({children:e}){return g.a.createElement("div",{className:"signup-form__profile-type-select__header"},g.a.createElement("h4",null,e))}function Yo({type:e,isSelected:t,selectType:a,setIsSearchShowing:n}){const{updateValues:o,updateStep:r,joinOrgEnabled:i}=Object(ja.b)(),l=Object(f.useRef)(),s=useRaisely(),c="individual"===e.id||"group"===e.id&&i;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"signup-form__profile-type-select__card"+(t?" selected":"")},g.a.createElement("div",{className:"signup-form__profile-type-select__card__media-wrapper",onClick:function(){if(!t){const t={currency:s.campaign.currency};if("group"===e.id){const e={...t,type:Be.h.group};o({teamProfile:e,settings:{createTeam:!0}},null,["organisationProfile"])}else if("org"===e.id){const e={...t,type:Be.h.organisation};o({organisationProfile:e,settings:{createTeam:!1}},null,["teamProfile"])}else{const e={...t,type:Be.h.individual};o({profile:e,settings:{createTeam:!1}},null,["teamProfile","organisationProfile"])}}if(!c)return r(1);t&&(l.current.maxHeight=l.current.scrollHeight),a(e.id)}},g.a.createElement("div",{className:"signup-form__profile-type-select__card__info"},g.a.createElement("h4",null,e.heading),g.a.createElement("p",null,e.description)),g.a.createElement("div",{className:"signup-form__profile-type-select__card__image"},g.a.createElement(p.Image,{src:e.img,isLazy:!1}))),c&&g.a.createElement(Wo,{isShowing:t,setIsSearchShowing:n,id:e.id,ref:l})))}const Wo=Object(f.forwardRef)(({isShowing:e,id:t,setIsSearchShowing:a},n)=>{const{individualProfilesEnabled:o,updateValues:r,updateStep:i,profileTerms:l}=Object(ja.b)(),{t:s}=Object(d.d)(),c=function(e,t){const{joinTeamEnabled:a,joinOrgEnabled:n}=Object(ja.b)(),{t:o}=Object(d.d)();return Object(f.useMemo)(()=>"group"===e?o("Is your [[teamTerm]] part of [[anOrganisation]]?",{teamTerm:t.teams.singular.lower,anOrganisation:t.organisations.withArticle}):a&&!n?o("Join [[teamTerm]]?",{teamTerm:t.teams.singular.lower}):!a&&n?o("Join [[organisationTerm]]?",{organisationTerm:t.organisations.singular.lower}):o("Join [[teamTerm]] or [[organisationTerm]]?",{teamTerm:t.teams.singular.lower,organisationTerm:t.organisations.singular.lower}),[e,t,a,n,o])}(t,l);return g.a.createElement("div",{className:"signup-form__profile-type-select__options"+(e?" is-showing":""),ref:n},g.a.createElement("div",{className:"signup-form__profile-type-select__options__wrapper"},g.a.createElement("p",null,c),g.a.createElement("div",{className:"signup-form__profile-type-select__options__wrapper__btns"},g.a.createElement(Zo,{onClick:function(){a(!0)}},s("Yes")),g.a.createElement(Zo,{onClick:function(){o&&r({profile:{parentUuid:null}}),i(1)}},s("No")))))});function Zo(e){return g.a.createElement("button",N()({className:"button button--secondary button--small"},e))}var Ko=function(e){const[t,a]=Object(f.useState)({individual:!1,group:!1}),[n,o]=Object(f.useState)(!1),{updateValues:r,profileTerms:i}=Object(ja.b)();function l(e){let n,o;"individual"===e?(o=!1,n=!t.individual):(n=!1,o=!t.group),a({individual:n,group:o})}Object(f.useEffect)(()=>{r({},null,["parentProfileObject"])},[]);const{profileTypesTitle:s}=e,c=function(e){const{individualProfilesEnabled:t,createTeamEnabled:a,createOrgEnabled:n}=Object(ja.b)(),{tD:o}=Object(d.d)();return Object(f.useMemo)(()=>[t&&{id:"individual",img:e.individualImage||"https://raisely-images.imgix.net/6c3ef5b0-8423-11ec-9ff9-95d30acd7a5f/uploads/individuals-svg-4fa13e.svg?w=60",heading:o(e.individualTitle),description:o(e.individualDescription)},a&&{id:"group",img:e.teamImage||"https://raisely-images.imgix.net/6c3ef5b0-8423-11ec-9ff9-95d30acd7a5f/uploads/team-svg-69f5c5.svg?w=60",heading:o(e.teamTitle),description:o(e.teamDescription)},n&&{id:"org",img:e.orgImage||"https://raisely-images.imgix.net/6c3ef5b0-8423-11ec-9ff9-95d30acd7a5f/uploads/org-svg-5a2312.svg?w=60",heading:o(e.orgTitle),description:o(e.orgDescription)}].filter(Boolean),[o,t,a,n,e])}(e),u=function(e,t,a,n){const{joinTeamEnabled:o,joinOrgEnabled:r}=Object(ja.b)(),{t:i,tF:l}=Object(d.d)();return Object(f.useMemo)(()=>e?t.individual?o&&!r?i("Select the [[teamTerm]]",{teamTerm:a.teams.singular.lower}):!o&&r?i("Select the [[organisationTerm]]",{organisationTerm:a.organisations.singular.lower}):i("Select the [[teamTerm]] and/or [[organisationTerm]]",{teamTerm:a.teams.singular.lower,organisationTerm:a.organisations.singular.lower}):i("Select your [[organisationTerm]]",{organisationTerm:a.organisations.singular.lower}):l(n,i("How would you like to participate?")),[e,t,a,n,o,r,i])}(n,t,i,s),m=function(e){const{joinTeamEnabled:t,joinOrgEnabled:a}=Object(ja.b)();return Object(f.useMemo)(()=>e.group?Be.h.organisation:t&&!a?Be.h.group:!t&&a?Be.h.organisation:`${Be.h.group},${Be.h.organisation}`,[e,t,a])}(t);return g.a.createElement("div",{className:"signup-form__profile-type-select"},g.a.createElement(zo,null,u),g.a.createElement("div",{className:"signup-form__profile-type-select__types"},n?g.a.createElement(Go,{isSelected:t,typesToSearch:m,setIsSearchShowing:o}):c.map(e=>g.a.createElement(Yo,{key:e.id,type:e,isSelected:t[e.id],selectType:l,setIsSearchShowing:o}))))};const Jo={profile:Be.h.individual,teamProfile:Be.h.group,organisationProfile:Be.h.organisation},Qo={profile:"individuals",teamProfile:"teams",organisationProfile:"organisations"};function Xo(){const{updateValues:e,step:t,updateStep:a}=Object(ja.b)(),{t:n}=Object(d.d)();return g.a.createElement("button",{type:"button",className:"signup-form__profile__skip-btn",onClick:function(){e(e=>({...e,profile:null,organisationProfile:{...e.organisationProfile,...e.profile.exerciseGoal?{exerciseGoal:e.profile.exerciseGoal,exerciseGoalTime:e.profile.exerciseGoalTime}:{},...e.profile.fundraiserTheme?{fundraiserTheme:e.profile.fundraiserTheme}:{}}})),a(t+1)}},g.a.createElement("span",null,n("Skip this step for now")),g.a.createElement(Xe.a,{name:"chevron_right",size:"small"}))}function er(e){return e.fullName||e.preferredName||`${e.firstName||e.first_name||""} ${e.lastName||e.last_name||""}`}var tr=function({type:e,...t}){var a;const n=Object(mo.b)(e,t.fields),[o]=Object(Pa.a)({form:"signup",stage:"profile"}),{tD:r}=Object(d.d)(),i=useRaisely(),{values:l,updateValues:s,step:c,updateStep:u,profileGoals:m,profileTerms:p}=Object(ja.b)();Object(f.useEffect)(()=>{var a;if("organisationProfile"===e||t.avoidDefaultNames||null!==(a=l[e])&&void 0!==a&&a.name||!n.length)return;const o=n.find(e=>"name"===e.id);let r=o&&o.default&&o.default.length>0&&Object(G.r)(o.default,i)||er(l.user);r&&"teamProfile"===e&&(r+=" "+p.teams.singular.upper),s({[e]:{name:r}})},[e,t.avoidDefaultNames,l,n]);const b=null===(a=m[Qo[e]])||void 0===a?void 0:a.disableGoalStepV4,h=Object(f.useMemo)(()=>b?n:n.filter(e=>"goal"!==e.id),[b,n]);return g.a.createElement("div",{className:"signup-form__field-container signup-form__profile"},g.a.createElement("h3",{className:"signup-form__title"},r(t[e+"Title"])),l.organisationProfile&&"profile"===e&&g.a.createElement(Xo,null),g.a.createElement(po.a,{className:"signup-form",values:l[e],global:i,fields:h,action:async function(a){if(!1===t.enableGoalStep){let t=m[Qo[e]].goals.find(e=>e.isDefault).amount;i.campaign.currency!==a.currency&&(t=Object(G.w)(t,i.campaign.currency,a.currency,!0)),a.goal=t}s({error:null,[e]:{...a,type:Jo[e]}},()=>{u(c+1),o()})},buttons:({onSubmitClick:e,isSubmitting:t})=>g.a.createElement(Mn.a,{onSubmit:e,isSubmitting:t}),focusFirst:!0}))};const ar={individuals:"profile",teams:"teamProfile",organisations:"organisationProfile"};var nr=function({type:e,title:t}){const{values:a,updateValues:n,step:o,updateStep:r,profileGoals:i}=Object(ja.b)(),{t:l,tD:s}=Object(d.d)(),{campaign:c}=useRaisely(),u=a[ar[e]],m=u.currency||c.currency,b=i[e].goals,h=function(e,t,a){return Object(f.useMemo)(()=>e===t?a:a.map(a=>{const n=Object(G.w)(a.amount,t,e,!0);return{...a,amount:n}}),[e,a,t])}(m,c.currency,b),y=u.goal,v=h.find(e=>e.amount===y),_=h.find(e=>e.isDefault),[E,k]=Object(f.useState)(v||!y&&_||null),[w,O]=Object(f.useState)(!v&&y||"");return g.a.createElement("div",{className:"signup-form__field-container"},g.a.createElement(Ea.c,null,t),g.a.createElement("div",{className:"signup-form__profile-goals"},h.map(e=>{const t=(null==E?void 0:E.uuid)===e.uuid||!E&&!w&&e.isDefault;return g.a.createElement("div",{className:"signup-form__profile-goal__btn"+(t?" signup-form__profile-goal__btn--selected":""),key:e.uuid,onClick:()=>{k(e),O("")}},g.a.createElement("span",{className:"signup-form__profile-goal__btn__amount"},Object(G.f)(e.amount,m)),g.a.createElement("span",{className:"signup-form__profile-goal__btn__description"},s(e.description)))}),i[e].customGoalEnabled&&g.a.createElement(g.a.Fragment,null,g.a.createElement("p",{className:"signup-form__field-section-heading"},l("Or enter your own amount")),g.a.createElement("div",{className:"signup-form__profile-goal__other"},g.a.createElement(p.Input,{id:"customGoal",type:"currency",label:"Custom goal",currency:m,value:w,className:"signup-form__profile-goal__other__input",change:(e,t)=>{t&&k(null),O(t)}})))),g.a.createElement(Mn.a,{onSubmit:function(){const t=w||E.amount;n({[ar[e]]:{goal:t}},()=>r(o+1))}}))};var or=function(e){switch(e.type){case"teams":return g.a.createElement(nr,{type:e.type,title:e.teamGoalsTitle});case"organisations":return g.a.createElement(nr,{type:e.type,title:e.organisationGoalsTitle});default:return g.a.createElement(nr,{type:e.type,title:e.profileGoalsTitle})}},rr=a(111),ir=a(112);function lr({renderStep:e,...t}){var a;const n=function(e){return Object(f.useMemo)(()=>{const t={globalFormState:{isV4:!0}};return!1===e.enableIndividuals&&(t.formValues={profile:null}),t},[e.enableIndividuals])}({enableIndividuals:t.enableIndividuals}),o=useRaisely(),r=(null===(a=t.campaign)||void 0===a?void 0:a.config)||o.campaign.config,i=An(t.enableIndividuals,t.enableTeams,t.enableOrgs,r),l=function(e){return Object(f.useMemo)(()=>En(e,jn),[e])}(t),s=e||sr;return g.a.createElement(vn,N()({initialState:n,customContext:i},l),e=>g.a.createElement(s,N()({},e,{builtIns:{Form:Ea.e,Mobile:Lo,StepSelect:ka.a,NavBtns:xa.a,NoTickets:Uo,ProfileTypeSelect:Ko,FundraiserThemeSelect:Ln,ExerciseGoalForm:ir.a,UserForm:rr.a,TicketSelectForm:so,TicketHolderForm:So,ProfileForm:tr,ProfileGoals:or,SelfDonationForm:Do,GiftAidForm:Io,PaymentForm:tn,useSignupFormContext:ja.b,usePreSelectedProfile:Dn,useStepProps:_n}})))}function sr(e){var t,a,n;const{step:o,isFullscreen:r,values:i,ticketsEnabled:l,ticketTypes:s,fundraiserThemesActive:c,individualProfilesEnabled:u,joinTeamEnabled:d,joinOrgEnabled:m,currency:p,profileGoals:f,...b}=Object(ja.b)(),{campaign:h}=useRaisely(),{enableExerciseGoal:y,enableDonation:v,enableGoalStep:_}=e,E=!1!==_;Dn();const k=!(null!==(t=i.profile)&&void 0!==t&&t.parentPreSelected)&&(d||m),w=window.location.href.split("?")[1],O=w?X.a.parse(w):{},S={profileTypeSelect:k,fundraiserThemes:c&&(!O.fundraiserTheme||!(null!==(a=h.config.fundraiserThemes)&&void 0!==a&&a.some(e=>e.path===O.fundraiserTheme))),exercise:y,user:!0,ticketSelect:l&&s.length,ticketHolder:i.showTicketHolder,teamProfile:i.teamProfile,teamGoals:!f.teams.disableGoalStepV4&&E&&i.teamProfile,organisationProfile:i.organisationProfile,organisationGoals:!f.organisations.disableGoalStepV4&&E&&i.organisationProfile,profile:u,profileGoals:!f.individuals.disableGoalStepV4&&E&&i.profile,donation:v,giftAid:(null===(n=h.config.donation)||void 0===n?void 0:n.giftAid)&&i.donationAmount&&"GBP"===p&&!i.hasActiveSwiftAidAuth,payment:!0},T=Object.keys(S).filter(e=>S[e]),C=T[o];return r?g.a.createElement(nn.a,{id:"modal-root"},g.a.createElement(dr,N()({steps:T,currentStep:C},e))):g.a.createElement(dr,N()({steps:T,currentStep:C},e))}const cr=["teamProfile","organisationProfile","profile"],ur={teamGoals:"teams",organisationGoals:"organisations",profileGoals:"individuals"};function dr({steps:e,currentStep:t,...a}){var n,o;const{isFullscreen:r,globalFormState:i,values:l,ticketsEnabled:s,ticketPurchaseRequired:c,ticketTypes:u,isSoldOut:m,profileTerms:f,joinTeamEnabled:b,joinOrgEnabled:h}=Object(ja.b)(),{campaign:y}=useRaisely(),v=_n(a),{t:_}=Object(d.d)(),{componentHasMounted:E,disablePrompt:k,isLoading:w}=i;if(w)return g.a.createElement(Ea.e.Shell,{className:"signup-form--v4",numSteps:e.length,currentStep:t},g.a.createElement(Ea.e.LoadingSkeleton,null));if(s&&c&&(!u.length||m))return g.a.createElement(Ea.e.Shell,{className:"signup-form--v4",numSteps:e.length,currentStep:t},g.a.createElement(Uo,{soldOut:m}));if("profileTypeSelect"===t)return g.a.createElement(Ea.e,{className:"signup-form--v4"},g.a.createElement(Ko,v.profileType));const O=null===(n=y.config.theme)||void 0===n?void 0:n.defaultProfileUrl,S=E&&!k&&!(a.enableMobileFullscreen&&hn()),T=null!==(o=l.profile)&&void 0!==o&&o.parentPreSelected||!b&&!h?null:0;return g.a.createElement(Ea.e,{className:"signup-form--v4"},g.a.createElement(Ea.e.Header,null,S&&g.a.createElement(an.a,{message:bn()}),r?g.a.createElement(Lo.Header,{numSteps:e.length,exclude:T}):g.a.createElement(ka.a,{numSteps:e.length,offset:0,exclude:T})),l.error&&g.a.createElement(Ea.e.Error,null),l.popupMsg&&g.a.createElement(Ea.e.Popup,null),g.a.createElement(Ea.e.Body,{currentStep:t},g.a.createElement(g.a.Fragment,null,l.parentProfileObject&&g.a.createElement("div",{className:"profile-image-with-name"},g.a.createElement("span",null,l.teamProfile?_("Start [[teamTerm]] with",{teamTerm:f.teams.singular.lower}):_("Join")),g.a.createElement(p.ProfileImage,{defaultImage:O,profile:l.parentProfileObject}),g.a.createElement("b",null,l.parentProfileObject.name)),"fundraiserThemes"===t&&g.a.createElement(Ln,v.fundraiserThemes),"exercise"===t&&g.a.createElement(ir.a,v.exercise),"user"===t&&g.a.createElement(rr.a,v.user),"ticketSelect"===t&&g.a.createElement(so,{title:a.ticketSelectTitle,description:a.ticketSelectDescription,button:a.ticketSelectButton},g.a.createElement(so.Contents,null)),"ticketHolder"===t&&g.a.createElement(So,{title:a.ticketHolderTitle,button:a.ticketHolderButton},g.a.createElement(So.Contents,null)),cr.includes(t)&&g.a.createElement(tr,N()({},v.profile,{type:t,key:t})),Object.keys(ur).includes(t)&&g.a.createElement(or,N()({},v.profileGoals,{type:ur[t]})),"donation"===t&&g.a.createElement(Do,v.donation),"giftAid"===t&&g.a.createElement(Io,v.donation),"payment"===t&&g.a.createElement(tn,N()({},v.payment,{steps:e}),g.a.createElement(tn.Contents,null)))),r&&"payment"!==t&&g.a.createElement(Lo.Footer,{currentStep:t}))}lr.propTypes={renderStep:h.a.func,initialState:h.a.object,initialStep:h.a.number,onStepChange:h.a.func,enableMobileFullscreen:h.a.bool,shouldFetchTeam:h.a.bool,onSubmit:h.a.func,onSubmitSuccess:h.a.func,onSubmitError:h.a.func,global:h.a.object,integrations:h.a.object,actions:h.a.object,disablePrompt:h.a.bool,fields:h.a.array,preSelectProfile:h.a.bool,profileTypesTitle:h.a.string,individualTitle:h.a.string,individualDescription:h.a.string,individualImage:h.a.string,teamTitle:h.a.string,teamDescription:h.a.string,teamImage:h.a.string,orgTitle:h.a.string,orgDescription:h.a.string,orgImage:h.a.string,fundraiserThemesTitle:h.a.string,fundraiserThemesDescription:h.a.string,fundraiserActionText:h.a.string,fundraiserSelectedActionText:h.a.string,enableExerciseGoal:h.a.bool,exerciseTitle:h.a.string,exerciseDescription:h.a.string,exerciseGoals:h.a.array,accountTitle:h.a.string,enableFacebook:h.a.bool,enableMultipleSignups:h.a.bool,passwordLength:h.a.number,accountButton:h.a.string,enableTickets:h.a.bool,disabledTicketTypes:h.a.array,ticketPurchaseRequired:h.a.bool,ticketSelectTitle:h.a.string,ticketSelectDescription:h.a.string,ticketSelectButton:h.a.string,ticketsSoldOutMessage:h.a.string,ticketsUnavailableMessage:h.a.string,showNoTicketsIcon:h.a.bool,ticketHolderTitle:h.a.string,ticketHolderButton:h.a.string,profileTitle:h.a.string,avoidDefaultNames:h.a.bool,enableIndividuals:h.a.bool,enableTeams:h.a.bool,enableOrgs:h.a.bool,enableGoalStep:h.a.bool,alphabeticalProfileSearch:h.a.bool,completeButton:h.a.string,enableDonation:h.a.bool,paymentDonationTitle:h.a.string,donationButton:h.a.string,paymentTitle:h.a.string,paymentDescription:h.a.string,paymentButton:h.a.string};const mr=["teamProfile","organisationProfile","profile"],pr={teamGoals:"teams",organisationGoals:"organisations",profileGoals:"individuals"};function fr(e){const{step:t,values:a}=Object(ja.b)(),n=_n(e),o={teamProfile:a.teamProfile,teamGoals:a.teamProfile,organisationProfile:a.organisationProfile,organisationGoals:a.organisationProfile,profile:a.profile.parentUuid,profileGoals:a.profile.parentUuid,payment:!0},r=Object.keys(o).filter(e=>o[e]),i=r[t];return g.a.createElement(Ea.e,{className:"signup-form--v4 create-profile-form--v2"},g.a.createElement(Ea.e.Header,null,g.a.createElement(ka.a,{numSteps:r.length-1})),a.error&&g.a.createElement(Ea.e.Error,null),g.a.createElement(Ea.e.Body,{currentStep:i},g.a.createElement(g.a.Fragment,null,mr.includes(i)&&g.a.createElement(tr,N()({},n.profile,{type:i})),Object.keys(pr).includes(i)&&g.a.createElement(or,N()({},n.profileGoals,{type:pr[i]})),"payment"===i&&g.a.createElement(tn,N()({},n.payment,{steps:r}),g.a.createElement(tn.Contents,null)))))}var gr=function({typeToCreate:e,parentProfile:t,closeModal:a}){const n=function(e,t){return Object(f.useMemo)(()=>{const a={currency:t.currency};switch(e){case Be.h.group:return{formValues:{parentProfileObject:t,profile:{parentPreSelected:!0},teamProfile:{...a,type:Be.h.group,parentUuid:t.uuid}}};case Be.h.organisation:return{formValues:{profile:{parentPreSelected:!0},organisationProfile:{...a,type:Be.h.organisation}}};default:return{formValues:{parentProfileObject:t,profile:{...a,parentUuid:t.uuid,parentPreSelected:!0}}}}},[e,t])}(e,t),o=Object(f.useCallback)(e=>async function({stateUtils:e,global:t,integrations:a,actions:n},o){var r;const{values:i,updateValues:l,step:s,updateStep:c}=e,m=(null===(r=i.parentProfileObject)||void 0===r?void 0:r.uuid)||t.campaign.profile.uuid;let p=i.profile;i.teamProfile?p=i.teamProfile:i.organisationProfile&&(p=i.organisationProfile);let f=!1;p.type===Be.h.organisation?f=!0:p.type!==Be.h.group||t.user.organisationProfile||(f=!0);try{const e=await u.a.profiles.members.create({id:m,data:{join:f,data:p}});await n.fetchAndUpdateUser();const{data:t}=e.body().data();a.broadcast("profile.created",{profile:t}),t.type===Be.h.group?n.history.push("/t/"+t.path):t.type===Be.h.organisation?n.history.push("/o/"+t.path):o()}catch(e){var g,b;console.error(e);const{t:t}=Object(d.a)(),a=(null===(g=e.response)||void 0===g||null===(b=g.data)||void 0===b?void 0:b.errors[0].message)||t("We couldn't create the profile due to an unexpected error. Please try again.");l({error:{message:a}},()=>c(s-1))}}(e,a),[]),r=function(){const{campaign:e}=useRaisely(),{t:t}=Object(d.d)();return Object(f.useMemo)(()=>{const a=Object(Be.c)(Be.h.group,e.config.profiles,!1,!1),n=Object(Be.c)(Be.h.organisation,e.config.profiles,!1,!1);return{profileTitle:t("Your profile"),teamProfileTitle:t("Your [[teamTerm]] profile",{teamTerm:a}),organisationProfileTitle:t("Your [[organisationTerm]] profile",{organisationTerm:n}),profileGoalsTitle:t("Choose your fundraising goal"),teamGoalsTitle:t("Choose your [[teamTerm]] fundraising goal",{teamTerm:a}),organisationGoalsTitle:t("Choose your [[organisationTerm]] fundraising goal",{organisationTerm:n})}},[e,t])}();return g.a.createElement(lr,N()({renderStep:fr,initialState:n,onSubmit:o,api:u.a,enableTeams:!1,enableOrgs:!1,avoidDefaultNames:!0},r))};function br(e){const{t:t}=Object(d.d)(),[a,n]=Object(f.useState)(!1);return g.a.createElement(g.a.Fragment,null,g.a.createElement(V.a,{onClick:()=>n(!0),className:e.buttonClassName?e.buttonClassName:null},t("Invite people to join")),a&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>n(!1),dockToBottom:!0,modalContent:()=>g.a.createElement(hr,e)}))}function hr(e){const[t,a]=Object(f.useState)(!1);return g.a.createElement("div",{className:"invite-people__content"},t?g.a.createElement(vr,e):g.a.createElement(yr,{showSelectTeam:function(){a(!0)}}))}function yr({showSelectTeam:e}){var t,a;const[n,o]=Object(f.useState)(!1),[r,i]=Object(f.useState)(!1),l=useRaisely(),{t:s}=Object(d.d)(),{profiles:c}=l.campaign.config,u=Object(Be.d)(Be.h.group,c),m=Object(Be.c)(Be.h.group,c,!1,!1),p=Object(Be.c)(Be.h.organisation,c,!1,!1),b=`${`${window.location.protocol}//${window.location.host}/signup`}?parentId=${(null===(t=l.user.organisationProfile)||void 0===t?void 0:t.path)||(null===(a=l.user.profile.organisationProfile)||void 0===a?void 0:a.path)}`,h=b+"&startTeam=true";function y(e,t){t(!0),ca()(e),setTimeout(()=>t(!1),500)}return g.a.createElement(g.a.Fragment,null,g.a.createElement("h2",null,s("Invite people")),g.a.createElement("p",null,s("Copy and share link to invite someone to"),":"),g.a.createElement("div",{className:"invite-people__list-container"},g.a.createElement("div",{className:"invite-people__list-item"},g.a.createElement("p",null,s("Sign up as an individual fundraiser")),g.a.createElement(V.a,{onClick:()=>y(b,o)},s(n?"Copied!":"Copy link"))),g.a.createElement("div",{className:"invite-people__list-item"},g.a.createElement("p",null,s("Start [[aTeam]] within your [[organisationTerm]]",{aTeam:u,organisationTerm:p})),g.a.createElement(V.a,{onClick:()=>y(h,i)},s(r?"Copied!":"Copy link"))),g.a.createElement("div",{className:"invite-people__list-item"},g.a.createElement("p",null,s("Join [[aTeam]] within your [[organisationTerm]]",{aTeam:u,organisationTerm:p})),g.a.createElement(V.a,{onClick:e},s("Select [[teamTerm]]",{teamTerm:m})))))}function vr(e){const{t:t}=Object(d.d)(),a=useRaisely(),n=a.user.organisationProfile||a.user.profile.organisationProfile,{profiles:o}=a.campaign.config,r=Object(Be.d)(Be.h.group,o);return g.a.createElement(g.a.Fragment,null,g.a.createElement("h2",null,t("Invite people")),g.a.createElement("p",null,t("Copy and share link to [[aTeam]] to invite people to join",{aTeam:r}),":"),g.a.createElement(At,N()({},e,{type:"GROUP",profileUuid:n.uuid,showInviteLink:!0})))}var _r=a(1003);function Er(e){const{profile:t,header:a,hideProgress:n}=e,{campaign:o,user:r,detectedCurrency:i}=useRaisely(),l=(null==r?void 0:r.profile)||t;return po.b||"ORGANISATION"===(null==l?void 0:l.type)||null!=l&&l.organisationProfile?g.a.createElement(g.a.Fragment,null,a,g.a.createElement("div",{className:"snapshot"},!n&&g.a.createElement(kr,{activeProfile:l,campaign:o,detectedCurrency:i}),g.a.createElement(wr,{campaign:o,profile:l,data:e.data}))):null}function kr({activeProfile:e,campaign:t,detectedCurrency:a}){const{t:n}=Object(d.d)(),o=(null==e?void 0:e.currency)!==t.currency||a!==t.currency,[r]=Object(G.t)(e||{},"total",t.config.activity,{displayDollarPrefix:o}),{profiles:i}=t.config,l=Object(Be.c)(Be.h.organisation,i,!1,!1);return g.a.createElement("div",{className:"snapshot__raised"},g.a.createElement("p",{className:"snapshot__raised__headline"},n("So far your [[organisationTerm]] has raised",{organisationTerm:l}),":"),g.a.createElement("h2",{className:"snapshot__raised__total"},r),g.a.createElement(Yt.a,{profile:e,size:"medium",className:"snapshot__raised__progress-bar"}))}function wr({profile:e,campaign:t,data:a}){var n;const o=Or({profile:e,shouldFetch:!a,data:a}),{t:r}=Object(d.d)(),i=Object(Be.c)(Be.h.group,null===(n=t.config)||void 0===n?void 0:n.profiles,!1,!0);return o?g.a.createElement("div",{className:"snapshot__highlights"},g.a.createElement("div",{className:"snapshot__highlight"},g.a.createElement("p",{className:"snapshot__highlight__title small"},g.a.createElement("strong",null,r("[[teamTerm]] with most donations",{teamTerm:i}))),o.topTeam?g.a.createElement(Ue.a,{detail:"minimal",profile:o.topTeam,campaignPath:t.path,campaign:t}):g.a.createElement("h3",null,"N/A")),g.a.createElement("div",{className:"snapshot__highlight"},g.a.createElement("p",{className:"snapshot__highlight__title small"},g.a.createElement("strong",null,r("Individual with most donations"))),o.topIndividual?g.a.createElement(Ue.a,{detail:"minimal",profile:o.topIndividual,campaignPath:t.path,campaign:t}):g.a.createElement("h3",null,"N/A")),g.a.createElement("div",{className:"snapshot__highlight"},g.a.createElement("p",{className:"snapshot__highlight__title small"},g.a.createElement("strong",null,r("Active fundraisers"))),g.a.createElement("div",{className:"snapshot__highlight__figure"},g.a.createElement("h3",null,o.activeFundraisers))),g.a.createElement("div",{className:"snapshot__highlight"},g.a.createElement("p",{className:"snapshot__highlight__title small"},g.a.createElement("strong",null,r("Largest donation amount"))),g.a.createElement("div",{className:"snapshot__highlight__figure"},o.topDonation.displayAmount?g.a.createElement(g.a.Fragment,null,g.a.createElement("h3",null,o.topDonation.displayAmount),g.a.createElement("p",null,r("donated to")," ",g.a.createElement(_r.a,{to:o.topDonation.path},o.topDonation.recipient))):g.a.createElement("h3",null,"N/A")))):g.a.createElement("div",{className:"snapshot__highlights"},g.a.createElement(po.d,null))}function Or({profile:e,shouldFetch:t,data:a}){const[n,o]=Object(f.useState)(a),r=useRaisely();return Object(f.useEffect)(()=>{t&&async function(){var t;const a=e.type===Be.h.organisation?e.uuid:null===(t=e.organisationProfile)||void 0===t?void 0:t.uuid,n=[u.a.profiles.getAll({query:{parent:a,sort:"donors",subtree:1,limit:1,type:Be.h.group}}),u.a.profiles.getAll({query:{parent:a,sort:"donors",subtree:1,limit:1,type:Be.h.individual}}),u.a.profiles.getAll({query:{parent:a,subtree:1,"totals.totalGT":0,type:Be.h.individual}}),u.a.donations.getAll({query:{profile:a,limit:1,sort:"campaignDisplayTotal",order:"desc",subtree:1}})],[i,l,s,c]=await Promise.all(n),d=c.body().data().data[0],m=e.currency!==r.campaign.currency||r.detectedCurrency!==r.campaign.currency,p=d?Object(G.f)(d.displayTotal,d.currency,{displayDollarPrefix:m}):0,f=null==d?void 0:d.profile.name,g=`${(null==d?void 0:d.profile.type)===Be.h.group?"/t/":"/"}${null==d?void 0:d.profile.path}`;o({topTeam:i.body().data().data[0],topIndividual:l.body().data().data[0],activeFundraisers:s.body().data().pagination.total,topDonation:{displayAmount:p,recipient:f,path:g}})}()},[t,e,r.user,r.campaign.currency,r.detectedCurrency]),n}function Sr({api:e,user:t,...a}){var n,o,r,i,l,s,c;const{global:u,integrations:m,actions:p}=useRaisely(!0),{t:b}=Object(d.d)(),h=Or({profile:null==t?void 0:t.profile,shouldFetch:null==t?void 0:t.organisationProfile}),[y,v]=Object(f.useState)("individual"),[_,E]=Object(f.useState)(null),[k,w]=Object(f.useState)(!1),[O,S]=Object(f.useState)(!1),[T,C]=Object(f.useState)(null),[x,j]=Object(f.useState)(null),[P,A]=Object(f.useState)(null);Object(f.useEffect)(()=>{var e;t.profile&&(E(function(e,t,a){const n=a.profile.type===Be.h.organisation;if("individual"===t&&!n)return e.individual[0];return e[t][0]}(H,y,t)),"individual"===y&&(null===(e=t.profile)||void 0===e?void 0:e.type)===Be.h.group&&v("group"));window.dispatchEvent(new Event("resize"))},[t,y]),Object(f.useEffect)(()=>{w(!1)},[y]);const D=function(e,t){const{t:a,tF:n}=Object(d.d)(),{profileTerms:o}=Object(Be.i)();return Object(f.useMemo)(()=>{const r=a("Edit"),i=a("View"),l=a("My [[teamTerm]]",{teamTerm:o.teams.singular.upper}),s=a("My [[teamTerm]]",{teamTerm:o.teams.plural.upper}),c=a("So far [[teamName]] has raised",{teamName:null==t?void 0:t.name}),u=a("Sponsor [[teamName]]",{teamName:null==t?void 0:t.name}),d=a("Share [[teamName]]",{teamName:null==t?void 0:t.name}),m=a("[[teamTerm]]",{teamTerm:o.teams.singular.upper}),p=a("My [[organisationTerm]]",{organisationTerm:o.organisations.singular.upper}),f=a("My [[organisationTerm]]",{organisationTerm:o.organisations.plural.upper}),g=a("So far [[organisationName]] has raised",{organisationName:null==t?void 0:t.name}),b=a("Sponsor [[organisationName]]",{organisationName:null==t?void 0:t.name}),h=a("Share [[organisationName]]",{organisationName:null==t?void 0:t.name}),y=a("[[organisationName]] at a glance",{organisationName:null==t?void 0:t.name}),v=a("[[organisationTerm]]",{organisationTerm:o.organisations.singular.upper}),_=a("Want to fundraise with your [[organisationTerm]]?",{organisationTerm:o.organisations.singular.lower});return{individual:{tabText:n(e.profileLabel,a("My Profile")),raisedText:a("So far you've raised"),sponsorText:n(e.profileSponsorLabel,a("Sponsor yourself")),editText:n(e.editProfileLabel,r),viewText:n(e.viewProfileLabel,i),shareText:n(e.profileShareHeading,a("Share your page"))},group:{tabText:n(e.teamLabel,l),tabTextPlural:n(e.teamLabel,s),raisedText:n(e.teamRaisedLabel,c),sponsorText:n(e.teamSponsorLabel,u),editText:n(e.editTeamLabel,r),viewText:n(e.viewTeamLabel,i),shareText:n(e.teamShareHeading,d),language:n(e.teamLanguage,m),joinHeading:n(e.joinTeamHeading,a("Want to fundraise with friends?"))},organisation:{tabText:n(e.organisationLabel,p),tabTextPlural:n(e.organisationLabel,f),raisedText:n(e.orgRaisedLabel,g),sponsorText:n(e.orgSponsorLabel,b),editText:n(e.editOrgLabel,r),viewText:n(e.viewOrgLabel,i),shareText:n(e.orgShareHeading,h),snapshotText:n(e.orgSnapshotHeading,y),language:n(e.orgLanguage,v),joinHeading:n(e.joinOrgHeading,_)}}},[e,a,n])}(a,_);if(!t)return null;const{profile:R}=t,F=R.type===Be.h.organisation,I=R.type===Be.h.group,M=(null==_?void 0:_.currency)!==u.campaign.currency||u.detectedCurrency!==u.campaign.currency,[L]=Object(G.t)(_||{},"total",u.campaign.config.activity,{displayDollarPrefix:M}),B=`${Object(Be.b)(y)}${null==_?void 0:_.path}`,U=t.uuid===(null==_||null===(n=_.user)||void 0===n?void 0:n.uuid),H=Object(Be.f)(t),$=null==H||null===(o=H.group)||void 0===o?void 0:o.length,q=null==H||null===(r=H.organisation)||void 0===r?void 0:r.length,z=({type:e,plural:t})=>g.a.createElement("button",{className:"control-panel__tab "+(y===e?"control-panel__tab--active":""),onClick:()=>v(e)},g.a.createElement("span",null,t?D[e].tabTextPlural:D[e].tabText)),Y=()=>{if((!$||I)&&!q)return null;const e=[];return I||e.push("individual"),$&&e.push("group"),q&&e.push("organisation"),g.a.createElement("div",{className:"control-panel__tabs"},e.map((e,t)=>{var a;return g.a.createElement(z,{key:t,type:e,plural:(null===(a=H[Be.h[e]+"s"])||void 0===a?void 0:a.length)>1})}))},W=()=>{const e=H[y].filter(e=>(null==e?void 0:e.type)===Be.h[y]);return e.length<2?null:g.a.createElement("div",{className:"control-panel__profile-select"},g.a.createElement(Ue.a,{profile:_,detail:"minimal"}),g.a.createElement("select",{onChange:t=>E(e.find(e=>e.path===t.target.value))},e.map((e,t)=>g.a.createElement("option",{value:e.path,key:t,selected:_.path===e.path},e.name))))};return g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"control-panel"},g.a.createElement(Y,null),_&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"control-panel__raised"},g.a.createElement(W,null),g.a.createElement("div",{className:"control-panel__raised__headline"},D[y].raisedText),g.a.createElement("h2",{className:"control-panel__raised__total"},L),g.a.createElement(Yt.a,{profile:_,size:"medium",className:"control-panel__raised__progress-bar"}),"organisation"!==y&&(k?g.a.createElement(Lt.a,{version:">=2",existingCards:!0,global:u,integrations:m,profileUuid:_.uuid,additionalClassname:"control-panel__donation-form"}):g.a.createElement(V.a,{className:"control-panel__raised__sponsor",onClick:()=>w(!0)},D[y].sponsorText))),"organisation"===y&&t.organisationProfile&&g.a.createElement("div",{className:"control-panel__section control-panel__snapshot"},g.a.createElement("h6",{className:"control-panel__section__title"},D[y].snapshotText),g.a.createElement(Er,{profile:_,data:h,hideProgress:!0})),g.a.createElement("div",{className:"control-panel__section control-panel__social"},g.a.createElement("h6",{className:"control-panel__section__title control-panel__social__title"},D[y].shareText),g.a.createElement(Ke.a,{global:u,networks:"campaign",theme:"filled-inverted",size:"icon",profile:_}),Boolean(_.facebookFundraiserId)&&g.a.createElement("div",{className:"control-panel__social__facebook-fundraiser"},g.a.createElement(V.a,{className:"control-panel__social__facebook-fundraiser__button",href:"https://www.facebook.com/donate/"+_.facebookFundraiserId,target:"_blank"},g.a.createElement(Xe.a,{name:"facebook_rounded"})," View your facebook fundraiser"))),g.a.createElement("div",{className:"control-panel__buttons button-row"},("individual"===y||U)&&g.a.createElement(V.a,{className:"control-panel__button",href:B+"?edit=1"},D[y].editText),g.a.createElement(V.a,{className:"control-panel__button",href:B},D[y].viewText),("organisation"===y||"group"===y)&&t.organisationProfile&&g.a.createElement(V.a,{className:"control-panel__button button--full",onClick:()=>A(Be.h.group)},b("Create a [[target]]",{target:D.group.language.toLowerCase()})),"group"===y&&!t.teamProfile&&g.a.createElement(V.a,{onClick:()=>C("group"),className:"control-panel__button button--full"},b("Change [[target]]",{target:D.group.language})),"organisation"===y&&g.a.createElement(g.a.Fragment,null,!t.organisationProfile&&g.a.createElement(V.a,{onClick:()=>C("organisation"),className:"control-panel__button button--full"},b("Change [[target]]",{target:D.organisation.language})),g.a.createElement(br,N()({},a,{buttonClassName:"control-panel__button button--full"}))))),!_&&F&&g.a.createElement("div",{className:"control-panel__create-profile"},g.a.createElement("p",null,b("You don't have a fundraising profile yet!")),g.a.createElement(V.a,{className:"button button--standard button--primary control-panel__create-profile__button",onClick:()=>A(Be.h.individual)},b("Create a fundraising profile"))),T&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>{S(!1),C(null),j(null)},dockToBottom:!0,modalContent:a=>g.a.createElement("form",{onSubmit:t=>(async(t,a)=>{if(t.preventDefault(),!x||!R)return;S("joining"),await e.profiles.join.update({id:R.uuid,data:{parentUuid:x},query:{private:!0}});const n=await p.fetchAndUpdateUser();p.addMessage("Joined "+D[T].language),m.broadcast("profile.updated",n),v(T),S(!1),j(null),a(),C(null)})(t,a),className:"raisely-profile-form"},g.a.createElement("h2",null,b("Join [[target]]",{target:D[T].language})),x?g.a.createElement(Ct.a,{api:e,heading:b("You are joining:"),uuid:x,cancel:()=>j(null),openNewTab:!0,buttonLabel:b("Choose another")}):g.a.createElement(xt.a,{global:u,api:e,label:b("Search for [[target]] to join",{target:D[T].language.toLowerCase()}),placeholder:b("Enter the [[target]]'s name",{target:D[T].language.toLowerCase()}),customFilter:e=>{const a=T===Be.h.group&&u.campaign.config.maximumTeamSize&&u.campaign.config.maximumTeamSize<=e.value.memberCount;if(T===Be.h.group&&t.profile.organisationProfile){const n=e.value.parentUuid===t.profile.organisationProfile.uuid;return!a&&n}return!a},update:e=>j(e),profileType:Be.h[T],alphabeticalProfileSearch:!0,autofocus:!0}),x&&g.a.createElement("div",{className:"form__navigation"},g.a.createElement(V.a,{type:"submit",disabled:O},b(O?"Joining...":"Join"))))}),P&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>A(null),dockToBottom:!0,modalContent:e=>g.a.createElement(gr,{typeToCreate:P,parentProfile:Tr(P,t,R),closeModal:e})})),!1!==(null===(i=u.campaign.config.profiles)||void 0===i||null===(l=i.teams)||void 0===l?void 0:l.enabled)&&!$&&!t.organisationProfile&&g.a.createElement("p",{className:"control-panel__teamlink"},D.group.joinHeading,g.a.createElement("div",{className:"button-row button-row--center buttons--small"},u.campaign.config.customFields.teamProfile?g.a.createElement(V.a,{onClick:()=>A(Be.h.group)},b("Start [[target]]",{target:D.group.language})):g.a.createElement(V.a,{href:"/create/group"},b("Start [[target]]",{target:D.group.language})),g.a.createElement(V.a,{onClick:()=>C("group")},b("Join [[target]]",{target:D.group.language})))),(null===(s=u.campaign.config.profiles)||void 0===s||null===(c=s.organisations)||void 0===c?void 0:c.enabled)&&!q&&g.a.createElement("p",{className:"control-panel__orglink"},D.organisation.joinHeading,g.a.createElement("div",{className:"button-row button-row--center buttons--small"},g.a.createElement(V.a,{onClick:()=>C("organisation")},b("Join [[target]]",{target:D.organisation.language})))))}function Tr(e,t,a){return e===Be.h.individual?t.teamProfile||t.organisationProfile||a.parent:e===Be.h.group&&t.organisationProfile||a.parent}function Nr({user:e,align:t,theme:a,...n}){const{global:o}=useRaisely(!0),{t:r,tF:i}=Object(d.d)(),{profileTerms:l}=Object(Be.i)(),[s,c]=Object(f.useState)(null),u=Object(f.useMemo)(()=>{const e=r("[[teamTerm]]",{teamTerm:l.teams.singular.upper});return i(n.teamLanguage,e)},[r,i,n,l]);if(!e)return null;const{profile:m}=e;return g.a.createElement(f.Fragment,null,s&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>c(null),dockToBottom:!0,modalContent:t=>g.a.createElement(gr,{typeToCreate:s,parentProfile:Cr(s,e,m),closeModal:t})}),g.a.createElement("div",{className:"create-team-button create-team-button--"+t},o.campaign.config.customFields.teamProfile?g.a.createElement(V.a,{onClick:()=>c(Be.h.group),theme:a},r("Start [[target]]",{target:u})):g.a.createElement(V.a,{href:"/create/group",theme:a},r("Start [[target]]",{target:u}))))}function Cr(e,t,a){return e===Be.h.individual?t.teamProfile||t.organisationProfile||a.parent:e===Be.h.group&&t.organisationProfile||a.parent}Sr.propTypes={global:h.a.object.isRequired,user:h.a.object.isRequired,integrations:h.a.object.isRequired,profileLabel:h.a.string,profileShareHeading:h.a.string,profileSponsorLabel:h.a.string,teamLabel:h.a.string,teamShareHeading:h.a.string,teamSponsorLabel:h.a.string,editProfileLabel:h.a.string,viewProfileLabel:h.a.string,editTeamLabel:h.a.string,viewTeamLabel:h.a.string,joinTeamHeading:h.a.string,teamLanguage:h.a.string};Nr.propTypes={user:h.a.object.isRequired,align:h.a.oneOf(["left","center","right"]),theme:h.a.oneOf(["cta","primary","secondary","inverse"]),teamLanguage:h.a.string};function xr({description:e,includeBlogPost:t,includeSharedPage:a,includeSelfDonated:n,includeUpdatedPhoto:o,includeUpdatedDescription:r,includeLogFirstActivity:i,user:l,actions:s,integrations:c,processFormData:m,showActions:p,size:b}){const{pollingHash:h,global:y}=useRaisely(!0),{t:E}=Object(d.d)(),{campaign:k}=y,w=l&&l.profile,[O,T]=Object(f.useState)(!1),[N,C]=Object(f.useState)(!1),[x,j]=Object(f.useState)(!1),[P,A]=Object(f.useState)(!1),[D,R]=Object(f.useState)(!1),[F,I]=Object(f.useState)(!1),[M,L]=Object(f.useState)(!0),[B,U]=Object(f.useState)(Date.now());Object(f.useEffect)(()=>{if(!w)return;w.photoUrl&&A(!0),w.description&&R(!0);const e=[{path:"has_post",rules:[{property:"postCount",comparison:"gt",value:0}]},{path:"has_self_donation",rules:[{property:"selfDonationTotal",comparison:"gt",value:0}]},{path:"has_logged_activity",rules:[{property:"activityTotal",comparison:"gt",value:0}]},{path:"has_shared_page",rules:[{property:"shared",comparison:"eq",value:"true"}]}];if(k.mock)L(!1);else{const t={has_post:T,has_self_donation:j,has_logged_activity:I,has_shared_page:C};u.a.profiles.test({id:w.uuid,data:{data:e},query:{private:!0}}).then(e=>{e.data.data.forEach(e=>{e.badgeAwarded&&t[e.badgePath](!0)}),L(!1)})}},[l&&l.uuid,h,B]);const H=async(e,t,a)=>{try{const t=m(e),n=await u.a.profiles.update({id:w.uuid,data:{data:t,partial:!0}}),{data:o}=n.data,r=await s.fetchAndUpdateUser();y.current.profile&&y.current.profile.uuid===w.uuid&&s.updateCurrent({...y.current,profile:o}),U(Date.now()),a(),s.addMessage(E("Profile updated successfully")),c.broadcast("profile.updated",r)}catch(e){t.setSubmitting(!1),s.addErrorMessage(e)}},V=[t&&O,a&&N,n&&x,o&&P,r&&D,i&&F].filter(e=>!!e).length,$=[t,a,n,o,r,i].filter(e=>!!e).length,q=V/$*100,G=Math.round(q);return M?g.a.createElement("div",{className:"profile-helper"},g.a.createElement(po.d,null)):g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"profile-helper__mobile-spacer profile-helper__mobile-spacer--"+b}),g.a.createElement("div",{className:`profile-helper ${p?"":"profile-helper--not-actionable"} profile-helper--${b}`},g.a.createElement("h5",{className:"profile-helper__heading"},g.a.createElement("strong",null,E("Your profile is [[percent]]% complete",{percent:G}))),e&&g.a.createElement("p",{className:"profile-helper__description"},e),g.a.createElement("div",{className:"profile-helper__items"},t&&g.a.createElement(jr,{complete:O,title:E("Posted first blog"),icon:"edit",allowAction:p,dockToBottom:!0,modalContent:e=>g.a.createElement(gt,{user:l,userProfile:w,campaign:k,afterCreate:(t,a)=>((e,t,a)=>{if(e)return s.addErrorMessage(e),void c.broadcast("post.error",e);s.addSuccessMessage("Post created"),c.broadcast("post.created",{post:t}),U(Date.now()),s.triggerPageStreamRefetch(),a()})(t,a,e)})}),a&&g.a.createElement(jr,{complete:N,title:E("Shared page"),icon:"share",allowAction:p,dockToBottom:!0,modalContent:()=>g.a.createElement("div",{className:"mobile-tab-menu__share-modal"},g.a.createElement("h3",null,E("Share your page")),g.a.createElement(Ke.a,{global:y,networks:"campaign",size:"large",theme:"filled",profile:w}))}),n&&g.a.createElement(jr,{complete:x,title:E("Self donated"),icon:"favorite",allowAction:p,modalTheme:"full",modalContent:e=>g.a.createElement("div",{className:"donation-form--modal"},g.a.createElement(Lt.a,{version:">=2",existingCards:!0,global:y,integrations:c,profileUuid:w.uuid,onSuccess:()=>{s.triggerPageStreamRefetch(),s.resolveCurrentUser(y.campaign.uuid),j(!0),e()}}))}),o&&g.a.createElement(jr,{complete:P,title:E("Updated photo"),icon:"camera_alt",allowAction:p,dockToBottom:!0,modalContent:e=>g.a.createElement("div",{className:"raisely-profile-form"},g.a.createElement("h2",null,E("Add your Photo")),g.a.createElement(_.a,{fields:y.customFields.profile.filter(e=>"photoUrl"===e.id),values:{photoUrl:w.photoUrl},global:y,action:(t,a)=>H(t,a,e)}))}),r&&g.a.createElement(jr,{complete:D,title:E("Updated description"),icon:"refresh",allowAction:p,dockToBottom:!0,modalContent:e=>g.a.createElement("div",{className:"raisely-profile-form"},g.a.createElement("h2",null,E("Update your description")),g.a.createElement(_.a,{fields:y.customFields.profile.filter(e=>"description"===e.id),values:{description:w.description},global:y,action:(t,a)=>H(t,a,e)}))}),i&&g.a.createElement(jr,{complete:F,title:E("Log first activity"),icon:"flag",allowAction:p,dockToBottom:!0,modalContent:e=>{const t={type:v()(k.config,"activity.type")||"ANY",field:v()(y.campaign.config,"activity.field")},a=v()(y.campaign.config,"activity.unit"),n="TIME"===t.type||"time"===v()(y.campaign.config,"activity.metric");return g.a.createElement("div",{className:"mobile-tab-menu__share-modal"},g.a.createElement("h3",null,E("Add activity")),g.a.createElement(S,{campaign:k,currentUser:l,dateLabel:"Date",useTime:n,unit:a,onSuccess:()=>{s.addSuccessMessage(E("Added activity")),s.triggerPageStreamRefetch(),U(Date.now()),e()},activity:t.type,activityField:t.field,onFailure:e=>s.addErrorMessage(e)}))}})),g.a.createElement(Pr,{complete:V,total:$})))}function jr({complete:e,title:t,icon:a,modalContent:n,modalTheme:o,link:r="",onClick:i,allowAction:l,dockToBottom:s}){const[c,u]=Object(f.useState)(!1),d=l?m.a:"div";return g.a.createElement(f.Fragment,null,g.a.createElement(d,{className:"profile-helper__item "+(e?"profile-helper__item--complete":""),onClick:e=>{l&&((n||i)&&e.preventDefault(),"function"==typeof i?i():u(!0))},to:l&&r||"#",title:t},l?g.a.createElement("i",{className:"material-icons profile-helper__item__icon"},a):g.a.createElement("i",{className:"material-icons profile-helper__item__tick"},"done"),g.a.createElement("span",{className:"profile-helper__item__title"},t),e&&l&&g.a.createElement("i",{className:"material-icons profile-helper__item__tick"},"done")),n&&c&&l&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>u(!1),theme:o,modalContent:n,dockToBottom:s}))}function Pr({complete:e,total:t}){const a=1-e/t,n=window.CSS&&CSS.supports("color","var(--variable)");return g.a.createElement("div",{className:"profile-helper__indicator"},g.a.createElement("svg",{className:"profile-helper__indicator__frame",width:"50px",height:"50px"},g.a.createElement("circle",{cx:"50%",cy:"50%",className:"profile-helper__indicator__background-circle",r:50/2.2}),g.a.createElement("circle",{cx:"50%",cy:"50%",className:"profile-helper__indicator__foreground-circle",r:50/2.2,pathLength:1,style:{"--progress":a,strokeDashoffset:!n&&a}})),g.a.createElement("div",{className:"profile-helper__indicator__count"},g.a.createElement("span",{className:"profile-helper__indicator__"+(e>0?"complete":"empty")},e),"/",t))}xr.propTypes={description:h.a.string,includeBlogPost:h.a.bool,includeSharedPage:h.a.bool,includeSelfDonated:h.a.bool,includeUpdatedPhoto:h.a.bool,includeUpdatedDescription:h.a.bool,includeLogFirstActivity:h.a.bool,size:h.a.oneOf(["default","condensed"])};var Ar=a(179);function Dr({resources:e,layout:t="grid"}){const{t:a,tD:n}=Object(d.d)(),[o,r]=Object(f.useState)(e&&e.length<2);return e&&0!==e.length?"slider"===t?g.a.createElement(ha,{className:Object(G.q)(`\n\t\t\t\t\tresource-list\n\t\t\t\t\tresource-list--${t}\n\t\t\t\t\t${o?"":"resource-list--collapsed"}\n\t\t\t\t`),collapse:!0,appendContent:!o&&g.a.createElement("button",{className:"resource-list__more-button",onClick:()=>r(!0)},a("See more")," ",g.a.createElement("i",{className:"material-icons"},"add"))},e.map((e,t)=>g.a.createElement(Ar.a,{title:e.title,description:e.description,file:e.url||e.file,image:e.url&&e.file,button:e.button,key:t}))):g.a.createElement("div",{className:"resource-list resource-list--"+t},g.a.createElement("div",{className:"resource-list__wrapper"},e.map((e,t)=>g.a.createElement(Ar.a,{title:n(e.title),description:n(e.description),file:e.url||e.file,image:e.url&&e.file,button:e.button,key:t})))):g.a.createElement(it.a,{message:a("Sorry, there are no resources yet."),prefix:"resource-list"})}Dr.propTypes={resources:h.a.arrayOf(h.a.shape({title:h.a.string,description:h.a.string,file:h.a.string,image:h.a.string,button:h.a.string})),layout:h.a.oneOf(["grid","slider"])};var Rr=a(58),Fr=a.n(Rr);function Ir({user:e}){const t=useRaisely(),{t:a,tD:n}=Object(d.d)(),o=t.campaign.mock,[r,i]=Object(f.useState)(!1),[l,s]=Object(f.useState)(!1),c=e=>{i(!0),window.localStorage.setItem("dismissed-"+e,!0)};if(!e)return null;if(r)return null;const u=[{key:"profileGoal-"+e.profile.uuid,condition:()=>e.profile&&e.profile.total>e.profile.goal,content:g.a.createElement(f.Fragment,null,g.a.createElement("strong",null,a("Congratulations you've hit your goal "))," ",g.a.createElement(m.a,{className:"profile-goal-notification__link",to:e.profile.path+"?edit=1"},a("Try increasing your goal to raise even more!")))}].find(e=>!!o||!window.localStorage.getItem("dismissed-"+e.key)&&!!e.condition());return u?g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"profile-goal-notification"},u.content,g.a.createElement("button",{className:"profile-goal-notification__dismiss-button",onClick:()=>c(u.key)},g.a.createElement("i",{className:"material-icons"},"close"))),Fr.a.createPortal(l?g.a.createElement("div",{className:"profile-goal-notification__mobile-backdrop"},g.a.createElement("div",{className:"profile-goal-notification__mobile-content"},u.content,g.a.createElement("button",{className:"profile-goal-notification__dismiss-button",onClick:()=>c(u.key)},g.a.createElement("i",{className:"material-icons"},"close")))):g.a.createElement("button",{className:"profile-goal-notification__mobile-button",onClick:()=>s(!0)},g.a.createElement("i",{className:"material-icons"},"notifications")),document.getElementById("modal-root"))):null}function Mr({logos:e,columns:t,maxWidth:a,maxHeight:n}){const{t:o}=Object(d.d)();return!e||e.length<1?g.a.createElement(it.a,{message:o("You need to add some Logos."),prefix:"logos"}):g.a.createElement("div",{className:"logos logos--cols-"+t},e.map((e,t)=>g.a.createElement("div",{className:"logos__logo",key:t},g.a.createElement(ya.a,{src:e.image,className:"logos__image",alt:e.alt,style:{maxWidth:a,maxHeight:n},options:{maxWidth:a}}),e.href?g.a.createElement(m.a,{className:"logos__link",href:e.href,shouldOpenInNewTab:Boolean(e.newTab),"aria-label":e.newTab?o("This is an external link (opens in a new tab)"):o("This is an internal link (opens in the same tab)")},e.alt):null)))}function Lr({successMessage:e,successRedirect:t,tags:a,buttonText:n,formName:o,...r}){const{tF:i,t:l,tD:s}=Object(d.d)(),[c,m]=Object(f.useState)(!1),p=e?Qe()(s(e)):g.a.createElement("p",null,l("Thank you!"));return g.a.createElement("div",{className:"lead-form"},c?p:g.a.createElement("div",null,g.a.createElement(_.a,{global:r.global,unlocked:!0,fields:(e=>{const t=[...e.map(e=>({...e}))],a=r.fields&&r.fields.length&&r.fields.map(e=>{const a=t.find(t=>{var a;return null===(a=e.field)||void 0===a?void 0:a.includes(t.id)});return e&&a?{...a,active:!0}:null}).filter(e=>e);return a&&a.length?a:t})(r.global.customFields.user),action:async(n,i)=>{try{(await u.a.users.upsert({data:{...n,tags:a?a.map(e=>e.uuid):[],interaction:{categoryPath:"lead-form-submitted",detail:{comment:`Submitted the lead form called "${o}".`,private:{formName:o,url:window.location.href}}}}})).body().data();r.integrations&&r.integrations.broadcast("lead.submitted",{data:n,formName:o}),t&&r.actions.redirect(t),e&&m(!0)}catch(e){i.setSubmitting(!1),r.actions.addErrorMessage(e)}},actionText:i(n,l("Submit"))})))}Ir.propTypes={user:h.a.object.isRequired},Mr.propTypes={logos:h.a.arrayOf(h.a.shape({image:h.a.string.isRequired,alt:h.a.string,href:h.a.string}).isRequired),columns:h.a.number,maxWidth:h.a.number,maxHeight:h.a.number},Lr.propTypes={tags:h.a.arrayOf(h.a.shape({uuid:h.a.string.isRequired})),fields:h.a.arrayOf(h.a.shape({field:h.a.string.isRequired})),successMessage:h.a.string,successRedirect:h.a.string,buttonText:h.a.string,formName:h.a.string};const Br=e=>{const{campaign:t}=e;return u.a.matchedDonationConfigs.getAll({query:{campaign:t.uuid,sort:"startAt",order:"asc"}})};function Ur(e){const{pollingHash:t,global:a}=useRaisely(!0),{tF:n,t:o}=Object(d.d)();return g.a.createElement(de,N()({avoidLoader:!0},e,{pollingHash:t,pollingMethod:Br,loadHeight:"30px",campaign:a.campaign}),(t,{isLoading:r})=>{if(r||a.campaign.mock)return g.a.createElement(Yt.a,N()({},e,{profile:{total:3500,goal:5e3,currency:a.campaign.currency},label:n(e.matchedLabel,o("matched")),displaySource:"total"}));const i=t.filter(e=>e.isActive);let l,s=!1;return i.map(e=>{l||(l=e),new Date(e.startAt)<new Date&&new Date(e.endAt)>new Date&&(l=e,s=!0),new Date(e.startAt)>new Date&&!s&&(l=e)}),!s&&e.hideInactive?null:l?g.a.createElement(Yt.a,N()({},e,{profile:{total:l.totalSpent,goal:l.limit,currency:a.campaign.currency},label:n(e.matchedLabel,o("matched")),displaySource:"total"})):null})}function Hr({percentage:e,metricValue:t,metricUnit:a,metricUnitSingular:n,metricPosition:o,rawTotal:r,rawGoal:i,displayCurrency:l,campaignCurrency:s}){const[c,u]=Object(f.useMemo)(()=>l===s?[r,i]:[Object(To.b)(r,l,s,!1),Object(To.b)(i,l,s,!1)],[r,i,l,s]),d=Math.floor(c/t),m=Math.floor(u/t);if(!t||!a||!n)return null;const p=0===e&&" ",b=p||`${d.toLocaleString()} ${1===d?n:a}`,h=p||`${m.toLocaleString()} ${1===m?n:a}`,y="top"===o?"above":"below";return g.a.createElement("div",{className:"progress-bar__metric progress-bar__stats-outter progress-bar__stats-outter--"+y},g.a.createElement("div",{className:"progress-bar__metric-total progress-bar__total"},b),g.a.createElement("div",{className:"progress-bar__metric-goal progress-bar__goal"},h))}function Vr({metricPosition:e,metricValue:t,metricUnit:a,metricUnitSingular:n,...o}){const r={["bottom"===e?"appendToView":"prependToView"]:o=>g.a.createElement(Hr,N()({metricValue:t,metricUnit:a,metricUnitSingular:n,metricPosition:e},o))};return g.a.createElement(Yt.a,N()({},o,r))}Ur.propTypes={style:h.a.oneOf(Yt.c),size:h.a.oneOf(Yt.b),showTotal:h.a.bool,showGoal:h.a.bool,hideInactive:h.a.bool,statPosition:h.a.oneOf(["top","middle","bottom"]),matchedLabel:h.a.string,className:h.a.string},Vr.propTypes={metricValue:h.a.number.isRequired,metricUnit:h.a.string.isRequired,metricUnitSingular:h.a.string.isRequired,metricPosition:h.a.oneOf(["top","bottom"]),profile:h.a.object.isRequired,style:h.a.oneOf(Yt.c),size:h.a.oneOf(Yt.b),showTotal:h.a.bool,showGoal:h.a.bool,total:h.a.number,goal:h.a.number,unit:h.a.string,label:h.a.string,progressIcon:h.a.string,displaySource:h.a.oneOf(["total","exerciseTotal","exerciseTotalTime","custom"]),statPosition:h.a.oneOf(["top","middle","bottom"]),className:h.a.string};var $r=a(178);var qr=({size:e,strokeWidth:t,totalMiddle:a,totalFront:n})=>{const o=`0 0 ${e} ${e}`,r=(e-t)/2,i=r*Math.PI*2,l=isNaN(a)?0:a*i/100,s=isNaN(n)?0:n*i/100;return g.a.createElement("div",{className:"progress-circle"},g.a.createElement("svg",{viewBox:o},g.a.createElement("circle",{className:"progress-circle__back",fill:"none",cx:e/2,cy:e/2,r:r,strokeWidth:t+"px"}),g.a.createElement("circle",{className:"progress-circle__middle",fill:"none",cx:e/2,cy:e/2,r:r,strokeWidth:t+"px",transform:`rotate(-90 ${e/2} ${e/2})`,strokeDasharray:[l,i-l],strokeLinecap:"round",style:{transition:"all 0.5s"}}),g.a.createElement("circle",{className:"progress-circle__front",fill:"none",cx:e/2,cy:e/2,r:r,strokeWidth:t+"px",transform:`rotate(-90 ${e/2} ${e/2})`,strokeDasharray:[s,i-s],strokeLinecap:"round",style:{transition:"all 0.5s"}})))};function Gr({labelAbove:e,labelBelow:t,dateAndTime:a,labelDays:n,labelHours:o,labelMinutes:r,labelSeconds:i,align:l="center",style:s="basic",showEndDate:c=!0,showProgressBar:u=!0,startDateAndTime:m,campaign:p}){const{t:b}=Object(d.d)(),[h,y]=g.a.useState({days:0,hours:0,minutes:0,seconds:0,difference:0,percentage:0});return Object(f.useEffect)(()=>{let e;return x()(a).isValid()&&(e=setInterval(()=>{const e=new Date,t=new Date(a),i=a?Math.max(t-e,0):0;let l=0;if(m){const a=new Date(m),n=t-a;l=e>=a?(n-i)/n:0}const s=t.toLocaleDateString(window.navigator.language,{day:"numeric",month:"long",year:"numeric"});let c=Math.floor(i/864e5),u=Math.floor(i/36e5)%24,d=Math.floor(i/6e4)%60,p=Math.floor(i/1e3)%60;n||(u+=24*c),o||(d+=60*u),r||(p+=60*d),y({date:s,days:String(c).padStart(2,"0"),hours:String(u).padStart(2,"0"),minutes:String(d).padStart(2,"0"),seconds:String(p).padStart(2,"0"),percentage:l})},1e3)),()=>clearInterval(e)},[m,a,o,n,r,i]),g.a.createElement("div",{className:`countdown countdown--style-${s} countdown--align-${l}`}," ",Boolean(e&&e.length)&&g.a.createElement("span",{className:"countdown__label countdown__label--top"},e),c&&a&&"clock"===s&&g.a.createElement("span",{className:"countdown__date"},h.date),g.a.createElement("div",{className:"countdown__clock"},g.a.createElement("div",{className:"countdown__clock-items"},Boolean(n)&&g.a.createElement("span",{className:"countdown__granular countdown__granular--days"},g.a.createElement("span",{className:"countdown__count countdown__count--days"},h.days),g.a.createElement("span",{className:"countdown__count-label countdown__count-label--days "},""+(1==h.days?b("day"):b("days")))),Boolean(o)&&g.a.createElement("span",{className:"countdown__granular countdown__granular--hours"},g.a.createElement("span",{className:"countdown__count countdown__count--hours"},h.hours),g.a.createElement("span",{className:"countdown__count-label countdown__count-label--hours"},""+(1==h.hours?b("hour"):b("hours")))),Boolean(r)&&g.a.createElement("span",{className:"countdown__granular countdown__granular--minutes"},g.a.createElement("span",{className:"countdown__count countdown__count--minutes"},h.minutes),g.a.createElement("span",{className:"countdown__count-label countdown__count-label--minutes"},""+(1==h.minutes?b("minute"):b("minutes")))),Boolean(i)&&g.a.createElement("span",{className:"countdown__granular countdown__granular--seconds"},g.a.createElement("span",{className:"countdown__count countdown__count--seconds"},h.seconds),g.a.createElement("span",{className:"countdown__count-label countdown__count-label--seconds"},""+(1==h.seconds?b("second"):b("seconds"))))),u&&"circle"===s&&g.a.createElement(qr,{size:500,strokeWidth:18,totalMiddle:0,totalFront:Math.round(100*h.percentage)})),u&&m&&"clock"===s&&g.a.createElement(Yt.a,{profile:p.profile,displaySource:"custom",showTotal:!1,showGoal:!1,total:h.percentage,goal:1,size:"small"}),c&&a&&"basic"===s&&g.a.createElement("span",{className:"countdown__date"},h.date),c&&a&&"circle"===s&&g.a.createElement("span",{className:"countdown__date"},h.date),Boolean(t&&t.length)&&g.a.createElement("span",{className:"countdown__label countdown__label--bottom"},t))}Gr.propTypes={campaign:h.a.object.isRequired,dateAndTime:h.a.string,startDateAndTime:h.a.string,style:h.a.oneOf(["basic","clock","circle"]),labelAbove:h.a.string,labelBelow:h.a.string,labelDays:h.a.bool,labelHours:h.a.bool,labelMinutes:h.a.bool,labelSeconds:h.a.bool,align:h.a.oneOf(["left","center","right"]),showEndDate:h.a.bool};var zr=a(231),Yr=a.n(zr),Wr=a(100);const[Zr,Kr]=Object(Wr.a)(),Jr=(Zr("https://cdn.jsdelivr.net/npm/apexcharts","Apex"),({graphData:e,profile:t,campaign:a,pageSize:n,page:o})=>{const r=e.map(e=>e[0]),i=e.map(e=>e[1]);let l=[];e.forEach((e,t)=>{l.push(0===t?e[1]:e[1]+l[t-1])}),l=l.map((t,a)=>t-e[a][1]);let s=Math.ceil(e.length/n)-o,c=Math.max(i.length-n*s,0),u=c+7;return{options:{chart:{type:"bar",height:"auto",stacked:!0,toolbar:{show:!1},zoom:{enabled:!1},style:{fontFamily:"inherit"}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,borderRadius:5,columnWidth:"50%"}},dataLabels:{enabled:!1},annotations:{yaxis:[{y:t.exerciseGoal,borderColor:a.config.theme.primaryColor,strokeDashArray:2,label:{borderColor:a.config.theme.primaryColor,style:{color:"#fff",background:a.config.theme.primaryColor,fontSize:"12px",fontWeight:600},text:"GOAL"}}]},yaxis:{min:0,max:Math.max(1.25*t.exerciseGoal,l?l[l.length-1]:0),labels:{formatter:e=>Object(G.e)(e,a,{shortLabel:!0,precision:0}),style:{colors:"#757575",fontSize:"12px",fontWeight:600,cssClass:"apexcharts-yaxis-label"}}},xaxis:{type:"datetime",categories:r.slice(c,u),labels:{show:!0,rotateAlways:!1,hideOverlappingLabels:!0,showDuplicates:!1,trim:!1,style:{colors:a.config.theme.primaryColor,fontSize:"14px",fontWeight:700,cssClass:"apexcharts-xaxis-label"}}},legend:{show:!1},fill:{opacity:1,colors:[a.config.theme.secondaryColor,a.config.theme.primaryColor]}},series:[{name:"Daily",data:i.slice(c,u)},{name:"Cumulative",data:l.slice(c,u)}],pages:Math.ceil(i.length/n)}});var Qr=Kr((function({graphData:e,profile:t,pageSize:a}){const[n,o]=Object(f.useState)(null),[r,i]=Object(f.useState)(Math.ceil(e.length/a)-1),[l,s]=Object(f.useState)(Math.ceil(e.length/a)-1),c=Object(f.useRef)(null),{campaign:u}=useRaisely();return Object(f.useEffect)(()=>{if(!(e||t))return;const{series:n,options:i,pages:l}=Jr({graphData:e,profile:t,campaign:u,pageSize:a,page:r});s(l);const d=new window.ApexCharts(c.current,{series:n,...i});return d.render(),o(d),()=>{d.destroy(),o(null)}},[e,t]),Object(f.useEffect)(()=>{if(!n)return;const{series:o,options:i}=Jr({graphData:e,profile:t,campaign:u,pageSize:a,page:r});n.updateOptions(i),n.updateSeries(o)},[r]),g.a.createElement("div",{className:"activity-tracker__chart"},n&&g.a.createElement($,{updatePage:e=>i(r+e),total:e.length,limit:a,currentPage:r}),g.a.createElement("div",{ref:c}))})),Xr=a(389),ei=a.n(Xr),ti=a(680),ai=a.n(ti),ni=a(681),oi=a.n(ni),ri=a(682),ii=a.n(ri),li=a(250),si=a.n(li);function ci({profile:e,showProgressBar:t=!0,showIcons:a=!0,displayStreak:n=!0,displayBestDay:o=!0,displayAverage:r=!0,numberOfDays:i=30,header:l,...s}){const{global:c}=useRaisely(!0),{t:m,tF:p}=Object(d.d)(),{campaign:b}=c,[h,y]=Object(f.useState)(),[_,E]=Object(f.useState)(),[w,O]=Object(f.useState)(),[S,T]=Object(f.useState)(),[N,C]=Object(f.useState)(),x=p(s.goalHeading,m("Goal")),j=p(s.keyOneHeading,m("Per Day")),P=p(s.keyTwoHeading,m("Total")),A=p(s.totalHeading,m("Total")),D=p(s.graphHeading,m("Overall Progress")),R=p(s.streakHeading,m("Longest Streak")),F=p(s.dailyAverageHeading,m("Daily Average")),I=p(s.bestDayHeading,m("Best Day"));if(Object(f.useEffect)(()=>{e&&async function(){const t=(await u.a.profiles.exercise.getAll({id:e.path,query:{limit:100,sort:"date",order:"asc"}})).data.data,a={...si()(t,e=>{const t=new Date(e.date);return Yr()(t,"YYYY-MM-DD")})};for(const e of Object.keys(a))a[e]=a[e].reduce((e,t)=>e+(t.distance||t.time),0);const n=(new Date).setDate((new Date).getDate()-i),o=((e,t=new Date)=>{const a=[];let n=new Date(e);for(;n<t;)a.push(new Date(n.getTime())),n=new Date(n.setDate(n.getDate()+1));return a})(t[0]&&new Date(t[0].date).getTime()<n?new Date(t[0].date):n,new Date);for(const e of o){const t=Yr()(e,"YYYY-MM-DD");a[t]||(a[t]=0)}const r=ii()(ei()(a),e=>new Date(e[0]).getTime());E(r);const l=r[r.length-1][1];C(l);const s=ai()(r,e=>e[1]);y(s[0]);const c=Math.floor(oi()(r,e=>e[1]));O(c);let d=0,m=0;for(let e=0;e<r.length;e++)0!==r[e][1]?d++:d=0,d>m&&(m=d);T(m)}()},[e,i]),!e&&(c.current.profile||c.current.user))return g.a.createElement("div",{className:"activity-tracker activity-tracker--empty"},g.a.createElement("p",null,m('It looks like this block isn\'t working correctly. To fix it, ask the owner of this website to change the "Show activity tracker for" field.')));if(!e)return g.a.createElement("div",{className:"activity-tracker activity-tracker--empty"},g.a.createElement(tt.b,null));const M=Object(k.d)(b.config),L=v()(b,"config.activity.type",null);let B=L;"FIELD"===L&&(B=v()(e,v()(b,"config.activity.field"),null));const U={};return v()(c.campaign.config,"activity.active",!1)?g.a.createElement("div",{className:"activity-tracker"},l,g.a.createElement("div",{className:"activity-tracker__top"},g.a.createElement("div",{className:"activity-tracker__top--left"},g.a.createElement("h5",{className:"activity-tracker__titles"},x),g.a.createElement("h1",{className:"activity-tracker__goal"},Object(G.e)(e[M],b,{shortLabel:!0}))),g.a.createElement("div",{className:"activity-tracker__top--right"},g.a.createElement("div",{className:"activity-tracker__key"},g.a.createElement("div",{className:"material-icons activity-tracker__key--daily"},"square")," ",g.a.createElement("h6",{className:"activity-tracker__titles"},j)),g.a.createElement("div",{className:"activity-tracker__key"},g.a.createElement("div",{className:"material-icons activity-tracker__key--total"},"square")," ",g.a.createElement("h6",{className:"activity-tracker__titles"},P))," "),g.a.createElement("div",{className:"activity-tracker__mobile"},g.a.createElement("div",{className:"activity-tracker__key--mobile"},g.a.createElement("div",{className:"material-icons activity-tracker__key--mobile--daily"},"square")," ",g.a.createElement("h6",{className:"activity-tracker__titles--mobile"},j)),g.a.createElement("div",{className:"activity-tracker__key--mobile"},g.a.createElement("div",{className:"material-icons activity-tracker__key--mobile--total"},"square")," ",g.a.createElement("h6",{className:"activity-tracker__titles--mobile"},P))," ")),g.a.createElement("div",{className:"activity-tracker__middle"},g.a.createElement("div",{className:"activity-tracker__middle--left"},g.a.createElement("h5",{className:"activity-tracker__titles"},A),g.a.createElement("div",{className:"activity-tracker__circle"},g.a.createElement("div",{className:"activity-tracker__circle__total"},g.a.createElement("i",{className:"material-icons"},a&&((e,t=null)=>{const a={ANY:"accessibility_new",WALK_RUN:"directions_run",RUNNING:"directions_run",SWIMMING:"pool",CYCLING:"directions_bike",WALKING:"directions_walk",WHEELCHAIRING:"accessible_forward"}[e];return a||(t||"accessibility_new")})(B)),g.a.createElement("h2",{className:"activity-tracker__circle__total--inside"},Object(G.e)(e.activityTotal,b,{shortLabel:!0,precision:0}))),g.a.createElement("div",{className:"activity-tracker__circle--outside"},g.a.createElement("h2",{className:"activity-tracker__circle__total--outside"},Object(G.e)(e.activityTotal,b,{shortLabel:!0,precision:0}))),t&&U&&g.a.createElement(qr,{style:U,size:500,strokeWidth:32,totalMiddle:e.activityTotal/e[M]*100,totalFront:N/e[M]*100}))),g.a.createElement("div",{className:"activity-tracker__middle--right"},g.a.createElement("h5",{className:"activity-tracker__titles"},D),g.a.createElement("div",{className:"activity-tracker__bar"},_&&g.a.createElement(Qr,{graphData:_,profile:e,pageSize:7})))),g.a.createElement("div",{className:"activity-tracker__bottom"},n&&g.a.createElement("div",{className:"activity-tracker__bottom--left"},g.a.createElement("h5",{className:"activity-tracker__titles"},R),g.a.createElement("h4",{className:"activity-tracker__data"},`${S} ${1===S?"day":"days"}`)),o&&h&&g.a.createElement("div",{className:"activity-tracker__bottom--middle"},g.a.createElement("h5",{className:"activity-tracker__titles"},I),g.a.createElement("h4",{className:"activity-tracker__data"},Yr()(h,"D MMM"))),r&&g.a.createElement("div",{className:"activity-tracker__bottom--right"},g.a.createElement("h5",{className:"activity-tracker__titles"},F),g.a.createElement("h4",{className:"activity-tracker__data"},Object(G.e)(w,b,{shortLabel:!0}))))):g.a.createElement("div",{className:"activity-tracker activity-tracker--empty"},g.a.createElement("p",null,m("You need to switch on Activity Tracking for this campaign before you can use this block.")))}ci.propTypes={profile:h.a.object};var ui=a(295);function di({futureMatchHeading:e,activeMatchHeading:t,pastMatchHeading:a,giftLabel:n,totalLabel:o,hideInactive:r}){const i=useRaisely(),{t:l,tF:s}=Object(d.d)(),[c,m]=Object(f.useState)(null),[p,b]=Object(f.useState)(null),[h,y]=Object(f.useState)({originalAmount:0,matchedAmount:0}),[v,_]=Object(f.useState)(!1),{current:E}=Object(ht.b)("raisely-donationform-amount");Object(f.useEffect)(()=>(async()=>{let e,t;(await u.a.matchedDonationConfigs.getAll({query:{campaign:i.campaign.uuid,sort:"startAt",order:"asc"}},{cache:!0})).data.data.filter(e=>e.isActive).map(a=>{!e&&new Date(a.startAt)>new Date&&"active"!==t&&(e=a,t="future"),new Date(a.startAt)<new Date&&new Date(a.endAt)>new Date&&(e=a,t="active"),!e&&new Date(a.startAt)<new Date&&"future"!==t&&(e=a,t="past"),e||(e=a)}),m(e),b(t)})(),[]);return Object(f.useEffect)(()=>{c&&Boolean(E)&&(async({amount:e,currency:t})=>{_(!0);const a=(await u.a.matchedDonationConfigs.testSingle({id:c.uuid,data:{data:{amount:e,currency:t}}})).body().data().data;y(a),_(!1)})(E)},[E,c]),"active"!==p&&r&&!i.user.mock?null:g.a.createElement("div",{className:"matched-giving-calculator"},g.a.createElement("p",{className:"matched-giving-calculator__heading matched-giving-calculator__heading--"+p},"future"!==p&&c?"active"===p?t:"past"===p?a:null:e),c&&E&&E.amount&&g.a.createElement("div",{className:"matched-giving-calculator__calculator"},g.a.createElement("div",{className:"matched-giving-calculator__calculator__item"},g.a.createElement("p",{className:"matched-giving-calculator__calculator__label"},n||"Your gift"),g.a.createElement("span",{className:"matched-giving-calculator__calculator__value"},Object(G.f)(v&&h.originalAmount?E.amount:h.originalAmount,E.currency))),g.a.createElement("div",{className:"matched-giving-calculator__calculator__item matched-giving-calculator__calculator__item--multiplier"},g.a.createElement("span",null,"x"),g.a.createElement("span",null,c.matchPercent/100+1)),g.a.createElement("div",{className:"matched-giving-calculator__calculator__item"},g.a.createElement("p",{className:"matched-giving-calculator__calculator__label"},s(o,l("We receive"))),g.a.createElement("span",{className:"matched-giving-calculator__calculator__value"},v?"-":Object(G.f)(h.originalAmount+h.matchedAmount,E.currency)))))}function mi({campaign:e,override:t,align:a,link:n,width:o}){const{theme:r}=e.config,i="string"==typeof r.logoUrl,{tD:l}=Object(d.d)();return g.a.createElement("div",{className:`logo logo--${i?"image":"text"} ${a?"logo--align-"+a:""} ${o&&(i||t)?"logo--custom-width":""}`},i||t?g.a.createElement(ya.a,{src:t||r.logoUrl,options:{maxWidth:1e3},alt:r.logoAltText||e.name+" Logo",style:{width:o}}):g.a.createElement("h1",null,l(e.name)),n?g.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",title:"Homepage",className:"logo__overlay"}):g.a.createElement(m.a,{to:"/",className:"logo__overlay",title:"Homepage"}))}function pi({detailsDescription:e="",detailsTitle:t="",align:a="center",signupTitle:n="",signupDescription:o="",thankYouTitle:r="",thankYouDescription:i="",emailTitle:l="",emailDescription:s="",groupUrl:c,history:m,loginAutomatically:p=!1}){const{t:b,tD:h}=Object(d.d)(),[y,E]=Object(f.useState)(!1),[k,w]=Object(f.useState)({}),{actions:O,global:S,integrations:T,processFormData:N}=useRaisely(!0),[C,x]=Object(f.useState)(0),[j,P]=Object(f.useState)(),[A,D]=Object(f.useState)({}),{campaign:R,user:F}=S,I=Object(mo.b)("profile").filter(e=>!e.core),M=un(),L=async e=>{try{if(E(!0),null==T||T.broadcast("facebookFundraiser.createProfileInitiated",{data:e}),!e.user.email)return D(e),void x(1);const t=await u.a.campaigns.facebookFundraisers.create({id:R.uuid,data:{data:{accessToken:e.accessToken,user:e.user,profile:{type:Be.h.individual,name:""+e.user.fullName}}}}),a=t.body().data().data;T.broadcast("profile.created",{profile:a}),T.broadcast("facebookFundraiser.succeeded",{profile:a});const n=t.body().data().isTempToken,o=t.body().data().token;!n&&p&&await M.setupUser(o),w(a),P(o),I.length>0?x(2):B(),E(!1)}catch(e){O&&O.addErrorMessage(b("Sorry, we couldn't set up your Facebook fundraiser. Please reload the page and try again.")),E(!1),T.broadcast("profile.facebookFundraiserError",e)}},B=async()=>{F&&m.push("/dashboard"),x(3)},U=v()(R,"config.site.facebookFundraising.active",!1);return g.a.createElement("div",{className:`facebook-fundraising-signup facebook-fundraising-signup--align-${a} facebook-fundraising-signup--state-incomplete`},g.a.createElement(mi,{campaign:R,align:a}),0===C&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h1",{level:1,style:{textAlign:a}},h(n)),g.a.createElement("p",{style:{textAlign:a}},o.includes("<")?Qe()(h(o)):h(o)),g.a.createElement("div",{className:"facebook-fundraising-signup__button"},y?g.a.createElement(tt.b,{sceneHeight:"50px"}):g.a.createElement(et.a,{scope:U?["manage_fundraisers","public_profile","email"]:["public_profile","email"],onAuth:L}))),1===C&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h1",{level:1,style:{textAlign:a}},h(l)),g.a.createElement("p",{style:{textAlign:a}},e.includes("<")?Qe()(h(s)):h(s)),g.a.createElement("div",{className:"facebook-fundraising-signup__details"},g.a.createElement(_.a,{fields:[{active:!0,core:!0,id:"email",label:"Email",locked:!1,private:!1,required:!0,type:"email"}],values:k,global:S,action:e=>{const t={...A};t.user.email=e.email,D(t),L(A)},actionText:"Continue"}))),2===C&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h1",{level:1,style:{textAlign:a}},h(t)),g.a.createElement("p",{style:{textAlign:a}},e.includes("<")?Qe()(h(e)):h(e)),g.a.createElement("div",{className:"facebook-fundraising-signup__details"},g.a.createElement(_.a,{fields:I,values:k,global:S,action:async e=>{try{await u.a.profiles.update({id:k.uuid,data:{data:{private:e.private,public:e.public}},headers:{Authorization:"Bearer "+j}}),T.broadcast("facebookFundraiser.detailsCompleted",{profile:k}),B()}catch(e){O&&O.addErrorMessage(e),T.broadcast("profile.facebookFundraiserError",e)}},actionText:"Continue"}))),3===C&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h1",{level:1,style:{textAlign:a}},h(r)),p&&g.a.createElement("p",{className:"facebook-fundraising-signup__account-confirmation",style:{textAlign:a}},b("Your registration is complete! We've just sent you an email to confirm your account. If you can't find it after a few minutes, check your junk folder.")),g.a.createElement("p",{style:{textAlign:a}},i.includes("<")?Qe()(h(i)):h(i)),g.a.createElement("div",{className:"facebook-fundraising-signup__next-buttons",style:{textAlign:a}},Boolean(c)&&g.a.createElement(V.a,{theme:"primary",href:c,target:"_blank"},b("Join the group")),Boolean(k.facebookFundraiserId)&&g.a.createElement(V.a,{theme:"secondary",href:"https://www.facebook.com/donate/"+k.facebookFundraiserId,target:"_blank"},b("View your fundraiser")))))}di.propTypes={futureMatchHeading:h.a.string,activeMatchHeading:h.a.string,pastMatchHeading:h.a.string,giftLabel:h.a.string,totalLabel:h.a.string,hideInactive:h.a.bool},mi.propTypes={campaign:h.a.object},pi.propTypes={signupTitle:h.a.string,signupDescription:h.a.string,detailsTitle:h.a.string,detailsDescription:h.a.string,thankYouTitle:h.a.string,thankYouDescription:h.a.string,groupUrl:h.a.string,align:h.a.string};var fi=a(207),gi=a(208);function bi({headingSize:e,descriptionSize:t,feedItems:a,buttonStyle:n,itemCount:o}){const{t:r,tD:i}=Object(d.d)(),l=e,s=t;return!a||a.length<1?g.a.createElement(it.a,{message:r("You need to add some feed items."),prefix:"Feed Items"}):g.a.createElement("div",{className:"feed-items-wrapper"},g.a.createElement(J,{staticPaginationData:a,limit:o},e=>g.a.createElement("div",{className:"feed-items feed-items--count-"+o},e.map(({heading:e,description:t,image:a,button:o,date:r,alt:c,link:u},d)=>e&&g.a.createElement("div",{key:d,className:"feed-item feed-item--displayed"},(a||r)&&g.a.createElement("div",{className:"feed-item__image-wrapper"+(a?"":" feed-item__image-wrapper--no-image")},a&&g.a.createElement(ya.a,{src:a,className:"feed-item__image",alt:i(c)}),r&&"string"==typeof r&&g.a.createElement("div",{className:"feed-item__date"},new Date(r).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}))),g.a.createElement("div",{className:"feed-item__info"},g.a.createElement("div",{className:"feed-item__text"},g.a.createElement(l,{className:"feed-item__text__heading"},i(e)),t&&g.a.createElement(s,{className:"feed-item__text__description"},i(t))),o&&g.a.createElement(V.a,{theme:n||"cta",className:"feed-item__info__button",href:""+u},i(o))))))))}bi.propTypes={headingSize:h.a.oneOf(["h3","h4","h5"]),descriptionSize:h.a.oneOf(["h4","h5","h6","p"]),feedItems:h.a.arrayOf(h.a.shape({heading:h.a.string.isRequired,description:h.a.string.isRequired}).isRequired)};function hi({teamMembers:e}){const{t:t,tD:a}=Object(d.d)();return!e||e.length<1||!e[0].name?g.a.createElement(it.a,{message:t("You need to add some people."),prefix:"Personnel Grid"}):g.a.createElement("div",{className:"personnel-grid"},e.map(({name:e,role:n,image:o,alt:r,linkedin:i,twitter:l,tiktok:s,youtube:c,instagram:u},d)=>e&&g.a.createElement("div",{key:d,className:"personnel-person"},g.a.createElement("div",{className:"personnel-person__image-wrapper"},o?g.a.createElement(ya.a,{src:o,className:"personnel-person__image",alt:a(r)}):g.a.createElement("img",{src:"https://storage.googleapis.com/raisely-assets/default-profile-individual.svg",className:"personnel-person__image",alt:a("a placeholder image")})),g.a.createElement("div",{className:"personnel-person__text"},g.a.createElement("h4",{className:"personnel-person__text__name"},a(e)),n&&g.a.createElement("p",{className:"personnel-person__text__role"},a(n)),g.a.createElement(Mt,{align:"left",size:"icon",theme:"filled",targets:{linkedin:{iconName:"linkedin",title:t("LinkedIn"),url:i},twitter:{iconName:"twitter",title:t("X Account"),url:l},instagram:{iconName:"instagram",title:t("Instagram"),url:u},youtube:{iconName:"youtube",title:t("YouTube"),url:c},tiktok:{iconName:"tiktok",title:t("TikTok"),url:s}}})))))}hi.propTypes={alignment:h.a.oneOf(["left","center","right"]),teamMembers:h.a.arrayOf(h.a.shape({name:h.a.string.isRequired,role:h.a.string.isRequired,image:h.a.string.isRequired,alt:h.a.string,linkedin:h.a.string,twitter:h.a.string,tiktok:h.a.string,youtube:h.a.string,instagram:h.a.string}).isRequired)};var yi=a(89),vi=a.n(yi),_i=a(105),Ei=a(220),ki=a(255),wi=a(145);function Oi({type:e,align:t,text:a,frequency:n,...o}){var r;const{campaign:i}=useRaisely(),l=Object(ki.a)();if(null===(r=i.config.donation)||void 0===r||!r.isV3Enabled)return null;let s=n;const[c,u]=Ci(n),d=null==l?void 0:l.some(e=>e.count===c&&e.interval===u);if(l&&!d){const{count:e,interval:t}=l[0];s=`${1!==e?e:""}${t}`}return g.a.createElement("div",{className:"donation-button donation-button--"+t},"singleButton"===e?g.a.createElement(Si,N()({text:a,frequency:s},o)):g.a.createElement(Ti,N()({frequency:s},o)))}function Si({frequency:e,profile:t,theme:a,text:n}){const{global:o,integrations:r}=useRaisely(!0),{tF:i,t:l}=Object(d.d)(),s=Object(wi.a)();return g.a.createElement(p.Button,{type:"button",onClick:function(){const i=Ni(o,e,t);r.broadcast("donation.donateButtonClicked",{donateButtonType:"single",donateButtonText:n,donateButtonTheme:a,donateButtonInterval:i.interval,donateButtonIntervalCount:i.count,donateButtonProfileSetting:t,isDonationFormV3:!0}),s(i,0)},theme:a},i(n,l("Donate")))}function Ti({frequency:e,profile:t,theme:a}){const{global:n,integrations:o}=useRaisely(!0),r=Object(wi.a)(),i=Object(f.useMemo)(()=>Ni(n,e,t),[e,t,n]),l=Object(ki.a)(i.currency);return Object(f.useMemo)(()=>{var e;return Object(Ei.a)(n.campaign,i,n.user,null===(e=n.current)||void 0===e?void 0:e.profile,l)},[n,i,l]).map(({currencyAmount:e,currencyDisplayAmount:n})=>g.a.createElement(p.Button,{key:n,type:"button",onClick:()=>function(e){const n=vi()(i);n.amount=e,o.broadcast("donation.donateButtonClicked",{donateButtonType:"amounts",selectedAmount:e,selectedCurrency:n.currency,donateButtonTheme:a,donateButtonInterval:n.interval,donateButtonIntervalCount:n.count,donateButtonProfileSetting:t,isDonationFormV3:!0}),r(n,0)}(e),theme:a},n))}function Ni(e,t,a){const n={},[o,r]=Ci(t);return n.count=o,n.interval=r,n.currency=function(e){var t;return e.detectedCurrency||(null===(t=e.current.profile)||void 0===t?void 0:t.currency)||e.campaign.currency}(e),n.amount=Object(_i.b)(n.currency),n.profile=Object(_i.d)(e,a),n}function Ci(e){let t,a;const n=parseInt(e[0]);return isNaN(n)?(t=1,a=e):(t=n,a=e.slice(1)),[t,a]}function xi({campaigns:e,header:t,activityWord:a}){const[n,o]=Object(f.useState)(!1),[r,i]=Object(f.useState)([]),l=useRaisely(),{user:s}=l;Object(f.useEffect)(()=>{(async()=>{if(!s)return;if(s.mock){const e=(new Date).toISOString(),t=Array.from({length:4}).map(()=>{const t=Math.round(1e3+1e3*Math.random()),a=Math.round(1e3+1e3*Math.random());return{createdAt:e,total:t,exerciseTotal:a}});return void i(t)}o(!0);const t=(await u.a.profiles.getAll({query:{user:s.uuid,limit:20,type:"INDIVIDUAL",$avoidCampaign:!0,sort:"createdAt",order:"asc"},$avoidCampaign:!0})).body().data(),a=e.map(e=>e.uuid);i(t.data.filter(e=>a.includes(e.campaignUuid))),o(!1)})()},[s]);const c=e=>new Date(e.createdAt).getFullYear();return g.a.createElement("div",{className:"fundraising-history"},t,!r&&g.a.createElement("p",null,"One moment..."),r&&r.map((e,t)=>g.a.createElement(g.a.Fragment,{key:t},g.a.createElement("div",{className:"fundraising-history__raised"},g.a.createElement("strong",null,"Raised in ",c(e),":")," $",e.total/100),g.a.createElement("div",{className:"fundraising-history__activity"},g.a.createElement("strong",null,a," in ",c(e),":")," ",e.exerciseTotal/1e3,"kms"))))}Oi.propTypes={type:h.a.oneOf(["singleButton","amountButtons"]),align:h.a.oneOf(["left","center","right"]),frequency:h.a.oneOf(["ONCE","WEEK","2WEEK","4WEEK","MONTH","3MONTH","YEAR"]),profile:h.a.oneOf(["auto","campaign","user"]),theme:h.a.oneOf(["cta","primary","primary-hollow","secondary","inverse"]),text:h.a.string},xi.propTypes={campaigns:h.a.object.isRequired,header:h.a.node};var ji=a(164),Pi=a(327),Ai=a(169),Di=a(209);function Ri({updateStep:e,updateValues:t,step:a,challengeTitle:n,individualButtonTitle:o,individualButtonDescription:r,joinButtonTitle:i,joinButtonDescription:l,teamButtonTitle:s,teamButtonDescription:c}){const u=()=>e(a+1),d=(e,a=!1)=>()=>e===Be.h.group?t({profile:{type:Be.h.individual},teamProfile:{type:Be.h.group},settings:{searchGroup:!1,createTeam:!0}},u):t({profile:{type:e},teamProfile:null,settings:{searchGroup:a,createTeam:!1}},u);return g.a.createElement("div",{className:"signup-form__profile-type"},g.a.createElement("h3",null,n),g.a.createElement("p",null,"How would you like to participate in the campaign?"),g.a.createElement("div",{className:"signup-form__profile-options"},g.a.createElement(V.a,{className:"button--primary signup-form__button",onClick:d(Be.h.individual)},g.a.createElement("span",{className:"signup-form__button__title"},o||"Individual"),r&&r.length>0&&g.a.createElement("span",{className:"signup-form__button__description"},r)),g.a.createElement(V.a,{className:"button--primary signup-form__button",onClick:d(Be.h.individual,!0)},g.a.createElement("span",{className:"signup-form__button__title"},i||"Join a Team"),l&&l.length>0&&g.a.createElement("span",{className:"signup-form__button__description"},l)),g.a.createElement(V.a,{className:"button--primary signup-form__button",onClick:d(Be.h.group)},g.a.createElement("span",{className:"signup-form__button__title"},s||"Start a Team"),s&&s.length>0&&g.a.createElement("span",{className:"signup-form__button__description"},c))),g.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},g.a.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:t=>{t.preventDefault(),e(a-1)}},g.a.createElement(Xe.a,{name:"chevron_left",size:"small"}),g.a.createElement("span",null,"Back"))))}function Fi({updateStep:e,step:t,updateValues:a,global:n,values:o,api:r,profileTitle:i,profileButton:l="Continue",showTitleIcons:s,avoidDefaultNames:c,alphabeticalProfileSearch:u}){const d=Object(mo.b)("profile");Object(f.useEffect)(()=>{if(!c&&!o.profile.name&&d.length>0){const e=d.find(e=>"name"===e.id),t=e&&e.default&&e.default.length>0&&Object(G.r)(e.default,n)||Object(Ai.a)(o.user);a({profile:{name:t}})}},[]);const m=async i=>{try{i.path&&await Object(Da.a)({api:r,campaignUuid:n.campaign.uuid,name:i.name,path:i.path})}catch(e){return void console.error(e)}try{if(i.path&&o.teamProfile&&o.teamProfile.path===i.path)throw new Error("Path must be different than the provided team path")}catch(e){return void a({error:{message:"Path must be different than the provided team path"}})}a({error:null,profile:i},()=>e(t+1))},p=a=>{a.preventDefault(),e(t-1)},b=({onSubmitClick:e})=>g.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},g.a.createElement(V.a,{className:"signup-form__profile--next button--full",onClick:e,type:"submit"},l),g.a.createElement("br",null),g.a.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:p},g.a.createElement(Xe.a,{name:"chevron_left",size:"small"}),g.a.createElement("span",null,"Back"))),h=()=>o.settings.searchGroup||o.profile.parentUuid?o.profile.parentUuid?g.a.createElement(Ct.a,{api:r,heading:"You are joining:",uuid:o.profile.parentUuid,cancel:()=>a({profile:{parentUuid:null}})}):g.a.createElement("div",{className:"signup-form__profile-select"},g.a.createElement(xt.a,{api:r,global:n,alphabeticalProfileSearch:u,update:e=>a({profile:{parentUuid:e}}),customFilter:(e,t)=>!(n.campaign.config.maximumTeamSize&&n.campaign.config.maximumTeamSize<=e.value.memberCount)}),g.a.createElement(V.a,{className:"signup-form__profile-select__back",onClick:p},g.a.createElement(Xe.a,{name:"chevron_left",size:"small"}),g.a.createElement("span",null,"Back"))):null,y=()=>o.settings.searchGroup?o.profile.parentUuid?g.a.createElement(po.a,{values:o.profile,onChange:(...e)=>Object(G.o)(...e),fields:d,global:n,action:m,buttons:b}):null:g.a.createElement(po.a,{values:o.profile,onChange:(...e)=>Object(G.o)(...e),comparePathTo:o.teamProfile&&o.teamProfile.path,global:n,fields:d,action:m,buttons:b});return g.a.createElement("div",{className:"signup-form__profile"},g.a.createElement("h3",null,s&&g.a.createElement("i",{className:"material-icons signup-form__icon"},"person"),i),g.a.createElement(h,null),g.a.createElement(y,null))}function Ii({api:e,updateStep:t,step:a,updateValues:n,global:o,values:r,teamTitle:i,teamButton:l="Continue",showTitleIcons:s,avoidDefaultNames:c}){const[u,d]=Object(f.useState)(!1),m=Object(mo.b)("profile");Object(f.useEffect)(()=>{const e={currency:r.profile.currency};r.teamProfile.name||c||(e.name=Object(Ai.a)(r.user)+"'s team"),n({teamProfile:e}),d(!0)},[]);const p=e=>{e.preventDefault(),t(a-1)};return g.a.createElement("div",{className:"signup-form__team-profile"},g.a.createElement("h3",null,s&&g.a.createElement("i",{className:"material-icons signup-form__icon"},"group"),i),g.a.createElement(po.a,{key:u?1:0,values:r.teamProfile,onChange:(...e)=>Object(G.o)(...e),global:o,fields:(e=>{const t=e.map(e=>({...e})),a=t.find(e=>"name"===e.id);return a&&"Profile Name"===a.label&&(a.label="Team Name"),t})(m),action:async r=>{try{await Object(Da.a)({api:e,campaignUuid:o.campaign.uuid,name:r.name,path:r.path})}catch(e){return void console.error(e)}n({teamProfile:r},()=>t(a+1))},buttons:({onSubmitClick:e})=>g.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},g.a.createElement(V.a,{className:"signup-form__team-profile__next button--full",onClick:e,type:"submit"},l),g.a.createElement("br",null),g.a.createElement("button",{className:"signup-form__navigation__link",onClick:p},g.a.createElement(Xe.a,{name:"chevron_left",size:"small"}),g.a.createElement("span",null,"Back")))}))}class Mi extends g.a.Component{constructor(...e){super(...e),M()(this,"state",{loading:!1}),M()(this,"next",()=>this.props.updateStep(this.props.step+1)),M()(this,"back",()=>this.props.updateStep(this.props.step-1)),M()(this,"submit",async({data:e,processSCADonation:t,preferSCAMode:a})=>{const{registrationTaxRate:n}=this.props;if("Donation"===this.props.feeType?Object.assign(e,{items:[...e.items||[],{amount:e.amount,type:"DONATION",includeInTotals:!0,description:"Self-donation"}]}):Object.assign(e,{items:[...e.items||[],{amount:e.amount,type:"REGISTRATION",includeInTotals:!1,description:"Registration Fee",taxRate:n}]}),a){this.setState({loading:!0});const a={...e,...Oa()(this.props.values.user,["firstName","lastName","preferredName","fullName","email"]),forRegistration:this.props.values.profile.path||"_NO_PATH_SET"};Object($t.b)(this.props.global.campaign)&&(a.profile=Object(Ca.c)(this.props.global.campaign,{profile:this.props.values.profile,teamProfile:this.props.values.teamProfile}));const{api:n}=this.props;try{await Object(Da.a)({api:n,campaignUuid:this.props.global.campaign.uuid,name:this.props.values.profile.name,path:this.props.values.profile.path});const e=new Sa.a("donation",this.props.global.campaign),o=await e.awaitSolution();o&&e.reset();const r=(await n.donations.create({data:a,challengeSolution:o})).body().data();this.props.updateValues({donation:{uuid:r.data.uuid},loginToken:r.token,error:null});const i=await t(r);if(null!=i&&i.error)return this.props.updateValues({error:{message:i.error.message},loginToken:r.token},null,["donation"]),void this.props.integrations.broadcast("donation.error",i.error);this.next()}finally{this.setState({loading:!1})}}else this.props.updateValues({donation:e},this.next)}),M()(this,"customPaymentButton",e=>g.a.createElement(Pi.a,N()({},e,{loading:this.state.loading,error:this.props.values.error,updateValues:this.props.updateValues})))}render(){const{feeType:e,registrationAmount:t,registrationAmountField:a,paymentDonationTitle:n,paymentRegistrationTitle:o,global:r}=this.props,{loading:i}=this.state,l=this.props.global.campaign.providers.find(e=>"PAYPAL"!==e.providerType),s=Object(Ca.c)(this.props.global.campaign,{profile:this.props.values.profile,teamProfile:this.props.values.teamProfile});if("Registration"===e){l||this.props.updateValues({error:{message:"This campaign needs to have a Stripe account connected to complete signup."}},this.props.back);let e=t,n="Total";if(a){const t=v()(this.props.values,a);e=t?Object(G.a)(t.split(":")[0],r.campaign.currency):e,n=t&&t.split(":")[1]?t.split(":")[1]:n}return g.a.createElement(f.Fragment,null,i&&g.a.createElement("div",{className:"signup-form__loading"},g.a.createElement(po.d,null),g.a.createElement("p",null,"One moment...")),g.a.createElement("div",{className:"signup-form__field-container signup-form__payment signup-form__payment--registration",style:{display:i?"none":"block"}},g.a.createElement("h3",null,o),g.a.createElement("div",{className:"signup-form__payment-total"},g.a.createElement("span",{className:"signup-form__payment-total__label"},n,":"),g.a.createElement("span",{className:"signup-form__payment-total__amount"},Object(G.f)(e,r.campaign.currency))),g.a.createElement(ji.b,N()({},this.props,{version:"<=2",perks:!1,recurring:!1,existingCards:!1,user:this.props.values.user,registrationProfile:s,onTokenSuccess:this.submit,amount:e&&Number(e),startOnAmountScreen:!1,CustomDonateButton:this.customPaymentButton}))))}return l||this.props.updateValues({},this.props.next),g.a.createElement("div",{className:"signup-form__field-container signup-form__payment signup-form__payment--donation"},g.a.createElement("h3",null,n),g.a.createElement(ji.b,N()({},this.props,{version:"<=2",perks:!1,recurring:!1,existingCards:!1,user:this.props.values.user,registrationProfile:s,onTokenSuccess:this.submit,CustomDonateButton:this.customPaymentButton})),g.a.createElement("div",{className:"signup-form__nav signup-form__navigation"},g.a.createElement(V.a,{className:"signup-form__skip-payment",theme:"secondary",onClick:this.next,type:"submit"},"Skip this step and complete registration")))}}class Li extends f.Component{constructor(e){super(e),M()(this,"initChallenge",()=>{this.friendlyChallenge=new Sa.a("signupForm",this.props.global.campaign),this.friendlyChallenge.start(),this.friendlyChallenge.getPromise().catch(this.friendlyChallengeError)}),M()(this,"friendlyChallengeError",()=>{this.setState({error:"There is a problem loading payment processing. Please contact Raisely support"})}),M()(this,"resolveValues",()=>l()(this.state).set("profile.currency",this.state.profile.currency||this.props.global.detectedCurrency).value()),M()(this,"updateValues",(e,t)=>{if("function"==typeof e)return this.setState(e,t);const{state:a}=this,n={};return["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken","disableBack"].forEach(t=>{const o=null===e[t];(e[t]||o)&&(v()(a,"user.email")&&v()(e,"user.email")&&Object.keys(v()(e,"user",{})).includes("email")&&v()(a,"user.email")!==v()(e,"user.email")&&(n.loginToken=null),n[t]={...a[t],...e[t]},(o||"object"!=typeof e[t])&&(n[t]=e[t]))}),this.setState(n,t)});const t={},{defaultValue:a,fieldName:n}=Object(k.e)(e.global.campaign.config);n&&(t[n]=a);const{multiplier:o}=Object(k.f)(e.global.campaign.config),r=window.location.href.split("?")[1],i=r?X.a.parse(r):{};i.exerciseGoal&&(t.exerciseGoal=i.exerciseGoal*o,t.exerciseGoalTime=i.exerciseGoal*o),i.exerciseGoalTime&&(t.exerciseGoal=i.exerciseGoalTime*o,t.exerciseGoalTime=i.exerciseGoalTime*o),this.state={user:{},profile:t,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:!1,feeFixed:50,feePercent:.045},error:null},i.parentId&&this.fetchTeam(i.parentId)}componentWillUnmount(){this.destroyChallenge()}destroyChallenge(){this.friendlyChallenge&&(this.friendlyChallenge.destroy(),this.friendlyChallenge=null)}async fetchTeam(e){const t=(await this.props.api.profiles.get({id:e})).body().data().data;this.setState({profile:{...this.state.profile,parentUuid:t.uuid},parentProfile:t})}render(){const{props:e,state:t}=this,a=[];return e.enableExerciseGoal&&a.push(ir.a),a.push(rr.a),t.parentProfile&&t.parentProfile.uuid||(e.enableTeams&&a.push(Ri),this.state.settings.createTeam&&a.push(Ii)),a.push(Fi),"None"!==e.feeType&&a.push(Mi),a.push(Di.a),g.a.createElement(Nt.a,N()({name:"signup-form",promptOnLeave:!e.disablePrompt&&"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},e,{values:this.resolveValues(),updateValues:this.updateValues,onNavigate:e=>(this.props.integrations.broadcast("signup.stage",{stage:e,user:rn()(this.state.user,["password"]),profile:this.state.profile,donation:this.state.donation}),e>0&&!this.friendlyChallenge&&this.initChallenge(),e),steps:a,error:this.state.error,disableAnalytics:!0}))}}var Bi=a(142);function Ui({renderStep:e,...t}){const a=e||Hi;return g.a.createElement(vn,t,e=>g.a.createElement(a,N()({},e,{builtIns:{Form:Ea.e,Mobile:Lo,StepSelect:ka.a,NavBtns:xa.a,NoTickets:Uo,FundraiserThemeSelect:Ln,ExerciseGoalForm:ir.a,UserForm:rr.a,TicketSelectForm:so,TicketHolderForm:So,ProfileForm:Bi.b,SelfDonationForm:Do,GiftAidForm:Io,PaymentForm:tn,useSignupFormContext:ja.b}})))}function Hi(e){var t,a;const{step:n,updateStep:o,isFullscreen:r,values:i,updateValues:l,fundraiserThemesActive:s,ticketsEnabled:c,ticketTypes:u,currency:d}=Object(ja.b)(),{campaign:m}=useRaisely(),{enableExerciseGoal:p,enableDonation:f}=e,b=window.location.href.split("?")[1],h=b?X.a.parse(b):{},y={fundraiserTheme:s&&(!h.fundraiserTheme||!(null!==(t=m.config.fundraiserThemes)&&void 0!==t&&t.some(e=>e.path===h.fundraiserTheme))),exercise:p,user:!0,ticketSelect:c&&u.length,ticketHolder:i.showTicketHolder,profile:!0,donation:f,giftAid:(null===(a=m.config.donation)||void 0===a?void 0:a.giftAid)&&i.donationAmount&&"GBP"===d&&!i.hasActiveSwiftAidAuth,payment:!0},v=Object.keys(y).filter(e=>y[e]),_=v[n],E={...e,values:i,updateValues:l,step:n,updateStep:o,showTransitionBar:!0,error:i.error};return r?g.a.createElement(nn.a,{id:"modal-root"},g.a.createElement(Vi,{steps:v,currentStep:_,commonProps:E})):g.a.createElement(Vi,{steps:v,currentStep:_,commonProps:E})}function Vi({steps:e,currentStep:t,commonProps:a}){const{isFullscreen:n,globalFormState:o,values:r,ticketsEnabled:i,ticketPurchaseRequired:l,ticketTypes:s,isSoldOut:c}=Object(ja.b)(),{componentHasMounted:u,disablePrompt:d,isLoading:m}=o;if(m)return g.a.createElement(Ea.e.Shell,{className:"signup-form--v3",numSteps:e.length,currentStep:t},g.a.createElement(Ea.e.LoadingSkeleton,null));if(i&&l&&(!s.length||c))return g.a.createElement(Ea.e.Shell,{className:"signup-form--v3",numSteps:e.length,currentStep:t},g.a.createElement(Uo,{soldOut:c}));const p=u&&!d&&0!==e.indexOf(t)&&!(a.enableMobileFullscreen&&hn());return g.a.createElement(Ea.e,{className:"signup-form--v3"},g.a.createElement(Ea.e.Header,null,p&&g.a.createElement(an.a,{message:bn()}),n?g.a.createElement(Lo.Header,{numSteps:e.length}):g.a.createElement(ka.a,{numSteps:e.length})),r.error&&g.a.createElement(Ea.e.Error,null),r.popupMsg&&g.a.createElement(Ea.e.Popup,null),g.a.createElement(Ea.e.Body,{currentStep:t},"fundraiserTheme"===t&&g.a.createElement(Ln,{fundraiserThemesTitle:a.fundraiserThemesTitle,fundraiserThemesDescription:a.fundraiserThemesDescription,fundraiserActionText:a.fundraiserActionText,fundraiserSelectedActionText:a.fundraiserSelectedActionText}),"exercise"===t&&g.a.createElement(ir.a,a),"user"===t&&g.a.createElement(rr.a,a),"ticketSelect"===t&&g.a.createElement(so,{title:a.ticketSelectTitle,description:a.ticketSelectDescription,button:a.ticketSelectButton},g.a.createElement(so.Contents,null)),"ticketHolder"===t&&g.a.createElement(So,{title:a.ticketHolderTitle,button:a.ticketHolderButton},g.a.createElement(So.Contents,null)),"profile"===t&&g.a.createElement(Bi.b,a),"donation"===t&&g.a.createElement(Do,a),"giftAid"===t&&g.a.createElement(Io,a),"payment"===t&&g.a.createElement(tn,N()({},a,{steps:e}),g.a.createElement(tn.Contents,null))),n&&"payment"!==t&&g.a.createElement(Lo.Footer,{currentStep:t}))}Ui.propTypes={renderStep:h.a.func,initialState:h.a.object,initialStep:h.a.number,onStepChange:h.a.func,enableMobileFullscreen:h.a.bool,shouldFetchTeam:h.a.bool,onSubmit:h.a.func,onSubmitSuccess:h.a.func,onSubmitError:h.a.func,global:h.a.object,integrations:h.a.object,actions:h.a.object,disablePrompt:h.a.bool,fields:h.a.array,fundraiserThemesTitle:h.a.string,fundraiserThemesDescription:h.a.string,fundraiserActionText:h.a.string,fundraiserSelectedActionText:h.a.string,enableExerciseGoal:h.a.bool,exerciseTitle:h.a.string,exerciseDescription:h.a.string,exerciseGoals:h.a.array,accountTitle:h.a.string,enableFacebook:h.a.bool,passwordLength:h.a.number,accountButton:h.a.string,enableTickets:h.a.bool,disabledTicketTypes:h.a.array,ticketPurchaseRequired:h.a.bool,ticketSelectTitle:h.a.string,ticketSelectDescription:h.a.string,ticketSelectButton:h.a.string,ticketsSoldOutMessage:h.a.string,ticketsUnavailableMessage:h.a.string,showNoTicketsIcon:h.a.bool,ticketHolderTitle:h.a.string,ticketHolderButton:h.a.string,profileTitle:h.a.string,showTitleIcons:h.a.bool,profileLanguage:h.a.string,avoidDefaultNames:h.a.bool,joinButtonTitle:h.a.string,joinButtonDescription:h.a.string,enableTeams:h.a.bool,teamLanguage:h.a.string,teamButtonTitle:h.a.string,teamButtonDescription:h.a.string,alphabeticalProfileSearch:h.a.bool,completeButton:h.a.string,enableDonation:h.a.bool,paymentDonationTitle:h.a.string,donationButton:h.a.string,paymentTitle:h.a.string,paymentDescription:h.a.string,paymentButton:h.a.string};var $i=a(103);function qi({renderStep:e,disabledTicketTypes:t=[],...a}){const n=e||Gi,o={formValues:{},...a.initialState};return o.formValues.profile=null,g.a.createElement(vn,N()({},a,{enableTickets:!0,ticketPurchaseRequired:!0,shouldFetchTeam:!1,disabledTicketTypes:t,initialState:o,onSubmit:a.onSubmit?a.onSubmit:Zi}),e=>g.a.createElement(n,N()({},e,{builtIns:{Form:Ea.e,Mobile:Lo,StepSelect:ka.a,NavBtns:xa.a,NoTickets:Uo,UserForm:Yi,TicketSelectForm:so,TicketHolderForm:So,SelfDonationForm:Do,GiftAidForm:Io,PaymentForm:tn,ThankYouScreen:Wi,useSignupFormContext:ja.b}})))}function Gi(e){var t;const{step:a,updateStep:n,isFullscreen:o,values:r,updateValues:i,currency:l}=Object(ja.b)(),{campaign:s}=useRaisely(),c={ticketSelect:!0,ticketHolder:r.showTicketHolder,ticketBuyer:!0,donation:e.enableDonation,giftAid:(null===(t=s.config.donation)||void 0===t?void 0:t.giftAid)&&r.donationAmount&&"GBP"===l&&!r.hasActiveSwiftAidAuth,payment:!0,thankyou:!0},u=Object.keys(c).filter(e=>c[e]),d=u[a],m={...e,values:r,updateValues:i,step:a,updateStep:n,error:r.error};return o?g.a.createElement(nn.a,{id:"modal-root"},g.a.createElement(zi,{steps:u,currentStep:d,commonProps:m})):g.a.createElement(zi,{steps:u,currentStep:d,commonProps:m})}function zi({steps:e,currentStep:t,commonProps:a}){const{isFullscreen:n,globalFormState:o,values:r,ticketTypes:i,isSoldOut:l}=Object(ja.b)(),{t:s,tF:c}=Object(d.d)(),{componentHasMounted:u,disablePrompt:m,isLoading:p}=o,f=e.length-1;if(p)return g.a.createElement(Ea.e.Shell,{className:"signup-form--v3",numSteps:f,currentStep:t},g.a.createElement(Ea.e.LoadingSkeleton,null));if(!i.length||l)return g.a.createElement(Ea.e.Shell,{className:"signup-form--v3",numSteps:f,currentStep:t},g.a.createElement(Uo,{soldOut:l}));const b=u&&!m&&"ticketSelect"!==t&&!(a.enableMobileFullscreen&&hn());return g.a.createElement(Ea.e,{className:"signup-form--v3"},g.a.createElement(Ea.e.Header,null,b&&g.a.createElement(an.a,{message:bn()}),n?g.a.createElement(Lo.Header,{numSteps:f}):g.a.createElement(ka.a,{numSteps:f})),r.error&&g.a.createElement(Ea.e.Error,null),r.popupMsg&&g.a.createElement(Ea.e.Popup,null),g.a.createElement(Ea.e.Body,{currentStep:t},"ticketSelect"===t&&g.a.createElement(so,{title:a.ticketSelectTitle,description:a.ticketSelectDescription,button:a.ticketSelectButton,required:a.ticketPurchaseRequired},g.a.createElement(so.Contents,null)),"ticketHolder"===t&&g.a.createElement(So,{title:a.ticketHolderTitle,button:a.ticketHolderButton},g.a.createElement(So.Contents,null)),"ticketBuyer"===t&&g.a.createElement(Yi,a),"donation"===t&&g.a.createElement(Do,a),"giftAid"===t&&g.a.createElement(Io,a),"payment"===t&&g.a.createElement(tn,N()({},a,{steps:e,noPaymentButton:c(a.noPaymentButton,s("Complete order"))}),g.a.createElement(tn.Contents,null)),"thankyou"===t&&g.a.createElement(Wi,a)),n&&"payment"!==t&&"thankyou"!==t&&g.a.createElement(Lo.Footer,{currentStep:t}))}function Yi({step:e,updateStep:t,values:a,updateValues:n,userFormTitle:o,userFormButton:r}){const i=useRaisely();Object(Pa.a)({form:"ticket",stage:"user",data:{user:a.user}});const l=i.customFields.user.filter(e=>!(e.core&&"anonymous"===e.id));let s=a.user;if(uo()(s)){const e=l.map(e=>e.id);s=Oa()(i.user,e)}return g.a.createElement("div",{className:"signup-form__field-container"},g.a.createElement(Ea.e.Title,null,o),g.a.createElement($i.a,{global:i,values:s,fields:l,lockedFields:i.user?["email"]:[],action:function(a){n({user:a},()=>t(e+1))},buttons:({onSubmitClick:e})=>g.a.createElement(xa.a,null,g.a.createElement(xa.a.NextBtn,{onClick:e},r),g.a.createElement("br",null),g.a.createElement(xa.a.BackBtn,null))}))}function Wi({thankYouTitle:e,thankYouMessage:t,shareMessage:a,customShareUrl:n}){const o=useRaisely(),{tD:r}=Object(d.d)();return g.a.createElement("div",{className:"signup-form__thankyou signup-form__field-container"},g.a.createElement(Ea.e.Title,null,r(e)),g.a.createElement("p",null,r(t)),g.a.createElement("br",null),g.a.createElement("p",{className:"donation-form__social-copy"},a),g.a.createElement(Ke.a,{networks:"campaign",theme:"filled",size:"medium",url:n||"current",global:o}))}async function Zi({stateUtils:e,helpers:t,global:a,integrations:n}){const{t:o}=Object(d.a)(),{values:r,updateValues:i,step:l,updateStep:s,isSubmitting:c,setIsSubmitting:m,setGlobalFormState:p}=e;if(c)return;i(e=>({...e,error:null})),m(!0),p(e=>({...e,disablePrompt:!0}));const f=t.sanitizePayload(r);try{const e=t.fetchChallenge(),n=(await u.a.campaigns.register({id:a.campaign.uuid,data:{data:f,challengeSolution:e}})).body().data();t.broadcastIntegrations({payload:f,registrationData:n}),m(!1),i({},()=>s(l+1),["donation"])}catch(e){var g;console.error(e),m(!1),i({error:{message:null!==(g=e.response)&&void 0!==g&&g.data?e.response.data.errors[0].message:o("We couldn't register you due to an unexpected error. Please try again.")}},()=>{},["donation"]),f.donation&&n.broadcast("donation.error",e)}}qi.propTypes={initialState:h.a.object,enableMobileFullscreen:h.a.bool,global:h.a.object,integrations:h.a.object,actions:h.a.object,disablePrompt:h.a.bool,disabledTicketTypes:h.a.array,ticketSelectTitle:h.a.string,ticketSelectDescription:h.a.string,ticketSelectButton:h.a.string,ticketHolderTitle:h.a.string,ticketHolderButton:h.a.string,ticketsSoldOutMessage:h.a.string,ticketsUnavailableMessage:h.a.string,showNoTicketsIcon:h.a.bool,userFormTitle:h.a.string,userFormButton:h.a.string,enableDonation:h.a.bool,paymentDonationTitle:h.a.string,donationButton:h.a.string,paymentTitle:h.a.string,paymentButton:h.a.string,thankYouTitle:h.a.string,thankYouMessage:h.a.string,shareMessage:h.a.string,customShareUrl:h.a.string};const Ki=S,Ji=ie;var Qi=a(25);const Xi=Object(Qi.b)(),{render:el}=Xi;class tl extends f.Component{constructor(...e){super(...e),M()(this,"resolveProfileUuid",e=>{const{global:t}=this.props,a=v()(t,"campaign.profile.uuid",null);return a&&"campaign"===e?a:e})}render(){const{global:e,getProfile:t,actions:a}=this.props,{t:n}=Object(d.a)(),{direction:o,limit:r,sort:i,order:l,profile:s,heading:c,disableThankYou:u,showHighlight:m}=this.props.getValues(),p=t("profile"),f="user-donations"===s,b=!u,h=!u,y=e.query.donation;return g.a.createElement(Se,{header:g.a.createElement(el,N()({},c,{campaign:e.campaign})),isUser:f,profile:p,user:e.user,currentProfile:e.current.profile,pollingHash:this.props.pollingHash,limit:parseInt(r,10),sort:i,order:l,direction:o,campaign:e.campaign,showAsLoading:e.loadingCurrent||!e.userAuthAttempted,displayThanks:b,displayThanksForm:h,onThanksSuccess:()=>{a.addSuccessMessage(n("Successfully thanked donor!")),a.triggerPageStreamRefetch()},onThanksFailure:e=>{a.addErrorMessage(e)},highlight:y,showHighlight:m})}}M()(tl,"description","Create a live feed of recent donations"),M()(tl,"group","embed"),M()(tl,"icon","list_alt"),M()(tl,"internalEditable",{...Xi.internalEditable,profile:{label:"Show donations to:",type:"profile",additional:{includeUser:!0}},direction:{label:"Display",type:"select",options:[{value:"vertical",label:"Vertically"},{value:"horizontal",label:"Horizontally"},{value:"grid",label:"Grid"}]},limit:{label:"Show",type:"number"},sort:{label:"Sort By",type:"select",options:[{value:"date",label:"Date"},{value:"amount",label:"Amount"}]},order:{label:"Order",type:"select",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]},disableThankYou:{label:"Disable thank you messages",type:"boolean",help:"Switching this value on will prevent profile owners from using this stream to make thank yous"},showHighlight:{label:"Show highlighted donation",type:"boolean",help:"Switching this value on will highlight the top donor of a stream at the top of the display area"}}),M()(tl,"schema",{data:{customComponent:"RaiselyDonationStream",editable:{...Xi.editable,profile:{value:"current"},direction:{value:"vertical"},limit:{value:5},sort:{value:"date"},order:{value:"desc"},disableThankYou:{value:!1},showHighlight:{value:!1}}}}),tl.displayName="RaiselyDonationStream",Object(po.f)(tl);const al=Object(Qi.b)(),{render:nl}=al;function ol(e){const{global:t,actions:a}=useRaisely(!0),{limit:n,sort:o,order:r,heading:i,disableThankYou:l}=e.getValues(),s=!l,c=!l,u=t.query.donation;return g.a.createElement(Pe,{header:g.a.createElement(nl,N()({},i,{campaign:t.campaign})),user:t.user,limit:parseInt(n,10),sort:o,order:r,campaign:t.campaign,showAsLoading:t.loadingCurrent||!t.userAuthAttempted,displayThanks:s,displayThanksForm:c,onThanksSuccess:()=>{a.addSuccessMessage("Successfully thanked donor!"),a.triggerPageStreamRefetch()},onThanksFailure:e=>{a.addErrorMessage(e)},donationToThank:u})}ol.description="Create a live feed of recent donations for a user dashboard",ol.group="embed",ol.icon="list_alt",ol.internalEditable={limit:{label:"Show",type:"number"},sort:{label:"Sort By",type:"select",options:[{value:"date",label:"Date"},{value:"amount",label:"Amount"}]},order:{label:"Order",type:"select",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]},disableThankYou:{label:"Disable thank you messages",type:"boolean",help:"Switching this value on will prevent profile owners from using this stream to make thank yous"}},ol.schema={data:{customComponent:"RaiselyDashboardDonationStream",editable:{...al.editable,limit:{value:5},sort:{value:"createdAt"},order:{value:"desc"},disableThankYou:{value:!1}}}},ol.displayName="RaiselyDashboardDonationStream",Object(po.f)(ol);const rl=Object(Qi.b)(),{render:il}=rl;class ll extends f.Component{render(){const{heading:e}=this.props.getValues();return g.a.createElement(Le,N()({showAsLoading:!this.props.global.userAuthAttempted},this.props,{header:g.a.createElement(il,N()({},e,{campaign:this.props.global.campaign}))}))}}M()(ll,"description","View a user's regular donations"),M()(ll,"group","embed"),M()(ll,"icon","list_alt"),M()(ll,"internalEditable",{...rl.internalEditable}),M()(ll,"schema",{data:{customComponent:"RaiselyRegularDonationFeed",editable:{...rl.editable}}}),ll.displayName="RaiselyRegularDonationFeed",Object(po.f)(ll);const sl=Object(Qi.b)(),{render:cl}=sl;class ul extends f.Component{constructor(...e){super(...e),M()(this,"resolveLeaderboardTarget",e=>{var t,a,n,o,r,i,l,s,c,u,d,m,p,f;const{global:g}=this.props,{uuid:b,path:h}=g.campaign;switch(e){case"campaign":return{campaignUuid:b,profileUuid:null};case"user":return{campaignUuid:b,userUuid:g.user&&g.user.uuid};case"current":return{campaignUuid:b,profileUuid:g.current.profile&&g.current.profile.uuid};case"currentUser":return{campaignUuid:b,userUuid:g.current.profile&&g.current.profile.user.uuid};case"team":return{campaignUuid:b,profileUuid:(null===(t=g.current.profile)||void 0===t||null===(a=t.teamProfile)||void 0===a?void 0:a.uuid)||(null===(n=g.user)||void 0===n||null===(o=n.teamProfile)||void 0===o?void 0:o.uuid)||(null===(r=g.user)||void 0===r||null===(i=r.profile)||void 0===i||null===(l=i.teamProfile)||void 0===l?void 0:l.uuid)};case"organisation":return{campaignUuid:b,profileUuid:(null===(s=g.current.profile)||void 0===s||null===(c=s.organisationProfile)||void 0===c?void 0:c.uuid)||(null===(u=g.user)||void 0===u||null===(d=u.organisationProfile)||void 0===d?void 0:d.uuid)||(null===(m=g.user)||void 0===m||null===(p=m.profile)||void 0===p||null===(f=p.organisationProfile)||void 0===f?void 0:f.uuid)};default:return{}}}),M()(this,"determineRankProps",()=>{const{rank:e,sort:t}=this.props.getValues();if(e){if("total"===t)return{rank:!0,showRank:!0};if("exerciseTotal.total"===t)return{rankExerciseTotal:!0,showRank:!0};if("exerciseTotal.totalTime"===t)return{rankExerciseTotalTime:!0,showRank:!0};if("donors"===t)return{rankDonors:!0,showRank:!0};if("exerciseTotal.activityTotal"===t)return{rankActivityTotal:!0,showRank:!0}}return{}})}render(){var e,t;const{global:a}=this.props,{defaultProfileUrl:n}=a.campaign.config.theme,{t:o}=Object(d.a)(),{filter:r,limit:i,sort:l,order:s,type:c,heading:u,displaySource:m,profile:p}=this.props.getValues();if(!a.campaign.mock&&"user"===p&&!a.user)return null;const{campaignUuid:f,profileUuid:b,userUuid:h}=this.resolveLeaderboardTarget(p);if("team"===p&&!b){const{profiles:e}=a.campaign.config,t=Object(Be.d)(Be.h.group,e);return g.a.createElement("div",{className:"profilelist profilelist--no-results"},g.a.createElement("p",null,o("You are not currently part of [[aTeam]]",{aTeam:t})))}if("organisation"===p&&!b){const{profiles:e}=a.campaign.config,t=Object(Be.d)(Be.h.organisation,e);return g.a.createElement("div",{className:"profilelist profilelist--no-results"},g.a.createElement("p",null,o("You are not currently part of [[anOrganisation]]",{anOrganisation:t})))}return b||f||h?g.a.createElement(We,N()({header:g.a.createElement(cl,N()({},u,{campaign:a.campaign}))},this.determineRankProps(),{filter:r,limit:parseInt(i,10),sort:l,order:s,type:c,defaultImage:n,campaignUuid:f,profileUuid:b,userUuid:h,displaySource:m,mock:a.campaign&&a.campaign.mock,subtree:["organisation","team"].includes(p)||"current"===p&&"ORGANISATION"===(null==a||null===(e=a.current)||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.type),showAsLoading:a.loadingCurrent})):g.a.createElement(po.c.Full,null)}}M()(ul,"description","A leaderboard of fundraising profiles across your campaign"),M()(ul,"icon","dns"),M()(ul,"group","embed"),M()(ul,"internalEditable",{...sl.internalEditable,profile:{label:"Show profiles from:",type:"select",options:[{value:"campaign",label:"Whole campaign"},{value:"current",label:"Current profile",onlyProvider:["profile"]},{value:"currentUser",label:"Current profile owner",onlyProvider:["profile"]},{value:"user",label:"Owned by user"},{value:"team",label:"The current profile's team"},{value:"organisation",label:"The current profile's organisation"}]},type:{label:"Profile Type",type:"select",options:[{value:"",label:"Any"},{value:Be.h.individual,label:"Individual Fundraisers"},{value:Be.h.group,label:"Team Fundraisers"},{value:Be.h.organisation,label:"Organisation Fundraisers"}]},limit:{label:"Limit",type:"number"},sort:{label:"Sort By",type:"select",options:[{value:"name",label:"Fundraiser Name"},{value:"createdAt",label:"Signup Date"},{value:"total",label:"Total Raised"},{value:"donors",label:"Number of donors"},{value:"exerciseTotal.activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}]},order:{label:"Order",type:"select",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]},rank:{label:"Show Ranking",type:"boolean",help:"Enables displaying profile rank when <b>total</b>, <b>exerciseTotal</b>, or <b>exerciseTotalTime</b> is selected as a sortable type"},displaySource:{label:"Display Source",type:"select",options:[{value:"total",label:"Total"},{value:"activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}],help:"Determines the type of total to display (in progress bars and amounts)"},filter:{label:"Filter",group:"filters",options:["profile"],type:"filter",additional:{hidePrivateFields:!0}}}),M()(ul,"schema",{data:{customComponent:"RaiselyLeaderboard",editable:{profile:{value:"campaign"},type:{value:Be.h.individual},limit:{value:5},sort:{value:"total"},order:{value:"desc"},rank:{value:!1},filter:{value:[]}}}}),ul.displayName="RaiselyLeaderboard",Object(po.f)(ul);class dl extends f.Component{constructor(...e){super(...e),M()(this,"determineRankProps",()=>{const{rank:e,sort:t}=this.props.getValues();if(e){if("total"===t)return{rank:!0,showRank:!0};if("exerciseTotal.total"===t)return{rankExerciseTotal:!0,showRank:!0};if("exerciseTotal.totalTime"===t)return{rankExerciseTotalTime:!0,showRank:!0};if("donors"===t)return{rankDonors:!0,showRank:!0};if("exerciseTotal.activityTotal"===t)return{rankActivityTotal:!0,showRank:!0}}return{}})}render(){var e;const{global:t}=this.props,{uuid:a}=t.campaign,{defaultProfileUrl:n}=t.campaign.config.theme,{filter:o,limit:r,sort:i,order:l,type:s,searchLabel:c,hideInitialResults:u,displaySource:d,onlyShowChildren:m}=this.props.getValues();let p=null;const f=null===(e=t.current.profile)||void 0===e?void 0:e.type;return m&&[Be.h.organisation,Be.h.group].includes(f)&&(p=t.current.profile.uuid),g.a.createElement(At,N()({},this.determineRankProps(),{filter:o,limit:parseInt(r,10),sort:i,order:l,type:s,searchLabel:c,defaultImage:n||null,campaignUuid:a,hideInitialResults:u,displaySource:d,user:t.user,mock:t.campaign&&t.campaign.mock,profileUuid:p}))}}function ml({afterLogin:e}){const{global:t,actions:a}=useRaisely(!0),{t:n}=Object(d.a)(),{campaign:o}=t;return g.a.createElement("div",{className:"raisely-login__facebook"},g.a.createElement(et.a,{scope:["email"],onAuth:async t=>{try{const a=(await u.a.users.facebookLogin({data:{facebook_access_token:t.accessToken,organisationUuid:o.organisationUuid}})).body().data().data;e(a)}catch(e){a.addErrorMessage(e)}},intent:"login"}))}M()(dl,"description","A component for finding fundraising profiles across your campaign"),M()(dl,"group","embed"),M()(dl,"icon","person_search"),M()(dl,"internalEditable",{searchLabel:{label:"Search Label",type:"text"},type:{label:"Profile Type",type:"select",options:[{value:"",label:"Any"},{value:Be.h.individual,label:"Individual Fundraisers"},{value:Be.h.group,label:"Team Fundraisers"},{value:Be.h.organisation,label:"Organisation Fundraisers"}]},limit:{label:"Limit",type:"number"},sort:{label:"Sort By",type:"select",options:[{value:"name",label:"Fundraiser Name"},{value:"createdAt",label:"Signup Date"},{value:"total",label:"Total Raised"},{value:"donors",label:"Number of donors"},{value:"exerciseTotal.activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}]},order:{label:"Order",type:"select",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]},rank:{label:"Show Ranking",type:"boolean",help:"Enables displaying profile rank when <b>total</b>, <b>exerciseTotal</b>, or <b>exerciseTotalTime</b> is selected as a sortable type"},displaySource:{label:"Display Source",type:"select",options:[{value:"total",label:"Total"},{value:"activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}],help:"Determines the type of total to display (in progress bars and amounts)"},filter:{label:"Filter",group:"filters",options:["profile"],type:"filter"},hideInitialResults:{label:"Hide results until user types",type:"boolean"},onlyShowChildren:{label:"Only show child profiles",type:"boolean"}}),M()(dl,"schema",{data:{customComponent:"RaiselyProfileSearch",editable:{searchLabel:{value:"Search for individuals and teams:"},type:{value:Be.h.individual},limit:{value:5},sort:{value:"name"},order:{value:"asc"},filter:{value:[]},rank:{value:!1},hideInitialResults:{value:!1},onlyShowChildren:{value:!0}}}}),dl.displayName="RaiselyProfileSearch",Object(po.f)(dl);class pl extends f.Component{constructor(...e){super(...e),M()(this,"state",{values:{email:"",password:""}}),M()(this,"fields",[{active:!0,core:!0,id:"username",label:"Email",locked:!1,private:!1,required:!0,type:"email"},{active:!0,core:!0,id:"password",label:"Password",locked:!1,private:!1,required:!0,type:"password",loginMode:!0,minLength:1}]),M()(this,"attemptUserLogin",async e=>(await u.a.users.login({data:{...e,organisationUuid:this.props.global.campaign.organisationUuid}})).body().data().data),M()(this,"doesCampaignHaveDashboard",()=>this.props.global.routes.some(e=>"dashboard"===e.name)),M()(this,"doesCampaignHaveSingleAccount",()=>this.props.global.routes.some(e=>"account"===e.name)),M()(this,"afterLogin",async e=>{const{global:t,actions:a,integrations:n}=this.props,o=this.doesCampaignHaveDashboard(),r=this.doesCampaignHaveSingleAccount(),i=window.location.href.split("?")[1],l=i?X.a.parse(i):{};n.broadcast("user.login",{method:"email",user:e});const{profile:s,profiles:c,collectiveProfiles:u,teamProfile:d,organisationProfile:m}=await Object(Be.g)(t,o);Object.assign(e,{profile:s,profiles:c,collectiveProfiles:u,teamProfile:d,organisationProfile:m}),n.broadcast("user.authenticated",{user:e,profiles:c,profile:s}),a.addUser(e),l.to?a.redirect(l.to):a.redirect(s&&o?"/dashboard":r?"/account":"/account/details")}),M()(this,"action",async(e,t)=>{const{actions:a,requestAdminToken:n}=this.props;n&&(e.requestAdminToken=!0);try{const t=await this.attemptUserLogin(e);this.afterLogin(t)}catch(e){t.setSubmitting(!1),a.addErrorMessage(e)}})}render(){const{global:e,integrations:t}=this.props,{t:a}=Object(d.a)(),{values:n}=this.state,o=v()(e.campaign,"config.site.facebook.active",!1),r=v()(e.campaign,"config.saml.onClient",!1);return g.a.createElement("div",{className:"raisely-login"},o&&g.a.createElement(ml,{actions:this.props.actions,afterLogin:this.afterLogin,forceShow:!this.props.readOnly,global:e}),r&&g.a.createElement("div",{className:"raisely-login__saml"},g.a.createElement(fi.a,{isSignUp:!1})),(o||r)&&g.a.createElement("div",{className:"raisely-login__alternate"},g.a.createElement("p",null,a("or use an email and password"),g.a.createElement("br",null))),g.a.createElement(mo.a,{global:e,fields:this.fields},e=>g.a.createElement(po.a,{fields:e,values:n,actionText:a("Login"),action:this.action})),g.a.createElement("p",{className:"raisely-login__reset"},g.a.createElement(_r.a,{to:"/reset"},a("Forgot your password?"))))}}M()(pl,"description","Allows users to log in to their account"),M()(pl,"icon","login"),M()(pl,"group","form"),M()(pl,"restrictions",{page:["login"]}),M()(pl,"internalEditable",{}),M()(pl,"schema",{data:{customComponent:"RaiselyLoginForm",editable:{}}}),pl.displayName="RaiselyLoginForm",Object(po.f)(pl);class fl extends f.Component{constructor(...e){super(...e),M()(this,"state",{values:this.props.getFormValues({fields:"profile",from:this.props.profile||"current"})}),M()(this,"action",async(e,t)=>{const{integrations:a,actions:n}=this.props,{t:o}=Object(d.a)();try{const r=this.props.processFormData(e),i=this.props.profile||"current";await this.props.api.profiles.update({id:this.props.global[i].profile.uuid,data:{data:r,partial:!0}});const l=await n.fetchAndUpdateUser();n.addMessage(o("Profile updated successfully")),a.broadcast("profile.updated",l),t.setSubmitting(!1),this.props.history.push("/dashboard")}catch(e){t.setSubmitting(!1),n.addErrorMessage(e)}})}componentDidUpdate(e){this.props.profile||!this.props.global.current.profile||e.global.current.profile||this.setState({values:this.props.getFormValues({fields:"profile",from:this.props.profile||"current"})})}render(){const{global:e}=this.props,{values:t}=this.state,{t:a}=Object(d.a)(),n=e.customFields.profile.filter(e=>!["path"].includes(e.id));return g.a.createElement("div",{className:"raisely-profile-form"},g.a.createElement(po.a,{fields:n,values:t,global:e,action:this.action,promptOnLeave:a("Leaving this page will require you to re-enter your information. Are you sure you want to leave?")}))}}M()(fl,"description","The edit form for a profile"),M()(fl,"group","form"),M()(fl,"icon","settings"),M()(fl,"internalEditable",{profile:{label:"Profile to edit:",type:"profile"}}),M()(fl,"schema",{data:{customComponent:"RaiselyEditProfileForm",editable:{profile:{value:"current"}}}}),fl.displayName="RaiselyEditProfileForm",Object(po.f)(fl);class gl extends f.Component{constructor(...e){super(...e),M()(this,"state",{values:{currency:null}}),M()(this,"resolveParentUuid",()=>{const{global:e}=this.props,{parentId:t}=X.a.parse(window.location.href.split("?")[1]);return t||e.campaign.profile.uuid}),M()(this,"createProfile",async(e,t)=>{const a=this.resolveParentUuid(e),n=l()(t).set("type",e),o=await this.props.api.profiles.members.create({id:a,data:{join:"group"===e,data:n.value()}});await this.props.actions.fetchAndUpdateUser();const{data:r}=o.body().data();this.props.integrations.broadcast("profile.created",{profile:r})}),M()(this,"resolveProfileType",e=>{if("auto"===e){const e=(""+this.props.match.params.type).toLowerCase();return["individual","group"].includes(e)?e:null}return e}),M()(this,"action",async(e,t)=>{const{profile:a}=this.props.getValues(),n=this.resolveProfileType(a);try{await this.createProfile(n,e,t),this.props.actions.redirect("/dashboard")}catch(e){t.setSubmitting(!1),this.props.actions.addErrorMessage(e)}}),M()(this,"modifyFieldNames",e=>{const t=e.find(e=>"name"===e.id);if(!t)return e;const a=this.resolveProfileType("auto");return a&&"group"===a.toLowerCase()&&"Profile Name"===t.label&&(t.label="Team Name"),e}),M()(this,"resolveValues",e=>l()(this.state.values).set("type",e||"individual").set("currency",this.state.values.currency||this.props.global.detectedCurrency).value())}render(){const{global:e}=this.props,t=this.resolveProfileType("auto"),a="group"===this.props.getValues().profile&&e.customFields.teamProfile?"teamProfile":"profile";return g.a.createElement("div",{className:"profile-form profile-form--type-"+(t?t.toLowerCase():"individual")},g.a.createElement(mo.a,{global:e,name:a},a=>g.a.createElement(po.a,{global:e,unlocked:!0,onChange:(...e)=>Object(G.o)(...e),fields:this.modifyFieldNames(a),values:this.resolveValues(t),action:this.action})))}}M()(gl,"description","A form to create a new profile or team"),M()(gl,"icon","person_add"),M()(gl,"restrictions",{page:["createProfile"]}),M()(gl,"internalEditable",{profile:{label:"Type of Profile",type:"select",options:[{value:"auto",label:"Automatic"},{value:"individual",label:"Individual"},{value:"group",label:"Team"}]}}),M()(gl,"schema",{data:{customComponent:"RaiselyCreateProfileForm",editable:{profile:{value:"auto"}}}}),gl.displayName="RaiselyCreateProfileForm",Object(po.f)(gl);var bl=a(42);class hl extends f.Component{constructor(...e){super(...e),M()(this,"resolveProfileTypeFromPath",()=>{const e=(""+this.props.match.params.type).toLowerCase();return["individual","group"].includes(e)?e:null}),M()(this,"generateName",e=>{const t=this.resolveProfileTypeFromPath()||"individual";return"individual"===t?e.memberName:"group"===t?e.groupName:""}),M()(this,"generateStylesFromNode",e=>({color:Object(bl.a)(e.color,this.props.global.campaign),textAlign:e.align}))}render(){const e=this.props.getValues(),t="h"+e.level,a=this.generateStylesFromNode(e);return g.a.createElement(t,{style:a},e.prefix||"",this.generateName(e),e.postfix||"")}}M()(hl,"description","Heading specific to the profile create page"),M()(hl,"restrictions",{page:["createProfile"]}),M()(hl,"internalEditable",{align:{label:"Alignment",type:"select",options:["left","center","right"]},level:{label:"Size",type:"heading-size"},color:{label:"Color",type:"color"},prefix:{label:"Prefix",type:"text"},postFix:{label:"Postfix",type:"text"},groupName:{label:"Group Name",type:"text"},memberName:{label:"Member Name",type:"text"}}),M()(hl,"schema",{data:{customComponent:"RaiselyCreateProfileAutoHeading",editable:{align:{value:"center"},level:{value:1},color:{value:null},prefix:{value:"Create a Fundraising "},postfix:{value:""},groupName:{value:"Group"},memberName:{value:"Individual"}}}}),hl.displayName="RaiselyCreateProfileAutoHeading",Object(po.f)(hl);class yl extends g.a.Component{render(){return g.a.createElement(Li,N()({},this.props.getValues(),this.props))}}M()(yl,"description","Allow fundraisers to sign up to your campaign"),M()(yl,"icon","contact_mail"),M()(yl,"disableBlockColorStyles",!0),M()(yl,"hide",!0),M()(yl,"internalEditable",{enableTeams:{label:"Enable teams",type:"boolean"},enableFacebook:{label:"Enable Facebook signup",type:"boolean"},accountTitle:{group:"headings",label:"Account Form Title",type:"text"},accountButton:{group:"buttons",label:"Account Form Button",type:"text"},challengeTitle:{group:"headings",label:"Challenge Form Title",type:"text"},showTitleIcons:{group:"headings",label:"Show Heading Icons",type:"boolean"},profileTitle:{group:"headings",label:"Individual Profile Form Title",type:"text"},profileButton:{group:"buttons",label:"Individual Profile Form Button",type:"text"},teamTitle:{group:"headings",label:"Team Profile Form Title",type:"text"},exerciseTitle:{group:"headings",label:"Exercise Goal Form Title",type:"text"},exerciseDescription:{group:"language",label:"Exercise Goal Description",type:"text"},teamButton:{group:"buttons",label:"Team Profile Form Button",type:"text"},paymentDonationTitle:{group:"headings",label:"Kickstart Fundraising Title",type:"text"},paymentRegistrationTitle:{group:"headings",label:"Registration Fee Title",type:"text"},paymentButton:{group:"buttons",label:"Payment Button",type:"text"},feeType:{group:"fees",label:"Fee Options",type:"select",options:[{value:"None",label:"No Fees"},{value:"Donation",label:"Self-Donation"},{value:"Registration",label:"Registration Fee"}]},registrationAmount:{group:"fees",label:"Registration Fee",type:"currency",value:50},registrationAmountField:{group:"fees",label:"Registration Fee Field",type:"text",value:"",help:"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field."},registrationTaxRate:{group:"fees",label:"Registration Tax Rate",type:"number",value:.1,help:"Enter a decimal amount to be used as a tax rate and to show a tax line item on your receipts"},individualButtonTitle:{group:"language",label:"Individual Button Title",type:"text"},individualButtonDescription:{group:"language",label:"Individual Button Description",type:"text"},joinButtonTitle:{group:"language",label:"Join Team Button Title",type:"text"},joinButtonDescription:{group:"language",label:"Join Team Button Description",type:"text"},teamButtonTitle:{group:"language",label:"Create Team Button Title",type:"text"},teamButtonDescription:{group:"language",label:"Create Team Button Description",type:"text"},passwordLength:{group:"advanced",label:"Minimum Password Length",type:"number"},avoidDefaultNames:{group:"advanced",label:"Disable Automatic Naming",type:"boolean",help:"Avoid generating profile and team names automatically"},alphabeticalProfileSearch:{group:"advanced",label:"Sort Teams Alphabetically",type:"boolean",help:"Order Team search results alphabetically instead of by total"},signupSettingInfo:{type:"block-comment",help:'You can edit the fields in this form in your <a target="_blank" href="../setup/signup">Signup Form Settings</a>.'},enableExerciseGoal:{label:"Enable exercise goal step",group:"exercise",type:"boolean",help:'You can set your activity types and units in <a target="_blank" href="../setup/activity">Activity Settings</a>.'},exerciseGoals:{label:"Exercise goals",type:"repeater",group:"exercise",deprecated:!0,options:[{id:"value",type:"number",label:"Goal Amount (km, hours or miles)",defaultValue:""},{id:"description",type:"text",label:"Goal Description",defaultValue:""}]},disablePrompt:{label:"Disable Prompt",help:"Disable the message that pops up when leaving the form unfinished",type:"boolean",group:"advanced"}}),M()(yl,"schema",{data:{customComponent:"RaiselySignupForm",editable:{enableTeams:{value:!0},enableFacebook:{value:!0},enableExerciseGoal:{value:!1},accountTitle:{value:"Your Account"},challengeTitle:{value:"Your Challenge"},showTitleIcons:{value:!0},profileTitle:{value:"Your Personal Fundraising Page"},teamTitle:{value:"Your Team"},paymentDonationTitle:{value:"Kickstart your Fundraising"},paymentRegistrationTitle:{value:"Pay the Registration Fee"},accountButton:{value:"Continue"},profileButton:{value:"Create Personal Page"},teamButton:{value:"Create Team"},paymentButton:{value:"Complete my Registration"},feeType:{value:"Donation"},registrationAmount:{value:5e3},registrationTaxRate:{value:.1},passwordLength:{value:3},individualButtonTitle:{value:"Individual"},individualButtonDescription:{value:""},joinButtonTitle:{value:"Join a Team"},joinButtonDescription:{value:""},teamButtonTitle:{value:"Start a Team"},teamButtonDescription:{value:""},avoidDefaultNames:{value:!1},alphabeticalProfileSearch:{value:!1},exerciseTitle:{value:"Choose your activity goal"},exerciseDescription:{value:"Choose a goal from the list below"},disablePrompt:{value:!1}}}}),yl.displayName="RaiselySignupForm",yl.editorName="Sign Up Form (Legacy)",Object(po.f)(yl);class vl extends g.a.Component{render(){return g.a.createElement(Bi.c,N()({},this.props.getValues(),this.props))}}M()(vl,"description","Allow fundraisers to sign up to your campaign"),M()(vl,"group","form"),M()(vl,"icon","contact_mail"),M()(vl,"disableBlockColorStyles",!0),M()(vl,"hide",!0),M()(vl,"internalEditable",{enableTeams:{label:"Enable teams",type:"boolean"},enableFacebook:{label:"Enable Facebook signup",type:"boolean"},enableRego:{label:"Enable Registration Fee",type:"boolean"},enableDonation:{label:"Enable Self Donation",type:"boolean"},accountTitle:{group:"headings",label:"Account Form Title",type:"text"},accountButton:{group:"buttons",label:"Account Form Button",type:"text"},completeButton:{group:"buttons",label:"Complete Button",type:"text"},showTitleIcons:{group:"headings",label:"Show Heading Icons",type:"boolean"},profileTitle:{group:"headings",label:"Profile Form Title",type:"text"},paymentDonationTitle:{group:"headings",label:"Donation Title",type:"text"},paymentRegistrationTitle:{group:"headings",label:"Registration Fee Title",type:"text"},paymentButton:{group:"buttons",label:"Payment Button",type:"text",help:"You can use {amount} to dynamically insert the donation amount "},registrationAmount:{group:"fees",label:"Registration Fee",type:"currency",value:50},registrationAmountField:{group:"fees",label:"Registration Fee Field",type:"text",value:"",help:"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field."},registrationTaxRate:{group:"fees",label:"Registration Tax Rate",type:"number",value:.1,help:"Enter a decimal amount to be used as a tax rate and to show a tax line item on your receipts"},profileLanguage:{group:"language",label:"Profile Language",type:"text"},teamLanguage:{group:"language",label:"Team Language",type:"text"},joinButtonTitle:{group:"language",label:"Join a Team Button",type:"text"},joinButtonDescription:{group:"language",label:"Join a Team Description",type:"text"},teamButtonTitle:{group:"language",label:"Start a Team Button",type:"text"},teamButtonDescription:{group:"language",label:"Start a Team Description",type:"text"},exerciseTitle:{group:"headings",label:"Exercise Goal Form Title",type:"text"},exerciseDescription:{group:"language",label:"Exercise Goal Description",type:"text"},passwordLength:{group:"advanced",label:"Minimum Password Length",type:"number"},avoidDefaultNames:{group:"advanced",label:"Disable Automatic Naming",type:"boolean",help:"Avoid generating profile and team names automatically"},alphabeticalProfileSearch:{group:"advanced",label:"Sort Teams Alphabetically",type:"boolean",help:"Order Team search results alphabetically instead of by total"},enableExerciseGoal:{label:"Enable exercise goal step",group:"exercise",type:"boolean",help:'You can set your activity types and units in <a target="_blank" href="../setup/activity">Activity Settings</a>.'},exerciseGoals:{label:"Exercise goals",type:"repeater",group:"exercise",deprecated:!0,options:[{id:"value",type:"number",label:"Goal Amount (km, hours or miles)",defaultValue:""},{id:"description",type:"text",label:"Goal Description",defaultValue:""}]},disablePrompt:{label:"Disable Prompt",help:"Disable the message that pops up when leaving the form unfinished",type:"boolean",group:"advanced"}}),M()(vl,"schema",{data:{customComponent:"RaiselySignupFormV2",editable:{enableTeams:{value:!0},enableFacebook:{value:!0},enableRego:{value:!1},enableDonation:{value:!0},showTitleIcons:{value:!0},accountTitle:{value:"Your Account"},profileTitle:{value:"Your Profile"},paymentDonationTitle:{value:"Kickstart your Fundraising"},paymentRegistrationTitle:{value:"Pay the Registration Fee"},accountButton:{value:"Continue"},completeButton:{value:"Sign Up"},paymentButton:{value:"Donate {amount} and complete Sign Up"},registrationAmount:{value:5e3},registrationTaxRate:{value:.1},profileLanguage:{value:"Profile"},teamLanguage:{value:"Team"},passwordLength:{value:6},joinButtonDescription:{value:""},teamButtonDescription:{value:""},avoidDefaultNames:{value:!1},alphabeticalProfileSearch:{value:!1},enableExerciseGoal:{value:!1},exerciseTitle:{value:"Choose your activity goal"},exerciseDescription:{value:"Choose a goal from the list below"},disablePrompt:{value:!1}}}}),vl.displayName="RaiselySignupFormV2",vl.editorName="Sign Up Form",Object(po.f)(vl);class _l extends f.Component{render(){const{global:e,node:t}=this.props,{defaultProfileUrl:a}=this.props.global.campaign.config.theme,n=Object(po.g)(e,t,void 0,{strict:!0}),{detail:o,theme:r,size:i,showTotalBelow:l}=this.props.getValues(),s=!n;return g.a.createElement(Ue.a,{size:i,detail:o,theme:r,showTotalBelow:l,profile:n,defaultImage:a,showAsLoading:s})}}M()(_l,"description","A Basic Profile View"),M()(_l,"group","embed"),M()(_l,"icon","portrait"),M()(_l,"internalEditable",{detail:{label:"Detail Level",type:"select",options:Ue.b},theme:{label:"Profile theme",type:"select",options:Ue.c},profile:{label:"Profile to display",type:"profile"},showTotalBelow:{label:"Show total below progress bar",type:"boolean"}}),M()(_l,"schema",{data:{customComponent:"RaiselyProfileView",editable:{detail:{value:"info"},theme:{value:"default"},profile:{value:"current"},showTotalBelow:{value:!1}}}}),_l.displayName="RaiselyProfileView",Object(po.f)(_l);class El extends f.Component{render(){const e=this.props.getValues();return g.a.createElement(Mt,N()({align:e.align},e))}}M()(El,"description","Link to your external social pages"),M()(El,"group","common"),M()(El,"icon","public"),M()(El,"internalEditable",{targets:{label:"Social Media Networks",type:"social-select"},theme:{label:"Style",type:"select",options:G.v},size:{label:"Size",type:"select",options:[{label:"Icon Only",value:"icon"},{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}]},align:{label:"Alignment",type:"select",options:["left","center","right"]}}),M()(El,"schema",{data:{customComponent:"RaiselySocialComponent",editable:{targets:{value:{facebook:{url:"#",label:"Visit our facebook page"}}},theme:{value:"filled"},size:{value:"medium"},align:{value:"left"},url:{value:"current"}}}}),El.displayName="RaiselySocialComponent",Object(po.f)(El);class kl extends f.Component{render(){const e=this.props.manualValues||this.props.getValues();return g.a.createElement(Ke.a,N()({},e,{global:this.props.global}))}}M()(kl,"description","Share this page to social media."),M()(kl,"group","common"),M()(kl,"icon","share"),M()(kl,"internalEditable",{networks:{label:"Social Media Networks",type:"network-select"},theme:{label:"Style",type:"select",options:G.v},size:{label:"Size",type:"select",options:[{label:"Icon Only",value:"icon"},{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}]},url:{label:"Page",type:"select",options:[{label:"Current page",value:"current"},{label:"User profile",value:"profile"},{label:"Campaign homepage",value:"campaign"}]},align:{label:"Alignment",type:"select",options:["left","center","right"]},shareSettingInfo:{type:"block-comment",help:'Go to your <a target="_blank" href="../setup/social">Social Media Settings</a> where you can adjust the default shares and choose which platforms people can share to.'}}),M()(kl,"schema",{data:{customComponent:"RaiselyShareComponent",editable:{networks:{value:"campaign"},theme:{value:"filled"},size:{value:"small"},url:{value:"current"},align:{value:"left"}}}}),kl.displayName="RaiselyShareComponent",Object(po.f)(kl);class wl extends f.Component{constructor(...e){super(...e),M()(this,"state",{passwordResetToken:null,submittedEmail:null,values:{username:"",password1:"",password2:""}}),M()(this,"updateResetToken",()=>{const{passwordResetToken:e}=this.props.match.params;e&&this.setState({passwordResetToken:e})}),M()(this,"doesCampaignHaveSingleAccount",()=>this.props.global.routes.some(e=>"account"===e.name)),M()(this,"requestFields",[{active:!0,core:!0,id:"username",label:"Email",locked:!1,private:!1,required:!0,type:"email"}]),M()(this,"confirmFields",[{active:!0,core:!0,id:"password1",label:"Password",locked:!1,private:!1,required:!0,type:"password"}]),M()(this,"requestPasswordReset",async(e,t={})=>{const{actions:a,global:n}=this.props,o=Oa()(e,["username"]);try{const e={...o,campaignUuid:v()(n,"campaign.uuid",null)};await u.a.users.passwordClient.request({data:e}),this.setState({submittedEmail:o.username})}catch(e){t.setSubmitting(!1),a.addErrorMessage(e)}}),M()(this,"confirmPasswordReset",async(e,t={})=>{const{actions:a,global:n}=this.props,{t:o}=Object(d.a)(),{passwordResetToken:r}=this.state;try{const t={password:e.password1,campaignUuid:v()(n,"campaign.uuid",null)};await u.a.users.passwordClient.confirm({data:t,token:r}),a.addMessage(o("Your password was changed successfully")),await this.afterConfirmation()}catch(e){t.setSubmitting(!1),a.addErrorMessage(e)}}),M()(this,"afterConfirmation",async()=>{const{actions:e,global:t}=this.props,a=this.doesCampaignHaveSingleAccount(),[n,o]=await Promise.all([u.a.users.me({private:!0}),u.a.users.meWithProfiles()]),{data:r}=n.body().data(),i=Object(G.h)(o.body().data().data,t.campaign.uuid);r&&(r.profile=i),e.addUser(r),i?e.redirect("/dashboard"):e.redirect(a?"/account":"/account/details")})}componentDidMount(){this.updateResetToken()}render(){const{values:e,submittedEmail:t,passwordResetToken:a}=this.state,{t:n}=Object(d.a)(),o=a?this.confirmFields:this.requestFields,r=a?this.confirmPasswordReset:this.requestPasswordReset;return g.a.createElement("div",{className:"raisely-reset-form raisely-reset-form--"+(a?"confirm":"request")},a&&g.a.createElement("p",{className:"raisely-reset-form__confirm-text block--primary-lightest"},n("Great, thanks for confirming your email. Enter a new password in the form below")),!t&&g.a.createElement(f.Fragment,null,g.a.createElement(po.a,{fields:o,values:e,actionText:n(a?"Confirm Password":"Send Reset Link"),action:r})),t&&!a&&g.a.createElement(f.Fragment,null,g.a.createElement("p",null,n("We've sent a link to [[submittedEmail]], it should arrive in a few minutes. If you can't find it, make sure you entered the correct email and check your junk or spam folder.",{submittedEmail:t}))))}}M()(wl,"description","A Basic Password Reset Form"),M()(wl,"icon","vpn_key"),M()(wl,"restrictions",{page:["accountReset"]}),M()(wl,"schema",{data:{customComponent:"RaiselyResetForm",editable:{}}}),wl.displayName="RaiselyResetForm",Object(po.f)(wl);class Ol extends f.Component{constructor(...e){super(...e),M()(this,"state",{values:this.props.getFormValues({fields:"user",from:"user"})}),M()(this,"setInitialState",()=>{this.setState({values:this.props.getFormValues({fields:"user",from:"user"})})}),M()(this,"action",async(e,t)=>{const{integrations:a}=this.props;try{const n=this.props.processFormData(e),o=await this.props.api.users.update({id:this.props.global.user.uuid,data:n});this.props.actions.addUser(o.body().data().data),this.props.actions.addMessage("Details updated succesfully"),a.broadcast("user.update",{user:o.body().data().data}),t.setSubmitting(!1)}catch(e){t.setSubmitting(!1),this.props.actions.addErrorMessage(e)}})}componentDidUpdate(e){!e.global.userAuthAttempted&&this.props.global.userAuthAttempted&&this.setInitialState()}render(){const{global:e}=this.props,{values:t}=this.state,{t:a}=Object(d.a)();return g.a.createElement(mo.a,{global:e,name:"user"},n=>g.a.createElement("div",{className:"raisely-account-form"},g.a.createElement(po.a,{unlocked:!0,fields:n,values:t,global:e,formType:"user",integrations:this.props.integrations,actionText:a("Update details"),action:this.action})))}}M()(Ol,"description","A Basic User Account Form"),M()(Ol,"icon","account_circle"),M()(Ol,"restrictions",{page:["accountDetails"]}),M()(Ol,"schema",{data:{customComponent:"RaiselyAccountForm",editable:{}}}),Ol.displayName="RaiselyAccountForm",Object(po.f)(Ol);class Sl extends f.Component{constructor(...e){super(...e),M()(this,"fields",[{active:!0,core:!0,id:"password1",label:"New Password",locked:!1,private:!1,required:!0,type:"password"}]),M()(this,"requestPasswordReset",async(e,t={})=>{const{actions:a,global:n}=this.props,{t:o}=Object(d.a)();try{await u.a.users.password.update({id:n.user.uuid,data:{updated:e.password1}}),a.addMessage(o("Password changed successfully")),t.resetForm()}catch(e){a.addMessage(o("Password update failed")),t.setSubmitting(!1),a.addErrorMessage(e)}})}render(){const{t:e}=Object(d.a)();return g.a.createElement("div",{className:"raisely-reset-form raisely-reset-form--request"},g.a.createElement(po.a,{fields:this.fields,values:{},actionText:e("Reset password"),action:this.requestPasswordReset}))}}M()(Sl,"description","An Authenticated Password Reset Form"),M()(Sl,"icon","settings_backup_restore"),M()(Sl,"restrictions",{condition:["loggedIn"]}),M()(Sl,"schema",{data:{customComponent:"RaiselyLoggedInResetForm",editable:{}}}),Sl.displayName="RaiselyLoggedInResetForm",Object(po.f)(Sl);class Tl extends f.Component{constructor(...e){super(...e),M()(this,"deletePost",async()=>{const{actions:e,global:t}=this.props,{t:a}=Object(d.a)();if(!confirm(a("Are you sure you want to delete this post?")))return!1;try{const{post:n}=t.current;await u.a.posts.delete({id:n.uuid}),e.addSuccessMessage(a("Post deleted"));const o=v()(t.user,"profile.path");e.redirect(o?"/"+o:"/dashboard")}catch(t){e.addErrorMessage(t)}})}render(){const{global:e}=this.props,{post:t,profile:a}=e.current;if(!t||!t.body&&!t.title&&!t.photoUrl)return null;const n=e.user&&e.user.uuid,o=(t.user&&t.user.uuid)===n;return g.a.createElement(rt.a,{post:t,profile:a,campaign:e.campaign,deletePost:this.deletePost,isOwner:o})}}M()(Tl,"description","Displays the contents of a blog post, including the author and date."),M()(Tl,"icon","subject"),M()(Tl,"restrictions",{provider:["post"]}),M()(Tl,"schema",{data:{customComponent:"RaiselyPostContent",editable:{}}}),Tl.displayName="RaiselyPostContent",Object(po.f)(Tl);const Nl=Object(Qi.b)(),{render:Cl}=Nl;class xl extends f.Component{constructor(...e){super(...e),M()(this,"state",{editor:null,recentPosts:[]}),M()(this,"onPostCreate",(e,t,a)=>{const{t:n}=Object(d.a)(),{actions:o,integrations:r}=this.props;if(e)return o.addErrorMessage(e),void r.broadcast("post.error",e);o.addSuccessMessage(n("Post created")),r.broadcast("post.created",{post:t}),o.triggerPageStreamRefetch(),this.setState({recentPosts:[t,...this.state.recentPosts]});const{postCreate:i}=this.props.getValues();"modal"===i&&a()}),M()(this,"getCurrentlyViewedPost",()=>this.props.global.current.post),M()(this,"currentUserIsOwner",e=>v()(this.props.global,"user.uuid",null)===e.uuid)}render(){const{t:e}=Object(d.a)(),{global:t,node:a}=this.props,n=Object(po.g)(t,a),{user:o}=n,r=!!o&&this.currentUserIsOwner(o),i=this.getCurrentlyViewedPost(),{direction:l,limit:s,postCreate:c,heading:u,tags:m}=this.props.getValues(),p="modal"===c;return g.a.createElement(f.Fragment,null,g.a.createElement(dt,{tags:m,header:g.a.createElement(f.Fragment,null,g.a.createElement(Cl,N()({},u,{campaign:t.campaign})),r&&!p&&g.a.createElement(gt,{user:t.user,userProfile:n,afterCreate:this.onPostCreate,campaign:t.campaign})),profile:n,pollingHash:this.props.pollingHash,currentPostUuid:i?i.uuid:null,user:t.user,direction:l,limit:parseInt(s,10),buildHref:e=>`/${n.path}/posts/${e.path}`,hideEmpty:r&&p,emptyMessage:e(r?"Got something to say, add your first post!":"Sorry, there aren't any posts yet."),showAsLoading:t.loadingCurrent||!t.userAuthAttempted}),r&&p&&g.a.createElement(Ne.a,{buttonTitle:e("Add a Post"),buttonContext:e("Got something to say?"),close:this.state.closeModal,modalContent:e=>g.a.createElement(gt,{user:t.user,userProfile:n,afterCreate:(t,a)=>this.onPostCreate(t,a,e),campaign:t.campaign})}))}}M()(xl,"description","Create a feed of posts from the campaign, or a chosen profile"),M()(xl,"icon","view_module"),M()(xl,"group","embed"),M()(xl,"internalEditable",{...Nl.internalEditable,profile:{label:"Show posts from:",type:"profile"},direction:{label:"Display",type:"select",options:[{value:"vertical",label:"Vertically"},{value:"horizontal",label:"Horizontally"}]},limit:{label:"Limit",type:"number"},tags:{label:"Tags",type:"tags",additional:{onlyAllowPublic:!0}},postCreate:{label:"Show Post Create Form",type:"select",help:"You can decide whether the form appears inline, in full, or in modal with a button to access it. This is only appears when a user is logged in and viewing their Profile.",options:[{value:"inline",label:"Inline"},{value:"modal",label:"As Modal"}]}}),M()(xl,"schema",{data:{customComponent:"RaiselyPostFeed",editable:{...Nl.editable,profile:{value:"current"},direction:{value:"vertical"},limit:{value:5},postCreate:{value:"inline"}}}}),xl.displayName="RaiselyPostFeed",xl.editorName="Blog Post Feed",Object(po.f)(xl);var jl=a(213),Pl=a(219);function Al(e){const t=useRaisely(),a=Object(f.useMemo)(()=>t.campaign.mock?{donation:{amount:1e3,total:1e3,firstName:"Example",lastName:"Donor",fullName:"Example Donor",preferredName:"Example",currency:"AUD",status:"OK",interval:"WEEK",count:1,profile:{name:"Team Incredible",path:"team-incredible"},createdAt:x()().subtract(5,"minutes").format()}}:{},[]),[n,o]=Object(f.useState)(a.donation);if(Object(f.useEffect)(()=>{t.userAuthAttempted&&u.a.subscriptions.get({id:e.match.params.id}).then(e=>o(e.result()))},[t.userAuthAttempted]),!n)return g.a.createElement(po.c.Full,null);const{RegularDonationTile:r}=window.RaiselyComponents.Atoms;return g.a.createElement(g.a.Fragment,null,g.a.createElement(r,{donation:n,disabledEdit:!0}),n.methodType&&n.methodType.startsWith("DD")?g.a.createElement(Pl.a,N()({subscription:n},e)):g.a.createElement(jl.a,N()({subscription:n},e)))}function Dl(e){var t;const a=useRaisely(),n=Object(f.useMemo)(()=>a.campaign.mock?{donation:{amount:1e3,total:1e3,firstName:"Example",lastName:"Donor",fullName:"Example Donor",preferredName:"Example",currency:"AUD",status:"OK",interval:"WEEK",count:1,profile:{name:"Team Incredible",path:"team-incredible"},methodType:"CARD",createdAt:x()().subtract(5,"minutes").format()}}:{},[]),[o,r]=Object(f.useState)(null!==(t=e.selectedDonation)&&void 0!==t?t:n.donation);if(Object(f.useEffect)(()=>{a.userAuthAttempted&&u.a.subscriptions.get({id:e.match.params.id,query:{[u.a.avoidCampaignQuery]:!0}}).then(e=>r(e.result()))},[a.userAuthAttempted]),!o)return g.a.createElement(po.c.Full,null);const{RegularDonationTile:i}=window.RaiselyComponents.Atoms;return g.a.createElement(g.a.Fragment,null,g.a.createElement(i,{donation:o,disabledEdit:!0}),o.methodType&&o.methodType.startsWith("DD")?g.a.createElement(Pl.a,N()({subscription:o},e)):g.a.createElement(jl.a,N()({subscription:o},e)))}function Rl({user:e,current:t,location:a}){const n=useRaisely(),o=(null==e?void 0:e.profile)||(null==t?void 0:t.profile);return e?g.a.createElement(Fl,{user:e,profile:o,location:a}):g.a.createElement(Il,{global:n,user:e,profile:o})}function Fl({user:e,profile:t,location:a}){const[n,o]=Object(f.useState)(!1),[r,i]=Object(f.useState)({}),{profileTerms:l}=Object(Be.i)(),{t:s}=Object(d.d)(),c=Object(Be.f)(e);return g.a.createElement("div",{className:"mobile-tab-menu mobile-tab-menu--logged-in"},g.a.createElement("nav",{className:"mobile-tab-menu__track"},g.a.createElement(Ml,{icon:"dashboard",title:s("Dashboard"),to:"/dashboard",location:a}),t&&g.a.createElement(Ml,{icon:"person",title:s("My Profile"),to:"/"+t.path,location:a}),c.group.length>0&&g.a.createElement(Ml,{icon:"group",title:s("My [[teamTerm]]",{teamTerm:c.group.length>1?l.teams.plural.upper:l.teams.singular.upper}),to:"/t/"+c.group[0].path,location:a,onClick:e=>((e,t)=>{c[t].length>1&&(e.preventDefault(),i(c[t]),o(!0))})(e,"group"),active:c.group.find(e=>"/t/"+e.path===a.pathname)}),c.organisation.length>0&&g.a.createElement(Ml,{icon:"groups",title:s("My [[organisationTerm]]",{organisationTerm:l.organisations.singular.upper}),to:"/o/"+c.organisation[0].path,location:a}),g.a.createElement(Ml,{icon:"credit_card",title:s("Account"),to:"/account",location:a})),n&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>o(!1),dockToBottom:!0,modalContent:e=>g.a.createElement("div",{className:"mobile-tab-menu__drawer mobile-tab-menu__profile-select-modal"},g.a.createElement("h3",null,s("Choose profile")),r.map((t,a)=>g.a.createElement(p.ProfileTile,{key:a,profile:t,onClick:()=>{o(!1),e()}})))}))}function Il({profile:e,global:t}){const[a,n]=Object(f.useState)(!1),{t:o}=Object(d.d)(),{send:r}=Object(ht.b)("raisely-donationform-modal"),i=(null==e?void 0:e.type)===Be.h.group||(null==e?void 0:e.type)===Be.h.organisation;return g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"mobile-tab-menu mobile-tab-menu--logged-out"},g.a.createElement(p.Button,{to:"/donate",className:"mobile-tab-menu__large-button",theme:"cta",onClick:()=>{r("show")}},o("Donate")),i&&g.a.createElement(p.Button,{href:"/signup?parentId="+e.path,className:"mobile-tab-menu__large-button",theme:"cta"},o("Join")),g.a.createElement(p.Button,{to:"/share",className:"mobile-tab-menu__large-button",theme:"primary",onClick:()=>{n(!0)}},o("Share")),a&&g.a.createElement(Ne.a,{button:!1,automatic:!0,onClose:()=>n(!1),dockToBottom:!0,modalContent:()=>g.a.createElement("div",{className:"mobile-tab-menu__drawer mobile-tab-menu__share-modal"},g.a.createElement("h3",null,o("Share")),g.a.createElement(Ke.a,{global:t,networks:"campaign",size:"large",theme:"filled"}))})))}function Ml({to:e,icon:t,title:a,location:n,onClick:o,active:r}){const i=r||e===n.pathname;return g.a.createElement(m.a,{to:e,className:"mobile-tab-menu__button "+(i&&"mobile-tab-menu__button--active"),onClick:o},g.a.createElement("i",{className:"material-icons mobile-tab-menu__button__icon"},t),g.a.createElement("span",{className:"mobile-tab-menu__button__title"},a))}Al.description="A form used to add a new card to a subscription",Al.group="form",Al.restrictions={page:["accountPaymentMethods"]},Al.schema={data:{customComponent:"RaiselyNewCardForm",editable:{}}},Al.displayName="RaiselyNewCardForm",Al.hide=!0,Object(po.f)(Al),Dl.description="A form used to add a new payment method to a subscription",Dl.group="form",Dl.restrictions={page:["accountPaymentMethods"]},Dl.schema={data:{customComponent:"RaiselyNewPaymentMethodForm",editable:{}}},Dl.displayName="RaiselyNewPaymentMethodForm",Object(po.f)(Dl);var Ll=Object(wt.a)(Rl);Rl.propTypes={location:h.a.object.isRequired};class Bl extends f.Component{constructor(...e){super(...e),M()(this,"state",{menuOpen:!1,backdrop:!1}),M()(this,"headerBackdrop",e=>{if(e)return Fr.a.createPortal(g.a.createElement("div",{className:"header__body-backdrop"}),e)}),M()(this,"resolveConfig",()=>{const e=v()(this.props.campaign,"config",{});return vi()(e)}),M()(this,"toggleMenuState",()=>this.setState({menuOpen:!this.state.menuOpen})),M()(this,"doesCampaignHaveDashboard",()=>this.props.routes.some(e=>"dashboard"===e.name)),M()(this,"doesCampaignHaveLogin",()=>this.props.routes.some(e=>"login"===e.name)),M()(this,"doesCampaignHaveSingleAccount",()=>this.props.routes.some(e=>"account"===e.name)),M()(this,"generateUserMenuItems",()=>{const{user:e}=this.props,{t:t}=Object(d.a)(),a=this.doesCampaignHaveDashboard(),n=this.doesCampaignHaveSingleAccount();if(!e)return[];const o=v()(this.props.campaign,"config.account_menu");if(Array.isArray(o)&&o.length){const n=[];for(const t of o){if("profile"===t.link){if(!a||!e.profile||e.profile.type===Be.h.group||e.profile.type===Be.h.organisation)continue;t.link="/"+e.profile.path}else if(t.link.startsWith("/dashboard")){if(!a||!e.profile)continue}else if("teamProfile"===t.link){var r,i;if(!a||!(e.teamProfile||null!==(r=e.profile)&&void 0!==r&&r.teamProfile))continue;t.link="/t/"+((null===(i=e.teamProfile)||void 0===i?void 0:i.path)||e.profile.teamProfile.path)}else if("organisationProfile"===t.link){var l,s;if(!a||!(e.organisationProfile||null!==(l=e.profile)&&void 0!==l&&l.organisationProfile))continue;t.link="/o/"+((null===(s=e.organisationProfile)||void 0===s?void 0:s.path)||e.profile.organisationProfile.path)}n.push(t)}return n.find(e=>"/logout"===e.link)||n.push({link:"/logout",title:t("Logout")}),n}const c=[];if(a&&e.profile){c.push({link:"/dashboard",title:t("My Dashboard")},{link:"/"+e.profile.path,title:t("My Profile")});const{profiles:a}=this.props.campaign.config,{group:n}=Object(Be.f)(e),o=Object(Be.c)(Be.h.group,a,!1,!0),r=Object(Be.c)(Be.h.organisation,a,!1,!0);if(n.map(e=>{const{path:a,name:r}=e;c.push({link:"/t/"+a,title:n.length>1?r:t("My [[teamTerm]]",{teamTerm:o})})}),e.organisationProfile||e.profile.organisationProfile){var u,m;const a=(null===(u=e.organisationProfile)||void 0===u?void 0:u.path)||(null===(m=e.profile.organisationProfile)||void 0===m?void 0:m.path);c.push({link:"/o/"+a,title:t("My [[organisationTerm]]",{organisationTerm:r})})}}return c.push({link:n?"/account":"/account/details",title:t("My Account")}),c.push({link:"/logout",title:t("Logout")}),c})}componentDidMount(){this.setState({backdrop:document.getElementById("row--0")})}render(){var e;const{position:t,campaign:a,theme:n,showAccountMenu:o,showShareButtons:r,showAmount:i,user:l,isEmbed:s,current:c,alternateLogo:u,alternateLink:m,stickyMobileMenu:p,logoWidth:f}=this.props,{t:b}=Object(d.a)(),{config:h}=a,y=this.generateUserMenuItems();let _=[...h.menu];p?l&&_.push({link:"/logout",title:"Logout"}):_=[...h.menu,...y];const E=[...h.menu],k=E.length+y.length===0,w=v()(this.props,"campaign.config.theme.defaultProfileUrl");return g.a.createElement("div",{className:`header header--theme-${n} header--position-${t}`},"transparent"===n&&this.headerBackdrop(this.state.backdrop),g.a.createElement("div",{className:"header__wrap"},g.a.createElement(mi,{campaign:a,override:u,link:m,align:f&&"left",width:f&&f+"px"}),g.a.createElement("div",{className:"header__menu header__menu--desktop"},g.a.createElement(Tt,{menu:E,user:l}),r&&g.a.createElement("div",{className:"header__social--desktop"},g.a.createElement(Ke.a,{networks:"campaign",theme:"filled",size:"icon",url:"current",global:{isEmbed:s,campaign:a,user:l,current:c}})),o&&l&&g.a.createElement("div",{className:"header__account"},g.a.createElement(zt.a,{className:"header__profile-image",size:"small",defaultImage:w,profile:l&&l.profile?l.profile:l}),g.a.createElement(Ot.a,{textTitle:l.firstName,subMenu:y,isAccountMenu:!0,size:"medium"}))),i?g.a.createElement("div",{className:"header__amount"},g.a.createElement("span",{className:"header__amount-display"},Object(G.f)(null!==(e=a.config.ticketing)&&void 0!==e&&e.includeTicketsInCampaignTotals?a.grandTotal:a.total,a.currency,{hideCents:!0})),g.a.createElement("span",{className:"header__amount-label"},b("Raised"))):null,!k&&g.a.createElement("div",{className:"header__menu header__menu--mobile header__menu--mobile--"+(this.state.menuOpen?"open":"closed")},g.a.createElement(V.a,{size:"small",className:"header__menu__button header__menu__button--"+(this.state.menuOpen?"open":"closed"),onClick:()=>this.toggleMenuState()},g.a.createElement("span",null),g.a.createElement("span",null),g.a.createElement("span",null)),g.a.createElement(Tt,{menu:_,user:l,toggleMenuState:()=>this.toggleMenuState()},r&&g.a.createElement("div",{className:"header__social--mobile"},g.a.createElement(Ke.a,{networks:"campaign",theme:"filled",size:"icon",url:"current",global:{isEmbed:s,campaign:a,user:l,current:c}}))))),p&&Fr.a.createPortal(g.a.createElement(Ll,{user:l,current:c}),document.getElementById("modal-root")))}}Bl.propTypes={campaign:h.a.object.isRequired,user:h.a.object,position:h.a.oneOf(["none","sticky"]).isRequired,showAccountMenu:h.a.bool,stickyMobileMenu:h.a.bool,showShareButtons:h.a.bool,showAmount:h.a.bool};const Ul=window.location.href,Hl=Ul.substr(0,Ul.indexOf("/pages"));class Vl extends f.Component{render(){const{campaign:e,user:t,current:a,isEmbed:n}=this.props.global,{theme:o,position:r,showAccountMenu:i,showShareButtons:l,showAmount:s,alternateLogo:c,alternateLink:u,stickyMobileMenu:d,logoWidth:m}=this.props.getValues();return g.a.createElement(g.a.Fragment,null,g.a.createElement(ji.a,{global:this.props.global,profile:null==t?void 0:t.profile}),g.a.createElement(Bl,{current:a,isEmbed:n,routes:this.props.global.routes,campaign:e,user:t||null,theme:o,position:r,showAccountMenu:i,logoWidth:m,showShareButtons:l,showAmount:s,alternateLogo:c,alternateLink:u,stickyMobileMenu:d}))}}M()(Vl,"description","A campaign header and navigation bar"),M()(Vl,"icon","menu"),M()(Vl,"restrictions",{page:["layout"]}),M()(Vl,"internalEditable",{theme:{label:"Header Style",type:"select",options:[{value:"filled",label:"Filled"},{value:"transparent",label:"Transparent"}]},menuEdit:{label:"Edit Menu",help:'Looking to edit your menu? Check out your <a href="../setup/menu">Menu Settings</a> where you can edit, add, and re-jig everything.',type:"message"},showAccountMenu:{label:"Show account menu:",type:"boolean"},logoWidth:{label:"Logo Width",type:"range",max:500,postFix:"px"},showShareButtons:{label:"Show share buttons:",type:"boolean",group:"advanced"},showAmount:{label:"Show total raised by campaign",type:"boolean",group:"advanced"},alternateLogo:{label:"Alternate Logo",type:"image-url",help:`By default, the logo set in <a href="${Hl}/design/brand" target="_blank">Design > Brand > Logo</a> will be used.`},alternateLink:{label:"Alternate Link",type:"text",help:"Change where people go when they click your logo. If you set this, it will also open in a new tab."},stickyMobileMenu:{label:"Sticky mobile navigation",help:"Adds a quick-navigation menu to the bottom of the scroll on mobile devices",type:"boolean",group:"advanced"}}),M()(Vl,"schema",{data:{customComponent:"RaiselyHeader",editable:{theme:{value:"filled"},position:{value:"none"},showAccountMenu:{value:!0},logoWidth:{value:150}}}}),Vl.displayName="RaiselyHeader",Object(po.f)(Vl);var $l=a(333);var ql=["10k","10mp","11mp","123","12mp","13mp","14mp","15mp","16mp","17mp","18_up_rating","18mp","19mp","1k","1k_plus","1x_mobiledata","20mp","21mp","22mp","23mp","24mp","2k","2k_plus","2mp","30fps","30fps_select","360","3d_rotation","3g_mobiledata","3k","3k_plus","3mp","3p","4g_mobiledata","4g_plus_mobiledata","4k","4k_plus","4mp","5g","5k","5k_plus","5mp","60fps","60fps_select","6_ft_apart","6k","6k_plus","6mp","7k","7k_plus","7mp","8k","8k_plus","8mp","9k","9k_plus","9mp","abc","ac_unit","access_alarm","access_alarms","access_time","access_time_filled","accessibility","accessibility_new","accessible","accessible_forward","account_balance","account_balance_wallet","account_box","account_circle","account_tree","ad_units","adb","add","add_a_photo","add_alarm","add_alert","add_box","add_business","add_call","add_card","add_chart","add_circle","add_circle_outline","add_comment","add_home","add_home_work","add_ic_call","add_link","add_location","add_location_alt","add_moderator","add_photo_alternate","add_reaction","add_road","add_shopping_cart","add_task","add_to_drive","add_to_home_screen","add_to_photos","add_to_queue","addchart","adf_scanner","adjust","admin_panel_settings","adobe","ads_click","agriculture","air","airline_seat_flat","airline_seat_flat_angled","airline_seat_individual_suite","airline_seat_legroom_extra","airline_seat_legroom_normal","airline_seat_legroom_reduced","airline_seat_recline_extra","airline_seat_recline_normal","airline_stops","airlines","airplane_ticket","airplanemode_active","airplanemode_inactive","airplanemode_off","airplanemode_on","airplay","airport_shuttle","alarm","alarm_add","alarm_off","alarm_on","album","align_horizontal_center","align_horizontal_left","align_horizontal_right","align_vertical_bottom","align_vertical_center","align_vertical_top","all_inbox","all_inclusive","all_out","alt_route","alternate_email","amp_stories","analytics","anchor","android","animation","announcement","aod","apartment","api","app_blocking","app_registration","app_settings_alt","app_shortcut","apple","approval","apps","apps_outage","architecture","archive","area_chart","arrow_back","arrow_back_ios","arrow_back_ios_new","arrow_circle_down","arrow_circle_left","arrow_circle_right","arrow_circle_up","arrow_downward","arrow_drop_down","arrow_drop_down_circle","arrow_drop_up","arrow_forward","arrow_forward_ios","arrow_left","arrow_outward","arrow_right","arrow_right_alt","arrow_upward","art_track","article","aspect_ratio","assessment","assignment","assignment_add","assignment_ind","assignment_late","assignment_return","assignment_returned","assignment_turned_in","assist_walker","assistant","assistant_direction","assistant_navigation","assistant_photo","assured_workload","atm","attach_email","attach_file","attach_money","attachment","attractions","attribution","audio_file","audiotrack","auto_awesome","auto_awesome_mosaic","auto_awesome_motion","auto_delete","auto_fix_high","auto_fix_normal","auto_fix_off","auto_graph","auto_mode","auto_stories","autofps_select","autorenew","av_timer","baby_changing_station","back_hand","backpack","backspace","backup","backup_table","badge","bakery_dining","balance","balcony","ballot","bar_chart","barcode_reader","batch_prediction","bathroom","bathtub","battery_0_bar","battery_1_bar","battery_2_bar","battery_3_bar","battery_4_bar","battery_5_bar","battery_6_bar","battery_alert","battery_charging_full","battery_full","battery_saver","battery_std","battery_unknown","beach_access","bed","bedroom_baby","bedroom_child","bedroom_parent","bedtime","bedtime_off","beenhere","bento","bike_scooter","biotech","blender","blind","blinds","blinds_closed","block","block_flipped","bloodtype","bluetooth","bluetooth_audio","bluetooth_connected","bluetooth_disabled","bluetooth_drive","bluetooth_searching","blur_circular","blur_linear","blur_off","blur_on","bolt","book","book_online","bookmark","bookmark_add","bookmark_added","bookmark_border","bookmark_outline","bookmark_remove","bookmarks","border_all","border_bottom","border_clear","border_color","border_horizontal","border_inner","border_left","border_outer","border_right","border_style","border_top","border_vertical","boy","branding_watermark","breakfast_dining","brightness_1","brightness_2","brightness_3","brightness_4","brightness_5","brightness_6","brightness_7","brightness_auto","brightness_high","brightness_low","brightness_medium","broadcast_on_home","broadcast_on_personal","broken_image","browse_gallery","browser_not_supported","browser_updated","brunch_dining","brush","bubble_chart","bug_report","build","build_circle","bungalow","burst_mode","bus_alert","business","business_center","cabin","cable","cached","cake","calculate","calendar_month","calendar_today","calendar_view_day","calendar_view_month","calendar_view_week","call","call_end","call_made","call_merge","call_missed","call_missed_outgoing","call_received","call_split","call_to_action","camera","camera_alt","camera_enhance","camera_front","camera_indoor","camera_outdoor","camera_rear","camera_roll","cameraswitch","campaign","cancel","cancel_presentation","cancel_schedule_send","candlestick_chart","car_crash","car_rental","car_repair","card_giftcard","card_membership","card_travel","carpenter","cases","casino","cast","cast_connected","cast_for_education","castle","catching_pokemon","category","celebration","cell_tower","cell_wifi","center_focus_strong","center_focus_weak","chair","chair_alt","chalet","change_circle","change_history","charging_station","chat","chat_bubble","chat_bubble_outline","check","check_box","check_box_outline_blank","check_circle","check_circle_outline","checklist","checklist_rtl","checkroom","chevron_left","chevron_right","child_care","child_friendly","chrome_reader_mode","church","circle","circle_notifications","class","clean_hands","cleaning_services","clear","clear_all","close","close_fullscreen","closed_caption","closed_caption_disabled","closed_caption_off","cloud","cloud_circle","cloud_done","cloud_download","cloud_off","cloud_queue","cloud_sync","cloud_upload","cloudy_snowing","co2","co_present","code","code_off","coffee","coffee_maker","collections","collections_bookmark","color_lens","colorize","comment","comment_bank","comments_disabled","commit","commute","compare","compare_arrows","compass_calibration","compost","compress","computer","confirmation_num","confirmation_number","connect_without_contact","connected_tv","connecting_airports","construction","contact_emergency","contact_mail","contact_page","contact_phone","contact_support","contactless","contacts","content_copy","content_cut","content_paste","content_paste_go","content_paste_off","content_paste_search","contrast","control_camera","control_point","control_point_duplicate","conveyor_belt","cookie","copy_all","copyright","coronavirus","corporate_fare","cottage","countertops","create","create_new_folder","credit_card","credit_card_off","credit_score","crib","crisis_alert","crop","crop_16_9","crop_3_2","crop_5_4","crop_7_5","crop_din","crop_free","crop_landscape","crop_original","crop_portrait","crop_rotate","crop_square","cruelty_free","css","currency_bitcoin","currency_exchange","currency_franc","currency_lira","currency_pound","currency_ruble","currency_rupee","currency_yen","currency_yuan","curtains","curtains_closed","cyclone","dangerous","dark_mode","dashboard","dashboard_customize","data_array","data_exploration","data_object","data_saver_off","data_saver_on","data_thresholding","data_usage","dataset","dataset_linked","date_range","deblur","deck","dehaze","delete","delete_forever","delete_outline","delete_sweep","delivery_dining","density_large","density_medium","density_small","departure_board","description","deselect","design_services","desk","desktop_access_disabled","desktop_mac","desktop_windows","details","developer_board","developer_board_off","developer_mode","device_hub","device_thermostat","device_unknown","devices","devices_fold","devices_other","dew_point","dialer_sip","dialpad","diamond","difference","dining","dinner_dining","directions","directions_bike","directions_boat","directions_boat_filled","directions_bus","directions_bus_filled","directions_car","directions_car_filled","directions_ferry","directions_off","directions_railway","directions_railway_filled","directions_run","directions_subway","directions_subway_filled","directions_train","directions_transit","directions_transit_filled","directions_walk","dirty_lens","disabled_by_default","disabled_visible","disc_full","discord","discount","display_settings","diversity_1","diversity_2","diversity_3","dnd_forwardslash","dns","do_disturb","do_disturb_alt","do_disturb_off","do_disturb_on","do_not_disturb","do_not_disturb_alt","do_not_disturb_off","do_not_disturb_on","do_not_disturb_on_total_silence","do_not_step","do_not_touch","dock","document_scanner","domain","domain_add","domain_disabled","domain_verification","done","done_all","done_outline","donut_large","donut_small","door_back","door_front","door_sliding","doorbell","double_arrow","downhill_skiing","download","download_done","download_for_offline","downloading","drafts","drag_handle","drag_indicator","draw","drive_eta","drive_file_move","drive_file_move_outline","drive_file_move_rtl","drive_file_rename_outline","drive_folder_upload","dry","dry_cleaning","duo","dvr","dynamic_feed","dynamic_form","e_mobiledata","earbuds","earbuds_battery","east","eco","edgesensor_high","edgesensor_low","edit","edit_attributes","edit_calendar","edit_document","edit_location","edit_location_alt","edit_note","edit_notifications","edit_off","edit_road","edit_square","egg","egg_alt","eject","elderly","elderly_woman","electric_bike","electric_bolt","electric_car","electric_meter","electric_moped","electric_rickshaw","electric_scooter","electrical_services","elevator","email","emergency","emergency_recording","emergency_share","emoji_emotions","emoji_events","emoji_flags","emoji_food_beverage","emoji_nature","emoji_objects","emoji_people","emoji_symbols","emoji_transportation","energy_savings_leaf","engineering","enhance_photo_translate","enhanced_encryption","equalizer","error","error_outline","escalator","escalator_warning","euro","euro_symbol","ev_station","event","event_available","event_busy","event_note","event_repeat","event_seat","exit_to_app","expand","expand_circle_down","expand_less","expand_more","explicit","explore","explore_off","exposure","exposure_minus_1","exposure_minus_2","exposure_neg_1","exposure_neg_2","exposure_plus_1","exposure_plus_2","exposure_zero","extension","extension_off","face","face_2","face_3","face_4","face_5","face_6","face_retouching_natural","face_retouching_off","facebook","fact_check","factory","family_restroom","fast_forward","fast_rewind","fastfood","favorite","favorite_border","favorite_outline","fax","featured_play_list","featured_video","feed","feedback","female","fence","festival","fiber_dvr","fiber_manual_record","fiber_new","fiber_pin","fiber_smart_record","file_copy","file_download","file_download_done","file_download_off","file_open","file_present","file_upload","file_upload_off","filter","filter_1","filter_2","filter_3","filter_4","filter_5","filter_6","filter_7","filter_8","filter_9","filter_9_plus","filter_alt","filter_alt_off","filter_b_and_w","filter_center_focus","filter_drama","filter_frames","filter_hdr","filter_list","filter_list_alt","filter_list_off","filter_none","filter_tilt_shift","filter_vintage","find_in_page","find_replace","fingerprint","fire_extinguisher","fire_hydrant","fire_hydrant_alt","fire_truck","fireplace","first_page","fit_screen","fitbit","fitness_center","flag","flag_circle","flaky","flare","flash_auto","flash_off","flash_on","flashlight_off","flashlight_on","flatware","flight","flight_class","flight_land","flight_takeoff","flip","flip_camera_android","flip_camera_ios","flip_to_back","flip_to_front","flood","flourescent","flourescent","fluorescent","flutter_dash","fmd_bad","fmd_good","foggy","folder","folder_copy","folder_delete","folder_off","folder_open","folder_shared","folder_special","folder_zip","follow_the_signs","font_download","font_download_off","food_bank","forest","fork_left","fork_right","forklift","format_align_center","format_align_justify","format_align_left","format_align_right","format_bold","format_clear","format_color_fill","format_color_reset","format_color_text","format_indent_decrease","format_indent_increase","format_italic","format_line_spacing","format_list_bulleted","format_list_bulleted_add","format_list_numbered","format_list_numbered_rtl","format_overline","format_paint","format_quote","format_shapes","format_size","format_strikethrough","format_textdirection_l_to_r","format_textdirection_r_to_l","format_underline","format_underlined","fort","forum","forward","forward_10","forward_30","forward_5","forward_to_inbox","foundation","free_breakfast","free_cancellation","front_hand","front_loader","fullscreen","fullscreen_exit","functions","g_mobiledata","g_translate","gamepad","games","garage","gas_meter","gavel","generating_tokens","gesture","get_app","gif","gif_box","girl","gite","goat","golf_course","gpp_bad","gpp_good","gpp_maybe","gps_fixed","gps_not_fixed","gps_off","grade","gradient","grading","grain","graphic_eq","grass","grid_3x3","grid_4x4","grid_goldenratio","grid_off","grid_on","grid_view","group","group_add","group_off","group_remove","group_work","groups","groups_2","groups_3","h_mobiledata","h_plus_mobiledata","hail","handshake","handyman","hardware","hd","hdr_auto","hdr_auto_select","hdr_enhanced_select","hdr_off","hdr_off_select","hdr_on","hdr_on_select","hdr_plus","hdr_strong","hdr_weak","headphones","headphones_battery","headset","headset_mic","headset_off","healing","health_and_safety","hearing","hearing_disabled","heart_broken","heat_pump","height","help","help_center","help_outline","hevc","hexagon","hide_image","hide_source","high_quality","highlight","highlight_alt","highlight_off","highlight_remove","hiking","history","history_edu","history_toggle_off","hive","hls","hls_off","holiday_village","home","home_filled","home_max","home_mini","home_repair_service","home_work","horizontal_distribute","horizontal_rule","horizontal_split","hot_tub","hotel","hotel_class","hourglass_bottom","hourglass_disabled","hourglass_empty","hourglass_full","hourglass_top","house","house_siding","houseboat","how_to_reg","how_to_vote","html","http","https","hub","hvac","ice_skating","icecream","image","image_aspect_ratio","image_not_supported","image_search","imagesearch_roller","import_contacts","import_export","important_devices","inbox","incomplete_circle","indeterminate_check_box","info","info_outline","input","insert_chart","insert_chart_outlined","insert_comment","insert_drive_file","insert_emoticon","insert_invitation","insert_link","insert_page_break","insert_photo","insights","install_desktop","install_mobile","integration_instructions","interests","interpreter_mode","inventory","inventory_2","invert_colors","invert_colors_off","invert_colors_on","ios_share","iron","iso","javascript","join_full","join_inner","join_left","join_right","kayaking","kebab_dining","key","key_off","keyboard","keyboard_alt","keyboard_arrow_down","keyboard_arrow_left","keyboard_arrow_right","keyboard_arrow_up","keyboard_backspace","keyboard_capslock","keyboard_command","keyboard_command_key","keyboard_control","keyboard_control_key","keyboard_double_arrow_down","keyboard_double_arrow_left","keyboard_double_arrow_right","keyboard_double_arrow_up","keyboard_hide","keyboard_option","keyboard_option_key","keyboard_return","keyboard_tab","keyboard_voice","king_bed","kitchen","kitesurfing","label","label_important","label_important_outline","label_off","label_outline","lan","landscape","landslide","language","laptop","laptop_chromebook","laptop_mac","laptop_windows","last_page","launch","layers","layers_clear","leaderboard","leak_add","leak_remove","leave_bags_at_home","legend_toggle","lens","lens_blur","library_add","library_add_check","library_books","library_music","light","light_mode","lightbulb","lightbulb_circle","lightbulb_outline","line_axis","line_style","line_weight","linear_scale","link","link_off","linked_camera","liquor","list","list_alt","live_help","live_tv","living","local_activity","local_airport","local_atm","local_attraction","local_bar","local_cafe","local_car_wash","local_convenience_store","local_dining","local_drink","local_fire_department","local_florist","local_gas_station","local_grocery_store","local_hospital","local_hotel","local_laundry_service","local_library","local_mall","local_movies","local_offer","local_parking","local_pharmacy","local_phone","local_pizza","local_play","local_police","local_post_office","local_print_shop","local_printshop","local_restaurant","local_see","local_shipping","local_taxi","location_city","location_disabled","location_history","location_off","location_on","location_pin","location_searching","lock","lock_clock","lock_open","lock_outline","lock_person","lock_reset","login","logo_dev","logout","looks","looks_3","looks_4","looks_5","looks_6","looks_one","looks_two","loop","loupe","low_priority","loyalty","lte_mobiledata","lte_plus_mobiledata","luggage","lunch_dining","lyrics","macro_off","mail","mail_lock","mail_outline","male","man","man_2","man_3","man_4","manage_accounts","manage_history","manage_search","map","maps_home_work","maps_ugc","margin","mark_as_unread","mark_chat_read","mark_chat_unread","mark_email_read","mark_email_unread","mark_unread_chat_alt","markunread","markunread_mailbox","masks","maximize","media_bluetooth_off","media_bluetooth_on","mediation","medical_information","medical_services","medication","medication_liquid","meeting_room","memory","menu","menu_book","menu_open","merge","merge_type","message","messenger","messenger_outline","mic","mic_external_off","mic_external_on","mic_none","mic_off","microwave","military_tech","minimize","minor_crash","miscellaneous_services","missed_video_call","mms","mobile_friendly","mobile_off","mobile_screen_share","mobiledata_off","mode","mode_comment","mode_edit","mode_edit_outline","mode_fan_off","mode_night","mode_of_travel","mode_standby","model_training","monetization_on","money","money_off","money_off_csred","monitor","monitor_heart","monitor_weight","monochrome_photos","mood","mood_bad","moped","more","more_horiz","more_time","more_vert","mosque","motion_photos_auto","motion_photos_off","motion_photos_on","motion_photos_pause","motion_photos_paused","motorcycle","mouse","move_down","move_to_inbox","move_up","movie","movie_creation","movie_edit","movie_filter","moving","mp","multiline_chart","multiple_stop","multitrack_audio","museum","music_note","music_off","music_video","my_library_add","my_library_books","my_library_music","my_location","nat","nature","nature_people","navigate_before","navigate_next","navigation","near_me","near_me_disabled","nearby_error","nearby_off","nest_cam_wired_stand","network_cell","network_check","network_locked","network_ping","network_wifi","network_wifi_1_bar","network_wifi_2_bar","network_wifi_3_bar","new_label","new_releases","newspaper","next_plan","next_week","nfc","night_shelter","nightlife","nightlight","nightlight_round","nights_stay","no_accounts","no_adult_content","no_backpack","no_cell","no_crash","no_drinks","no_encryption","no_encryption_gmailerrorred","no_flash","no_food","no_luggage","no_meals","no_meals_ouline","no_meeting_room","no_photography","no_sim","no_stroller","no_transfer","noise_aware","noise_control_off","nordic_walking","north","north_east","north_west","not_accessible","not_interested","not_listed_location","not_started","note","note_add","note_alt","notes","notification_add","notification_important","notifications","notifications_active","notifications_none","notifications_off","notifications_on","notifications_paused","now_wallpaper","now_widgets","numbers","offline_bolt","offline_pin","offline_share","oil_barrel","on_device_training","ondemand_video","online_prediction","opacity","open_in_browser","open_in_full","open_in_new","open_in_new_off","open_with","other_houses","outbond","outbound","outbox","outdoor_grill","outgoing_mail","outlet","outlined_flag","output","padding","pages","pageview","paid","palette","pallet","pan_tool","pan_tool_alt","panorama","panorama_fish_eye","panorama_fisheye","panorama_horizontal","panorama_horizontal_select","panorama_photosphere","panorama_photosphere_select","panorama_vertical","panorama_vertical_select","panorama_wide_angle","panorama_wide_angle_select","paragliding","park","party_mode","password","pattern","pause","pause_circle","pause_circle_filled","pause_circle_outline","pause_presentation","payment","payments","paypal","pedal_bike","pending","pending_actions","pentagon","people","people_alt","people_outline","percent","perm_camera_mic","perm_contact_cal","perm_contact_calendar","perm_data_setting","perm_device_info","perm_device_information","perm_identity","perm_media","perm_phone_msg","perm_scan_wifi","person","person_2","person_3","person_4","person_add","person_add_alt","person_add_alt_1","person_add_disabled","person_off","person_outline","person_pin","person_pin_circle","person_remove","person_remove_alt_1","person_search","personal_injury","personal_video","pest_control","pest_control_rodent","pets","phishing","phone","phone_android","phone_bluetooth_speaker","phone_callback","phone_disabled","phone_enabled","phone_forwarded","phone_in_talk","phone_iphone","phone_locked","phone_missed","phone_paused","phonelink","phonelink_erase","phonelink_lock","phonelink_off","phonelink_ring","phonelink_setup","photo","photo_album","photo_camera","photo_camera_back","photo_camera_front","photo_filter","photo_library","photo_size_select_actual","photo_size_select_large","photo_size_select_small","php","piano","piano_off","picture_as_pdf","picture_in_picture","picture_in_picture_alt","pie_chart","pie_chart_outline","pie_chart_outlined","pin","pin_drop","pin_end","pin_invoke","pinch","pivot_table_chart","pix","place","plagiarism","play_arrow","play_circle","play_circle_fill","play_circle_filled","play_circle_outline","play_disabled","play_for_work","play_lesson","playlist_add","playlist_add_check","playlist_add_check_circle","playlist_add_circle","playlist_play","playlist_remove","plumbing","plus_one","podcasts","point_of_sale","policy","poll","polyline","polymer","pool","portable_wifi_off","portrait","post_add","power","power_input","power_off","power_settings_new","precision_manufacturing","pregnant_woman","present_to_all","preview","price_change","price_check","print","print_disabled","priority_high","privacy_tip","private_connectivity","production_quantity_limits","propane","propane_tank","psychology","psychology_alt","public","public_off","publish","published_with_changes","punch_clock","push_pin","qr_code","qr_code_2","qr_code_scanner","query_builder","query_stats","question_answer","question_mark","queue","queue_music","queue_play_next","quick_contacts_dialer","quick_contacts_mail","quickreply","quiz","quora","r_mobiledata","radar","radio","radio_button_checked","radio_button_off","radio_button_on","radio_button_unchecked","railway_alert","ramen_dining","ramp_left","ramp_right","rate_review","raw_off","raw_on","read_more","real_estate_agent","rebase_edit","receipt","receipt_long","recent_actors","recommend","record_voice_over","rectangle","recycling","reddit","redeem","redo","reduce_capacity","refresh","remember_me","remove","remove_circle","remove_circle_outline","remove_done","remove_from_queue","remove_moderator","remove_red_eye","remove_road","remove_shopping_cart","reorder","repartition","repeat","repeat_on","repeat_one","repeat_one_on","replay","replay_10","replay_30","replay_5","replay_circle_filled","reply","reply_all","report","report_gmailerrorred","report_off","report_problem","request_page","request_quote","reset_tv","restart_alt","restaurant","restaurant_menu","restore","restore_from_trash","restore_page","reviews","rice_bowl","ring_volume","rocket","rocket_launch","roller_shades","roller_shades_closed","roller_skating","roofing","room","room_preferences","room_service","rotate_90_degrees_ccw","rotate_90_degrees_cw","rotate_left","rotate_right","roundabout_left","roundabout_right","rounded_corner","route","router","rowing","rss_feed","rsvp","rtt","rule","rule_folder","run_circle","running_with_errors","rv_hookup","safety_check","safety_divider","sailing","sanitizer","satellite","satellite_alt","save","save_alt","save_as","saved_search","savings","scale","scanner","scatter_plot","schedule","schedule_send","schema","school","science","score","scoreboard","screen_lock_landscape","screen_lock_portrait","screen_lock_rotation","screen_rotation","screen_rotation_alt","screen_search_desktop","screen_share","screenshot","screenshot_monitor","scuba_diving","sd","sd_card","sd_card_alert","sd_storage","search","search_off","security","security_update","security_update_good","security_update_warning","segment","select_all","self_improvement","sell","send","send_and_archive","send_time_extension","send_to_mobile","sensor_door","sensor_occupied","sensor_window","sensors","sensors_off","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_satisfied_alt","sentiment_very_dissatisfied","sentiment_very_satisfied","set_meal","settings","settings_accessibility","settings_applications","settings_backup_restore","settings_bluetooth","settings_brightness","settings_cell","settings_display","settings_ethernet","settings_input_antenna","settings_input_component","settings_input_composite","settings_input_hdmi","settings_input_svideo","settings_overscan","settings_phone","settings_power","settings_remote","settings_suggest","settings_system_daydream","settings_voice","severe_cold","shape_line","share","share_arrival_time","share_location","shelves","shield","shield_moon","shop","shop_2","shop_two","shopify","shopping_bag","shopping_basket","shopping_cart","shopping_cart_checkout","short_text","shortcut","show_chart","shower","shuffle","shuffle_on","shutter_speed","sick","sign_language","signal_cellular_0_bar","signal_cellular_4_bar","signal_cellular_alt","signal_cellular_alt_1_bar","signal_cellular_alt_2_bar","signal_cellular_connected_no_internet_0_bar","signal_cellular_connected_no_internet_4_bar","signal_cellular_no_sim","signal_cellular_nodata","signal_cellular_null","signal_cellular_off","signal_wifi_0_bar","signal_wifi_4_bar","signal_wifi_4_bar_lock","signal_wifi_bad","signal_wifi_connected_no_internet_4","signal_wifi_off","signal_wifi_statusbar_4_bar","signal_wifi_statusbar_connected_no_internet_4","signal_wifi_statusbar_null","signpost","sim_card","sim_card_alert","sim_card_download","single_bed","sip","skateboarding","skip_next","skip_previous","sledding","slideshow","slow_motion_video","smart_button","smart_display","smart_screen","smart_toy","smartphone","smoke_free","smoking_rooms","sms","sms_failed","snapchat","snippet_folder","snooze","snowboarding","snowing","snowmobile","snowshoeing","soap","social_distance","solar_power","sort","sort_by_alpha","sos","soup_kitchen","source","south","south_america","south_east","south_west","spa","space_bar","space_dashboard","spatial_audio","spatial_audio_off","spatial_tracking","speaker","speaker_group","speaker_notes","speaker_notes_off","speaker_phone","speed","spellcheck","splitscreen","spoke","sports","sports_bar","sports_baseball","sports_basketball","sports_cricket","sports_esports","sports_football","sports_golf","sports_gymnastics","sports_handball","sports_hockey","sports_kabaddi","sports_martial_arts","sports_mma","sports_motorsports","sports_rugby","sports_score","sports_soccer","sports_tennis","sports_volleyball","square","square_foot","ssid_chart","stacked_bar_chart","stacked_line_chart","stadium","stairs","star","star_border","star_border_purple500","star_half","star_outline","star_purple500","star_rate","stars","start","stay_current_landscape","stay_current_portrait","stay_primary_landscape","stay_primary_portrait","sticky_note_2","stop","stop_circle","stop_screen_share","storage","store","store_mall_directory","storefront","storm","straight","straighten","stream","streetview","strikethrough_s","stroller","style","subdirectory_arrow_left","subdirectory_arrow_right","subject","subscript","subscriptions","subtitles","subtitles_off","subway","summarize","sunny","sunny_snowing","superscript","supervised_user_circle","supervisor_account","support","support_agent","surfing","surround_sound","swap_calls","swap_horiz","swap_horizontal_circle","swap_vert","swap_vert_circle","swap_vertical_circle","swipe","swipe_down","swipe_down_alt","swipe_left","swipe_left_alt","swipe_right","swipe_right_alt","swipe_up","swipe_up_alt","swipe_vertical","switch_access_shortcut","switch_access_shortcut_add","switch_account","switch_camera","switch_left","switch_right","switch_video","synagogue","sync","sync_alt","sync_disabled","sync_lock","sync_problem","system_security_update","system_security_update_good","system_security_update_warning","system_update","system_update_alt","system_update_tv","tab","tab_unselected","table_bar","table_chart","table_restaurant","table_rows","table_view","tablet","tablet_android","tablet_mac","tag","tag_faces","takeout_dining","tap_and_play","tapas","task","task_alt","taxi_alert","telegram","temple_buddhist","temple_hindu","terminal","terrain","text_decrease","text_fields","text_format","text_increase","text_rotate_up","text_rotate_vertical","text_rotation_angledown","text_rotation_angleup","text_rotation_down","text_rotation_none","text_snippet","textsms","texture","theater_comedy","theaters","thermostat","thermostat_auto","thumb_down","thumb_down_alt","thumb_down_off_alt","thumb_up","thumb_up_alt","thumb_up_off_alt","thumbs_up_down","thunderstorm","tiktok","time_to_leave","timelapse","timeline","timer","timer_10","timer_10_select","timer_3","timer_3_select","timer_off","tips_and_updates","tire_repair","title","toc","today","toggle_off","toggle_on","token","toll","tonality","topic","tornado","touch_app","tour","toys","track_changes","traffic","train","tram","transcribe","transfer_within_a_station","transform","transgender","transit_enterexit","translate","travel_explore","trending_down","trending_flat","trending_neutral","trending_up","trip_origin","trolley","troubleshoot","try","tsunami","tty","tune","tungsten","turn_left","turn_right","turn_sharp_left","turn_sharp_right","turn_slight_left","turn_slight_right","turned_in","turned_in_not","tv","tv_off","two_wheeler","type_specimen","u_turn_left","u_turn_right","umbrella","unarchive","undo","unfold_less","unfold_less_double","unfold_more","unfold_more_double","unpublished","unsubscribe","upcoming","update","update_disabled","upgrade","upload","upload_file","usb","usb_off","vaccines","vape_free","vaping_rooms","verified","verified_user","vertical_align_bottom","vertical_align_center","vertical_align_top","vertical_distribute","vertical_shades","vertical_shades_closed","vertical_split","vibration","video_call","video_camera_back","video_camera_front","video_chat","video_collection","video_file","video_label","video_library","video_settings","video_stable","videocam","videocam_off","videogame_asset","videogame_asset_off","view_agenda","view_array","view_carousel","view_column","view_comfortable","view_comfy","view_comfy_alt","view_compact","view_compact_alt","view_cozy","view_day","view_headline","view_in_ar","view_kanban","view_list","view_module","view_quilt","view_sidebar","view_stream","view_timeline","view_week","vignette","villa","visibility","visibility_off","voice_chat","voice_over_off","voicemail","volcano","volume_down","volume_down_alt","volume_mute","volume_off","volume_up","volunteer_activism","vpn_key","vpn_key_off","vpn_lock","vrpano","wallet","wallet_giftcard","wallet_membership","wallet_travel","wallpaper","warehouse","warning","warning_amber","wash","watch","watch_later","watch_off","water","water_damage","water_drop","waterfall_chart","waves","waving_hand","wb_auto","wb_cloudy","wb_incandescent","wb_iridescent","wb_shade","wb_sunny","wb_twighlight","wb_twilight","wc","web","web_asset","web_asset_off","web_stories","webhook","wechat","weekend","west","whatsapp","whatshot","wheelchair_pickup","where_to_vote","widgets","width_full","width_normal","width_wide","wifi","wifi_1_bar","wifi_2_bar","wifi_calling","wifi_calling_3","wifi_channel","wifi_find","wifi_lock","wifi_off","wifi_password","wifi_protected_setup","wifi_tethering","wifi_tethering_error","wifi_tethering_error_rounded","wifi_tethering_off","wind_power","window","wine_bar","woman","woman_2","woo_commerce","wordpress","work","work_history","work_off","work_outline","workspace_premium","workspaces","workspaces_filled","workspaces_outline","wrap_text","wrong_location","wysiwyg","yard","youtube_searched_for","zoom_in","zoom_in_map","zoom_out","zoom_out_map",...Object.keys($l.a)];class Gl extends f.Component{constructor(...e){super(...e),M()(this,"resolveModel",e=>{const{global:t}=this.props;return"campaign"===e?t.campaign:Object(po.g)(t,this.props.node,"profile")})}render(){const{global:e}=this.props,{profile:t,style:a,size:n,showTotal:o,showGoal:r,displaySource:i,statPosition:l,showCustomMetric:s,metricUnitSingular:c,metricUnit:u,metricValue:d,progressIcon:m}=this.props.getValues(),p=this.resolveModel(t),f=s?{metricValue:d,metricUnitSingular:c,metricUnit:u,metricPosition:"bottom"===l?"top":"bottom"}:{},b=s?Vr:Yt.a;return p&&!e.loadingCurrent&&e.userAuthAttempted?g.a.createElement(b,{size:n,style:a,profile:p,displaySource:i,showTotal:o,statPosition:l,showGoal:r,progressIcon:m,metricValue:f.metricValue,metricUnit:f.metricUnit,metricUnitSingular:f.metricUnitSingular,metricPosition:f.metricPosition}):g.a.createElement(b,{size:n,style:a,profile:{total:null,currency:"AUD",goal:null},showTotal:o,statPosition:l,showGoal:r,progressIcon:m,metricValue:f.metricValue,metricUnit:f.metricUnit,metricUnitSingular:f.metricUnitSingular,metricPosition:f.metricPosition})}}M()(Gl,"description","Show fundraising progress against a goal."),M()(Gl,"group","common"),M()(Gl,"icon","straighten"),M()(Gl,"internalEditable",{displaySource:{label:"Type of total",type:"select",options:[{value:"total",label:"Total"},{value:"activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}],help:"Determines the type of total to display (in progress bars and amounts)"},profile:{label:"Show progress bar for",type:"profile"},size:{label:"Size",type:"select",options:Yt.b,group:"display"},style:{label:"Style",type:"select",options:Yt.c,group:"display"},showTotal:{label:"Show Total",type:"boolean",group:"display"},showGoal:{label:"Show Goal",type:"boolean",group:"display"},statPosition:{label:"Position",type:"select",options:[{value:"top",label:"Top"},{value:"middle",label:"Middle"},{value:"bottom",label:"Bottom"}],group:"display"},progressIcon:{label:"Progress Icon",type:"type-ahead",options:ql,help:'Search and select any Google Material Icon. <a href="https://material.io/tools/icons/" target="_blank">You can view the range here.</a>',group:"display"},showCustomMetric:{label:"Add Custom Metric",type:"boolean",group:"customMetric"},metricUnitSingular:{label:"Item Name - Singular",type:"text",group:"customMetric"},metricUnit:{label:"Item Name - Plural",type:"text",group:"customMetric"},metricValue:{label:"Item Value",type:"number",help:"The value of each item (in cents - campaign currency)",group:"customMetric"}}),M()(Gl,"schema",{data:{customComponent:"RaiselyProgressBar",editable:{size:{value:"medium"},style:{value:"standard"},profile:{value:"current"},showTotal:{value:!0},showGoal:{value:!0},statPosition:{value:"top"},progressIcon:{value:null},displaySource:{value:"total"},showCustomMetric:{value:!1},metricUnitSingular:{value:""},metricUnit:{value:""},metricValue:{value:100}}}}),Gl.displayName="RaiselyProgressBar",Object(po.f)(Gl);class zl extends f.Component{render(){const e=Object(po.g)(this.props.global,this.props.node),{maxWidth:t,showRank:a,align:n}=this.props.getValues(),{defaultProfileUrl:o}=this.props.global.campaign.config.theme;return g.a.createElement(zt.a,{defaultImage:o||"",profile:e,maxWidth:t,showRank:a,align:n})}}M()(zl,"description","The image someone has uploaded to their fundraising page"),M()(zl,"group","embed"),M()(zl,"icon","face"),M()(zl,"internalEditable",{profile:{label:"Show image for:",type:"profile"},maxWidth:{label:"Max width",type:"range",max:800,min:25,postFix:"px",additional:{defaultValueFromSelector:[".profile-image__photo","clientWidth"]}},align:{label:"Alignment",type:"select",options:["left","center","right"]},showRank:{label:"Show rank (if available)",type:"boolean"}}),M()(zl,"schema",{data:{customComponent:"RaiselyProfileImage",editable:{profile:{value:"current"},showRank:{value:!1},align:{value:"left"}}}}),zl.displayName="RaiselyProfileImage",Object(po.f)(zl);class Yl extends f.Component{render(){const{height:e}=this.props.getValues(),t={height:e+"px"};return g.a.createElement("div",{style:t})}}M()(Yl,"description","Create space between other blocks."),M()(Yl,"group","layout"),M()(Yl,"icon","open_in_full"),M()(Yl,"internalEditable",{height:{label:"Size",type:"range",max:1e3,min:1}}),M()(Yl,"schema",{data:{customComponent:"RaiselySpacer",editable:{height:{value:10}}}}),Yl.displayName="RaiselySpacer",Object(po.f)(Yl);const Wl=[null,"First","Second","Third"],Zl=e=>({[e+"label"]:{label:Wl[e]+" Button Text",type:"text",group:"button"+e},[e+"theme"]:{label:Wl[e]+" Button Style",type:"select",options:[{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"inverse",label:"Inverse"},{value:"cta",label:"Call to Action"}],group:"button"+e},[e+"href"]:{label:Wl[e]+" Button Link",type:"text",group:"button"+e,disableDynamic:!0},[e+"extraClass"]:{label:Wl[e]+" Button Custom Classes",type:"text",group:"button"+e,disableDynamic:!0}}),Kl=e=>1===e?"My First Button":2===e?"My Second Button":"",Jl=e=>({[e+"label"]:{value:Kl(e)},[e+"theme"]:{value:"primary"},[e+"href"]:{value:"/"},[e+"extraClass"]:{value:""}});class Ql extends f.Component{render(){const e=this.props.getValues(),t=[];for(let a=0;a<=3;a+=1)if(e[a+"label"]){const n=e[a+"href"],o="#donate-modal"===n;t.push(g.a.createElement(ht.a,{channelId:"raisely-donationform-modal",key:"button-"+a},({send:t})=>g.a.createElement(V.a,{theme:e[a+"theme"],href:o?null:n,className:e[a+"extraClass"]||"",onClick:o?()=>t("show"):null},e[a+"label"])))}return g.a.createElement("div",{className:"button-row button-row--"+e.align},t)}}M()(Ql,"description","Button row for rendering up to three buttons"),M()(Ql,"group","common"),M()(Ql,"icon","crop_7_5"),M()(Ql,"internalEditable",{align:{label:"Alignment",type:"select",options:["left","center","right"]},buttonSettingInfo:{type:"block-comment",help:'You can change things like the size and colour of your buttons in your <a target="_blank" href="../setup/signup">Button Settings</a>.'},...Zl(1),...Zl(2),...Zl(3)}),M()(Ql,"schema",{data:{customComponent:"RaiselyButtonRow",editable:{align:{value:"left"},...Jl(1),...Jl(2),...Jl(3)}}}),Ql.displayName="RaiselyButtonRow",Ql.editorName="Buttons",Object(po.f)(Ql);class Xl extends f.Component{render(){const{align:e,icon:t,position:a,custom:n,fit:o,size:r,color:i,label:l,description:s,href:c}=this.props.getValues(),u=c?"a":"div";return g.a.createElement(u,{href:c||void 0,className:`icon-container ${c?"icon-container--link":""} ${Boolean(l)?"icon-container--has-label":""}${a?" icon-container--position icon-container--position-"+a:""} icon-container--size-${r||"default"}`},g.a.createElement(es,{icon:t,size:r,fit:o,color:i,campaign:this.props.global.campaign,custom:n}),g.a.createElement("span",{className:"icon-container__text"},Boolean(l)&&g.a.createElement("span",{className:"icon-container__label icon-container__label-"+e},l),Boolean(s)&&g.a.createElement("span",{className:"icon-container__description icon-container__description-"+e},s)))}}function es({icon:e,size:t,fit:a,color:n,campaign:o,custom:r}){return r?g.a.createElement("img",{className:`icon icon--custom icon--${t} icon--custom-${a}`,loading:"lazy",src:r}):g.a.createElement(Xe.a,{name:e,size:t,fit:a,color:Object(bl.a)(n,o)})}M()(Xl,"description","A block icon component"),M()(Xl,"group","common"),M()(Xl,"icon","stars"),M()(Xl,"selector",".icon"),M()(Xl,"internalEditable",{align:{label:"Text Alignment",type:"select",options:["left","center","right"]},position:{label:"Icon Placement",type:"select",options:["left","center","right"]},icon:{label:"Icon Name",type:"type-ahead",options:ql,help:'Search and select any Google Material Icon. <a href="https://material.io/tools/icons/" target="_blank">You can view the range here.</a>'},custom:{label:"Custom Icon Upload",type:"image"},fit:{label:"Custom Icon Fit",type:"select",options:["contain","cover"]},size:{label:"Size",type:"select",options:Xe.b},color:{label:"Color",type:"color"},href:{label:"Link URL",type:"text"},label:{help:"A label to place next to the icon",type:"text",label:"Label"},description:{help:"A longer description to place next to the icon",type:"text",label:"Description"}}),M()(Xl,"schema",{data:{customComponent:"RaiselyIcon",editable:{align:{value:"left"},position:{value:"left"},icon:{value:"add"},fit:{value:"contain"},size:{value:"medium"},color:{value:"#000000"},label:{value:"This is the icon label"},description:{value:"Type a description here"}}}}),Xl.displayName="RaiselyIcon",Object(po.f)(Xl);const ts=[...Object.values(Be.h),""],as={INDIVIDUAL:"Example Profile",GROUP:"Team Incredible",ORGANISATION:"Example Organisation"},ns=(e={})=>({campaign:e.campaignUuid,limit:20,sort:"createdAt",order:"desc",user:e.user?e.user.uuid:null,type:ts.includes(e.type)?e.type:void 0}),os=(e,t)=>{return e.user.mock?(a=1,n=e.type,Object(G.p)(Array.from(Array(a)).map((e,t)=>({uuid:se()(),name:as[n]||as.INDIVIDUAL,total:27e3,goal:35e3,type:n||Be.h.individual,photoUrl:"https://picsum.photos/300/300/?random",description:"An example fundraising description",path:"example",currency:"AUD",createdAt:x()().subtract(5*t,"days").format(),updatedAt:x()().subtract(5*t,"days").format()})))):u.a.profiles.getAll({query:ns(e)});var a,n};function rs(e){if(!e.user||!e.user.uuid)return null;const{profile:t}=e.user,a=t?t.parent:null;let n=null;return e.type===Be.h.group?n=null==t?void 0:t.teamProfile:e.type===Be.h.organisation&&(n=null==t?void 0:t.organisationProfile),g.a.createElement("div",{className:"profile-management-list"},e.header,g.a.createElement(J,N()({},e,{pollingMethod:os,hidePagination:!0}),e=>e.filter(e=>{var o;return!t||!a||e.uuid!==(null===(o=n)||void 0===o?void 0:o.uuid)}).map(e=>g.a.createElement("div",{key:e.uuid,className:"profile-management-list__item"},g.a.createElement(Ue.a,{detail:"user",profile:e})))),n&&g.a.createElement(Ue.a,{detail:"default",profile:n}),e.type===Be.h.group&&t&&g.a.createElement(oa,{disableGroupCreate:e.disableGroupCreate,disableProfileSearch:e.disableProfileSearch,profile:t,campaign:e.campaign}))}rs.propTypes={type:h.a.oneOf(ts),user:h.a.object,campaign:h.a.object,disableGroupCreate:h.a.bool,disableProfileSearch:h.a.bool};const is=Object(Qi.b)(),{render:ls}=is;class ss extends f.Component{render(){const{global:e}=this.props,{uuid:t}=e.campaign,{type:a,heading:n,disableGroupCreate:o,disableProfileSearch:r}=this.props.getValues();return g.a.createElement(rs,{header:g.a.createElement(ls,N()({},n,{campaign:e.campaign})),type:a,user:e.user,campaign:e.campaign,campaignUuid:t,disableGroupCreate:o,disableProfileSearch:r})}}M()(ss,"description","A list of the user's profiles for their dashboard."),M()(ss,"restrictions",{page:["dashboard"]}),M()(ss,"group","group"),M()(ss,"icon","crop_7_5"),M()(ss,"internalEditable",{...is.internalEditable,type:{label:"Profile Type",type:"select",options:[{value:"",label:"Any"},{value:Be.h.individual,label:"Individual Fundraisers"},{value:Be.h.group,label:"Team Fundraisers"},{value:Be.h.organisation,label:"Organisation Fundraisers"}]},disableGroupCreate:{label:"Disable group create link",type:"boolean"},disableProfileSearch:{label:"Disable profile search",type:"boolean"}}),M()(ss,"schema",{data:{customComponent:"RaiselyProfileManagementList",editable:{...is.editable,type:{value:Be.h.individual},disableGroupCreate:{value:!1},disableProfileSearch:{value:!1}}}}),ss.displayName="RaiselyProfileManagementList",Object(po.f)(ss);class cs extends f.Component{render(){const{global:e}=this.props,{profile:t}=e.user||{};return t?g.a.createElement(oa,{profile:t,campaign:e.campaign}):null}}M()(cs,"description","Show a textbox with a link to the current team or buttons to create/join a team."),M()(cs,"group","common"),M()(cs,"icon","supervisor_account"),M()(cs,"schema",{data:{customComponent:"RaiselyTeamInfo",editable:{}}}),cs.displayName="RaiselyTeamInfo",Object(po.f)(cs);var us=a(204);const ds=Object(Qi.b)(),{render:ms}=ds;class ps extends f.Component{render(){const{global:e}=this.props,{heading:t={}}=this.props.getValues();if(!e.current||!e.current.profile)return g.a.createElement(us.a,{total:1});if(e.current.profile.mock)return g.a.createElement(Ue.a,{header:g.a.createElement(ms,N()({},t,{campaign:e.campaign})),profile:Object.assign({},e.current.profile,{name:"Team Awesome"}),detail:"default"});if(!e.current.profile.parent)return null;if(e.current.profile.parent.uuid===e.campaign.profile.uuid)return null;const{t:a}=Object(d.a)();return t.text=t.text||a("My [[teamTerm]]",{teamTerm:Object(Be.c)(Be.h.group,e.campaign.config.profiles,!1,!0)}),g.a.createElement(g.a.Fragment,null,e.current.profile.teamProfile&&g.a.createElement(Ue.a,{header:g.a.createElement(ms,N()({},t,{campaign:e.campaign})),profile:e.current.profile.parent,detail:"default"}),e.current.profile.organisationProfile&&g.a.createElement(Ue.a,{header:g.a.createElement(ms,{text:a("My [[organisationTerm]]",{organisationTerm:Object(Be.c)(Be.h.organisation,e.campaign.config.profiles,!1,!0)}),level:6,campaign:e.campaign}),profile:e.current.profile.organisationProfile,detail:"default"}))}}M()(ps,"description","Displays a basic preview of a a fundraising profile's team."),M()(ps,"group","embed"),M()(ps,"icon","supervisor_account"),M()(ps,"internalEditable",{...ds.internalEditable}),M()(ps,"schema",{data:{customComponent:"RaiselyTeamPreview",editable:{}}}),ps.displayName="RaiselyTeamPreview",Object(po.f)(ps);const fs=e=>{const t=e.profile.mock?{path:"",name:"Parent profile link"}:(({profile:e,campaign:t})=>{const a=e.parent;return a&&a.uuid!==t.profile.uuid?a:null})(e);return t?g.a.createElement(V.a,{href:"/"+t.path},t.name):null};var gs=fs;fs.propTypes={profile:h.a.object,campaign:h.a.object};class bs extends f.Component{render(){const{global:e}=this.props,{profile:t}=e.current;return t?g.a.createElement(gs,{profile:t,campaign:e.campaign}):null}}M()(bs,"description","Shows link to the parent of the current profile, if they have one"),M()(bs,"group","common"),M()(bs,"icon","supervisor_account"),M()(bs,"schema",{data:{customComponent:"RaiselyTeamLink",editable:{}}}),bs.displayName="RaiselyTeamLink",bs.editorName="Parent Profile Link",Object(po.f)(bs);class hs extends f.Component{render(){const{global:e}=this.props,{defaultProfileUrl:t}=this.props.global.campaign.config.theme;return g.a.createElement(Ue.a,{profile:e.current.profile,detail:"post",defaultImage:t})}}M()(hs,"description","Displays a basic preview of a fundraising profile."),M()(hs,"group","embed"),M()(hs,"icon","account_circle"),M()(hs,"schema",{data:{customComponent:"RaiselyProfilePreview",editable:{}}}),hs.displayName="RaiselyProfilePreview",Object(po.f)(hs);const ys=Object(Qi.b)(),{render:vs}=ys;class _s extends f.Component{constructor(...e){super(...e),M()(this,"resolveLeaderboardTarget",e=>{const{global:t}=this.props,{uuid:a,path:n}=t.campaign;switch(e){case"campaign":return{campaignUuid:a,profileUuid:null};case"user":return{campaignUuid:a,userUuid:t.user&&t.user.uuid};case"current":return{campaignUuid:a,profileUuid:t.current.profile&&t.current.profile.uuid};case"currentUser":return{campaignUuid:a,userUuid:t.current.profile&&t.current.profile.user.uuid};case"team":return{campaignUuid:a,profileUuid:t.user.profile&&t.user.profile.parent&&t.user.profile.parent.path!==n?t.user.profile.parent.uuid:null};default:return{}}})}render(){const{global:e}=this.props,{defaultProfileUrl:t}=e.campaign.config.theme,{t:a}=Object(d.a)(),{filter:n,limit:o,sort:r,order:i,type:l,heading:s,profile:c}=this.props.getValues();if(!e.campaign.mock&&"user"===c&&!e.user)return null;const{campaignUuid:u,profileUuid:m,userUuid:p}=this.resolveLeaderboardTarget(c);if("team"===c&&!m){const{profiles:t}=e.campaign.config,n=Object(Be.d)(Be.h.group,t);return g.a.createElement("div",{className:"profilelist profilelist--no-results"},g.a.createElement("p",null,a("You are not currently part of [[aTeam]]",{aTeam:n})))}return m||u||p?g.a.createElement(na,{header:g.a.createElement(vs,N()({},s,{campaign:e.campaign})),filter:n,limit:parseInt(o,10),sort:r,order:i,type:l,defaultImage:t,campaignUuid:u,profileUuid:m,userUuid:p,user:e.user,showAsLoading:e.loadingCurrent}):g.a.createElement(po.c.Full,null)}}function Es({image:e,href:t,text:a,size:n}){const o={};let r;e&&(r=Object(Rn.a)(e,{maxWidth:1024}),o.backgroundImage=`url(${Object(Rn.a)(e,{maxWidth:1024,quality:1})})`);const i=a&&g.a.createElement("span",{className:"image-tile__text"},a);return g.a.createElement("div",{className:`image-tile image-tile--${a?"text-yes":"text-no"} image-tile--size-${n}`},t.includes("://")&&g.a.createElement("a",{className:"image-tile__link",href:t,target:"_blank"},i),t&&!t.includes("://")&&g.a.createElement(m.a,{className:"image-tile__link",to:t},i),!t&&i&&i,g.a.createElement("div",{className:"image-tile__image lazy",style:o,"data-bg":r}))}M()(_s,"description","A large grid of featured profiles or appeals"),M()(_s,"group","embed"),M()(_s,"icon","recent_actors"),M()(_s,"internalEditable",{...ys.internalEditable,profile:{label:"Show profiles from:",type:"select",options:[{value:"campaign",label:"Whole campaign"},{value:"current",label:"Current profile",onlyProvider:["profile"]},{value:"currentUser",label:"Current profile owner",onlyProvider:["profile"]},{value:"user",label:"Owned by user"},{value:"team",label:"In the user's team"}]},type:{label:"Profile Type",type:"select",options:[{value:"",label:"Any"},{value:Be.h.individual,label:"Individual Fundraisers"},{value:Be.h.group,label:"Team Fundraisers"}]},limit:{label:"Limit",type:"number"},sort:{label:"Sort By",type:"select",options:[{value:"name",label:"Fundraiser Name"},{value:"createdAt",label:"Signup Date"},{value:"total",label:"Total Raised"}]},order:{label:"Order",type:"select",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]},filter:{label:"Filter",group:"filters",options:["profile"],type:"filter",additional:{hidePrivateFields:!0}}}),M()(_s,"schema",{data:{customComponent:"RaiselyProfileGrid",editable:{...ys.editable,profile:{value:"current"},type:{value:Be.h.individual},limit:{value:5},sort:{value:"createdAt"},order:{value:"desc"},filter:{value:[]}}}}),_s.displayName="RaiselyProfileGrid",Object(po.f)(_s),Es.propTypes={image:h.a.string,href:h.a.string,text:h.a.string};class ks extends f.Component{render(){const{image:e,href:t,text:a,size:n}=this.props.getValues();return g.a.createElement(Es,{image:e,href:t,text:a,size:n})}}M()(ks,"description","An image with a link and text overlay"),M()(ks,"icon","panorama"),M()(ks,"group","common"),M()(ks,"internalEditable",{image:{label:"Image",type:"image-url"},href:{label:"Link URL",type:"text"},text:{label:"Text",type:"text"},size:{label:"Size",type:"select",options:[{value:"rectangle",label:"Rectangle"},{value:"square",label:"Square"},{value:"tall",label:"Tall"}]}}),M()(ks,"schema",{data:{customComponent:"RaiselyImageTile",editable:{href:{value:"#"},text:{value:"Example tile text"},size:{value:"rectangle"}}}}),ks.displayName="RaiselyImageTile",Object(po.f)(ks);class ws extends f.Component{render(){const{campaign:e}=this.props.global,{align:t,width:a}=this.props.getValues();return g.a.createElement(mi,{campaign:e,align:t,width:a&&a+"px"})}}M()(ws,"description","Your campaign logo"),M()(ws,"group","common"),M()(ws,"internalEditable",{align:{label:"Alignment",type:"select",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},width:{label:"Width",type:"range",max:500,min:0,postFix:"px",help:"The image will not exceed the width of the column."}}),M()(ws,"schema",{data:{customComponent:"RaiselyCampaignLogo",editable:{align:{value:"center"}}}}),ws.displayName="RaiselyCampaignLogo",Object(po.f)(ws);let Os;const Ss=Object(r.b)("svg")(Os||(Os=(e=>e)`
	fill: ${0};
	path {
		fill: ${0};
	}
	polygon {
		fill: ${0};
	}
	width: auto;
	height: 20px;
	display: inline-block;
	vertical-align: right;
	margin-top: -0.125rem;
`),({fillColour:e})=>e,({fillColour:e})=>e,({fillColour:e})=>e);function Ts({path:e,stravaLogoColour:t,showStravaAttribution:a=!1}){const{t:n}=Object(d.d)(),o=n("Compatible with Strava");return g.a.createElement("div",{className:"attribution"},g.a.createElement("a",{href:"https://raisely.com/?utm_source=footer&utm_medium=organic&utm_campaign=sign_up&utm_content="+e,target:"_blank",rel:"noopener noreferrer"},n("Powered by"),g.a.createElement("svg",{viewBox:"0 0 1097 271","aria-labelledby":"raiselyAttributionTitle",role:"img",className:"raisely-logo"},g.a.createElement("title",{id:"raiselyAttributionTitle"},"Raisely"),g.a.createElement("g",null,g.a.createElement("path",{id:"icon",className:"raisely-logo__icon",d:"M119.297 16.21C53.523 16.21 0 69.685 0 135.433s53.523 119.195 119.297 119.195 119.296-53.477 119.296-119.195c0-65.718-53.522-119.225-119.296-119.225Zm6.743 25.505c45.786 3.218 83.083 39.911 86.936 85.628 1.836 21.806-3.853 42.258-14.72 59.011a.992.992 0 0 1-1.565.12l-75.588-85.689c-.813-.902-2.228-.902-3.01 0l-75.95 86.05c-.42.482-1.203.421-1.535-.09-9.662-14.768-15.292-32.393-15.292-51.311 0-54.018 45.807-97.57 100.684-93.72h.04ZM59.724 205.091l59.121-67.011a.984.984 0 0 1 1.445 0l60.356 68.395c-16.496 14.226-37.929 22.858-61.349 22.858-23.42 0-43.137-7.94-59.302-21.144-.964-.782-1.054-2.196-.241-3.128l-.03.03Z"})),g.a.createElement("g",null,g.a.createElement("path",{id:"text",className:"raisely-logo__text",d:"M627.117 42c-10.385 0-18.453 7.61-18.453 17.745 0 10.377 8.309 17.746 18.453 17.746 10.145 0 18.453-7.61 18.453-17.746S637.503 42 627.117 42Zm-12.884 56.484c3.974 1.173 8.339 1.775 12.884 1.775v.03c4.516 0 8.73-.572 12.824-1.835.963-.3 1.987.361 1.987 1.384l.06 117.45c0 .722-.602 1.323-1.325 1.323h-27.092a1.335 1.335 0 0 1-1.324-1.323V99.868c0-1.023.993-1.684 1.986-1.384Zm361.653 96.096c-14.359 1.263-25.316-1.444-25.316-15.911V43.323c0-.721-.602-1.323-1.325-1.323h-27.664c-.722 0-1.324.602-1.324 1.323v135.015c0 20.242 5.96 40.514 35.641 41.747 7.348.311 12.759-.863 15.262-1.406l.197-.043.148-.032.107-.023c.632-.12 1.023-.361 1.234-1.353l4.425-21.415c.181-.902-.572-1.323-1.385-1.233Zm69.354 41.265 51.39-133.511c.33-.872-.3-1.774-1.24-1.774h-27.93c-.57 0-1.06.361-1.24.872l-25.97 72.906c-1.99 5.685-2.74 8.662-3.95 14.768 0 .15-.15.241-.3.241 0 0-.27-.121-.3-.241-.96-5.835-1.5-8.602-3.7-14.768l-26.46-72.906c-.18-.511-.7-.872-1.24-.872h-30.16c-.933 0-1.565.932-1.234 1.804l48.374 120.248c.12.33.12.691 0 .992l-3.04 7.249c-4 9.263-9.51 15.249-20.77 15.249-5.238 0-9.844-1.564-12.162-2.527-.812-.331-1.776.151-1.926.993l-4.215 21.054c-.12.571.151 1.142.693 1.383 2.468 1.083 9.843 3.85 20.138 3.85 24.532 0 37.812-15.249 45.302-35.01h-.06Zm-149.698-69.026h-79.561l.03-.03c-.782 0-1.415.722-1.264 1.504 3.191 16.692 15.112 28.001 35.28 28.001 15.985 0 25.106-7.038 30.314-12.873.511-.601 1.445-.601 1.986-.03l13.757 14.858c.422.482.452 1.173.061 1.685-9.182 11.339-26.19 20.151-49.369 20.151-39.314 0-63.095-24.753-63.095-60.274s23.51-60.785 59.814-60.785c34.528 0 54.305 23.76 54.305 55.522 0 5.504-.662 9.504-1.023 11.278-.121.602-.633.993-1.235.993Zm-26.58-18.618c-.783-14.797-10.416-25.415-25.497-25.415v-.03c-14.78 0-25.587 9.625-28.748 25.235-.181.812.451 1.534 1.264 1.534h51.686c.723 0 1.325-.602 1.295-1.324Zm-132.693-7.91c-.12.872.602 1.715 1.506 1.654l24.322-1.564c.542-.03 1.024-.391 1.144-.932.301-1.263.783-3.85.783-7.128 0-19.249-19.537-33.265-47.803-33.265-29.802 0-49.308 14.497-49.308 36.513 0 25.626 23.871 31.611 43.348 36.483l.091.023c13.356 3.359 24.623 6.192 24.623 14.535 0 6.767-6.743 11.248-20.53 11.248-16.316 0-31.788-9.474-36.725-13.354a1.414 1.414 0 0 0-1.957.181l-13.998 17.204c-.21.27-.18.631.091.842 4.876 4.06 20.921 17.384 53.372 17.384 32.45 0 50.813-13.504 50.813-34.769-.301-26.014-23.387-30.798-42.983-34.858l-.004-.001c-14.509-3.007-27.092-5.624-27.092-16.151 0-8 6.773-13.745 19.266-13.745 12.492 0 21.282 6.496 21.282 16.753 0 .992-.09 2.045-.18 2.977l-.061-.03Zm-147.171 55.071c-.061-.812-.783-1.354-1.596-1.233-.813.12-1.686.21-2.438.21-4.756 0-6.773-2.225-6.743-7.94v-84.546a1.266 1.266 0 0 0-1.264-1.323h-21.674c-.482 0-.934.27-1.144.721-2.378 5.083-3.131 11.61-2.98 15.219 0 .181-.121.301-.301.301-.121 0-.211-.06-.271-.18-5.87-14.227-21.433-17.565-32.722-17.565-32.932 0-58.309 25.565-56.683 65.778 1.294 32.152 24.684 55.311 51.475 55.311 16.858 0 27.905-7.97 34.528-18.377.753-1.173 2.89-.722 3.161.632 2.197 11.309 10.265 17.745 24.684 17.745 5.271 0 9.863-1.378 12.605-2.2v-.001c.671-.201 1.231-.369 1.664-.476a1.22 1.22 0 0 0 .933-1.323l-1.265-20.783.031.03Zm-69.477-.572c-15.021 0-26.039-13.143-27.364-29.986-2.016-25.956 8.881-40.213 27.394-40.213 18.513 0 27.965 11.249 28.567 33.867.602 22.617-10.837 36.332-28.597 36.332Zm-73.902-.21c.783-.09 1.505.481 1.565 1.263l1.776 21.415c.06.632-.361 1.233-.993 1.353-2.228.482-7.887 1.504-15.684 1.504-25.892 0-34.269-16.869-42.179-32.795l-.024-.049-.005-.009c-7.043-14.223-13.696-27.661-32.115-27.661h-8.188c-.722 0-1.324.601-1.324 1.323v56.424c0 .722-.602 1.324-1.325 1.324h-28.898a1.336 1.336 0 0 1-1.325-1.324V54.422c0-.722.602-1.324 1.325-1.324h53.01c41.542 0 64.33 16.483 64.33 54.259 0 21.956-11.861 37.506-31.668 45.597-1.114.451-1.295 1.924-.301 2.586 6.835 4.493 11.042 11.998 15.091 19.219l.05.091c5.72 10.256 11.198 19.971 23.33 19.971 1.384 0 2.649-.121 3.552-.241Zm-95.877-57.778h17.219c21.764 0 37.297-9.955 37.297-29.204 0-19.25-12.523-29.265-34.799-29.265h-19.717c-.723 0-1.325.601-1.325 1.323v55.823c0 .722.602 1.323 1.325 1.323Z"})))),a&&g.a.createElement("div",null,function(e="white",t){const a="white"===e?"#fff;":"#999;";return g.a.createElement(Ss,{id:"strava_outlined",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 188.8 30.57",fillColour:a},g.a.createElement("title",null,t),g.a.createElement("path",{d:"M108.12,23.3a14.15,14.15,0,0,1-4.31-.64,9.54,9.54,0,0,1-3.44-1.91l2.7-3.21a8,8,0,0,0,2.59,1.36,9.31,9.31,0,0,0,2.7.41,2.13,2.13,0,0,0,1-.17,0.53,0.53,0,0,0,.3-0.47v0a0.63,0.63,0,0,0-.44-0.54,7.69,7.69,0,0,0-1.65-.45q-1.27-.26-2.43-0.61a8.35,8.35,0,0,1-2-.88,4.27,4.27,0,0,1-1.39-1.36,3.69,3.69,0,0,1-.52-2v0a4.78,4.78,0,0,1,.42-2,4.57,4.57,0,0,1,1.23-1.62,5.85,5.85,0,0,1,2-1.08,8.9,8.9,0,0,1,2.75-.39,12.87,12.87,0,0,1,3.85.52,9.18,9.18,0,0,1,3,1.55L112,13.12A7.57,7.57,0,0,0,109.68,12a7.93,7.93,0,0,0-2.26-.36,1.56,1.56,0,0,0-.83.17,0.51,0.51,0,0,0-.27.45v0a0.62,0.62,0,0,0,.41.52,7,7,0,0,0,1.6.45,22.37,22.37,0,0,1,2.64.62,7.8,7.8,0,0,1,2,.94,4.16,4.16,0,0,1,1.32,1.37,3.81,3.81,0,0,1,.46,1.94v0a4.69,4.69,0,0,1-.48,2.14A4.57,4.57,0,0,1,113,21.93a6.35,6.35,0,0,1-2.09,1A9.87,9.87,0,0,1,108.12,23.3Z"}),g.a.createElement("path",{d:"M119,12.19h-4.45V7.92h13.95v4.27H124V23H119V12.19Z"}),g.a.createElement("path",{d:"M129.16,7.92h7.38a10.1,10.1,0,0,1,3.33.46A5.54,5.54,0,0,1,142,9.64a4.61,4.61,0,0,1,1,1.55,5.48,5.48,0,0,1,.35,2v0a4.77,4.77,0,0,1-.8,2.8,5.5,5.5,0,0,1-2.18,1.81L143.9,23h-5.76l-2.85-4.32h-1.08V23h-5.05V7.92Zm7.23,7.19a2.32,2.32,0,0,0,1.42-.39,1.28,1.28,0,0,0,.52-1.08v0a1.23,1.23,0,0,0-.52-1.09,2.44,2.44,0,0,0-1.4-.36h-2.2v3h2.18Z"}),g.a.createElement("polygon",{points:"173.11 16.52 176.4 23.02 181.24 23.02 173.11 6.97 164.98 23.02 169.82 23.02 173.11 16.52"}),g.a.createElement("polygon",{points:"150.48 16.52 153.77 23.02 158.61 23.02 150.48 6.97 142.35 23.02 147.19 23.02 150.48 16.52"}),g.a.createElement("polygon",{points:"161.8 14.41 158.5 7.92 153.66 7.92 161.8 23.97 169.93 7.92 165.09 7.92 161.8 14.41"}),g.a.createElement("path",{d:"M11.65,20.69l1.12,0.22A2.71,2.71,0,0,1,12,22.64a2.34,2.34,0,0,1-1.72.66,2.53,2.53,0,0,1-2-.84A3.61,3.61,0,0,1,7.55,20a3.34,3.34,0,0,1,.8-2.39,2.54,2.54,0,0,1,1.91-.84,2.37,2.37,0,0,1,1.66.62A2.51,2.51,0,0,1,12.71,19l-1.1.17a1.38,1.38,0,0,0-1.34-1.43,1.45,1.45,0,0,0-1.16.56A2.64,2.64,0,0,0,8.65,20a2.83,2.83,0,0,0,.45,1.76,1.42,1.42,0,0,0,1.17.58Q11.45,22.31,11.65,20.69Z"}),g.a.createElement("path",{d:"M17.93,23.11a2.83,2.83,0,0,1-2,0A2.63,2.63,0,0,1,15,22.53a2.6,2.6,0,0,1-.62-1A4.78,4.78,0,0,1,14.2,20a3.33,3.33,0,0,1,.8-2.38,2.55,2.55,0,0,1,1.92-.85,2.52,2.52,0,0,1,1.9.85,3.36,3.36,0,0,1,.8,2.39,4.78,4.78,0,0,1-.22,1.53,2.64,2.64,0,0,1-.61,1A2.53,2.53,0,0,1,17.93,23.11Zm-2.17-1.37a1.46,1.46,0,0,0,2.32,0A2.88,2.88,0,0,0,18.52,20a2.64,2.64,0,0,0-.46-1.67,1.43,1.43,0,0,0-2.29,0A2.61,2.61,0,0,0,15.31,20,2.89,2.89,0,0,0,15.76,21.74Z"}),g.a.createElement("path",{d:"M21.47,23.16v-6.3H22.7l1.89,4.39h0l1.87-4.39H27.7v6.3H26.64V18.83h0l-1.9,4.33H24.46l-1.9-4.33h0v4.33H21.47Z"}),g.a.createElement("path",{d:"M29.91,23.16v-6.3h2.51a2.25,2.25,0,0,1,1.56.53,1.85,1.85,0,0,1,.59,1.46A1.86,1.86,0,0,1,34,20.29a2.23,2.23,0,0,1-1.57.53H31v2.34H29.91ZM31,19.84H32.4a1.14,1.14,0,0,0,.77-0.27,1,1,0,0,0,0-1.49,1.23,1.23,0,0,0-.77-0.24H31v2Z"}),g.a.createElement("path",{d:"M39.32,23.16l-0.38-1.08H36.4L36,23.16H35l2.27-6.3h0.86l2.27,6.3H39.32ZM37.67,18.4l-1,2.77h1.92L37.68,18.4h0Z"}),g.a.createElement("path",{d:"M42.44,23.16V17.84H40.56v-1h4.82v1H43.5v5.32H42.44Z"}),g.a.createElement("path",{d:"M47,23.16v-6.3h1.06v6.3H47Z"}),g.a.createElement("path",{d:"M50.3,23.16v-6.3h2.59a1.86,1.86,0,0,1,1.34.48,1.58,1.58,0,0,1,.5,1.19A1.32,1.32,0,0,1,54,19.75v0a1.81,1.81,0,0,1,.68.54,1.46,1.46,0,0,1,.28.92q0,1.93-2.31,1.93H50.3Zm1.06-3.72h1.39a1.05,1.05,0,0,0,.69-0.2,0.72,0.72,0,0,0,.24-0.59,0.74,0.74,0,0,0-.25-0.6,1.06,1.06,0,0,0-.7-0.21H51.37v1.6Zm0,2.74h1.58a1.9,1.9,0,0,0,.38-0.06A0.77,0.77,0,0,0,53.65,22a0.8,0.8,0,0,0,.19-0.28,1.08,1.08,0,0,0,.08-0.44,0.74,0.74,0,0,0-.35-0.73,2.44,2.44,0,0,0-1.08-.18H51.37v1.85Z"}),g.a.createElement("path",{d:"M56.82,23.16v-6.3h1.06v5.32h2.65v1H56.82Z"}),g.a.createElement("path",{d:"M62.15,23.16v-6.3h3.92v1H63.21v1.62h2.61v0.95H63.21v1.77h2.86v1H62.15Z"}),g.a.createElement("path",{d:"M71.73,23.16l-1.21-6.3H71.6l0.86,4.44h0L74,16.86h0.6l1.48,4.44h0l0.85-4.44H78l-1.21,6.3H75.68l-1.42-4.32h0l-1.4,4.32H71.73Z"}),g.a.createElement("path",{d:"M79.79,23.16v-6.3h1.06v6.3H79.79Z"}),g.a.createElement("path",{d:"M84.36,23.16V17.84H82.48v-1h4.82v1H85.42v5.32H84.36Z"}),g.a.createElement("path",{d:"M88.87,23.16v-6.3h1.06v2.59h2.38V16.86h1.06v6.3H92.31V20.37H89.93v2.79H88.87Z"}))}(t,o)))}Ts.propTypes={path:h.a.string};class Ns extends f.Component{render(){const{campaign:e}=this.props.global,t=v()(e,"config.activity.active",!1);return g.a.createElement(Ts,N()({path:e.path,showStravaAttribution:t},this.props.getValues()))}}M()(Ns,"description",'"Powered by Raisely" attribution (incl Strava attribution if applicable)'),M()(Ns,"restrictions",{page:["layout"]}),M()(Ns,"internalEditable",{stravaLogoColour:{label:"Strava Logo Colour",type:"select",options:["white","gray"],controlledByConfig:"activity.active"}}),M()(Ns,"schema",{data:{customComponent:"RaiselyAttribution",editable:{stravaLogoColour:{value:"white"}}}}),Ns.displayName="RaiselyAttribution",Object(po.f)(Ns);class Cs extends f.Component{constructor(...e){super(...e),M()(this,"refetchUserProfile",async()=>{const{actions:e,global:t}=this.props,a=await u.a.users.meWithProfiles();return e.addUserProfile(Object(G.h)(a.body().data().data,t.campaign.uuid)),!0})}render(){const{global:e}=this.props,{profile:t}=e.current,{profile:a}=e.user||{};return g.a.createElement(kt,N()({},this.props,this.props.getValues(),{userProfile:a,profile:t,refetchUserProfile:this.refetchUserProfile}))}}M()(Cs,"description","Shows buttons for the user to edit/join/leave a profile if they are the profile owner"),M()(Cs,"group","common"),M()(Cs,"icon","supervised_user_circle"),M()(Cs,"restrictions",{page:["profile","teamProfile","organisationProfile","profileTeam","profileOrganisation"]}),M()(Cs,"internalEditable",{enablePublicJoin:{label:"Enable public join button",type:"boolean"},showDashboardButton:{label:"Show dashboard button",type:"boolean"},showDonateButton:{label:"Show donate button",type:"boolean"},showShareButton:{label:"Show share button",type:"boolean"},label:{label:"Team Label",type:"text",group:"advanced"},singularLabel:{label:"Profile Label",type:"text",group:"advanced"},align:{label:"Alignment",type:"select",options:["left","center","right"]}}),M()(Cs,"schema",{data:{customComponent:"RaiselyProfileControls",editable:{enablePublicJoin:{value:!0},showDashboardButton:{value:!0},showDonateButton:{value:!1},showShareButton:{value:!1},label:{value:"Team"},singularLabel:{value:"Profile"},align:{value:"left"}}}}),Cs.displayName="RaiselyProfileControls",Object(po.f)(Cs);class xs extends f.Component{render(){const{campaign:e,user:t}=this.props.global;return g.a.createElement(ae,N()({campaign:e,currentUser:t},this.props.getValues()))}}M()(xs,"description","A button to connect users to their Strava account"),M()(xs,"icon","pool"),M()(xs,"internalEditable",{connectLabel:{label:"Connect Label",help:"The label to show when the current logged in user is not connected to Strava",type:"text"},connectedLabel:{label:"Connected Label",help:"The label to show when the current logged in user is already connected to Strava",type:"text"}}),M()(xs,"schema",{data:{customComponent:"RaiselyStravaConnect",editable:{connectLabel:{value:""},connectedLabel:{value:""}}}}),M()(xs,"restrictions",{...Object(Qi.a)()}),xs.displayName="RaiselyStravaConnect",Object(po.f)(xs);class js extends f.Component{render(){return g.a.createElement(at,this.props.getValues())}}M()(js,"description","A button to prompt your fundraisers to create and connect a linked fundraiser on Facebook"),M()(js,"icon","facebook"),M()(js,"internalEditable",{align:{label:"Alignment",type:"select",options:["left","center","right"]},modalTitle:{label:"Create Fundraiser Title",type:"text",help:"Shown in the modal a fundraiser is shown asking them to create their Facebook Fundraiser"},modalIntro:{label:"Create Fundraiser Intro",type:"text"},thankYouTitle:{label:"Thank You Title",type:"text"},thankYouText:{label:"Thank You Text",type:"text"}}),M()(js,"schema",{data:{customComponent:"RaiselyFacebookFundraisingConnect",editable:{align:{value:"center"},modalTitle:{value:"Thanks for signing up, now boost your fundraising with Facebook!"},modalIntro:{value:"Create a linked Facebook Fundraiser to easily share your campaign with friends and family and let them donate directly in Facebook."},thankYouTitle:{value:"Congratulations, your Facebook fundraiser is live!"},thankYouText:{value:"We've set up a fundraiser on your Facebook page. Your friends and family can now donate directly through Facebook. It's a great way to get the word out! Ready to have a look and share it?"}}}}),M()(js,"restrictions",{page:["dashboard"]}),js.displayName="RaiselyFacebookFundraisingConnect",Object(po.f)(js);const{render:Ps,...As}=Object(Qi.b)();class Ds extends f.Component{render(){const{actions:e,global:t}=this.props,{t:a}=Object(d.a)(),n=this.props.getProfile("profile",{strict:!0});if(!n)return null;const{heading:o,profile:r,showActivityType:i,showIcons:l,decimalPlaces:s,enableActivityLogging:c,enableActivityIntegrations:u,field:m}=this.props.getValues(),p="user"===r?()=>{e.addSuccessMessage(a("Activity successfully removed")),e.triggerPageStreamRefetch()}:null;return g.a.createElement(ie,{header:g.a.createElement(Ps,N()({},o,{campaign:t.campaign})),profile:n,field:m,onDelete:p,showActivityType:i,showIcons:l,enableActivityLogging:c,enableActivityIntegrations:u,decimalPlaces:s})}}M()(Ds,"description","Lists exercise activities from a profile"),M()(Ds,"icon","pool"),M()(Ds,"internalEditable",{...As.internalEditable,profile:{label:"Show activity from",type:"select",options:[{value:"user",label:"The logged in user's profile"},{value:"current",label:"The current profile in view",onlyProvider:["profile"]}]},decimalPlaces:{label:"The number of allowed decimal places to show on displayed units",type:"range",min:0,max:4},showActivityType:{label:"Show Activity type in Label",type:"boolean"},showIcons:{label:"Show activity icons for each item",type:"boolean"},enableActivityLogging:{label:"Allow activity logging (when available)",type:"boolean"},enableActivityIntegrations:{label:"Allow connection to activity tracking apps (when available)",type:"boolean"}}),M()(Ds,"restrictions",{...Object(Qi.a)()}),M()(Ds,"schema",{data:{customComponent:"RaiselyStravaActivityList",editable:{...As.editable,profile:{value:"user"},showActivityType:{value:!0},showIcons:{value:!0},enableActivityLogging:{value:!0},enableActivityIntegrations:{value:!0},decimalPlaces:{value:0}}}}),Ds.displayName="RaiselyStravaActivityList",Ds.editorName="Activity List",Object(po.f)(Ds);const{render:Rs,...Fs}=Object(Qi.b)();class Is extends f.Component{render(){const{actions:e,global:t}=this.props,{t:a}=Object(d.a)(),{heading:n,dateLabel:o,distanceLabel:r,activity:i,activityField:l}=this.props.getValues(),s="campaign"===i?v()(t.campaign.config,"activity.type")||"ANY":i;let c=l;"FIELD"!==s||c||(c=v()(t.campaign.config,"activity.field"));const u=v()(t.campaign.config,"activity.unit");return g.a.createElement(S,{header:g.a.createElement(Rs,N()({},n,{campaign:t.campaign})),campaign:t.campaign,currentUser:t.user,dateLabel:o,distanceLabel:r,useTime:"TIME"===s,unit:u,onSuccess:()=>{e.addSuccessMessage(a("Added activity")),e.triggerPageStreamRefetch()},activity:s,activityField:c,onFailure:t=>e.addErrorMessage(t)})}}M()(Is,"description","Allow users to log their exercise progress"),M()(Is,"icon","alarm_add"),M()(Is,"internalEditable",{...Fs.internalEditable,dateLabel:{label:"Date Label",help:"The label above the date entry area",type:"text"},distanceLabel:{label:"Measure Label",help:"The label shown above the measure entry area",type:"text"}}),M()(Is,"restrictions",{...Object(Qi.a)()}),M()(Is,"schema",{data:{customComponent:"RaiselyStravaAddActivity",editable:{...Fs.editable,dateLabel:{value:"Date"},distanceLabel:{value:""},activity:{value:"campaign"}}}}),Is.displayName="RaiselyStravaAddActivity",Is.editorName="Add Activity",Object(po.f)(Is);var Ms=a(125);function Ls({donation:e,campaign:t}){const{t:a}=Object(d.d)();return(e=>null!==v()(e,"profile.path",null))(e)&&e.profile.path!==t.path?g.a.createElement("p",{className:"donation-tile__content__activity"},g.a.createElement("span",{className:"donation-tile__content__donor"},g.a.createElement("em",{className:"donation-tile__content__donor__first-name"},a("You"))),g.a.createElement("span",null," "+a("donated to")," ",e.profile.name)):g.a.createElement("p",{className:"donation-tile__content__activity"},g.a.createElement("span",{className:"donation-tile__content__donor"},g.a.createElement("em",{className:"donation-tile__content__donor__first-name"},a("You"))),g.a.createElement("span",null," "+a("donated to")," ",t.name))}function Bs({donation:e,campaign:t,user:a,showAsLoading:n,actions:o}){const{t:r}=Object(d.d)(),i=n?" ":Object(G.f)(e.amount,e.currency),[l,s]=Object(f.useState)(r("Resend Receipt")),[c,m]=Object(f.useState)(!1);return g.a.createElement("div",{className:"donation-management-item"},n&&g.a.createElement(Ms.a,{reverse:!0,style:{height:"3rem",width:"100%"}}),!n&&g.a.createElement(f.Fragment,null,g.a.createElement("div",{className:"donation-management-item__amount"},g.a.createElement("span",null,i)),g.a.createElement("div",{className:"donation-management-item__content"},g.a.createElement(Ls,{donation:e,user:a,campaign:t,displayAmount:i}),g.a.createElement("p",{className:"donation-management-item__content__timestamp"},x()(e.createdAt).format("MMMM D, YYYY h:mm A"))),g.a.createElement("div",{className:"donation-management-item__actions"},g.a.createElement(V.a,{onClick:t=>(async(e,t)=>{e&&e.preventDefault();try{m(!0),s(r("One moment...")),await u.a.donations.resend.create({id:t.uuid}),s(r("Receipt Sent")),setTimeout(()=>{s(r("Resend Receipt"))},2e3),m(!1),o&&o.addSuccessMessage(r("We've sent you a new receipt. Check your junk folder if you can't see it in a few minutes."))}catch(e){s(r("Resend Receipt")),m(!1),o&&o.addErrorMessage(e)}})(t,e),className:"donation-management-item__content__resend",disabled:c},l))))}Bs.propTypes={donation:h.a.object,campaign:h.a.object,user:h.a.object,showAsLoading:h.a.bool};const Us=["createdAt","amount"],Hs=["desc","asc"],Vs={amount:"campaignAmount",createdAt:"createdAt"},$s=(e={},t=0,a)=>{const n=Object(G.n)(e.user,e.profile),o={offset:t,limit:D()(e.limit)&&e.limit>0?e.limit:10,sort:Vs[Us.includes(e.sort)?e.sort:Us[0]],order:Hs.includes(e.order)?e.order:Hs[0],highlight:e.highlight,includePrivate:e.displayThanksForm&&n?"thankyou":void 0,mode:e.campaign.mode};return a?(o.excludeMatched=!0,{...o,limit:1,sort:"campaignAmount",order:"desc"}):o},qs=(e,t,a=!1)=>{const{campaign:n}=e;return n.mock?(o=e.limit,Object(G.p)(Array.from(Array(o)).map((e,t)=>({uuid:se()(),amount:1e3,firstName:"Example",preferredName:"Example",currency:"AUD",profile:{name:"Team Incredible",path:"team-incredible"},createdAt:x()().subtract(5*t,"minutes").format()})))):u.a.users.donations.getAll({id:e.user.uuid,query:{...$s(e,t,a),[u.a.avoidCampaignQuery]:"organisation"===e.source,private:e.global&&e.global.user&&e.user.uuid===e.global.user.uuid}});var o};function Gs(){return g.a.createElement("div",{className:"donation-stream__empty"},g.a.createElement("p",null,"You have no donations"))}function zs(e){const{pollingHash:t}=useRaisely(!0),a=J;return g.a.createElement("div",{className:(n=e.isPaginated,o=e.customClass,`donation-stream ${n?"donation-stream--paginated ":""}${o}`),style:e.style},e.header,g.a.createElement(a,N()({avoidLoader:!0},e,{pollingHash:t,pollingMethod:qs,loadHeight:"76px"}),(t,{isLoading:a})=>t.length?g.a.createElement(f.Fragment,null,t.map(t=>g.a.createElement(Bs,N()({key:t?t.uuid:void 0},e,{donation:t,showAsLoading:a,user:e.user})))):g.a.createElement(Gs,null)));var n,o}zs.propTypes={customClass:h.a.string,isPaginated:h.a.bool,limit:h.a.number,sort:h.a.oneOf(Us),order:h.a.oneOf(Hs)};const Ys=["details","password","donations"];function Ws(e){if(Ys.includes(e.activeHash))return e.activeHash;const t=e.location?e.location.hash.substr(1):null;return Ys.includes(t)?t:Ys[0]}class Zs extends f.Component{constructor(...e){super(...e),M()(this,"state",{activeTab:Ws(this.props)}),M()(this,"handleHashChange",()=>{const e=window.location.hash.substr(1);Ys.some(e)&&this.setState({activeTab:e})}),M()(this,"handleTabChange",e=>{this.setState({activeTab:e}),history.pushState?history.pushState(null,null,"#"+e):window.location.hash="#"+e})}componentDidMount(){window.location.hash="#"+this.state.activeTab,window.addEventListener("popstate",this.handleHashChange,!1)}componentWillUnmount(){window.removeEventListener("popstate",this.handleHashChange,!1)}render(){const{t:e}=Object(d.a)(),{showAccountForm:t,showPasswordForm:a,showDonationFeed:n,layout:o,source:r="campaign"}=this.props.getValues(),{activeTab:i}=this.state,l="tabbed"===o;return g.a.createElement("div",{className:"raisely-unified-account-form "+(l?"raisely-unified-account-form--is-tabbed":"raisely-unified-account-form--is-paged")},l?g.a.createElement("nav",{className:"raisely-unified-account-form__navigation tabs"},t&&g.a.createElement("button",{className:"tabs__tab tabs__tab--"+("details"===i?"active":"inactive"),type:"button",onClick:()=>this.handleTabChange("details")},g.a.createElement("h2",null,e("Details"))),a&&!this.props.global.user.isSamlLogin&&g.a.createElement("button",{className:"tabs__tab tabs__tab--"+("password"===i?"active":"inactive"),type:"button",onClick:()=>this.handleTabChange("password")},g.a.createElement("h2",null,e("Password"))),n&&g.a.createElement("button",{className:"tabs__tab tabs__tab--"+("donations"===i?"active":"inactive"),type:"button",onClick:()=>this.handleTabChange("donations")},g.a.createElement("h2",null,e("Donations")))):null,t?g.a.createElement("div",{className:`raisely-unified-account-form__form raisely-unified-account-form__form--account ${l?"tabs__tab-content tabs__tab-content--"+("details"===i?"active":"inactive"):""}\n\t\t\t\t\t\t`,id:"details"},g.a.createElement("h2",null,e("Your Account")),g.a.createElement(Ol,this.props)):null,a&&!this.props.global.user.isSamlLogin?g.a.createElement("div",{className:`raisely-unified-account-form__form raisely-unified-account-form__form--password ${l?"tabs__tab-content tabs__tab-content--"+("password"===i?"active":"inactive"):""}\n\t\t\t\t\t\t`,id:"password"},g.a.createElement("h2",null,e("Update Your Password")),g.a.createElement(Sl,this.props)):null,n?g.a.createElement("div",{className:`raisely-unified-account-form__form raisely-unified-account-form__form--donations ${l?"tabs__tab-content tabs__tab-content--"+("donations"===i?"active":"inactive"):""}\n\t\t\t\t\t\t`,id:"donations"},g.a.createElement("h2",{id:"regular-donations"},e("Your Regular Donations")),g.a.createElement(ll,N()({},this.props,{source:r})),g.a.createElement("h2",{id:"past-donations"},e("Your Past Donations")),g.a.createElement(zs,{user:this.props.global.user,campaign:this.props.global.campaign,limit:10,sort:"createdAt",order:"desc",avoidLoader:!1,source:r,actions:this.props.actions,showAsLoading:this.props.global.loadingCurrent||!this.props.global.userAuthAttempted})):null)}}M()(Zs,"description","A Basic User Account Form"),M()(Zs,"icon","payment"),M()(Zs,"restrictions",{page:["account"]}),M()(Zs,"internalEditable",{layout:{label:"Layout",type:"select",options:[{label:"One Page",value:"page"},{label:"Tabbed",value:"tabbed"}]},source:{label:"Source",type:"select",options:[{label:"This campaign",value:""},{label:"Whole organisation",value:"organisation"}],help:'Select "Whole organisation" to show donations or regular donations from your entire Raisely account.'},showAccountForm:{label:"Show Account Form",type:"boolean"},showPasswordForm:{label:"Show Password Form",type:"boolean"},showDonationFeed:{label:"Show Donations",type:"boolean"}}),M()(Zs,"schema",{data:{customComponent:"RaiselyUnifiedAccountForm",editable:{layout:{value:"tabbed"},source:{value:"campaign"},showAccountForm:{value:!0},showPasswordForm:{value:!0},showDonationFeed:{value:!0}}}}),Zs.displayName="RaiselyUnifiedAccountForm",Object(po.f)(Zs);var Ks=a(291);class Js extends f.Component{constructor(...e){super(...e),M()(this,"resolveModel",e=>{const{global:t}=this.props;return"campaign"===e?t.campaign.profile:Object(po.g)(t,this.props.node,"profile")})}render(){const{global:e}=this.props,{profile:t,level:a,labelAbove:n,labelBelow:o,align:r,color:i,timeUnit:l}=this.props.getValues(),s=this.resolveModel(t);return g.a.createElement(Ks.a,{profile:s,campaign:e.campaign,level:a,labelAbove:n,labelBelow:o,align:r,timeUnit:l,color:Object(bl.a)(i,this.props.global.campaign)})}}M()(Js,"restrictions",{deprecated:!0}),M()(Js,"description","Shows a total distance/time recorded"),M()(Js,"icon","directions_run"),M()(Js,"internalEditable",{profile:{label:"Show total for:",type:"profile"},labelAbove:{label:"Label above",type:"text"},labelBelow:{label:"Label below",type:"text"},level:{label:"Size",type:"heading-size"},align:{label:"Alignment",type:"select",options:["left","center","right"]},color:{label:"Color",type:"color"},timeUnit:{label:"Unit (time)",type:"select",options:[{value:"",label:"Campaign Default"},{value:"day",label:"Days"},{value:"hr",label:"Hours"},{value:"min",label:"Minutes"}]}}),M()(Js,"schema",{data:{customComponent:"RaiselyExerciseCounter",editable:{profile:{value:"current"},labelAbove:{value:""},labelBelow:{value:"[unit]s"},level:{value:3},align:{value:"left"},color:{value:""},timeUnit:{value:"default"}}}}),M()(Js,"restrictions",{...Object(Qi.a)()}),Js.displayName="RaiselyExerciseCounter",Object(po.f)(Js);class Qs extends f.Component{render(){const{global:e}=this.props,{level:t,labelAbove:a,labelBelow:n,align:o,color:r,type:i}=this.props.getValues();return g.a.createElement(ra,{campaign:e.campaign,level:t,labelAbove:a,labelBelow:n,align:o,color:Object(bl.a)(r,e.campaign),type:i})}}M()(Qs,"description","Shows the number of individual profiles in a campaign"),M()(Qs,"icon","exposure_plus_1"),M()(Qs,"internalEditable",{labelAbove:{label:"Label above",type:"text"},labelBelow:{label:"Label below",type:"text"},level:{label:"Size",type:"heading-size"},align:{label:"Alignment",type:"select",options:["left","center","right"]},color:{label:"Color",type:"color"},type:{label:"Profile Type",type:"select",options:[{value:Be.h.individual,label:"Individuals"},{value:Be.h.group,label:"Teams"},{value:Be.h.organisation,label:"Organisations"},{value:"ALL",label:"All"}]}}),M()(Qs,"schema",{data:{customComponent:"RaiselySignupCounter",editable:{labelAbove:{value:""},labelBelow:{value:"fundraisers"},level:{value:3},align:{value:"left"},color:{value:""},type:{value:""}}}}),Qs.displayName="RaiselySignupCounter",Object(po.f)(Qs);class Xs extends f.Component{render(){const{global:e}=this.props,{level:t,labelAbove:a,labelBelow:n,align:o,color:r}=this.props.getValues();return g.a.createElement(ia,{campaign:e.campaign,level:t,labelAbove:a,labelBelow:n,align:o,color:Object(bl.a)(r,this.props.global.campaign)})}}M()(Xs,"description","Shows the number of donations made to a campaign"),M()(Xs,"icon","group_add"),M()(Xs,"internalEditable",{labelAbove:{label:"Label above",type:"text"},labelBelow:{label:"Label below",type:"text"},level:{label:"Size",type:"heading-size"},align:{label:"Alignment",type:"select",options:["left","center","right"]},color:{label:"Color",type:"color"}}),M()(Xs,"schema",{data:{customComponent:"RaiselyDonorCounter",editable:{labelAbove:{value:""},labelBelow:{value:"donations"},level:{value:3},align:{value:"left"},color:{value:""}}}}),Xs.displayName="RaiselyDonorCounter",Xs.editorName="Donation Counter",Object(po.f)(Xs);class ec extends f.Component{render(){const{editor:e}=this.props,{items:t}=this.props.getValues();return g.a.createElement(da,{items:t,isEditor:e&&!0})}}M()(ec,"description","Sections that can be expanded to show more info"),M()(ec,"icon","unfold_more"),M()(ec,"internalEditable",{items:{label:"Items",type:"repeater",options:[{id:"title",type:"text",label:"Title",default:""},{id:"body",type:"html",label:"Body",default:""}]}}),M()(ec,"schema",{data:{customComponent:"RaiselyAccordion",editable:{items:{value:[{title:"Your title here",body:"Your content here"}]}}}}),ec.displayName="RaiselyAccordion",Object(po.f)(ec);const tc=Object(Qi.b)("heading",{defaultLevel:6,defaultValue:e=>e("My Achievements")}),{render:ac}=tc;class nc extends f.Component{render(){const{global:e,node:t}=this.props,{heading:a,hideInactive:n}=this.props.getValues(),o=Object(po.g)(e,t,"profile",{strict:!0});return g.a.createElement(va,{header:g.a.createElement(ac,N()({},a,{campaign:e.campaign})),profile:o,hideInactive:n})}}M()(nc,"description","Badges that have been awarded to a Profile"),M()(nc,"icon","military_tech"),M()(nc,"internalEditable",{...tc.internalEditable,profile:{label:"Show badges for:",type:"profile"},hideInactive:{label:"Hide all un-earned badges",type:"boolean"}}),M()(nc,"schema",{data:{customComponent:"RaiselyBadges",editable:{...tc.editable,profile:{value:"user"},hideInactive:{value:!1}}}}),nc.displayName="RaiselyBadges",Object(po.f)(nc);class oc extends f.Component{render(){const{global:e,api:t,actions:a,integrations:n}=this.props;return g.a.createElement(Sr,N()({global:e,api:t,actions:a,user:e.user,integrations:n},this.props.getValues()))}}M()(oc,"description","Widget where users can see an overview of their profiles"),M()(oc,"icon","tab"),M()(oc,"internalEditable",{profileLabel:{label:"Profile Tab Name",type:"text",group:"profile"},profileSponsorLabel:{label:"Profile Self-Sponsor Button",type:"text",group:"profile"},profileShareHeading:{label:"Profile Share Heading",type:"text",group:"profile"},teamLabel:{label:"Team Tab Name",type:"text",group:"team"},teamSponsorLabel:{label:"Team Self-Sponsor Button",type:"text",group:"team"},teamShareHeading:{label:"Team Share Heading",type:"text",group:"team"},editProfileLabel:{label:"Profile Edit Link",type:"text",group:"profile"},viewProfileLabel:{label:"Profile View Link",type:"text",group:"profile"},editTeamLabel:{label:"Team Edit Link",type:"text",group:"team"},viewTeamLabel:{label:"Team View Link",type:"text",group:"team"},joinTeamHeading:{label:"Join Team Heading",type:"text",group:"team"},teamLanguage:{label:"Team Language",type:"text",group:"team"},joinOrgHeading:{label:"Join Organisation Heading",type:"text",group:"team"}}),M()(oc,"schema",{data:{customComponent:"RaiselyControlPanel",editable:{profileLabel:{value:"My Profile"},profileShareHeading:{value:"Share your page"},profileSponsorLabel:{value:"Sponsor yourself"},teamLabel:{value:"My Team"},teamShareHeading:{value:"Share your team"},teamSponsorLabel:{value:"Sponsor your team"},editProfileLabel:{value:"Edit Page"},viewProfileLabel:{value:"View Page"},editTeamLabel:{value:"Edit Team"},viewTeamLabel:{value:"View Team"},joinTeamHeading:{value:"Want to fundraise with friends?"},joinOrgHeading:{value:""},teamLanguage:{value:"Team"}}}}),oc.displayName="RaiselyControlPanel",Object(po.f)(oc);class rc extends f.Component{render(){const{global:e}=this.props;return g.a.createElement(Nr,N()({global:e,user:e.user},this.props.getValues()))}}M()(rc,"description","Widget for creating a new team"),M()(rc,"icon","supervisor_account"),M()(rc,"internalEditable",{align:{label:"Alignment",type:"select",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},theme:{label:"Button style",type:"select",options:[{value:"cta",label:"Call to Action"},{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"inverse",label:"Inverse"}]},teamLanguage:{label:"Team Language",type:"text",group:"team"}}),M()(rc,"schema",{data:{customComponent:"RaiselyCreateTeamButton",editable:{align:{value:"center"},theme:{value:"cta"},teamLanguage:{value:"Team"}}}}),rc.displayName="RaiselyCreateTeamButton",Object(po.f)(rc);class ic extends f.Component{render(){const{global:e,actions:t,integrations:a,processFormData:n}=this.props,{description:o,includeBlogPost:r,includeSharedPage:i,includeSelfDonated:l,includeUpdatedPhoto:s,includeUpdatedDescription:c,includeLogFirstActivity:u,showActions:d,size:m}=this.props.getValues();return g.a.createElement(xr,{description:o,includeBlogPost:r,includeSharedPage:i,includeSelfDonated:l,includeUpdatedPhoto:s,includeUpdatedDescription:c,includeLogFirstActivity:u,user:e.user,campaign:e.campaign,actions:t,integrations:a,processFormData:n,showActions:!0,size:m})}}M()(ic,"description","A checklist of best practice things a fundraiser can do to raise more money"),M()(ic,"icon","playlist_add_check"),M()(ic,"internalEditable",{description:{label:"Description",type:"textarea"},includeBlogPost:{label:"Posted First Blog",type:"boolean"},includeSharedPage:{label:"Shared Page",type:"boolean"},includeSelfDonated:{label:"Self Donated",type:"boolean"},includeUpdatedPhoto:{label:"Updated Photo",type:"boolean"},includeUpdatedDescription:{label:"Updated Description",type:"boolean"},includeLogFirstActivity:{label:"Log First Activity",type:"boolean"},showActions:{label:"Show Actions in Modal",type:"boolean",help:"If true, this will allow your users to click an item and complete it in a modal"},size:{label:"Size",type:"select",options:[{label:"Default",value:"default"},{label:"Condensed",value:"condensed"}]}}),M()(ic,"schema",{data:{customComponent:"RaiselyProfileHelper",editable:{description:{value:"You're going strong but there are a few more things you can do to give yourself the best chance of reaching your goal!"},includeBlogPost:{value:!0},includeSharedPage:{value:!0},includeSelfDonated:{value:!0},includeUpdatedPhoto:{value:!0},includeUpdatedDescription:{value:!0},includeLogFirstActivity:{value:!1},showActions:{value:!0},size:{value:"condensed"}}}}),ic.displayName="RaiselyProfileHelper",Object(po.f)(ic);class lc extends f.Component{render(){const{resources:e,layout:t}=this.props.getValues();return g.a.createElement(Dr,{resources:e,layout:t})}}M()(lc,"description","List out helpful downloadable resources"),M()(lc,"icon","get_app"),M()(lc,"internalEditable",{resources:{label:"Resources",type:"repeater",options:[{id:"title",type:"text",label:"Title",default:""},{id:"description",type:"textarea",label:"Description",default:"",help:"You can include HTML here if you like."},{id:"file",type:"file",label:"File/Image",default:null},{id:"help",type:"help",label:"This field can also be used to override the resource&#39;s thumbnail when a URL is used."},{id:"url",type:"url",label:"External URL",default:null},{id:"button",type:"text",label:"Button Label",default:""}]},layout:{label:"Layout",type:"select",options:[{value:"grid",label:"Grid"},{value:"slider",label:"Slider"}]}}),M()(lc,"schema",{data:{customComponent:"RaiselyResourceList",editable:{resources:{value:[]}},layout:{value:"grid"}}}),lc.displayName="RaiselyResourceList",Object(po.f)(lc);class sc extends f.Component{render(){const{node:e}=this.props;return g.a.createElement(Ar.a,this.props.getValues())}}M()(sc,"description","Show a single downloadable resources"),M()(sc,"icon","system_update_alt"),M()(sc,"internalEditable",{title:{id:"title",type:"text",label:"Title",default:"Your title here"},description:{id:"description",type:"textarea",label:"Description",default:"Your description here",help:"You can include HTML here if you like."},file:{id:"file",type:"file",label:"Resource File",default:null},image:{id:"image",type:"file",label:"Preview Image",default:null,help:"We will generate an image automatically if you leave this blank"},button:{id:"button",type:"text",label:"Button Label",default:"Download"}}),M()(sc,"schema",{data:{customComponent:"RaiselyResourceCard",editable:{title:{value:"Your title here"},description:{value:"Your description here"},file:{value:""},image:{value:""},button:{value:"Download"}},layout:{}}}),sc.displayName="RaiselyResourceCard",Object(po.f)(sc);class cc extends f.Component{render(){const{global:e}=this.props;return g.a.createElement(Ir,{user:e.user})}}M()(cc,"description","Allows Raisely to notify profiles of important milestones"),M()(cc,"icon","notifications_active"),M()(cc,"internalEditable",{}),M()(cc,"schema",{data:{customComponent:"RaiselyProfileNotification",editable:{}}}),cc.displayName="RaiselyProfileNotification",Object(po.f)(cc);class uc extends f.Component{render(){const{logos:e,columns:t,maxWidth:a,maxHeight:n}=this.props.getValues();return g.a.createElement(Mr,{logos:e,columns:t,maxWidth:a,maxHeight:n})}}M()(uc,"description","An easy way to add a collection of responsive logos"),M()(uc,"icon","view_module"),M()(uc,"internalEditable",{logos:{label:"Logos",type:"repeater",options:[{id:"image",type:"image",label:"Image",default:null},{id:"alt",type:"text",label:"Alt Text",default:""},{id:"href",type:"text",label:"URL",default:""},{id:"newTab",type:"boolean",label:"Open in new tab",default:!0}]},columns:{label:"Columns",type:"range",max:5,min:1},maxWidth:{label:"Max width",type:"range",max:500,min:25,postFix:"px"},maxHeight:{label:"Max height",type:"range",max:500,min:25,postFix:"px"}}),M()(uc,"schema",{data:{customComponent:"RaiselyLogos",editable:{logos:{value:[]},columns:{value:4},maxWidth:{value:250},maxHeight:{value:250}}}}),uc.displayName="RaiselyLogos",Object(po.f)(uc);const dc=["card","overlay","text","flip"];function mc({goals:e,campaign:t,variant:a,gutter:n}){const[r,i]=Object(f.useState)(2),l=dc.includes(a)?a:"card",{campaign:s}=useRaisely(!1,{campaign:t}),{t:c,tD:u}=Object(d.d)(),p=v()(s.config,"activity.unit",[]),b=v()(s.config,"activity.customUnitSingular"),h=Array.isArray(e)?e:v()(s.config,"activity.goals",[]);Object(f.useState)(()=>{h.length&&i((e=>{switch(!0){case e%4==0&&e>4||7===e||e>9:return 4;case e%3==0:return 3;default:return 2}})(h.length))},[h]);const y=Object(f.useMemo)(()=>(e=>Object(o.css)("margin:0 -",e/2,"px -",e,"px;.activity-goals__item{padding:0 ",e/2,"px ",e,"px;}@media (min-width:737px) and (max-width:1024px){margin:0 -",e/2.5,"px -",e/1.25,"px;.activity-goals__item{padding:0 ",e/2.5,"px ",e/1.25,"px;}}"))(n),[n]);return s.config.activity&&s.config.activity.active?g.a.createElement("div",{className:"activity-goals activity-goals--"+l},g.a.createElement("ul",{className:`activity-goals__list activity-goals__list--${r} ${y}`},h.length?h.map(({goal:e,title:t,image:a},n)=>g.a.createElement("li",{className:"activity-goals__item"+(a?"":" activity-goals__item--no-image"),key:n},g.a.createElement("div",{className:"image-tile image-tile--text-yes image-tile--size-rectangle"},g.a.createElement(m.a,{className:"activity-goals__item-link image-tile__link",to:"/signup?exerciseGoal="+e},g.a.createElement("span",{className:"activity-goals__item-title image-tile__text"},g.a.createElement("h4",{className:"activity-goals__item-goal"},`${e} ${Object(k.m)(p,e,null,b)}`),u(t))),a&&g.a.createElement("div",{className:"image-tile__image lazy","data-bg":Object(Rn.a)(a,{maxWidth:1024}),style:{backgroundImage:`url(${Object(Rn.a)(a,{maxWidth:1024,quality:1})})`}})))):g.a.createElement("div",{className:"activity-goals__empty"},c("No activity goals are configured for this campaign")))):null}function pc({getValues:e}){const{variant:t,gutter:a}=e();return g.a.createElement(mc,{variant:t,gutter:a})}pc.displayName="RaiselyActivityGoals",pc.restrictions={...Object(Qi.a)()},Object(po.e)(pc,!1);class fc extends f.Component{render(){return g.a.createElement(Lr,N()({},this.props.getValues(),this.props))}}M()(fc,"description","A simple form for newsletter subscriptions or expressions of interest."),M()(fc,"icon","assignment"),M()(fc,"group","form"),M()(fc,"internalEditable",{formName:{type:"text",label:"Form Name",value:"",help:"Enter a name for your form to help you identify submissions in Raisely, and monitor conversions in Google Analytics."},fields:{type:"fields",label:"Form Fields",options:["user"],help:"Select the fields you'd like to display on this form. You need to add any new fields under Organisation > Custom Fields before adding them here, and they need to be active to show on the form."},tags:{type:"tags",label:"Tags to add",additional:{recordType:"user"},help:"Add a tag so that users who submit the lead form can be tracked."},successMessage:{type:"textarea",label:"Success Message",value:"Thank you!"},successRedirect:{type:"text",label:"Success Redirect",value:""},buttonText:{type:"text",label:"Submit Button Text",value:"Submit"}}),M()(fc,"schema",{data:{customComponent:"RaiselyLeadForm",editable:{formName:{value:""},tags:{value:[]},successMessage:{value:"Thank you!"},successRedirect:{value:""},buttonText:{value:"Submit"}}}}),fc.displayName="RaiselyLeadForm",Object(po.f)(fc);class gc extends f.Component{render(){const{global:e}=this.props,{style:t,size:a,showTotal:n,showGoal:o,hideInactive:r,statPosition:i,matchedLabel:l}=this.props.getValues();return g.a.createElement(Ur,{size:a,style:t,showTotal:n,statPosition:i,showGoal:o,hideInactive:r,matchedLabel:l})}}M()(gc,"description","Show the total for your latest matched giving period."),M()(gc,"group","common"),M()(gc,"icon","straighten"),M()(gc,"internalEditable",{size:{label:"Size",type:"select",options:Yt.b},style:{label:"Style",type:"select",options:Yt.c},showTotal:{label:"Show Total",type:"boolean"},showGoal:{label:"Show Goal",type:"boolean"},hideInactive:{label:"Hide when inactive",type:"boolean",help:"Only show this progress bar when a matched giving period is live."},statPosition:{label:"Goal & Total Position",type:"select",options:[{value:"top",label:"Top"},{value:"middle",label:"Middle"},{value:"bottom",label:"Bottom"}]},matchedLabel:{label:"Matched Label",type:"text"}}),M()(gc,"schema",{data:{customComponent:"RaiselyMatchedProgressBar",editable:{size:{value:"medium"},style:{value:"standard"},showTotal:{value:!0},showGoal:{value:!0},hideInactive:{value:!1},statPosition:{value:"top"},matchedLabel:{value:"matched"}}}}),gc.displayName="RaiselyMatchedProgressBar",Object(po.f)(gc);class bc extends f.Component{constructor(...e){super(...e),M()(this,"resolveModel",e=>{const{global:t}=this.props;return"campaign"===e?t.campaign:Object(po.g)(t,this.props.node,"profile")})}render(){const{global:e}=this.props,{metricValue:t,metricUnit:a,metricUnitSingular:n,metricPosition:o,profile:r,style:i,size:l,showTotal:s,showGoal:c,displaySource:u,statPosition:d}=this.props.getValues(),m=this.resolveModel(r);return m&&!e.loadingCurrent&&e.userAuthAttempted?g.a.createElement(Vr,{metricValue:t,metricUnit:a,metricUnitSingular:n,metricPosition:o,size:l,style:i,profile:m,displaySource:u,showTotal:s,statPosition:d,showGoal:c}):g.a.createElement(Vr,{metricValue:t,metricUnit:a,metricUnitSingular:n,metricPosition:o,size:l,style:i,profile:{total:null,currency:"AUD",goal:null},showTotal:s,statPosition:d,showGoal:c})}}M()(bc,"description","Show fundraising progress with a metric"),M()(bc,"group","common"),M()(bc,"icon","straighten"),M()(bc,"internalEditable",{metricValue:{label:"Item value",type:"number",help:"The value of each item (in cents)"},metricUnitSingular:{label:"Singular item name",type:"text",help:"The singular (one) item name of each item"},metricUnit:{label:"Plural item name",type:"text",help:"The plural item name (many) of each item"},metricPosition:{label:"Metric position",type:"select",options:[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"}],help:"The position to show metric info"},profile:{label:"Show progress bar for:",type:"profile"},size:{label:"Size",type:"select",options:Yt.b},style:{label:"Style",type:"select",options:Yt.c},showTotal:{label:"Show Total",type:"boolean"},showGoal:{label:"Show Goal",type:"boolean"},displaySource:{label:"Display Source",type:"select",options:[{value:"total",label:"Total"},{value:"activityTotal",label:"Activity Total",onlyIfCampaignConfig:"activity.active"}],help:"Determines the type of total to display (in progress bars and amounts)"},statPosition:{label:"Goal & Total Position",type:"select",options:[{value:"top",label:"Top"},{value:"middle",label:"Middle"},{value:"bottom",label:"Bottom"}]}}),M()(bc,"restrictions",{...Object(Qi.c)()}),M()(bc,"schema",{data:{customComponent:"RaiselyMetricProgressBar",editable:{metricValue:{value:1e3},metricUnit:{value:"trees"},metricUnitSingular:{value:"tree"},metricPosition:{value:"top"},size:{value:"medium"},style:{value:"standard"},profile:{value:"current"},showTotal:{value:!0},showGoal:{value:!0},statPosition:{value:"top"},displaySource:{value:"total"}}}}),bc.displayName="RaiselyMetricProgressBar",Object(po.f)(bc);var hc=a(215);class yc extends f.Component{render(){const{node:e,global:t,integrations:a}=this.props,n=Object(po.g)(t,e,"profile",{strict:!0}),o=v()(t.campaign.config.theme,"primaryShades");return g.a.createElement(hc.b,N()({},this.props.getValues(),{integrations:a,profile:n,foreground:o.darker,background:o.superLight}))}}M()(yc,"description","Allows someone to download a QR code for a profile page or campaign"),M()(yc,"icon","qr_code"),M()(yc,"internalEditable",{profile:{label:"Show QR code for:",type:"profile"},title:{id:"title",type:"text",label:"Title",default:"Your title here"},description:{id:"description",type:"textarea",label:"Description",default:"Your description here",help:"You can include HTML here if you like."},button:{id:"button",type:"text",label:"Button Label",default:"Download"},width:{id:"width",type:"number",label:"Width (in pixels)",default:hc.a,help:"Must be at least 41"}}),M()(yc,"schema",{data:{customComponent:"RaiselyQRCode",editable:{profile:{value:"user"},title:{value:"Download your QR Code"},description:{value:"Download a handy QR code to print out and make it easy for people to find your fundraising page."},button:{value:"Download"},width:{value:hc.a}}}}),yc.displayName="RaiselyQRCode",Object(po.f)(yc);class vc extends f.Component{constructor(...e){super(...e),M()(this,"state",{values:this.props.initialValues})}render(){const{global:e}=this.props;return g.a.createElement("div",null,g.a.createElement(Gr,N()({},this.props.getValues(),{campaign:e.campaign})))}}M()(vc,"description","Shows the amount of time left in a campaign"),M()(vc,"icon","hourglass_bottom"),M()(vc,"internalEditable",{dateAndTime:{label:"Countdown End Date",type:"date",default:"",help:"Enter the date and time you'd like to count down to. This should be in 24 hour time, in your timezone."},startDateAndTime:{label:"Countdown Start Date",type:"date",default:"",help:"Enter the date and time you'd like to start counting down from, which will be used to show a progress bar towards your end date. This should be in 24 hour time, in your timezone."},style:{label:"Countdown Style",type:"select",options:[{value:"basic",label:"Basic"},{value:"clock",label:"Digital Clock"},{value:"circle",label:"Circle"}]},labelDays:{label:"Display days left",type:"boolean"},labelHours:{label:"Display hours left",type:"boolean"},labelMinutes:{label:"Display minutes left",type:"boolean"},labelSeconds:{label:"Display seconds left",type:"boolean"},labelAbove:{label:"Label above",type:"text"},labelBelow:{label:"Label below",type:"text"},showEndDate:{label:"Show end date",type:"boolean"},align:{label:"Alignment",type:"select",options:["left","center","right"]}}),M()(vc,"schema",{data:{customComponent:"RaiselyCountdown",editable:{dateAndTime:{value:""},startDateAndTime:{value:""},style:{value:"clock"},labelDays:{value:!0},labelHours:{value:!0},labelMinutes:{value:!0},labelSeconds:{value:!0},labelAbove:{value:""},labelBelow:{value:""},align:{value:"center"},showEndDate:{value:!0}}}}),vc.displayName="RaiselyCountdown",Object(po.f)(vc);var _c=a(296);class Ec extends f.Component{render(){const{quotes:e,showImages:t,showShareButtons:a}=this.props.getValues();return g.a.createElement(_c.a,{quotes:e,showImages:t,showShareButtons:a})}}M()(Ec,"description","Curate and display quotes related to your campaign."),M()(Ec,"group","embed"),M()(Ec,"icon","format_quote"),M()(Ec,"internalEditable",{quotes:{label:"Quote",type:"repeater",options:[{id:"quote",type:"textarea",label:"Quote",default:""},{id:"author",type:"text",label:"Author",default:""},{id:"image",type:"image",label:"Image",default:null},{id:"alt",type:"text",label:"Alt Text",default:""}]},showImages:{label:"Display Images",type:"boolean"},showShareButtons:{label:"Display Share Icons",type:"boolean"}}),M()(Ec,"schema",{data:{customComponent:"RaiselyQuote",editable:{quotes:{value:[]},author:{value:[]},images:{value:!1},share:{value:!0}}}}),Ec.displayName="RaiselyQuote",Ec.editorName="Quote Slider",Object(po.f)(Ec);const kc=Object(Qi.b)(),{render:wc}=kc;class Oc extends f.Component{constructor(...e){super(...e),M()(this,"resolveModel",e=>{const{global:t}=this.props;return"campaign"===e?t.campaign.profile:Object(po.g)(t,this.props.node,"profile")})}render(){const{node:e,global:t}=this.props,a=Object(po.g)(t,e,"profile",{strict:!0}),n=this.props.getValues();return g.a.createElement(ci,N()({header:g.a.createElement(wc,N()({},n.heading,{campaign:t.campaign}))},n,{profile:a}))}}M()(Oc,"description","Shows a graph tracking your logged activity"),M()(Oc,"icon","stacked_bar_chart"),M()(Oc,"internalEditable",{...kc.internalEditable,profile:{label:"Show tracker for:",type:"profile"},showIcons:{label:"Show Activity Icons",type:"boolean"},displayStreak:{label:"Display streak",type:"boolean"},displayBestDay:{label:"Display best day",type:"boolean"},displayAverage:{label:"Display average daily distance",type:"boolean"},numberOfDays:{label:"Maximum Number of Days",type:"number"},goalHeading:{label:"Goal Label",group:"language",type:"text"},keyOneHeading:{label:"Per Day Graph Key",group:"language",type:"text"},keyTwoHeading:{label:"Total Graph Key",group:"language",type:"text"},totalHeading:{label:"Total Label",group:"language",type:"text"},graphHeading:{label:"Overall Progress Label",group:"language",type:"text"},streakHeading:{label:"Longest Streak Label",group:"language",type:"text"},bestDayHeading:{label:"Best Day Label",group:"language",type:"text"},dailyAverageHeading:{label:"Daily Average Label",group:"language",type:"text"}}),M()(Oc,"schema",e=>({data:{customComponent:"RaiselyActivityTracker",editable:{...kc.editable,profile:{value:"profile"===e.provider?"current":"user"},showIcons:{value:!0},displayStreak:{value:!0},displayBestDay:{value:!0},displayAverage:{value:!0},numberOfDays:{value:30}}}})),M()(Oc,"restrictions",{...Object(Qi.a)()}),Oc.displayName="RaiselyActivityTracker",Object(po.f)(Oc);var Sc=a(292);const Tc=Object(Qi.b)("frontContent",{label:"Front Content",defaultValue:"Actionable Label",defaultLevel:4,defaultColor:"#fff",defaultAlign:"center",customGroup:"cardFront"}),Nc=Object(Qi.b)("backContent",{label:"Back Content",defaultValue:"This is text that represents a prompt or call to action for a fundraiser, potential donor, or campaign organiser",defaultLevel:5,defaultColor:"#fff",defaultAlign:"center",customGroup:"cardBack"});function Cc({getValues:e}){const{campaign:t}=useRaisely(),a=e();return g.a.createElement(Sc.a,{backgroundColor:Object(bl.a)(a.backgroundColor,t),backgroundImage:a.backgroundImage,direction:a.direction,height:(a.height||0)+"px",frontContent:Tc.render(a.frontContent),backContent:Nc.render(a.backContent),duration:a.duration,delay:a.delay})}Cc.description="A form used to add a new card to a subscription",Cc.internalEditable={backgroundColor:{label:"Background Color",type:"color"},backgroundImage:{label:"Front Background Image",type:"image",group:"cardFront"},direction:{label:"Flip Direction",type:"select",options:[{value:"left",label:"Flip left"},{value:"right",label:"Flip right"},{value:"up",label:"Flip up"},{value:"down",label:"Flip down"}]},height:{label:"Height",type:"range",max:5e3,min:0,postfix:"px"},...Tc.internalEditable,...Nc.internalEditable,duration:{label:"Animation Duration (milliseconds)",type:"range",max:5e3,min:0},delay:{label:"Animation Delay (milliseconds)",type:"range",max:1e4,min:0}},Cc.schema={data:{customComponent:"RaiselyFlipCard",editable:{backgroundColor:{value:"primary"},backgroundImage:{value:null},direction:{value:"left"},height:{value:256},...Tc.editable,...Nc.editable,duration:{value:600},delay:{value:0}}}},Cc.displayName="RaiselyFlipCard",Cc.disableBlockColorStyles=!0,Object(po.f)(Cc);let xc;const jc=Object(r.b)("p")(xc||(xc=(e=>e)`
	background-color: ${0};
	padding: 15px;
	text-align: center;
	color: hsl(238deg 44% 26% / 70%);
	font-size: 0.7rem;

	b {
		font-weight: 700;
	}
`),({theme:e})=>e.colors.key.lightest);function Pc(e){const t=Object(f.useRef)({}),[a,n]=Object(f.useState)(null),o=e();return Object(f.useEffect)(()=>{!1!==o.enableTickets&&n([])},[o.enableTickets]),Object(f.useEffect)(()=>{if(!1===o.enableTickets)return;let e=!1;for(const[a,n]of Object.entries(o))a.includes("ticketType-")&&t.current[a]!==n&&(t.current[a]=o[a],e=!0);if(!e)return;const a=[];for(const[e,n]of Object.entries(t.current)){if(n)continue;const t=e.split("ticketType-")[1];a.push(t)}n(a)},[o]),a}function Ac({getValues:e,...t}){const a=Pc(e);return g.a.createElement(Ui,N()({},e(),t,{disabledTicketTypes:a}))}function Dc({getValues:e,...t}){const a=Pc(e);return g.a.createElement(qi,N()({},e(),t,{disabledTicketTypes:a}))}Ac.restrictions={},Ac.description="Allow fundraisers to sign up to your campaign",Ac.group="form",Ac.icon="contact_mail",Ac.disableBlockColorStyles=!0,Ac.internalEditable={diyThemes:{group:"diyThemes",type:"block-comment",getIsDisabled:e=>{var t;return!(null!==(t=e.flags)&&void 0!==t&&t.fundraiserThemes)},help:(e,t,a)=>a?g.a.createElement(jc,null,Qe()("DIY Fundraising is not enabled on this campaign. Contact support if you wish to turn this on")):g.a.createElement(jc,null,Qe()('To edit or add fundraiser themes, go to <a target="_blank" href="../setup/fundraiser-themes">Settings > DIY Fundraising</a> in your campaigns\'s admin panel'))},enableExerciseGoal:{label:"Enable exercise goal step",group:"exercise",type:"boolean",help:'You can set your activity types and units in <a target="_blank" href="../setup/activity">Activity Settings</a>.'},fundraiserThemesTitle:{group:"headings",label:"Fundraiser Themes Form Title",type:"text"},fundraiserThemesDescription:{group:"language",label:"Fundraiser Themes Description",type:"text"},fundraiserActionText:{group:"language",label:"Fundraiser Themes Action Button",type:"text"},fundraiserSelectedActionText:{group:"language",label:"Fundraiser Themes Selected Action Button",type:"text"},exerciseTitle:{group:"headings",label:"Exercise Goal Form Title",type:"text"},exerciseDescription:{group:"language",label:"Exercise Goal Description",type:"text"},exerciseGoals:{label:"Exercise Goals",type:"repeater",group:"exercise",deprecated:!0,options:[{id:"value",type:"number",label:"Goal Amount (km, hours or miles)",defaultValue:""},{id:"description",type:"text",label:"Goal Description",defaultValue:""}]},accountTitle:{group:"headings",label:"Account Form Title",type:"text"},enableFacebook:{label:"Enable Facebook signup",type:"boolean"},passwordLength:{group:"advanced",label:"Minimum Password Length",type:"number"},accountButton:{group:"buttons",label:"Account Form Button",type:"text"},enableTickets:{group:"tickets",label:"Enable tickets",type:"boolean"},ticketSelectTitle:{group:"headings",label:"Select Tickets Heading",type:"text"},ticketSelectDescription:{group:"headings",label:"Select Tickets Description",type:"text"},tickets:{group:"tickets",label:"Ticket Types",type:"tickets",context:"signup"},ticketSelectButton:{group:"buttons",label:"Select Tickets Button",type:"text"},ticketHolderTitle:{group:"headings",label:"Attendee Details Heading",type:"text"},ticketHolderButton:{group:"buttons",label:"Attendee Details Button",type:"text"},enableTeams:{label:"Enable teams",type:"boolean"},avoidDefaultNames:{group:"advanced",label:"Disable automatic naming",type:"boolean",help:"Avoid generating profile and team names automatically"},profileTitle:{group:"headings",label:"Profile Form Title",type:"text"},profileLanguage:{group:"language",label:"Profile Language",type:"text"},teamLanguage:{group:"language",label:"Team Language",type:"text"},joinButtonTitle:{group:"language",label:"Join a Team Button",type:"text"},joinButtonDescription:{group:"language",label:"Join a Team Description",type:"text"},teamButtonTitle:{group:"language",label:"Start a Team Button",type:"text"},teamButtonDescription:{group:"language",label:"Start a Team Description",type:"text"},alphabeticalProfileSearch:{group:"advanced",label:"Sort teams alphabetically",type:"boolean",help:"Order Team search results alphabetically instead of by total"},completeButton:{group:"buttons",label:"Complete Button",type:"text"},enableDonation:{label:"Enable self donations",type:"boolean"},paymentDonationTitle:{group:"headings",label:"Donation Title",type:"text"},donationButton:{group:"buttons",label:"Donation Button",type:"text"},paymentTitle:{group:"headings",label:"Payment Heading",type:"text"},paymentDescription:{group:"headings",label:"Payment Description",type:"text"},paymentButton:{group:"buttons",label:"Payment Button",type:"text"},showTitleIcons:{group:"headings",label:"Show Heading Icons",type:"boolean"},disablePrompt:{label:"Disable prompt",help:"Disable the message that pops up when leaving the form unfinished",type:"boolean",group:"advanced"},enableMobileFullscreen:{label:"Enable fullscreen styles on small screens",type:"boolean"},enableMultipleSignups:{label:"Allow multiple registrations under one email",type:"boolean"}},Ac.schema={data:{customComponent:"RaiselySignupFormV3",editable:{enableExerciseGoal:{value:!1},exerciseTitle:{value:"Choose your activity goal"},exerciseDescription:{value:"Choose a goal from the list below"},accountTitle:{value:"Your account"},enableFacebook:{value:!0},passwordLength:{value:6},accountButton:{value:"Next"},enableTickets:{value:!1},ticketSelectTitle:{value:"Select your tickets"},ticketSelectDescription:{value:"Choose a ticket below"},ticketSelectButton:{value:"Next"},ticketHolderTitle:{value:"Attendee details"},ticketHolderButton:{value:"Next"},enableTeams:{value:!0},avoidDefaultNames:{value:!1},profileTitle:{value:"Your profile"},profileLanguage:{value:"Profile"},teamLanguage:{value:"Team"},joinButtonDescription:{value:""},teamButtonDescription:{value:""},completeButton:{value:"Complete registration"},alphabeticalProfileSearch:{value:!1},enableDonation:{value:!0},paymentDonationTitle:{value:"Kickstart your fundraising"},donationButton:{value:"Next"},paymentTitle:{value:"Payment details"},paymentDescription:{value:""},paymentButton:{value:"Complete registration"},showTitleIcons:{value:!0},disablePrompt:{value:!1},enableMobileFullscreen:{value:!0}}}},Ac.displayName="RaiselySignupFormV3",Ac.editorName="Sign Up Form (Basic)",Object(po.f)(Ac),Dc.restrictions={},Dc.description="Allow users to purchase tickets and make donations",Dc.group="form",Dc.icon="confirmation_number",Dc.disableBlockColorStyles=!0,Dc.internalEditable={tickets:{group:"tickets",label:"Ticket Types",type:"tickets"},ticketSelectTitle:{group:"headings",label:"Select Tickets Heading",type:"text"},ticketSelectDescription:{group:"headings",label:"Select Tickets Description",type:"text"},ticketSelectButton:{group:"buttons",label:"Select Tickets Button",type:"text"},ticketHolderTitle:{group:"headings",label:"Attendee Details Heading",type:"text"},ticketHolderButton:{group:"buttons",label:"Attendee Details Button",type:"text"},userFormTitle:{group:"headings",label:"Buyer Details Heading",type:"text"},userFormButton:{group:"buttons",label:"Buyer Details Button",type:"text"},enableDonation:{label:"Enable donations",type:"boolean"},paymentDonationTitle:{group:"headings",label:"Donation heading",type:"text"},donationButton:{group:"buttons",label:"Donation Button",type:"text"},paymentTitle:{group:"headings",label:"Payment Heading",type:"text"},paymentDescription:{group:"headings",label:"Payment Description",type:"text"},paymentButton:{group:"buttons",label:"Payment Button",type:"text"},noPaymentButton:{group:"buttons",label:"No Payment Button",type:"text"},thankYouTitle:{group:"thankyou",label:"Thank You Title",type:"text"},thankYouMessage:{group:"thankyou",label:"Thank You Message",type:"textarea"},shareMessage:{group:"thankyou",label:"Share Message",type:"textarea"},customShareUrl:{label:"Share URL",type:"text",group:"thankyou",help:"If you'd like your ticket buyers to share a non-Raisely site after order placement, paste the custom URL here."},disablePrompt:{label:"Disable prompt",help:"Disable the message that pops up when leaving the form unfinished",type:"boolean",group:"advanced"},enableMobileFullscreen:{label:"Enable fullscreen styles on small screens",type:"boolean"}},Dc.schema={data:{customComponent:"RaiselyTicketForm",editable:{ticketSelectTitle:{value:"Select your tickets"},ticketSelectDescription:{value:"Choose a ticket below"},ticketSelectButton:{value:"Next"},ticketHolderTitle:{value:"Attendees"},ticketHolderButton:{value:"Next"},userFormTitle:{value:"Your details"},userFormButton:{value:"Next"},enableDonation:{value:!0},paymentDonationTitle:{value:"Add a donation"},donationButton:{value:"Next"},paymentTitle:{value:"Payment"},paymentDescription:{value:""},paymentButton:{value:"Process payment"},noPaymentButton:{value:"Complete order"},thankYouTitle:{value:"Thank you for your purchase!"},thankYouMessage:{value:"We'll shortly send you a confirmation email with a receipt and information on your tickets. If you don't receive this in a few minutes, just check your spam folder."},shareMessage:{value:"In the meantime, invite your family and friends:"},customShareUrl:{value:null},disablePrompt:{value:!1},enableMobileFullscreen:{value:!0}}}},Dc.displayName="RaiselyTicketForm",Dc.editorName="Ticket Form",Object(po.f)(Dc);a(965);class Rc extends f.Component{render(){const{editor:e}=this.props;return g.a.createElement(di,N()({},this.props.getValues(),{isEditor:Boolean(e)}))}}M()(Rc,"description","Shows the impact of a donation when matched giving is used"),M()(Rc,"icon","calculate"),M()(Rc,"internalEditable",{giftLabel:{type:"text",label:"Gift Field Label",value:"Your gift"},totalLabel:{type:"text",label:"Total Field Label",value:"We receive"},hideInactive:{help:"Only show this block when matched giving is live",type:"boolean",label:"Hide when inactive",value:!1},pastMatchHeading:{help:"This will show once your matched giving has expired.",type:"text",label:"After Match Heading",value:"Matching is over, but you can still help us hit our goal!"},activeMatchHeading:{help:"This will show while your matched giving is active, and has a remaining matched giving pool.",type:"text",label:"During Match Heading",value:"Your donation will be matched!"},futureMatchHeading:{help:"This will show above the form before your matched giving starts.",type:"text",label:"Before Match Heading",value:"Donation matching hasn't started yet"}}),M()(Rc,"schema",{data:{customComponent:"RaiselyMatchedGivingCalculator",editable:{giftLabel:{value:"Your gift"},totalLabel:{value:"We receive"},hideInactive:{value:!1},pastMatchHeading:{value:"Matching is over, but you can still help us hit our goal!"},activeMatchHeading:{value:"Your donation will be matched!"},futureMatchHeading:{value:"Donation matching hasn't started yet"}}}}),Rc.displayName="RaiselyMatchedGivingCalculator",Object(po.f)(Rc);class Fc extends f.Component{render(){return g.a.createElement(pi,N()({},this.props,this.props.getValues()))}}M()(Fc,"description","A button to prompt your fundraisers to create and connect a linked fundraiser on Facebook"),M()(Fc,"icon","facebook"),M()(Fc,"internalEditable",{emailTitle:{label:"Email Title",type:"text",group:"headings"},emailDescription:{label:"Email Description",type:"textarea",group:"headings",help:"This will be shown to fundraisers when Facebook does not supply their email."},align:{label:"Alignment",type:"select",options:["left","center","right"]},signupTitle:{label:"Signup Title",type:"text",group:"headings"},signupDescription:{label:"Signup Description",type:"textarea",group:"headings"},detailsTitle:{label:"Details Title",type:"text",group:"headings"},detailsDescription:{label:"Details Description",type:"textarea",group:"headings"},thankYouTitle:{label:"Thank You Title",type:"text",group:"headings"},thankYouDescription:{label:"Thank You Description",type:"textarea",group:"headings"},groupUrl:{label:"Group URL",type:"text",group:"buttons",help:"Add a link to your Facebook Group. We'll show it on the final step of this form."},loginAutomatically:{label:"Log participants in automatically",type:"boolean",group:"advanced",help:"When enabled, participants will be logged in automatically and redirected to their dashboard unless we need to confirm their email."}}),M()(Fc,"schema",{data:{customComponent:"RaiselyFacebookFundraisingSignup",editable:{emailTitle:{value:"One more step!"},emailDescription:{value:"We need your email address to finish creating your fundraiser."},align:{value:"center"},signupTitle:{value:"Join the campaign"},signupDescription:{value:'Registering is as simple as connecting your Facebook account! By clicking continue you\'ll be taking part in {{campaign.name}} and agree to our <a href="/terms-and-conditions">Terms and Conditions</a> and <a href="/privacy-policy">Privacy Policy</a>'},detailsTitle:{value:"Your fundraiser is live!"},detailsDescription:{value:"We've set up your fundraiser! We need a few more details to support you through your challenge."},thankYouTitle:{value:"Thank you"},thankYouDescription:{value:"You can view and promote your Facebook fundraiser, or join our group to connect with other fundraisers."},loginAutomatically:{value:!1}}}}),M()(Fc,"restrictions",{}),Fc.displayName="RaiselyFacebookFundraisingSignup",Object(po.f)(Fc);var Ic=a(326);let Mc;const Lc=Object(f.lazy)(()=>a.e(12).then(a.bind(null,1120))),Bc=Object(r.b)("p")(Mc||(Mc=(e=>e)`
	background-color: ${0};
	padding: 15px;
	text-align: center;
	color: hsl(238deg 44% 26% / 70%);
	font-size: 0.7rem;

	b {
		font-weight: 700;
	}
`),({theme:e})=>e.colors.key.lightest);function Uc({getValues:e,...t}){const a=Pc(e);return g.a.createElement(lr,N()({},e(),t,{disabledTicketTypes:a}))}Uc.description="Allow fundraisers to sign up to your campaign",Uc.group="form",Uc.icon="contact_mail",Uc.disableBlockColorStyles=!0,Uc.internalEditable={diyThemes:{group:"diyThemes",type:"block-comment",getIsDisabled:e=>{var t;return!(null!==(t=e.flags)&&void 0!==t&&t.fundraiserThemes)},help:(e,t,a)=>a?g.a.createElement(Bc,null,Qe()("DIY Fundraising is not enabled on this campaign. Contact support if you wish to turn this on")):g.a.createElement(Bc,null,Qe()('To edit or add fundraiser themes, go to <a target="_blank" href="../setup/fundraiser-themes">Settings > DIY Fundraising</a> in your campaigns\'s admin panel'))},profileTypesTitle:{group:"headings",label:"Profile Types Title",type:"text"},individualTitle:{group:"profileTypes",label:"Individual Profile Type Title",type:"text"},individualDescription:{group:"profileTypes",label:"Individual Profile Type Description",type:"textarea"},individualImage:{group:"profileTypes",label:"Individual Profile Type Image",type:"image"},teamTitle:{group:"profileTypes",label:"Team Profile Type Title",type:"text"},teamDescription:{group:"profileTypes",label:"Team Profile Type Description",type:"text"},teamImage:{group:"profileTypes",label:"Team Profile Type Image",type:"image"},orgTitle:{group:"profileTypes",label:"Organisation Profile Type Title",type:"text"},orgDescription:{group:"profileTypes",label:"Organisation Profile Type Description",type:"text"},orgImage:{group:"profileTypes",label:"Organisation Profile Type Image",type:"image"},fundraiserThemesTitle:{group:"headings",label:"Fundraiser Themes Form Title",type:"text"},fundraiserThemesDescription:{group:"language",label:"Fundraiser Themes Description",type:"text"},fundraiserActionText:{group:"language",label:"Fundraiser Themes Action Button",type:"text"},fundraiserSelectedActionText:{group:"language",label:"Fundraiser Themes Selected Action Button",type:"text"},enableExerciseGoal:{label:"Enable exercise goal step",group:"exercise",type:"boolean",help:'You can set your activity types and units in <a target="_blank" href="../setup/activity">Activity Settings</a>.'},exerciseTitle:{group:"headings",label:"Exercise Goal Form Title",type:"text"},exerciseDescription:{group:"language",label:"Exercise Goal Description",type:"text"},exerciseGoals:{label:"Exercise Goals",type:"repeater",group:"exercise",deprecated:!0,options:[{id:"value",type:"number",label:"Goal Amount (km, hours or miles)",defaultValue:""},{id:"description",type:"text",label:"Goal Description",defaultValue:""}]},accountTitle:{group:"headings",label:"Account Form Title",type:"text"},enableFacebook:{label:"Enable Facebook signup",type:"boolean"},passwordLength:{group:"advanced",label:"Minimum Password Length",type:"number"},accountButton:{group:"buttons",label:"Account Form Button",type:"text"},enableTickets:{group:"tickets",label:"Enable tickets",type:"boolean"},ticketSelectTitle:{group:"headings",label:"Select Tickets Heading",type:"text"},ticketSelectDescription:{group:"headings",label:"Select Tickets Description",type:"text"},tickets:{group:"tickets",label:"Ticket Types",type:"tickets",context:"signup"},ticketSelectButton:{group:"buttons",label:"Select Tickets Button",type:"text"},ticketHolderTitle:{group:"headings",label:"Attendee Details Heading",type:"text"},ticketHolderButton:{group:"buttons",label:"Attendee Details Button",type:"text"},enableIndividuals:{label:"Enable individual signup",type:"boolean"},enableTeams:{label:"Enable team signup",type:"boolean",getIsDisabled:e=>{var t,a;return!1===(null===(t=e.profiles)||void 0===t||null===(a=t.teams)||void 0===a?void 0:a.enabled)},help:(e,t,a)=>a?g.a.createElement(f.Suspense,{fallback:g.a.createElement(Vc,null)},g.a.createElement(Lc,{id:t,campaign:e})):null},enableOrgs:{label:"Enable organisation signup",type:"boolean",getIsDisabled:e=>{var t,a;return!(null!==(t=e.profiles)&&void 0!==t&&null!==(a=t.organisations)&&void 0!==a&&a.enabled)},help:(e,t,a)=>a?g.a.createElement(f.Suspense,{fallback:g.a.createElement(Vc,null)},g.a.createElement(Lc,{id:t,campaign:e})):null},enableGoalStep:{label:"Enable fundraising goal step",type:"boolean"},avoidDefaultNames:{group:"advanced",label:"Disable automatic naming",type:"boolean",help:"Avoid generating profile and team names automatically"},profileTitle:{group:"headings",label:"Individual Profile Form Title",type:"text"},teamProfileTitle:{group:"headings",label:"Team Profile Form Title",type:"text"},organisationProfileTitle:{group:"headings",label:"Organisation Profile Form Title",type:"text"},profileGoalsTitle:{group:"headings",label:"Profile Goals Title",type:"text"},teamGoalsTitle:{group:"headings",label:"Team Goals Title",type:"text"},organisationGoalsTitle:{group:"headings",label:"Organisation Goals Title",type:"text"},alphabeticalProfileSearch:{group:"advanced",label:"Sort teams alphabetically",type:"boolean",help:"Order Team search results alphabetically instead of by total"},enableDonation:{label:"Enable self donations",type:"boolean"},paymentDonationTitle:{group:"headings",label:"Donation Title",type:"text"},donationButton:{group:"buttons",label:"Donation Button",type:"text"},paymentTitle:{group:"headings",label:"Payment Heading",type:"text"},paymentDescription:{group:"headings",label:"Payment Description",type:"text"},paymentButton:{group:"buttons",label:"Payment Button",type:"text"},disablePrompt:{label:"Disable prompt",help:"Disable the message that pops up when leaving the form unfinished",type:"boolean",group:"advanced"},enableMobileFullscreen:{label:"Enable fullscreen styles on small screens",type:"boolean"},enableMultipleSignups:{label:"Allow multiple registrations under one email",type:"boolean"}},Uc.schema={data:{customComponent:"RaiselySignupFormV4",editable:{profileTypesTitle:{value:"How would you like to participate?"},individualTitle:{value:"Fundraise as an individual"},individualDescription:{value:"Fundraise on your own, or join a team/organisation"},teamTitle:{value:"Start a team"},teamDescription:{value:"Get your squad together and fundraise as your own team or for your organisation"},orgTitle:{value:"Register your organisation"},orgDescription:{value:"Bring your employees together and show your support as an organisation"},enableExerciseGoal:{value:!1},exerciseTitle:{value:"Choose your activity goal"},exerciseDescription:{value:"Choose a goal from the list below"},accountTitle:{value:"Your account"},enableFacebook:{value:!0},passwordLength:{value:6},accountButton:{value:"Next"},enableTickets:{value:!1},ticketSelectTitle:{value:"Select your tickets"},ticketSelectDescription:{value:"Choose a ticket below"},ticketSelectButton:{value:"Next"},ticketHolderTitle:{value:"Attendee details"},ticketHolderButton:{value:"Next"},enableIndividuals:{value:!0},enableTeams:{value:!0},enableOrgs:{value:!1},enableGoalStep:{value:!0},avoidDefaultNames:{value:!1},profileTitle:{value:"Your profile"},teamProfileTitle:{value:"Your team profile"},organisationProfileTitle:{value:"Your organisation profile"},profileGoalsTitle:{value:"Choose your fundraising goal"},teamGoalsTitle:{value:"Your team's fundraising goal"},organisationGoalsTitle:{value:"Your organisation's fundraising goal"},completeButton:{value:"Complete registration"},alphabeticalProfileSearch:{value:!1},enableDonation:{value:!0},paymentDonationTitle:{value:"Kickstart your fundraising"},donationButton:{value:"Next"},paymentTitle:{value:"Payment details"},paymentDescription:{value:""},paymentButton:{value:"Complete registration"},disablePrompt:{value:!1},enableMobileFullscreen:{value:!0},enableMultipleSignups:{value:!1}}}};const Hc={marginTop:"4px"};function Vc(){return g.a.createElement(Ic.a,{speed:1,width:314,height:32,viewBox:"0 0 314 32",style:Hc},g.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"314",height:"32"}))}function $c({getValues:e}){const{display:t,gutter:a,primaryActionText:n,secondaryActionText:o}=e();return g.a.createElement(In,{display:t,gutter:a,primaryActionText:n,secondaryActionText:o})}Uc.displayName="RaiselySignupFormV4",Uc.editorName="Sign Up Form",Object(po.f)(Uc),$c.displayName="RaiselyFundraiserThemes",$c.restrictions={},Object(po.e)($c,!1);const qc=["grid","masonry","carousel"];function Gc({images:e,display:t,gutter:a}){const{t:n,tD:o}=Object(d.d)(),r=qc.includes(t)?t:"grid";return!e||e.length<1?g.a.createElement(it.a,{message:n("You need to add some images."),prefix:"images"}):g.a.createElement("div",{className:`gallery gallery--${r} gallery--count-${e.length}`,style:{"--gutter":a&&a+"px"}},"carousel"===r?g.a.createElement(ha,{className:"gallery__track",gutter:a},e.map((e,t)=>g.a.createElement(ya.a,{src:e.image,className:"gallery__image",alt:o(e.alt),key:t}))):e.map((e,t)=>g.a.createElement(ya.a,{src:e.image,className:"gallery__image",alt:o(e.alt),key:t})))}Gc.propTypes={display:h.a.oneOf(qc),gutter:h.a.number,images:h.a.arrayOf(h.a.shape({image:h.a.string.isRequired,alt:h.a.string}).isRequired)};class zc extends f.Component{render(){const{images:e,display:t,gutter:a}=this.props.getValues();return g.a.createElement(Gc,{images:e,display:t,gutter:a})}}M()(zc,"description","An easy way to add a collection of responsive logos"),M()(zc,"icon","photo_library"),M()(zc,"internalEditable",{display:{label:"Display",type:"select",options:[{value:"grid",label:"Grid"},{value:"masonry",label:"Masonry"},{value:"carousel",label:"Carousel"}]},gutter:{label:"Gutter Size",type:"range",postFix:"px",min:0,max:100},images:{label:"Images",type:"repeater",singular:"Image",options:[{id:"image",type:"image",label:"Image",default:null},{id:"alt",type:"text",label:"Alt Text",default:""}]}}),M()(zc,"schema",{data:{customComponent:"RaiselyGallery",editable:{logos:{value:[]},display:{value:"grid"},gutter:{value:16}}}}),zc.restrictions={},zc.displayName="RaiselyGallery",Object(po.f)(zc);const Yc=Object(Qi.b)(),{render:Wc}=Yc;function Zc({global:e,getValues:t,...a}){const{heading:n}=t();return g.a.createElement(Er,N()({header:g.a.createElement(Wc,N()({},n,{campaign:e.campaign}))},t(),a))}Zc.restrictions={pages:["dashboard"],...Object(Qi.c)()},Zc.description="See a snapshot of your organisation",Zc.group="common",Zc.icon="camera",Zc.internalEditable={...Yc.internalEditable},Zc.schema={data:{customComponent:"RaiselySnapshot",editable:{}}},Zc.displayName="RaiselySnapshot",Zc.editorName="Organisation Snapshot",Object(po.f)(Zc);function Kc({headingSize:e,descriptionSize:t,alignment:a,statistics:n}){const{t:o,tD:r}=Object(d.d)(),i=e,l=t;return!n||n.length<1?g.a.createElement(it.a,{message:o("You need to add some statistics."),prefix:"statistics"}):g.a.createElement("ul",{className:"statistics-grid statistics-grid--align-"+a},n.map(({heading:e,description:t})=>e&&g.a.createElement("li",{className:"statistics__item"},g.a.createElement(i,{className:"statistics__item__heading"},r(e)),t&&g.a.createElement(l,{className:"statistics__item__description"},r(t)))))}Kc.propTypes={headingSize:h.a.oneOf(["h1","h2","h3"]),descriptionSize:h.a.oneOf(["h4","h5","h6","p"]),alignment:h.a.oneOf(["left","center","right"]),statistics:h.a.arrayOf(h.a.shape({heading:h.a.string.isRequired,description:h.a.string.isRequired}).isRequired)};class Jc extends f.Component{render(){return g.a.createElement(Kc,this.props.getValues())}}function Qc({getValues:e,...t}){return g.a.createElement(br,N()({},e(),t))}M()(Jc,"description","Add a collection of statistics"),M()(Jc,"icon","exposure_plus_1"),M()(Jc,"internalEditable",{headingSize:{label:"Heading Size",type:"select",options:[{value:"h1",label:"H1"},{value:"h2",label:"H2"},{value:"h3",label:"H3"}]},descriptionSize:{label:"Description Size",type:"select",options:[{value:"h4",label:"H4"},{value:"h5",label:"H5"},{value:"h6",label:"H6"},{value:"p",label:"p"}]},alignment:{label:"Text Alignment",type:"select",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},statistics:{label:"Statistics",type:"repeater",singular:"Statistic",options:[{id:"heading",label:"Heading",type:"text"},{id:"description",label:"Description",type:"text"}]}}),M()(Jc,"schema",{data:{customComponent:"RaiselyStatisticsGrid",editable:{headingSize:{value:"h2"},descriptionSize:{value:"p"},alignment:{value:"left"},statistics:{value:[]}}}}),Jc.displayName="RaiselyStatisticsGrid",Object(po.f)(Jc),Qc.restrictions={...Object(Qi.c)()},Qc.description="Invite people to fundraise with profile",Qc.group="common",Qc.icon="person_add",Qc.internalEditable={},Qc.schema={data:{customComponent:"RaiselyInvitePeople",editable:{}}},Qc.displayName="RaiselyInvitePeople",Qc.editorName="Invite People",Object(po.f)(Qc);var Xc=a(687);function eu({getValues:e,...t}){return g.a.createElement(Oi,N()({},e(),t))}eu.internalEditable={type:{label:"Display options",type:"select",options:[{value:"singleButton",label:"Single button"},{value:"amountButtons",label:"Donation amounts"}]},align:{label:"Alignment",type:"select",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},theme:{label:"Button style",type:"select",options:[{value:"cta",label:"CTA"},{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"inverse",label:"Inverse"}],help:"The styling will apply to all buttons in the group"},text:{group:"singleButton",label:"Button text",type:"text"},frequency:{group:"donations",label:"Default donation frequency",type:"select",options:e=>e.config.subscriptions.sortOrder.map(e=>({value:e,label:Xc.a[e]})),help:(e,t,a,n,o)=>g.a.createElement(n,null,g.a.createElement(o,{name:"help",size:"small",color:"#585A71"}),"You can edit your donation amounts and frequencies in your"," ",g.a.createElement("a",{href:`/campaigns/${e.path}/setup/donation`,target:"_blank",rel:"noreferrer"},"Donation Form Settings"))},profile:{group:"donations",label:"Donations should go to",type:"select",options:[{value:"auto",label:"Automatic (Profile page or campaign)"},{value:"campaign",label:"Only the current campaign"},{value:"user",label:"Only the currently logged-in user"}]}},eu.schema={data:{customComponent:"RaiselyDonationButton",editable:{type:{value:"singleButton"},align:{value:"center"},theme:{value:"cta"},text:{value:"Donate"},frequency:{value:"ONCE"},profile:{value:"auto"}}}},eu.restrictions={campaignConfigFlag:{condition:["donation.isV3Enabled",!0]}},eu.description="Open the donation form in a modal from a button",eu.group="form",eu.icon="paid",eu.editorName="Donation Button",eu.displayName="RaiselyDonationButton",eu.disableBlockColorStyles=!0,Object(po.f)(eu);class tu extends f.Component{render(){return g.a.createElement(bi,this.props.getValues())}}M()(tu,"description","Add items to your feed."),M()(tu,"icon","view_column"),M()(tu,"internalEditable",{headingSize:{label:"Heading Size",type:"select",options:[{value:"h3",label:"H3"},{value:"h4",label:"H4"},{value:"h5",label:"H5"}]},descriptionSize:{label:"Description Size",type:"select",options:[{value:"h4",label:"H4"},{value:"h5",label:"H5"},{value:"h6",label:"H6"},{value:"p",label:"p"}]},itemCount:{label:"How many items to display at a time",type:"select",options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]},buttonStyle:{label:"Button style",type:"select",options:[{value:"cta",label:"CTA"},{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"inverse",label:"Inverse"}]},feedItems:{label:"Feed Items",type:"repeater",singular:"Feed Item",options:[{id:"heading",label:"Heading",type:"text"},{id:"description",label:"Description",type:"textarea"},{id:"image",label:"Image",type:"image"},{id:"alt",label:"Alt Image Text",type:"text"},{id:"button",label:"Button",type:"text"},{id:"link",label:"Link",type:"text"},{id:"date",type:"date",label:"Date"}]}}),M()(tu,"schema",{data:{customComponent:"RaiselyFeed",editable:{headingSize:{value:"h4"},descriptionSize:{value:"p"},itemCount:{value:"3"},feedItems:{value:[{heading:"Your Heading",description:"Your Description",image:"{{campaign.config.theme.backgroundUrl}}",button:"Click Me"},{heading:"Your Heading",description:"Your Description",image:"{{campaign.config.theme.backgroundUrl}}",button:"Click Me"},{heading:"Your Heading",description:"Your Description",image:"{{campaign.config.theme.backgroundUrl}}",button:"Click Me"}]}}}}),tu.displayName="RaiselyFeed",Object(po.f)(tu);var au=a(293);class nu extends f.Component{render(){const e=this.props.manualValues||this.props.getValues();return g.a.createElement(au.a,N()({},e,{global:this.props.global,actions:this.props.actions}))}}M()(nu,"description","Add text for copying."),M()(nu,"icon","content_paste"),M()(nu,"internalEditable",{copyPaste:{label:"Text copy",type:"textarea"},buttonText:{label:"Button text",type:"text"},buttonTheme:{label:"Button theme",type:"select",options:[{value:"cta",label:"CTA"},{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"inverse",label:"Inverse"},{value:"display",label:"Display"}]},alignment:{label:"Alignment",type:"select",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}}),M()(nu,"schema",{data:{customComponent:"RaiselyClipboardButton",editable:{copyPaste:{value:"{{campaign.url}}"},buttonText:{value:"Copy Link"},buttonTheme:{value:"secondary"},alignment:{value:"center"}}}}),nu.displayName="RaiselyClipboardButton",Object(po.f)(nu);class ou extends f.Component{render(){return g.a.createElement(hi,this.props.getValues())}}M()(ou,"description","Showcase your personnel"),M()(ou,"icon","contacts"),M()(ou,"internalEditable",{teamMembers:{label:"Personnel",type:"repeater",singular:"Person",options:[{id:"name",label:"Name",type:"text"},{id:"role",label:"Role",type:"text"},{id:"image",label:"Image",type:"image"},{id:"alt",label:"Alt Image Text",type:"text"},{id:"linkedin",label:"LinkedIn",type:"text"},{id:"twitter",label:"X Account",type:"text"},{id:"instagram",label:"Instagram",type:"text"},{id:"youtube",label:"YouTube",type:"text"},{id:"tiktok",label:"TikTok",type:"text"}]}}),M()(ou,"schema",{data:{customComponent:"RaiselyPersonnelGrid",editable:{teamMembers:{value:[{name:"Name",role:"Role/position",alt:"Image of person"},{name:"Name",role:"Role/position",alt:"Image of person"},{name:"Name",role:"Role/position",alt:"Image of person"}]}}}}),ou.displayName="RaiselyPersonnelGrid",Object(po.f)(ou);const ru=Object(Qi.b)(),{render:iu}=ru;function lu({global:e,getValues:t}){const{t:a}=Object(d.d)(),{heading:n={}}=t();return e.current&&e.current.profile?e.current.profile.mock?g.a.createElement(Ue.a,{header:g.a.createElement(iu,N()({},n,{campaign:e.campaign})),profile:Object.assign({},e.current.profile,{name:"Organisation Awesome"}),detail:"default"}):e.current.profile.organisationProfile?g.a.createElement(Ue.a,{header:g.a.createElement(iu,N()({},n,{text:n.text||a("My [[organisationTerm]]",{organisationTerm:Object(Be.c)(Be.h.organisation,e.campaign.config.profiles,!1,!0)}),campaign:e.campaign})),profile:e.current.profile.organisationProfile,detail:"default"}):null:g.a.createElement(us.a,{total:1})}lu.internalEditable={...ru.internalEditable},lu.schema={data:{customComponent:"RaiselyOrganisationPreview",editable:{}}},lu.description="Displays a basic preview of a fundraiser's organisation.",lu.group="embed",lu.icon="supervisor_account",lu.displayName="RaiselyOrganisationPreview",Object(po.f)(lu);const{render:su,...cu}=Object(Qi.b)();class uu extends f.Component{render(){const{global:e}=this.props,{campaigns:t,heading:a,activityWord:n}=this.props.getValues();return g.a.createElement(xi,{header:g.a.createElement(su,N()({},a,{text:a.text||"My fundraising history",campaign:e.campaign})),campaigns:t,activityWord:n})}}M()(uu,"description","A list of the user's totals and activity totals from previous campaigns for their dashboard"),M()(uu,"restrictions",{page:["dashboard"]}),M()(uu,"icon","history"),M()(uu,"internalEditable",{...cu.internalEditable,campaigns:{help:"Enter which campaigns you'd like to show the history for",type:"repeater",label:"Campaigns",options:[{id:"uuid",type:"text",label:"Campaign Uuid",defaultValue:""}],singular:"campaign"},activityWord:{help:"Enter a word to describe the activity eg. Ran, Swam, Walked",type:"text",label:"Activity Word"}}),M()(uu,"schema",{data:{customComponent:"RaiselyFundraisingHistory",editable:{...cu.editable,activityWord:{value:"Did"}}}}),uu.displayName="RaiselyFundraisingHistory",uu.editorName="Fundraising History",Object(po.f)(uu);const du={lodash:{key:"_",url:"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js"},jQuery:{key:"$",url:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"}};du._=du.lodash,du.$=du.jQuery;const mu={CustomFieldsProvider:mo.a,useCustomFields:mo.b,Pagination:J,SelfContained:de,Communicator:ht.a,useCommunicator:ht.b,FriendlyChallenge:Sa.a,useFriendlyChallenge:Sa.c};t.a={import:function(e,t={}){if(du[e]){const[t,a]=Object(Wr.a)({asPromise:!0}),{url:n,key:o}=du[e],r=t(n,o);return new Promise((e,t)=>a().then(()=>r()).catch(t))}const a=()=>(window.RaiselyPrivateComponents||[]).find(t=>t.name===e);return t.asRaw?a:e=>{const t=a();return t&&t.html?g.a.createElement(t.html,e):null}},useExternals:Wr.a,useI18n:d.d,api:u.a,Link:m.a,Redirect:c.a,Atoms:p,Molecules:n,Modules:mu,Loading:tt.a,Spinner:tt.b,Common:G.d,Form:_.a,FormHelpers:Hn,css:o.css,styled:r.b,op:l.a}},26:function(e,t,a){"use strict";a.d(t,"i",(function(){return y})),a.d(t,"l",(function(){return v})),a.d(t,"m",(function(){return E})),a.d(t,"n",(function(){return O})),a.d(t,"j",(function(){return S})),a.d(t,"g",(function(){return T})),a.d(t,"h",(function(){return x})),a.d(t,"r",(function(){return j})),a.d(t,"d",(function(){return P})),a.d(t,"k",(function(){return A})),a.d(t,"p",(function(){return D})),a.d(t,"f",(function(){return F})),a.d(t,"o",(function(){return I})),a.d(t,"c",(function(){return M})),a.d(t,"q",(function(){return L})),a.d(t,"e",(function(){return B})),a.d(t,"a",(function(){return U}));a(5),a(27);var n=a(10),o=a(311),r=a(32),i=a.n(r),l=a(665),s=a.n(l),c=a(666),u=a.n(c),d=a(7),m=a.n(d),p=a(14),f=a(43),g=a(8),b=a(87);const h=/(\[(donation\..+?|donor\..+?)\])/g,y=e=>[{id:"giftAidIntro",type:"rich-description",label:"Gift Aid Introduction",default:e.isSwiftAidEnabled?'\n\t\t\t<img src="https://storage.googleapis.com/raisely-assets/giftaidit.svg" alt="Gift Aid It" />\n\t\t\t<p style="font-size: 1.3rem"><strong>Add <strong>{{giftAidAmount}}</strong> to your donation for free.</strong></p>\n\t\t\t<br>\n\t\t\t<p style="font-size:90%;">Over 1billion in tax relief is missed every year by charities and donors. We have partnered with <a target="_blank" rel="noopener noreferrer" href=https://www.swiftaid.co.uk/info>Swiftaid</a> to help fix this. If you add Gift Aid, we will share your information with Swiftaid who will identify and add Gift Aid on donations you make this tax year.</p>\n\t\t':'\n\t\t<img src="https://storage.googleapis.com/raisely-assets/giftaidit.svg" alt="Gift Aid It" />\n\t\t<p style="font-size: 1.3rem">Make your donation of <strong>{{amount}}</strong> worth <strong>{{amountWithGiftAid}}</strong> at no extra cost to you.</p>\n\t'},{id:"giftAid",private:!0,type:"checkbox",label:"Yes, I would like to claim Gift Aid on my donation.",default:!1}];function v({formProps:e,values:t,targetCurrency:a}){const n=Array.isArray(e.giftAidFields)?e.giftAidFields:y(t);return JSON.parse(JSON.stringify(n).replace(/{{amount}}/g,Object(g.f)(t.amount,a)).replace(/{{amountWithGiftAid}}/g,Object(g.f)(1.25*t.amount,a)))}const _=e=>["CREDIT_CARD","APPLE_PAY"].includes(e)?"STRIPE":e,E=e=>"STRIPE"===e?"CREDIT_CARD":e;function k(e){return E(e.providerType||"STRIPE")}function w(e){const t=e.config.fees||{},a=Boolean(null==t?void 0:t.custom)&&!e.showRaiselyCheckbox;return e.showRaiselyCheckbox||null!=t&&t.percentage||(t.percentage=0,t.optInOnly=!0),{customFee:a,feeFixed:a?0:50,feePercent:a?t.percentage/100:.045,feeMessage:a?t.message:null,feeMax:t&&t.max?t.max:2e4,includeInTotals:"boolean"!=typeof t.includeInTotals||t.includeInTotals,optInOnly:a&&t.optInOnly}}async function O(){try{const e=await n.a.perks.getAll({query:{sort:"position",order:"asc"}}),{data:t}=e.body().data();return t.filter(e=>!(!e.enabled||e.limit>0&&e.claimed>=e.limit))}catch(e){return console.error("An error occurred while retrieving donation perks",e),[]}}function S({global:e,profileUuid:t}){const a={resolvedTarget:"campaign",campaignUuid:e.campaign.uuid,profileUuid:e.campaign.profile.uuid,currency:e.detectedCurrency};if(t){a.profileUuid=t;const n=e.user&&e.user.profile;if(n&&n.uuid===t)a.resolvedTarget="user";else if(e.current.profile&&e.current.profile.uuid===t)a.resolvedTarget="current";else{if(e.campaign.profile.uuid===t)return a;a.resolvedTarget="custom"}return a}const{profile:n}=e.current;return n?(a.resolvedTarget="current",a.profileUuid=n.uuid,!e.detectedCountry&&n.currency&&(a.currency=n.currency),a):a}function T({loadedPerks:e,campaignCurrency:t,targetCurrency:a,values:n}){const o=e.map(e=>({...e,amount:t===a?e.amount:Object(p.b)(e.amount,t,a)})),r=o.filter(e=>n.amount>=e.amount),i=o.filter(e=>n.amount<e.amount),l=s()(o,e=>e.amount);return{availablePerks:o,claimablePerks:r,unclaimablePerks:i,lowestPerk:l,lowestPerkDisplay:l?`${Object(g.f)(l.amount,a)} ${a}`:null}}function N(e,t){const a=["STRIPE","PAYPAL"],{providerType:n}=e;if(n===a[0])return-1;const{providerType:o}=t;let r=1;for(;r<a.length-1;r++)if(a[r]===n&&a[r-1]!==o)return-1;return 1}function C(e){const t=(e.providers||[]).sort(N);return u()(t,e=>e.providerType)}function x({availableProviders:e,values:t}){const a=_(t.method);return e.find(e=>e.providerType===a)||null}function j({formProps:e,donationTarget:t,lastResult:a,global:n}){if(!e.actions)return;const o={campaign:"campaign",current:"current.profile",user:"user.profile"}[t.resolvedTarget];o&&m()(n,o)&&e.actions.updateProfileTotal(o,a.amount),e.actions.triggerPageStreamRefetch()}function P({lastResult:e},t=[],a=!0){if(!Array.isArray(t)||!t.length)return[];const n=Object.assign({},e,{amount:Object(g.f)(e.feeOptIn&&a?e.amount+e.fee:e.amount,e.currency),total:Object(g.f)(e.total,e.currency),fee:Object(g.f)(e.fee,e.currency)}),r={donation:n,donor:n};return t.map(e=>Object(o.decodeHTML)(e.replace(h,(e,t,a)=>m()(r,a)||"")))}const A=({values:e,raiselyFee:t})=>{const a=parseInt(t.feeFixed+Math.round(e.amount*t.feePercent),10);return t.feeMax&&a>t.feeMax?t.feeMax:a},D=({interval:e,count:t=1})=>1===t?e:`${t}${e}`,R=e=>"ONCE"===e.interval;function F({global:e,values:t={},preferSCAMode:a,formProps:n}){const{amounts:o,subscriptions:r}=e.campaign.config,i="boolean"!=typeof n.recurring||n.recurring,l=Object.assign({},...o.filter(e=>R(e)||i).map(e=>{const a=R(e)?"ONCE"===t.interval:t.interval===e.interval&&t.count===e.count,n=D(e);return{[n]:{...e,isActive:a,type:n}}})),s=(Array.isArray(r.sortOrder)?r.sortOrder.map(e=>l[e]):["ONCE","WEEK","2WEEK","4WEEK","MONTH","3MONTH","YEAR"].map(e=>l[e])).filter(e=>!!e),c=C(e.campaign);return 1===c.length&&"PAYPAL"===c[0].providerType||!i&&0===s.length?[{interval:"ONCE",label:i.ONCE,count:1}]:s}function I(e){const t=e.interval,a=C(e.global.campaign),n=F({global:e.global,formProps:e})[0]||{},o=w(e.global.campaign),r=t=>e.global.user?e.global.user[t]:null;return{formUuid:i()(),step:0,availableProviders:a,loadedPerks:[],lastResult:null,raiselyFee:w(e.global.campaign),values:{method:k(a[0]||{}),anonymous:!1,interval:t||n.interval||"ONCE",count:n.count||1,amount:e.amount,otherAmount:"",feeOptIn:!(e.hideFee||o.optInOnly),items:e.items||[],currency:null,email:r("email"),firstName:r("firstName"),lastName:r("lastName"),public:e.public||{},private:e.private||{},...e.initialValues||{}}}}function M(e){const t=document.querySelector(`.donation-form[data-form-uuid="${e}"]`);Object(b.a)(t)}function L(e,t={}){return this.setState({step:this.state.step+1*!!t.nextStep+-1*!!t.previousStep,lastResult:t.lastResult||this.state.lastResult,values:{...this.state.values,...e||{}}},t.callback&&(()=>t.callback(this.state.values)))}function B(e,t=25){return e.some(e=>e.image&&e.title&&e.title.length>t||!e.image&&e.title&&e.title.length>1.5*t)?"full":e.some(e=>e.title&&e.image&&e.title.length<=t||!e.image&&e.title&&e.title.length<=1.5*t)?"half":"normal"}function U({value:e,condition:t,test:a},n,o){if("amount"===t.field){const r=Number(Object(p.b)(e,n,o.campaign.currency,!0));return a(f[o.campaign.currency].zeroDecimal?r:r/100,{...t,value:Number(t.value)})}}t.b={getDefaultPaymentMethod:k,getGiftAidFieldsFromProps:v,getRaiselyDonationFee:w,typeConfigToString:D,getNonEssentialFieldsFromProps:function({global:e}){return e.customFields.donation.filter(e=>!(!e.active||!e.required||["email","firstName","lastName"].includes(e.id)))},getAvailableProviders:C,getClaimablePerksFromProps:T,getDonationTargetFromProps:S,getCurrentProviderFromProps:x,methodToProviderType:_,retrieveAvailablePerks:O,generateSuccessMessagesFromProps:P,getFeeAmountFromProps:A,getAmountTypesFromProps:F,setupDonationFormState:I,focusDonationForm:M,updateFormValues:L,updateTargetProfileTotal:j,getAmountButtonWidth:B,customDetailConditions:U,providerTypeToMethod:E}},261:function(e,t,a){"use strict";a.d(t,"b",(function(){return b}));var n=a(339),o=a.n(n),r=a(43),i=a(20),l=a(231),s=a.n(l),c=a(65),u=a.n(c);const d={};function m(e){return e&&"object"==typeof e&&!Array.isArray(e)}function p(e){return e&&"string"==typeof e}function f(e){if(!u()(e))throw new TypeError("is-odd expects a number.");return!!(1&~~e)}d.money=function(e,t){if(!Number.isInteger(e)||null===e)return"";const a=t.hash?t.hash.currency:null,n=r[a];if(!n)return console.error("Money helper error: Unknown currency "+a),"";const o={maximumFractionDigits:2};t.hash.hideCents&&Number.isInteger(e)||n.zeroDecimal||(o.minimumFractionDigits=2);const i=(n.zeroDecimal?e:e/100).toLocaleString(void 0,o),l=t.hash.hideCents?i.split(".")[0]:i;return`${n.symbol}${l}`},d.prettyDate=function(e,t){const a="string"==typeof t?t:"MMMM D, YYYY";try{const t=new Date(e);return"Invalid Date"===t.toString()?"":""+s()(t,a)}catch(e){return console.error("Date parsing failed",e),""}},d.and=function(e,t,a){return e&&t?a.fn(this):a.inverse(this)},d.compare=function(e,t,a,n){if(arguments.length<4)throw new Error("handlebars Helper {{compare}} expects 4 arguments");let o;switch(t){case"=":o=e==a;break;case"===":o=e===a;break;case"!=":o=e!=a;break;case"!==":o=e!==a;break;case"&lt;":case"<":o=e<a;break;case"&gt;":case">":o=e>a;break;case"&lt;=":case"<=":o=e<=a;break;case"&gt;=":case">=":o=e>=a;break;case"typeof":o=typeof e===a;break;default:throw new Error(`helper {{compare}}: invalid operator: \`${t}\``)}return!1===o?n.inverse(this):n.fn(this)},d.contains=function(e,t,a,n){return"object"==typeof a&&(n=a,a=void 0),-1!==e.indexOf(t,a)?n.fn(this):n.inverse(this)},d.gt=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e>t?a.fn(this):a.inverse(this)},d.gte=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e>=t?a.fn(this):a.inverse(this)},d.has=function(e,t,a){return 2===arguments.length?t.inverse(this):1===arguments.length?e.inverse(this):(Array.isArray(e)||p(e))&&p(t)&&e.indexOf(t)>-1||m(e)&&p(t)&&t in e?a.fn(this):a.inverse(this)},d.eq=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e==t?a.fn(this):a.inverse(this)},d.ifEven=function(e,t){return function(e){if(!u()(e))throw new TypeError("is-even expects a number.");return!f(e)}(e)?t.fn(this):t.inverse(this)},d.ifNth=function(e,t,a){return u()(e)&&u()(t)&&t%e==0?a.fn(this):a.inverse(this)},d.ifOdd=function(e,t){return f(e)?t.fn(this):t.inverse(this)},d.is=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e===t?a.fn(this):a.inverse(this)},d.isnt=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e!==t?a.fn(this):a.inverse(this)},d.lt=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e<t?a.fn(this):a.inverse(this)},d.lte=function(e,t,a){return 2===arguments.length&&(t=(a=t).hash.compare),e<=t?a.fn(this):a.inverse(this)},d.neither=function(e,t,a){return e||t?a.inverse(this):a.fn(this)},d.or=function(){const e=arguments.length-1,t=arguments[e];for(let a=0;a<e;a++)if(arguments[a])return t.fn(this);return t.inverse(this)},d.unlessEq=function(e,t){return e===t.hash.compare?t.inverse(this):t.fn(this)},d.unlessGt=function(e,t){return e>t.hash.compare?t.inverse(this):t.fn(this)},d.unlessLt=function(e,t){return e<t.hash.compare?t.inverse(this):t.fn(this)},d.unlessGteq=function(e,t){return e>=t.hash.compare?t.inverse(this):t.fn(this)},d.unlessLteq=function(e,t){return e<=t.hash.compare?t.inverse(this):t.fn(this)},d.formatActivity=function(e,t){if(!Number.isInteger(e)||null===e)return"";const a=t.hash?t.hash.unit:null,n=t.hash?t.hash.precision:null,o=t.hash?Boolean(t.hash.fullLabel):null,r=t.hash?t.hash.singularUnit:null;return Object(i.c)(e,a,{precision:n,shortLabel:o,singularUnit:r})};var g=d;function b(e){return"string"!=typeof e?null==e?"":""+e:JSON.stringify(e||"").slice(1,-1)}o.a.Utils.escapeExpression=e=>b(e),o.a.registerHelper(g);t.a=o.a},262:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(5);var n=a(0),o=a.n(n),r=a(17),i=a(54);function l(){return o.a.createElement("div",{"data-cy":"spe-skeleton",style:{background:"transparent",backgroundColor:"transparent",border:"none",borderBottom:"none",borderBottomStyle:"none",borderLeft:"none",borderLeftStyle:"none",borderRight:"none",borderRightStyle:"none",borderStyle:"none",borderTop:"none",borderTopStyle:"none",clear:"both",display:"block",margin:"-4px 0px",marginBottom:"-4px",marginLeft:"0px",marginRight:"0px",marginTop:"-4px",opacity:"1",padding:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",position:"relative",transition:"height 0.35s ease 0s",transitionDuration:"0.35s",transitionProperty:"height"}},o.a.createElement("div",{style:{bottom:"0px",boxSizing:"border-box",height:"235.878px",inset:"4px 0px 0px",left:"0px",margin:"-4px",marginBottom:"-4px",marginLeft:"-4px",marginRight:"-4px",marginTop:"-4px",opacity:"1",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",pointerEvents:"none",position:"absolute",right:"0px",top:"4px",transition:"opacity 0.3s ease 0s",transitionDuration:"0.3s",transitionProperty:"opacity",width:"calc(100% + 8px)",zIndex:"1"}},o.a.createElement("div",{style:{margin:"4px",marginBottom:"4px",marginLeft:"4px",marginRight:"4px",marginTop:"4px",position:"relative"}},o.a.createElement("div",null,o.a.createElement("div",{style:{columnGap:"calc(8px)",display:"flex"}},o.a.createElement("div",{style:{alignItems:"flex-start",backgroundColor:"rgb(255, 255, 255)",borderBottom:"1px solid rgb(230, 230, 230)",borderBottomColor:"rgb(230, 230, 230)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgb(230, 230, 230)",borderLeft:"1px solid rgb(230, 230, 230)",borderLeftColor:"rgb(230, 230, 230)",borderLeftStyle:"solid",borderLeftWidth:"1px",borderRadius:"5px",borderRight:"1px solid rgb(230, 230, 230)",borderRightColor:"rgb(230, 230, 230)",borderRightStyle:"solid",borderRightWidth:"1px",borderStyle:"solid",borderTop:"1px solid rgb(230, 230, 230)",borderTopColor:"rgb(230, 230, 230)",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",borderTopStyle:"solid",borderTopWidth:"1px",borderWidth:"1px",boxShadow:"rgba(0, 0, 0, 0.03) 0px 1px 1px 0px, rgba(0, 0, 0, 0.02) 0px 3px 6px 0px",boxSizing:"border-box",display:"flex",flexBasis:"0px",flexDirection:"column",flexGrow:"1",height:"62.8938px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",padding:"12px",paddingBottom:"12px",paddingLeft:"12px",paddingRight:"12px",paddingTop:"12px",position:"relative"}},o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"16.8px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"22px",willChange:"transform"}},o.a.createElement(s,null)),o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"18.3984px",marginTop:"4px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"40%",willChange:"transform"}},o.a.createElement(s,null))),o.a.createElement("div",{style:{alignItems:"flex-start",backgroundColor:"rgb(255, 255, 255)",borderBottom:"1px solid rgb(230, 230, 230)",borderBottomColor:"rgb(230, 230, 230)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgb(230, 230, 230)",borderLeft:"1px solid rgb(230, 230, 230)",borderLeftColor:"rgb(230, 230, 230)",borderLeftStyle:"solid",borderLeftWidth:"1px",borderRadius:"5px",borderRight:"1px solid rgb(230, 230, 230)",borderRightColor:"rgb(230, 230, 230)",borderRightStyle:"solid",borderRightWidth:"1px",borderStyle:"solid",borderTop:"1px solid rgb(230, 230, 230)",borderTopColor:"rgb(230, 230, 230)",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",borderTopStyle:"solid",borderTopWidth:"1px",borderWidth:"1px",boxShadow:"rgba(0, 0, 0, 0.03) 0px 1px 1px 0px, rgba(0, 0, 0, 0.02) 0px 3px 6px 0px",boxSizing:"border-box",display:"flex",flexBasis:"0px",flexDirection:"column",flexGrow:"1",height:"62.8938px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",padding:"12px",paddingBottom:"12px",paddingLeft:"12px",paddingRight:"12px",paddingTop:"12px",position:"relative"}},o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"16.8px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"22px",willChange:"transform"}},o.a.createElement(s,null)),o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"18.3984px",marginTop:"4px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"40%",willChange:"transform"}},o.a.createElement(s,null))))),o.a.createElement("div",{style:{marginTop:"12px"}},o.a.createElement("div",{style:{marginBottom:"12px"}},o.a.createElement("div",{style:{backgroundColor:"rgb(255, 255, 255)",borderBottom:"1px solid rgb(230, 230, 230)",borderBottomColor:"rgb(230, 230, 230)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgb(230, 230, 230)",borderLeft:"1px solid rgb(230, 230, 230)",borderLeftColor:"rgb(230, 230, 230)",borderLeftStyle:"solid",borderLeftWidth:"1px",borderRadius:"5px",borderRight:"1px solid rgb(230, 230, 230)",borderRightColor:"rgb(230, 230, 230)",borderRightStyle:"solid",borderRightWidth:"1px",borderStyle:"solid",borderTop:"1px solid rgb(230, 230, 230)",borderTopColor:"rgb(230, 230, 230)",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",borderTopStyle:"solid",borderTopWidth:"1px",borderWidth:"1px",boxShadow:"rgba(0, 0, 0, 0.03) 0px 1px 1px 0px, rgba(0, 0, 0, 0.02) 0px 3px 6px 0px",boxSizing:"border-box",height:"64.4922px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",padding:"24.1856px 12px 12px",paddingBottom:"12px",paddingLeft:"12px",paddingRight:"12px",paddingTop:"24.1856px",position:"relative"}},o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"12.8321px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"85.6797px",willChange:"transform"}},o.a.createElement(s,null)))),o.a.createElement("div",{style:{display:"flex",marginBottom:"12px",marginLeft:"-12px"}},o.a.createElement("div",{style:{boxSizing:"border-box",paddingLeft:"12px",width:"50%"}},o.a.createElement("div",{style:{backgroundColor:"rgb(255, 255, 255)",borderBottom:"1px solid rgb(230, 230, 230)",borderBottomColor:"rgb(230, 230, 230)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgb(230, 230, 230)",borderLeft:"1px solid rgb(230, 230, 230)",borderLeftColor:"rgb(230, 230, 230)",borderLeftStyle:"solid",borderLeftWidth:"1px",borderRadius:"5px",borderRight:"1px solid rgb(230, 230, 230)",borderRightColor:"rgb(230, 230, 230)",borderRightStyle:"solid",borderRightWidth:"1px",borderStyle:"solid",borderTop:"1px solid rgb(230, 230, 230)",borderTopColor:"rgb(230, 230, 230)",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",borderTopStyle:"solid",borderTopWidth:"1px",borderWidth:"1px",boxShadow:"rgba(0, 0, 0, 0.03) 0px 1px 1px 0px, rgba(0, 0, 0, 0.02) 0px 3px 6px 0px",boxSizing:"border-box",height:"64.4922px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",padding:"24.1856px 12px 12px",paddingBottom:"12px",paddingLeft:"12px",paddingRight:"12px",paddingTop:"24.1856px",position:"relative"}},o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"12.8321px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"85.6797px",willChange:"transform"}},o.a.createElement(s,null)))),o.a.createElement("div",{style:{boxSizing:"border-box",paddingLeft:"12px",width:"50%"}},o.a.createElement("div",{style:{backgroundColor:"rgb(255, 255, 255)",borderBottom:"1px solid rgb(230, 230, 230)",borderBottomColor:"rgb(230, 230, 230)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgb(230, 230, 230)",borderLeft:"1px solid rgb(230, 230, 230)",borderLeftColor:"rgb(230, 230, 230)",borderLeftStyle:"solid",borderLeftWidth:"1px",borderRadius:"5px",borderRight:"1px solid rgb(230, 230, 230)",borderRightColor:"rgb(230, 230, 230)",borderRightStyle:"solid",borderRightWidth:"1px",borderStyle:"solid",borderTop:"1px solid rgb(230, 230, 230)",borderTopColor:"rgb(230, 230, 230)",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",borderTopStyle:"solid",borderTopWidth:"1px",borderWidth:"1px",boxShadow:"rgba(0, 0, 0, 0.03) 0px 1px 1px 0px, rgba(0, 0, 0, 0.02) 0px 3px 6px 0px",boxSizing:"border-box",height:"64.4922px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",padding:"24.1856px 12px 12px",paddingBottom:"12px",paddingLeft:"12px",paddingRight:"12px",paddingTop:"24.1856px",position:"relative"}},o.a.createElement("div",{style:{backgroundColor:"rgba(47, 48, 60, 0.04)",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderRadius:"5px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxSizing:"border-box",height:"12.8321px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",position:"relative",width:"85.6797px",willChange:"transform"}},o.a.createElement(s,null)))))))))}function s(){return o.a.createElement("div",{className:"animated-bar",style:{background:"linear-gradient(to right, rgba(47, 48, 60, 0), rgba(47, 48, 60, 0.05) 50%, rgba(47, 48, 60, 0))",backgroundImage:"linear-gradient(to right, rgba(47, 48, 60, 0), rgba(47, 48, 60, 0.05) 50%, rgba(47, 48, 60, 0))",height:"100%",left:"0px",position:"absolute",top:"0px",width:"50%",willChange:"transform"}})}var c=a(3);function u(){const{setError:e,payments:t,updateValues:a,values:s,isSPEReady:u,setIsSPEReady:m}=Object(r.b)(),{t:p}=Object(c.d)();Object(n.useEffect)(()=>()=>m(!1),[]);const{fields:f,defaultValues:g}=function(e){const t={billingDetails:{name:"never",email:"never",address:{}}},a={billingDetails:{address:{}}};e.country&&(t.billingDetails.address.country="never");e.address1&&e.suburb&&e.state&&e.postcode?(t.billingDetails.address.line1="never",t.billingDetails.address.city="never",t.billingDetails.address.state="never",t.billingDetails.address.postalCode="never"):(a.billingDetails.address.line1=e.address1,a.billingDetails.address.line2=e.address2,a.billingDetails.address.city=e.suburb,a.billingDetails.address.state=e.state,a.billingDetails.address.postal_code=e.postcode);return{fields:t,defaultValues:a}}(s.details);return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"donation-form__spe-message"},p("Enter your payment details")),o.a.createElement("div",{className:"donation-form__spe-box"},o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:"donation-form__spe-box__security-message"},o.a.createElement("tr",null,o.a.createElement("td",{className:"donation-form__spe-box__security-message__left-column"},o.a.createElement(d,null)),o.a.createElement("td",{className:"donation-form__spe-box__security-message__right-column"},o.a.createElement("p",{className:"donation-form__spe-box__security-message__header"},p("Secure payment")),o.a.createElement("p",{className:"donation-form__spe-box__security-message__text"},p("Our payments are protected by industry best-practice encryption technology."))))),(null==t?void 0:t.donationIntent)&&!(null!=t&&t.isLoading)&&o.a.createElement(i.PaymentElement,{onChange:t=>{t.complete&&e(null),a(e=>{switch(e.set("disableSPEPayment",!t.complete),t.value.type){case"card":return void e.set("methodType","CARD");case"bacs_debit":return void e.set("methodType","DD_BACS");case"au_becs_debit":return void e.set("methodType","DD_BECS")}})},onReady:()=>m(!0),options:{wallets:{googlePay:"never",applePay:"never"},fields:{billingDetails:{name:"never",email:"never"},fields:f,defaultValues:g}}}),!u&&o.a.createElement("div",{style:{height:"238px"}},o.a.createElement(l,null)))))}const d=()=>o.a.createElement("svg",{width:"69",height:"69",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle"}},o.a.createElement("rect",{width:"90",height:"90",rx:"45",fill:"white",fillOpacity:"0.8"}),o.a.createElement("path",{d:"M38.367 28.0523C38.367 24.3111 41.3999 21.2782 45.1412 21.2782C48.8825 21.2782 51.9153 24.3111 51.9153 28.0523V34.0677H58.1935V28.0523C58.1935 20.8437 52.3498 15 45.1412 15C37.9326 15 32.0889 20.8437 32.0889 28.0523V34.0677H38.367V28.0523Z",fill:"#A4CEFD"}),o.a.createElement("rect",{x:"24.6377",y:"32.5156",width:"41.0078",height:"37.3104",rx:"5.73276",fill:"#0070F3"}),o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.251 46.633C38.251 42.9202 41.2608 39.9104 44.9736 39.9104C48.6863 39.9104 51.6962 42.9202 51.6962 46.633C51.6962 49.8889 49.3815 52.6042 46.3079 53.2232L49.0044 60.468C49.0602 60.618 49.0888 60.7768 49.0888 60.937C49.0888 61.657 48.5228 62.2449 47.8114 62.2798L47.7443 62.2815H42.1701C42.0172 62.2815 41.8654 62.2554 41.7213 62.2044C41.0432 61.9643 40.678 61.2357 40.8812 60.554L40.9026 60.4882L43.4864 53.1905C40.4892 52.5137 38.251 49.8347 38.251 46.633Z",fill:"white"}),o.a.createElement("rect",{x:"14.5",y:"49.5",width:"22.7097",height:"22.7097",rx:"11.3549",fill:"#00275B"}),o.a.createElement("path",{d:"M19.7354 60.7834L24.2275 65.3066L31.8306 56.761",stroke:"white",strokeWidth:"1.93784",strokeLinecap:"round",strokeLinejoin:"round"}))},28:function(e,t,a){"use strict";a.r(t);var n=a(11);a.d(t,"Button",(function(){return n.a}));var o=a(202);a.d(t,"DonationTile",(function(){return o.a}));var r=a(201);a.d(t,"RegularDonationTile",(function(){return r.a}));var i=a(205);a.d(t,"Dropdown",(function(){return i.a}));var l=a(41);a.d(t,"ProfileTile",(function(){return l.a}));var s=a(53);a.d(t,"ShareButton",(function(){return s.a}));var c=a(16);a.d(t,"Icon",(function(){return c.a}));var u=a(177);a.d(t,"Post",(function(){return u.a}));var d=a(56);a.d(t,"Input",(function(){return d.a}));var m=a(108);a.d(t,"ProfileImage",(function(){return m.a}));var p=a(40);a.d(t,"ProgressBar",(function(){return p.a}));var f=a(291);a.d(t,"ExerciseCounter",(function(){return f.a}));var g=a(179);a.d(t,"ResourceCard",(function(){return g.a}));var b=a(215);a.d(t,"QRCode",(function(){return b.b}));var h=a(296);a.d(t,"Quote",(function(){return h.a}));var y=a(292);a.d(t,"FlipCard",(function(){return y.a}));var v=a(37);a.d(t,"Image",(function(){return v.a}));var _=a(293);a.d(t,"ClipboardButton",(function(){return _.a}))},286:function(e,t,a){e.exports=a(900)()},287:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementContextTypes=t.injectContextTypes=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=l(a(0)),r=l(a(286)),i=a(383);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var c=t.injectContextTypes={getRegisteredElements:r.default.func.isRequired},u=t.elementContextTypes={addElementsLoadListener:r.default.func.isRequired,registerElement:r.default.func.isRequired,unregisterElement:r.default.func.isRequired},d=function(e){function t(a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a,o));return r.handleRegisterElement=function(e,t,a,o){r.setState((function(r){return{registeredElements:[].concat(s(r.registeredElements),[n({element:e},t?{impliedTokenType:t}:{},a?{impliedSourceType:a}:{},o?{impliedPaymentMethodType:o}:{})])}}))},r.handleUnregisterElement=function(e){r.setState((function(t){return{registeredElements:t.registeredElements.filter((function(t){return t.element!==e}))}}))},r.state={registeredElements:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){var e=this;return{addElementsLoadListener:function(t){if(e._elements)t(e._elements);else{var a=e.props,n=(a.children,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(a,["children"]));"sync"===e.context.tag?(e._elements=e.context.stripe.elements(n),t(e._elements)):e.context.addStripeLoadListener((function(a){e._elements||(e._elements=a.elements(n)),t(e._elements)}))}},registerElement:this.handleRegisterElement,unregisterElement:this.handleUnregisterElement,getRegisteredElements:function(){return e.state.registeredElements}}},t.prototype.render=function(){return o.default.Children.only(this.props.children)},t}(o.default.Component);d.childContextTypes=n({},c,u),d.contextTypes=i.providerContextTypes,d.defaultProps={children:null},t.default=d},288:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(157),i=a.n(r);t.a=()=>o.a.createElement(i.a,{speed:1,height:400},o.a.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"480",height:"400"}),o.a.createElement("rect",{x:"0",y:"100",rx:"4",ry:"4",width:"480",height:"10"}))},289:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(2),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(10),s=a(3),c=a(33);class u extends i.a.Component{constructor(...e){super(...e),o()(this,"state",{cards:[],selected:null,completed:!1}),o()(this,"addCards",e=>{if(e.length<1)return void this.setState({completed:!0});const t=e.filter(e=>"card"===e.type);if(this.props.donation){const e=t.filter(e=>e.id===this.props.donation.card);if(e.length>0)return void this.setState({cards:t,selected:e[0],completed:!0})}this.setState({cards:t,selected:t[0],completed:!0})}),o()(this,"preview",e=>i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"raisely-select-card__card-logo"},i.a.createElement("img",{src:`https://admin.raisely.com/public/cards/${e.brand}.png`})),i.a.createElement("span",{className:"raisely-select-card__card-last-4"}," ",e.brand," (",e.last4,")")))}componentDidMount(){const e={campaign:this.props.global.campaign.uuid};this.props.donation&&(e.subscription=this.props.donation.uuid),l.a.users.cards.getAll({id:this.props.global.user.uuid,query:e}).then(e=>this.addCards(e.body().data().data)).catch(()=>this.setState({completed:!0}))}render(){const{t:e}=Object(s.a)();return 0===this.state.cards.length&&this.state.completed?null:!this.props.global.user||0===this.state.cards.length&&!this.state.completed?i.a.createElement("div",{className:"raisely-select-card raisely-select-card--loading"},i.a.createElement(c.b,{sceneHeight:"30vh"})):i.a.createElement("div",{className:"raisely-select-card"},!this.props.hideLabel&&i.a.createElement("label",null,e("Select an existing card")),i.a.createElement("ul",{className:"raisely-select-card__menu "+(this.state.cards.length>1?"raisely-select-card__menu--has-cards":"")},i.a.createElement("li",null,i.a.createElement("a",{className:"raisely-select-card__menu-item raisely-select-card__menu-item--selected",onClick:()=>this.props.select(this.state.selected)},this.preview(this.state.selected)),this.state.cards.length>1&&i.a.createElement("ul",{className:"raisely-select-card__hover-menu"},this.state.cards.map(e=>e&&e.id!==this.state.selected.id&&i.a.createElement("li",null,i.a.createElement("a",{className:"raisely-select-card__menu-item",onClick:()=>this.props.select(e)},this.preview(e))))))),this.props.extra&&this.props.extra())}}},29:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return f}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(299),s=a.n(l),c=a(1),u=a.n(c),d=a(298);const m=/^(#|\/\/|mailto:)/,p=Boolean(e.env.RAISELY_VOID_LINKS);function f({href:e,to:t,...a}){const n=p?null:e||t,r="function"==typeof a.onClick?a.onClick:()=>{},l=p?(...e)=>r(...e):(...e)=>(n.split("#")[1]&&"#"!==n.charAt(0)&&Object(d.a)("#"+n),r(...e));return p||n&&(m.test(n)||n.includes("://"))?i.a.createElement("a",o()({},a,{href:n,onClick:l,target:a.shouldOpenInNewTab?"_blank":null,rel:a.shouldOpenInNewTab?"noopener noreferrer":null})):i.a.createElement(s.a,o()({},a,{to:n,onClick:l}))}f.propTypes={href:u.a.string,to:u.a.string,onClick:u.a.func,shouldOpenInNewTab:u.a.bool}}).call(this,a(367))},291:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(27);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(20);function s({profile:e,campaign:t,labelAbove:a,labelBelow:n,level:r,align:i,color:s,timeUnit:c}){const{exerciseTotal:u,exerciseTotalTime:d}=e,m={};i&&(m.textAlign=i),s&&(m.color=s);const p=c&&"default"!==c,{unit:f,metric:g,multiplier:b}=Object(l.f)(t.config,null,null,p?c:null),h="h"+r,y=Object(l.b)(("time"===g?d:u)||0,f,Object(l.k)(f));return o.a.createElement("div",{className:"exercise-counter",style:m},Boolean(a&&a.length)&&o.a.createElement("span",{className:"exercise-counter__label"},a.replace("[unit]",f)),o.a.createElement(h,{className:"exercise-counter__value",style:m},y),Boolean(n&&n.length)&&o.a.createElement("span",{className:"exercise-counter__label"},n.replace("[unit]",f)))}s.propTypes={profile:i.a.object.isRequired,campaign:i.a.object,labelAbove:i.a.string,labelBelow:i.a.string,level:i.a.number}},292:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(47),o=(a(5),a(0)),r=a.n(o),i=a(1),l=a.n(i);function s({width:e="100%",height:t="240px",delay:a=0,direction:i="left",duration:l=500,backgroundColor:s="#fff",backgroundImage:c,frontContent:u,backContent:d}){const m=Object(o.useMemo)(()=>Object(n.css)(`width: ${e}; height: ${t}; --background-color: ${s};`,""),[e,t,c]),p=Object(o.useMemo)(()=>Object(n.css)(`background-color: ${s};`,""),[s]),f=function({delay:e,duration:t,direction:a}){return Object(o.useMemo)(()=>{const[o,r]=function(e){const t="left"===e;return t||"right"===e?["rotateY(180deg)",`rotateY(${t?"-180":"180"}deg)`]:["rotateX(180deg)",`rotateX(${"up"===e?"-180":"180"}deg)`]}(a);return{container:Object(n.css)(`\n\t\t\tperspective: 1000px;\n\n\t\t\t&:hover .raisely-flip-card__inner {\n\t\t\t\ttransform: ${r};\n\t\t\t}\n\t\t`,""),inner:Object(n.css)(`\n\t\t \ttransition-property: transform;\n  \t\t\ttransition-timing-function: ease-in-out;\n  \t\t\ttransition-duration: ${t}ms;\n  \t\t\ttransition-delay: ${e}ms;\n  \t\t\ttransform-style: preserve-3d;\n\t\t`,""),front:Object(n.css)("\n\t\t\tbackface-visibility: hidden;\n\t\t",""),back:Object(n.css)(`\n\t\t\tbackface-visibility: hidden;\n\t\t\ttransform: ${o};\n\t\t`,"")}},[e,t,a])}({delay:a,duration:l,direction:i});return r.a.createElement("article",{className:`raisely-flip-card raisely-flip-card--flip-${i} ${f.container} ${m}`},r.a.createElement("div",{className:"raisely-flip-card__inner "+f.inner},r.a.createElement("div",{className:`raisely-flip-card__front ${f.front} ${p}`,style:{backgroundImage:c?`url("${c}")`:""}},u),r.a.createElement("div",{className:`raisely-flip-card__back ${f.back} ${p}`},d)))}s.propTypes={width:l.a.string,height:l.a.string,direction:l.a.oneOf(["left","right","top","bottom"]),duration:l.a.number,delay:l.a.number,backgroundColor:l.a.string,backgroundImage:l.a.string,frontContent:l.a.node,backContent:l.a.node}},293:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),o=a.n(n),r=a(3),i=a(11);function l({copyPaste:e,buttonText:t,buttonTheme:a,alignment:n,actions:l,global:s}){const{t:c,tD:u}=Object(r.d)();return o.a.createElement("div",{className:`clipboard-button${"display"!=a?"":" clipboard-button--display"} clipboard-button--${n}`},"display"===a&&o.a.createElement("div",{className:"clipboard-button--text"},o.a.createElement("p",null,u(e))),o.a.createElement(i.a,{theme:"display"!=a&&a,className:"clipboard-button--button",onClick:()=>{navigator.clipboard.writeText(u(e)),l.addMessage(c("Copied to clipboard!"))}},""+u(t)))}l.propTypes={}},294:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(5),a(0)),s=a.n(l),c=a(51),u=a.n(c),d=a(3),m=a(33),p=a(41);class f extends s.a.Component{constructor(...e){super(...e),i()(this,"state",{loading:!1,items:[],deleting:!1,noResults:!1}),i()(this,"search",u()((e,t)=>{this.setState({loading:!t}),this.props.request(e).then(e=>{const t=e.body().data().data;this.setState({items:t.map(e=>({value:e,label:e})),loading:!1,noResults:!t.length>0})})},300))}componentDidMount(){this.search(this.props.inputValue)}componentDidUpdate(e){e.inputValue!==this.props.inputValue&&this.search(this.props.inputValue,this.state.noResults&&e.inputValue.length<this.props.inputValue.length)}render(){const{t:e}=Object(d.a)(),{getItemProps:t,inputValue:a,customFilter:n}=this.props;if(!this.state.loading&&!a)return null;const r=this.state.items.filter((e,t)=>!n||n(e,t));return s.a.createElement("ul",o()({className:"profile-select__list"},this.props.getMenuProps()),s.a.createElement("div",{className:"profile-select__list-container"},this.state.loading&&s.a.createElement(m.b,{size:".75",sceneHeight:"2.5rem"}),!this.state.loading&&(r.length>0?r.map((e,a)=>s.a.createElement("li",o()({key:a,className:"profile-select__list-item"},t({key:e.value.uuid,index:a,item:e})),s.a.createElement(p.a,{profile:e.value,detail:"info"}))):this.state.noResults&&s.a.createElement("p",{className:"profile-select__list-empty"},e("There are no [[teamTerm]] with this name",{teamTerm:this.props.teamLanguage})))))}}t.a=f},295:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));a(5);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(21),s=a.n(l),c=a(3),u=a(24),d=a.n(u),m=a(100),p=a(16),f=a(683),g=a.n(f),b=a(684),h=a.n(b),y=a(685),v=a.n(y),_=a(686),E=a.n(_);const[k,w]=Object(m.a)({asPromise:!0}),O=k("https://unpkg.com/calendar-link@2.4.0/dist/index.umd.js","calendarLink");function S({header:e,name:t,freeText:a,address:r,startDate:i,endDate:l,showMap:u,showCalendarInvite:m}){const{t:f}=Object(c.d)(),[b,y]=Object(n.useState)(!1),[_,k]=Object(n.useState)({});return Object(n.useEffect)(()=>{if(!m)return y(!0),!0;w().then(async()=>{y(!0);const e=O(),{google:n,outlook:o,office365:r,yahoo:s,ics:c}=e,u={title:t,description:a,start:i,duration:[l?d()(l).diff(i,"m"):60,"minute"]};k({google:n(u),outlook:o(u),office365:r(u),yahoo:s(u),ics:c(u)})})},[]),o.a.createElement("div",{className:"event-overview"},u&&Boolean(r)&&o.a.createElement("div",{className:"event-overview__map"},o.a.createElement("iframe",{width:"100%",style:{border:0},loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps/embed/v1/place?key=AIzaSyCckIrOubzkAS4fcGmWcop_A_ns0_NGtk0\n    &q="+encodeURIComponent(r)})),o.a.createElement("div",{className:"event-overview__content"},o.a.createElement("div",{className:"event-overview__content__intro"},e,Boolean(a)&&o.a.createElement("div",{className:"event-overview__content__description"},s()(a))),Boolean(i)&&d()(i).isValid()&&o.a.createElement("div",{className:"event-overview__content__date"},o.a.createElement(p.a,{name:"date_range"})," ",d()(i).format("lll"),Boolean(l)&&d()(l).isValid()&&" - "+d()(l).format(d()(l).diff(i,"d",!0)>0?"lll":"LT")),Boolean(r)&&o.a.createElement("div",{className:"event-overview__content__address"},o.a.createElement(p.a,{name:"location_on"})," ",r)),m&&b&&o.a.createElement("div",{className:"event-overview__download"},o.a.createElement("h6",null,f("Add to your calendar")),o.a.createElement("a",{href:_.google,target:"_blank",rel:"noreferrer",className:"event-overview__download__link"},o.a.createElement("img",{src:g.a,alt:"Google Calendar"}),"Google"),o.a.createElement("a",{href:_.outlook,target:"_blank",rel:"noreferrer",className:"event-overview__download__link"},o.a.createElement("img",{src:v.a,alt:"Outlook"}),"Outlook"),o.a.createElement("a",{href:_.office365,target:"_blank",rel:"noreferrer",className:"event-overview__download__link"},o.a.createElement("img",{src:E.a,alt:"Outlook"}),"Office365"),o.a.createElement("a",{href:_.yahoo,target:"_blank",rel:"noreferrer",className:"event-overview__download__link"},o.a.createElement("img",{src:h.a,alt:"Outlook"}),"Yahoo"),o.a.createElement("a",{href:_.ics,className:"event-overview__download__ical"},f("or download invite"))))}S.propTypes={header:i.a.element,name:i.a.string,description:i.a.string,address:i.a.string,startDate:i.a.string,endDate:i.a.string,showCalendarInvite:i.a.bool,showMap:i.a.bool}},296:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(3),s=a(52),c=a(45),u=(a(5),a(314)),d=a.n(u),m=a(223),p=a.n(m);const f=d()((e,t,a)=>{const{setScrollOffset:n,setTrackWidth:o,setSlideIx:r}=a,i=e.scrollLeft,l=e.offsetWidth,s=e.scrollWidth/(t.length-1),c=e.offsetWidth/2/s,u=Math.round(i/s+c);n(i),o(l),r(u)},300);function g({children:e,appendContent:t,style:a}){const[r,i]=Object(n.useState)(0),[l,s]=Object(n.useState)(0),[c,u]=Object(n.useState)(1),[d,m]=Object(n.useState)(null),g=Object(n.useRef)(),b=Object(n.useRef)();Object(n.useEffect)(()=>{b&&b.current&&s(b.current.offsetLeft+b.current.clientWidth/2)},[b]);return e&&1===e.length?e:o.a.createElement("div",{className:"carousel",style:a},o.a.createElement("div",{className:"carousel__track",ref:g,onScroll:()=>f(g.current,e,{setScrollOffset:i,setTrackWidth:u,setSlideIx:m})},o.a.createElement("div",{className:"carousel__inner"},Array.isArray(e)?e.filter(e=>!!e).map((e,t)=>o.a.createElement("div",{key:e.key||t,className:"carousel__item",ref:b},e)):o.a.createElement("div",{className:"carousel__item"},e))),o.a.createElement("button",{className:"carousel__button carousel__button--left "+(d>0?"carousel__button--visible":""),onClick:()=>{const e=g.current.children[0].children[Math.max(d-1,0)];p()(e,{time:500})}},o.a.createElement("i",{className:"material-icons material-icons--quote-nav"},"chevron_left")),o.a.createElement("button",{className:"carousel__button carousel__button--right "+(d!==e.length-1?"carousel__button--visible":""),onClick:()=>{const t=g.current,a=e.length,n=t.children[0].children[Math.min(d+1,a-1)];p()(n,{time:500})}},o.a.createElement("i",{className:"material-icons material-icons--quote-nav"},"chevron_right")),t)}var b=a(37);function h({quotes:e,showImages:t=!1,showShareButtons:a=!1}){const n=useRaisely(),{t:r}=Object(l.d)();return!e||e&&e.length<1?o.a.createElement(s.a,{message:r("You need to add some Quotes."),prefix:"quotes"}):o.a.createElement(g,{style:{"--quotes-length":e&&e.length},className:"quotes__carousel"},e.map((e,r)=>o.a.createElement("div",{className:"quotes__block",key:r},o.a.createElement("div",{className:"quotes__top"},t&&e.image?o.a.createElement(b.a,{src:e.image,className:"quotes__image",alt:e.alt}):null,o.a.createElement("div",{className:"quotes__quote quotes__quote--"+(e.quote&&e.quote.length>120?"long":"normal")},e.quote)),o.a.createElement("div",{className:"quotes__bottom"},o.a.createElement("div",{className:"quotes__author"},e.author),a?o.a.createElement(c.a,{className:"quotes__share",global:n,networks:"campaign",theme:"filled",size:"icon",url:"current"}):null))))}h.propTypes={quotes:i.a.arrayOf(i.a.shape({quotes:i.a.string,author:i.a.string,image:i.a.string,alt:i.a.string,showShareButtons:i.a.bool,showImages:i.a.bool}))}},307:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(7),o=a.n(n),r=a(0),i=a.n(r),l=a(53),s=a(90),c=a(308);function u({donation:e,displayThanks:t,onThanksSuccess:a,onThanksFailure:n,profileIsOwnedByLoggedInUser:u,displayThanksForm:d,baseClass:m}){var p;const{user:f,campaign:g}=useRaisely(),b=o()(g,"config.thankyou",{}),h=`${window.location.protocol}//${window.location.host}`,y=o()(f,"uuid")===o()(e,"user.uuid");return i.a.createElement(r.Fragment,null,e&&b.enabled&&t&&null!==(p=e.thankyou)&&void 0!==p&&p.message?i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:m+"__thanks"},e.thankyou.message),u&&i.a.createElement("div",{className:m+"__thanks-share"},i.a.createElement(l.a,{network:{iconName:"facebook",buildUrl:()=>s.b.facebook.buildUrl(`${h}/${e.profile.path}?donation=${e.uuid}`)},networkName:"facebook",theme:"filled-inverse",size:"icon"}),i.a.createElement(l.a,{network:{iconName:"twitter",buildUrl:()=>s.b.twitter.buildUrl(`${h}/${e.profile.path}?donation=${e.uuid}`)},networkName:"twitter",theme:"filled-inverse",size:"icon"}))):null,e&&b.enabled&&u&&!y&&d&&!e.thankyou?i.a.createElement(c.a,{size:"inline",donation:e,onSuccess:a,onFailure:n}):null)}},308:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(5),a(27);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(18),s=a(3),c=a(10),u=a(16),d=a(309),m=a(178);const p=["small","inline"];function f({donation:e,onSuccess:t,onFailure:a,thankyou:r,size:i,expandThanksForm:f}){const{t:g}=Object(s.d)(),b=p.includes(i)?i:"small",h=e.anonymous?g("Thanks for your donation!"):g("Thanks [[name]] for your donation!",{name:""+e.firstName}),[y,v]=Object(n.useState)(Boolean(f)),[_,E]=Object(n.useState)(h),[k,w]=Object(n.useState)(!1),[O,S]=Object(n.useState)(!1),[T,N]=Object(n.useState)(!1),C=async n=>{if(n.preventDefault(),_.replace(/\s/g,"").length){S(!0);try{const a=await c.a.donations.thankyou.create({id:e.uuid,data:{data:{message:_,isPrivate:k}}});"function"==typeof t&&(t(a),setTimeout(()=>{S(!1),N(!0)},300))}catch(e){"function"==typeof a&&(a(e),S(!1))}}},x=["donation-thank-you-form-activator","donation-thank-you-form-activator--"+b,"donation-thank-you-form-activator--"+((r?"thanked":y&&"thanking")||"default"),T&&"donation-thank-you-form-activator--trigger-thanks"];return o.a.createElement(n.Fragment,null,!f&&o.a.createElement("button",{className:Object(l.a)(x),onClick:()=>!r&&v(!y)},o.a.createElement("span",{className:"donation-thank-you-form-activator__label"},r&&g("Thanks!")||g(y?"Cancel":"Thank")),o.a.createElement(d.a,{className:"donation-thank-you-form-activator__heart"})),!r&&o.a.createElement(m.a,{name:"message",placeholder:g("Your message..."),formClassName:Object(l.a)("donation-thank-you-form","donation-thank-you-form--"+b),onSubmit:C,onKeyDown:e=>(e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key?C(e):"Escape"===e.key&&(v(!1),setTimeout(()=>{E(h)},300))})(e),value:_,onChange:E,isActive:y,loading:O,buttonLabel:"Send",buttonTitle:"Send thank you",appendInput:()=>o.a.createElement("label",{className:Object(l.a)("donation-thank-you-form__private","donation-thank-you-form__private--is-"+(k?"private":"public")),title:g(k?"Make this public":"Keep this private")},o.a.createElement("input",{type:"checkbox",name:"isPrivate",onChange:()=>w(!k),checked:k}),o.a.createElement(u.a,{name:k?"lock-outline":"lock-open-outline",size:"normal",theme:"inherit"}),o.a.createElement("span",{className:"donation-thank-you-form__private__label"}," ",g("Keep this private")))}))}f.propTypes={donation:i.a.object,onSuccess:i.a.func,onFailure:i.a.func}},309:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),o=a.n(n);const r=({i:e})=>{const t=["circle","squiggle","triangle","square"],a=["#FCA78C","#FC8CF3","#6138D8","#2287FF","#99F4FC"],n=e=>e[Math.floor(Math.random()*e.length)],r=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);return o.a.createElement("div",{className:"confetti"},Array.from(Array(e),()=>o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",overflow:"visible",viewBox:"0 0 100 100",style:{"--offset-x":r(10,40)*(2*Math.round(Math.random())-1),"--offset-y":r(10,40)*(2*Math.round(Math.random())-1),"--color":n(a),"--rotate":r(0,360)*(2*Math.round(Math.random())-1)}},(e=>{switch(e){case"circle":return o.a.createElement("circle",{cx:50,cy:50,r:"17.5"});case"squiggle":return o.a.createElement("path",{d:"M35 55c.9-5.9 6.3-10 12.3-9.2 1.9.3 3.8 1.1 5.3 2.3 4.6 3.8 11.5 3.1 15.2-1.5 1.2-1.5 2-3.4 2.3-5.3"});case"triangle":return o.a.createElement("path",{d:"M40 40h23v23h-23z"});default:return o.a.createElement("path",{d:"M35 60l15.8-24.2 15.8 24.2z"})}})(n(t)))))};function i({className:e,isThanking:t}){return o.a.createElement("div",{className:e},t&&o.a.createElement("div",{className:e+"__confetti"},o.a.createElement(r,{i:6})),o.a.createElement("svg",{className:"heart-svg",overflow:"visible",viewBox:"0 0 218 178.7"},o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"border-gradient",x1:"44.756",x2:"166.64",y1:"131.546",y2:"-13.71",gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{offset:"0",stopColor:"#ff004b"}),o.a.createElement("stop",{offset:"0.15",stopColor:"#ff084f"}),o.a.createElement("stop",{offset:"0.387",stopColor:"#ff1f5a"}),o.a.createElement("stop",{offset:"0.681",stopColor:"#ff446c"}),o.a.createElement("stop",{offset:"1",stopColor:"#ff7484"})),o.a.createElement("linearGradient",{id:"fill-gradient",x1:"0",x2:"217.9",y1:"89.331",y2:"89.331",gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{offset:"0",stopColor:"#ff004b"}),o.a.createElement("stop",{offset:"0.15",stopColor:"#ff084f"}),o.a.createElement("stop",{offset:"0.387",stopColor:"#ff1f5a"}),o.a.createElement("stop",{offset:"0.681",stopColor:"#ff446c"}),o.a.createElement("stop",{offset:"1",stopColor:"#ff7484"}))),o.a.createElement("g",{className:"default"},o.a.createElement("path",{d:"M109.1 171.7c-4 0-7.7-1.5-10.6-4.3L21.1 89.1C2.6 70.3 2.6 39.8 21.1 21c9-9 20.9-14 33.6-14C67.2 7 79 11.9 87.9 20.7l16.3 16.5c1.3 1.3 3.1 2.1 5 2.1s3.7-.7 5-2.1l15.9-16.1c8.9-9 20.8-14 33.5-14 12.5 0 24.2 4.8 33.1 13.6l.4.4c18.5 18.7 18.5 49.2 0 67.9l-77.4 78.2c-2.8 2.9-6.6 4.5-10.6 4.5z",className:"default__back"}),o.a.createElement("path",{className:"default__border",fill:"#b2b2b2",d:"M54.7 14c10.7 0 20.7 4.1 28.3 11.6l.3.3 16 16.2c2.6 2.7 6.2 4.2 10 4.2 3.7 0 7.3-1.5 10-4.2L135.1 26c7.6-7.7 17.7-11.9 28.5-11.9 10.6 0 20.6 4.1 28.2 11.6l.3.3c7.7 7.8 11.9 18.1 11.9 29 0 10.9-4.2 21.2-11.9 29l-77.4 78.2c-1.5 1.5-3.5 2.4-5.7 2.4-2.1 0-4.1-.8-5.6-2.3l-.1-.1-77.2-78c-7.7-7.8-12-18.2-12-29.1 0-11 4.3-21.3 12-29.1 7.6-7.8 17.8-12 28.6-12m0-14c-14 0-28 5.4-38.6 16.1-21.4 21.6-21.4 56.4 0 78l77.2 78.1.2.2c4.3 4.2 9.9 6.4 15.5 6.4 5.7 0 11.3-2.2 15.6-6.5L202 94.1c21.3-21.5 21.3-56.2 0-77.7l-.4-.4C191.1 5.6 177.3.4 163.6.4c-13.9 0-27.9 5.4-38.5 16l-15.9 16.1-16-16.2-.4-.4C82.3 5.2 68.5 0 54.7 0z"})),o.a.createElement("g",{className:"thanking"},o.a.createElement("path",{className:"thanking__border",fill:"url(#border-gradient)",d:"M54.6 14c10.7 0 20.7 4.1 28.3 11.6l.3.3 16 16.2c2.6 2.7 6.2 4.2 10 4.2 3.7 0 7.3-1.5 10-4.2L135 26c7.6-7.7 17.7-11.9 28.5-11.9 10.6 0 20.6 4.1 28.2 11.6l.3.3c7.7 7.8 11.9 18.1 11.9 29 0 10.9-4.2 21.2-11.9 29l-77.4 78.2c-1.5 1.5-3.5 2.4-5.7 2.4-2.1 0-4.1-.8-5.6-2.3l-.1-.1-77.2-78C18.3 76.4 14 66 14 55.1c0-11 4.3-21.3 12-29.1 7.6-7.8 17.8-12 28.6-12m0-14c-14 0-28 5.4-38.6 16.1C-5.3 37.7-5.3 72.5 16 94l77.2 78.1.2.2c4.3 4.2 9.9 6.4 15.5 6.4 5.7 0 11.3-2.2 15.6-6.5L201.9 94c21.3-21.5 21.3-56.2 0-77.7l-.4-.4C191 5.4 177.2.2 163.5.2c-13.9 0-27.9 5.4-38.5 16l-15.9 16.1-16-16.2-.4-.4C82.2 5.2 68.4 0 54.6 0z"})),o.a.createElement("g",{className:"thanked"},o.a.createElement("path",{className:"thanked__back",fill:"url(#fill-gradient)",d:"M93.3 172.1L16 94C-5.4 72.4-5.4 37.6 16 16c21.1-21.2 55.4-21.4 76.7-.3l.4.4 16 16.2L125 16.2c21-21.2 55.3-21.4 76.5-.4l.4.4c21.3 21.5 21.3 56.2 0 77.7l-77.4 78.2c-8.5 8.6-22.5 8.7-31.1.2 0-.1-.1-.1-.1-.2z"}),o.a.createElement("path",{className:"thanked__highlight",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"12",d:"M32.8 27.1c-10.5 7-21 24.5-10.5 42"}))))}},312:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(3),o=a(10);async function r(e,t,a,r,i,l){const{t:s}=Object(n.a)(),c=e?"STRIPE_INTENT":"CREDIT_CARD";let u;if(!e){const e=await t.createToken();if(e.error)throw e.error;u=e.token.id}let d=await o.a.users.paymentDetails.create({id:"me",data:{data:{token:u}},query:{[o.a.avoidCampaignQuery]:!0,campaign:a.campaignUuid,subscription:a.uuid}}),m=d.body().data();if(m.confirmationRequired){const e=m.data.providerUser.setupSecret,t={payment_method:i},n=await l(e,t),{error:r}=n,c=n.setupIntent;if(r)throw r;const u=["succeeded","requires_capture","processing"];if(!c||!u.includes(c.status))throw console.log("Result is not successful but no error given",c),new Error(s("Unknown processing error. Transaction may have completed. Please contact support"));d=await o.a.users.paymentDetails.confirm({id:a.userUuid,query:{subscription:a.uuid,[o.a.avoidCampaignQuery]:!0}}),m=d.body().data()}const p={card:m.data.id,method:c};a.methodType&&a.methodType.startsWith("DD")||(p.status="OK");return await o.a.subscriptions.update({id:a.uuid,data:{data:p},query:{[o.a.avoidCampaignQuery]:!0}})}},319:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(5);var n=a(7),o=a.n(n),r=a(78),i=a(8),l=a(145);function s(e,t,a){const{integrations:n,global:s,actions:c}=useRaisely(!0),{friendlyChallenge:u,clearDonationIntent:d}=e.payments,m=Object(l.a)(),{payments:p,values:f,updateValues:g,updateStep:b,error:h,setError:y,optInAmount:v,targetProfileUuid:_,raiselyOptIn:E,disableAnalytics:k,isV3:w}=e;function O(a,l,m,p=!1){var h,y,v,E,k,O,S,T,N,C,x,j,P,A,D,R,F,I,M;w||d();const L=(null===(h=s.campaign.config)||void 0===h||null===(y=h.donation)||void 0===y?void 0:y.intelligentAmounts)||!1;g(e=>{e.set("result",a).set("tempToken",l).set("idempotencyKey",Object(r.b)()),w&&!p||b(m,e)}),n.broadcast(a.interval?"subscription.success":"donation.success",{values:e.values,response:a,profile:null===(v=s.current)||void 0===v?void 0:v.profile,availableFrequencies:e.availableFrequencies,availableAmounts:e.availableAmounts,campaignCurrency:s.campaign.currency,isDefaultDonationAmountEnabled:e.isDefaultDonationAmountEnabled,hasCustomFees:!Boolean(s.campaign.showRaiselyCheckbox),isRaiselyFeeOptIn:!Boolean(s.campaign.showRaiselyCheckbox)&&Boolean(null===(E=s.campaign.config)||void 0===E||null===(k=E.fees)||void 0===k?void 0:k.custom)&&Boolean(null===(O=s.campaign.config)||void 0===O||null===(S=O.fees)||void 0===S?void 0:S.optInOnly),formSteps:e.steps,targetProfileUuid:e.targetProfileUuid,isExpress:e.isExpressForm,isGiftAidEnabled:e.values.giftAidEnabled,donationCustomFields:null===(T=s.campaign.config)||void 0===T||null===(N=T.customFields)||void 0===N?void 0:N.donation,isDonationFormV3:w,isUserInModal:Boolean(e.values.inModal),isModalPreviewEnabled:Boolean(e.values.inModal&&(null===(C=s.campaign.config)||void 0===C||null===(x=C.donation)||void 0===x||null===(j=x.campaignPreview)||void 0===j?void 0:j.isEnabled)),isRegularGivingNudgeEnabled:Boolean(null===(P=s.campaign.config)||void 0===P||null===(A=P.donation)||void 0===A||null===(D=A.upsell)||void 0===D?void 0:D.isNudgeEnabled),isRegularGivingUpsellEnabled:Boolean(null===(R=s.campaign.config)||void 0===R||null===(F=R.donation)||void 0===F||null===(I=F.upsell)||void 0===I?void 0:I.isStepEnabled),intelligentAmounts:L?{availableVariantsAud:f.availableVariantsAud[f.interval],selectedVariantAud:null===(M=e.availableAmounts[0])||void 0===M?void 0:M.selectedVariantAud}:null});const B=function(e,t){var a,n,o,r,i,l,s,c,u,d,m,p,f,g,b;switch(t){case null===(a=e.user)||void 0===a||null===(n=a.profile)||void 0===n?void 0:n.uuid:return"user.profile";case null===(o=e.current)||void 0===o||null===(r=o.profile)||void 0===r?void 0:r.uuid:return"current.profile";case null===(i=e.campaign.profile)||void 0===i?void 0:i.uuid:return"campaign";case null===(l=e.user)||void 0===l||null===(s=l.teamProfile)||void 0===s?void 0:s.uuid:return"user.teamProfile";case null===(c=e.user)||void 0===c||null===(u=c.profile)||void 0===u||null===(d=u.teamProfile)||void 0===d?void 0:d.uuid:return"user.profile.teamProfile";case null===(m=e.user)||void 0===m||null===(p=m.organisationProfile)||void 0===p?void 0:p.uuid:return"user.organisationProfile";case null===(f=e.user)||void 0===f||null===(g=f.profile)||void 0===g||null===(b=g.organisationProfile)||void 0===b?void 0:b.uuid:return"user.profile.organisationProfile";default:return null}}(s,_),U="campaign"===B?"campaign.profile":B,H=o()(s,U);B&&c.updateProfileTotal(B,Object(i.j)(a.amount,a.currency,H.currency)),c.triggerPageStreamRefetch(),u.reset(),t&&t(a)}function S(e){const t={};if("string"==typeof e)t.message=e;else{var o;if(null===(o=e)||void 0===o||!o.message){const t=new Error("Error without message or stack passed to onDonationFailure()");e?(e.message=t.message,e.stack=t.stack):e=t}Object.assign(t,e),t.stack=e.stack,t.message=e.message}n.broadcast("ONCE"!==f.interval?"subscription.error":"donation.error",t),u.reset(),a&&a(e)}return[async function(t,a,o){let r;try{if(0===e.values.step&&n.broadcast("donation.amountSelected",{formUuid:f.formUuid,amount:e.values.amount,currency:e.values.currency}),({methodType:r}=t),h&&y(null),"paymentmethod"===r){const e=await p.processStripePayment(t,{paymentRequest:a,optInAmount:v,raiselyOptIn:E,disableAnalytics:k});if(!e)return;const{donationResult:n={},error:r,tempToken:i}=e;if(r)throw r;O(n,i,o)}else if("paypal"===r)switch(a.phase){case"error":{const e=await p.handlePaypalError(a,!0);throw new Error(e)}case"cancel":return p.cancelPaypalPayment("user_cancelled");case"create":{const{createPaypalId:o,paymentUuid:r}=await p.setUpPaypalPayment(t,a,e.payments.campaignPaypalProvider);return p.setPaypalPaymentUuid(r),n.broadcast("donation.walletOpened",{formUuid:f.formUuid,amount:e.values.amount,currency:e.values.currency,methodType:"paypal"}),o}case"process":{var i;n.broadcast("donation.walletOpened",{formUuid:f.formUuid,amount:e.values.amount,currency:e.values.currency,methodType:"paypal"});const{result:r,token:l}=await p.processPaypalPayment(t,a);O(r,l,o,Boolean(!(null!==(i=e.payments)&&void 0!==i&&i.campaignStripeProvider)))}}else"manual"===r&&g(t=>{!e.experimentFlags.modalExperiment&&!e.enableModal||e.values.registrationProfile||f.inModal||!w?b(f.step+1,t):m(f,1)})}catch(t){if(console.error("afterPaymentSelect Error",t),t.isUserCancel||(n.broadcast("donation.paymentFailed",{formUuid:f.formUuid,amount:e.values.amount,currency:e.values.currency,error:t.message,runtime:"paypal"===r?"paypal":"stripe"}),y(t.message),S(t),e.setIsPaymentGatewayProcessing(!1),e.showStripePaymentElements&&(e.payments.clearDonationIntent(),e.payments.createOrUpdateDonationIntent({forceCreate:!0}))),"paypal"===r)throw t}},async function(t,a,o){try{null==t||t.preventDefault(),e.setIsPaymentGatewayProcessing(!0),e.payments.donationIntentUpdated&&await a.fetchUpdates();const n=await p.processStripePayment(f,{elements:a,optInAmount:v,raiselyOptIn:E,disableAnalytics:k});if(!n)return;const{donationResult:r,error:i}=n;if(i)return y(i.message),S(i),e.setIsPaymentGatewayProcessing(!1),void(e.showStripePaymentElements&&(e.payments.clearDonationIntent(),e.payments.createOrUpdateDonationIntent({forceCreate:!0})));O(r,null,o)}catch(t){t.isUserCancel||(n.broadcast("donation.paymentFailed",{formUuid:f.formUuid,amount:e.values.amount,currency:e.values.currency}),t.errorData&&t.errorData.message?y(t.errorData.message):y(t),S(t),e.showStripePaymentElements&&(e.payments.clearDonationIntent(),e.payments.createOrUpdateDonationIntent({forceCreate:!0})))}e.setIsPaymentGatewayProcessing(!1)}]}},320:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="dfv3-modal"},321:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),o=a.n(n),r=a(1),i=a.n(r);function l(e){return o.a.createElement("div",{className:"horizontal-rule",style:e.style},o.a.createElement("div",{className:"horizontal-rule__line"}),o.a.createElement("div",null,o.a.createElement("p",{className:"horizontal-rule__text"},e.text)),o.a.createElement("div",{className:"horizontal-rule__line"}))}l.propTypes={text:i.a.string,width:i.a.string,style:i.a.object}},322:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(5);var n=a(0),o=a.n(n),r=a(17),i=a(144),l=a(81);function s(){var e,t;const a=useRaisely(),{payments:n,values:s}=Object(r.b)(),c=Object(i.a)(l.a.TBD_109_PAYPAL_REGULAR_GIVING).enabled;let u=!1,d=!1;var m,p;"ONCE"!==(null==s?void 0:s.interval)&&null!==(e=a.campaign.config)&&void 0!==e&&null!==(t=e.payments)&&void 0!==t&&t.directDebitEnabled&&(d="UK"===(null==n||null===(m=n.campaignStripeProvider)||void 0===m?void 0:m.country),u="AU"===(null==n||null===(p=n.campaignStripeProvider)||void 0===p?void 0:p.country));let f=[];return null!=n&&n.campaignPaypalProvider&&("ONCE"===(null==s?void 0:s.interval)||c)&&f.push(o.a.createElement("img",{key:"PaymentLogos-paypal",src:"https://admin.raisely.com/public/donations/donationv3/paypal.png",alt:"Paypal logo"})),a.isEmbed||f.push(o.a.createElement("img",{key:"PaymentLogos-applepay",src:"https://admin.raisely.com/public/donations/donationv3/applepay.png",alt:"Apple Pay logo"})),f.push(o.a.createElement("img",{key:"PaymentLogos-gpay",src:"https://admin.raisely.com/public/donations/donationv3/gpay.png",alt:"Google Pay logo"})),d&&f.push(o.a.createElement("img",{key:"PaymentLogos-directdebituk",className:"donation-form__payment-logos logo-dd",src:"https://admin.raisely.com/public/donations/donationv3/directdebituk.png",alt:"Direct Debit logo"})),u&&f.push(o.a.createElement("img",{key:"PaymentLogos-directdebit",className:"donation-form__payment-logos logo-dd",src:"https://admin.raisely.com/public/donations/donationv3/directdebit.png",alt:"Direct Debit logo"})),f.push(o.a.createElement("img",{key:"PaymentLogos-visa",src:"https://admin.raisely.com/public/donations/donationv3/visa.png",alt:"Visa logo"}),o.a.createElement("img",{key:"PaymentLogos-mastercard",src:"https://admin.raisely.com/public/donations/donationv3/mastercard.png",alt:"Mastercard logo"}),o.a.createElement("img",{key:"PaymentLogos-americanexpress",src:"https://admin.raisely.com/public/donations/donationv3/americanexpress.png",alt:"American Express logo"})),f.push(o.a.createElement("div",{className:"donation-form__payment-logos__variable__wrapper"},o.a.createElement("img",{key:"PaymentLogos-dinersclub",className:"donation-form__payment-logos__variable logo-0",src:"https://admin.raisely.com/public/donations/donationv3/dinersclub.png",alt:"Diners Club logo"}),o.a.createElement("img",{key:"PaymentLogos-discover",className:"donation-form__payment-logos__variable logo-1",src:"https://admin.raisely.com/public/donations/donationv3/discover.png",alt:"Discover logo"}),o.a.createElement("img",{key:"PaymentLogos-jcb",className:"donation-form__payment-logos__variable logo-2",src:"https://admin.raisely.com/public/donations/donationv3/jcb.png",alt:"JCB logo"}),o.a.createElement("img",{key:"PaymentLogos-unionpay",className:"donation-form__payment-logos__variable logo-3",src:"https://admin.raisely.com/public/donations/donationv3/unionpay.png",alt:"Union Pay logo"}))),o.a.createElement("div",{className:"donation-form__payment-logos","aria-label":"Available payment methods","aria-describedby":"payment-provider-logos",role:"group"},o.a.createElement("span",{id:"payment-provider-logos",className:"visually-hidden"},"This section shows logos for the available payment methods. These logos are for visual reference and are not clickable."),f)}},327:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(5);var n=a(17),o=a(3),r=a(0),i=a.n(r),l=a(8),s=a(11);function c({loading:e,error:t,updateValues:a,...c}){const{calculatedTotal:u,values:d,setIsPaymentGatewayProcessing:m}=Object(n.b)(),{tD:p,i18n:f}=Object(o.d)();Object(r.useEffect)(()=>{t&&(e?a({},null,["error"]):m(!1))},[e]);const g=p(c.paymentButton,{amount:Object(l.f)(u,d.currency),interpolation:{prefix:"{",suffix:"}"}});return i.a.createElement("div",{className:"donation-form__stripe-buttons"},i.a.createElement(s.a,{disabled:c.disabled,type:"submit",className:"donation-form__submit-button"},c.isProcessing?"Loading":g))}},329:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(5);var n=a(0),o=a.n(n),r=a(18),i=a(64),l=a(217),s=a(38),c=a(104),u=a(320);function d(){var e,t,a;const d=useRaisely(),[m,p]=Object(n.useState)(!1),{current:f,send:g}=Object(i.b)(u.a);if(Object(n.useEffect)(()=>{"open"!==(null==f?void 0:f.state)||m||p(!0)},[null==f?void 0:f.state,m]),!m)return null;const b=Object(l.a)({global:d,...f.props},{profile:null===(e=f.props)||void 0===e?void 0:e.profile}),h=null===(t=d.campaign.config.donation)||void 0===t||null===(a=t.campaignPreview)||void 0===a?void 0:a.isEnabled,y=h?{"--cOffset":c.b+"px"}:null;return o.a.createElement(s.a,{automatic:!0,onClose:function(){g({state:"closed"}),p(!1)},modalContent:()=>o.a.createElement("div",{className:Object(r.a)("donation-form--modal v3",h&&"v3--with-campaign-preview"),style:y},b),theme:"full",button:!1,classNames:Object(r.a)("has-df-v3",h&&"has-df-v3--campaign-preview"),isModalPreview:f.props.isModalPreview,hasDFv3:!0})}},33:function(e,t,a){"use strict";a.d(t,"b",(function(){return o.a})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return u}));var n={};a.r(n),a.d(n,"Full",(function(){return h})),a.d(n,"Basic",(function(){return p})),a.d(n,"DonationForm",(function(){return f.a})),a.d(n,"Pagination",(function(){return g.a})),a.d(n,"SlimContent",(function(){return b.a}));var o=a(99),r=a(0),i=a.n(r),l=a(70);const s=Object(l.b)("div")("\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\tz-index: 1000;\n"),c=Object(l.b)("div")(`\n\tbackground-color: #6138D8;\n\twidth: ${({percent:e})=>e+"%"||0};\n\ttransition: width .3s;\n\theight: 3px;\n`);function u(e){return i.a.createElement(s,null,i.a.createElement(c,{percent:e.percent}))}var d=a(157),m=a.n(d);var p=({speed:e,height:t})=>i.a.createElement(m.a,{height:t,speed:e},i.a.createElement("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"}),i.a.createElement("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"}),i.a.createElement("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"350",height:"6.4"}),i.a.createElement("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"380",height:"6.4"}),i.a.createElement("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"201",height:"6.4"}),i.a.createElement("circle",{cx:"30",cy:"30",r:"30"})),f=a(288),g=a(204),b=a(125);const h=p},330:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(27);var n=a(7),o=a.n(n),r=a(693);const i="https://raisely-images.imgix.net/peer-to-peer-modern/uploads/default-image-png-ab5db9.png?"+a.n(r).a.stringify({txtalign:"middle,center",txtfit:"max",txtfont:"monospace,bold",txtcolor:"969696",txtsize:50}),l=(e,t={})=>`${i}&txt=${encodeURIComponent(e)}&w=${t.width||512}`,s=/{{(campaign\.config\.theme\.backgroundUrl)}}/g;function c(e,t,a,n={}){try{let r=JSON.stringify(e).replace(s,(e,t)=>o()(a,t,"")),i=t.length;for(;i--;)r=r.replace(t[i].regexp,l("#"+t[i].fieldPath,n));return JSON.parse(r)}catch(t){return console.error("failed selective value injection",t),e}}},331:function(e,t,a){"use strict";a.d(t,"b",(function(){return De})),a.d(t,"a",(function(){return Re}));var n=a(4),o=a.n(n),r=(a(386),a(0)),i=a.n(r);function l(e,t){return"function"==typeof t?e&&-1!==e.indexOf("\n")?e.split("\n").map((e,a,n)=>i.a.createElement(r.Fragment,null,t(e),a!==n.length-1&&i.a.createElement("br",null))):t(e):e&&-1!==e.indexOf("\n")?e.split("\n").map((e,t,a)=>i.a.createElement(r.Fragment,null,e,t!==a.length-1&&i.a.createElement("br",null))):e}var s=a(299),c=a.n(s);const u=/^[a-zA-Z]+:/;function d(e){if(e.isEditing)return i.a.createElement("a",o()({target:"_blank",rel:"noopener noreferrer",href:e.node.data.get("href")},e.attributes,{className:e.className}),e.children);const t=""+e.node.data.get("href");return-1!==(a=t).indexOf("://")||0===a.indexOf("//")||u.test(a)?i.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank"},e.children):i.a.createElement(c.a,{to:t},e.children);var a}var m=a(218),p=a(2),f=a.n(p),g=(a(27),a(5),a(694)),b=a.n(g),h=a(146),y=a(73),v=a(23),_=a.n(v),E=a(132);const k=e=>{const{width:t,height:a,src:n,visibility:r}=e.node.data.get("editable"),l=n.value,s=useRaisely();if(!Object(E.a)(null==r?void 0:r.value,s))return null;if(!l||""===l||!b()(l)){if(e.editor){const{EmptyBlockContent:t}=e.editor.props.editorComponents||{};if(t)return i.a.createElement(t,o()({title:"add a Video",focusTo:"src",icon:"play_circle_filled"},e))}return i.a.createElement("div",{className:"raisely-default"},i.a.createElement("i",{className:"material-icons"},"movie"))}let c=l;return c=Object(y.b)(c,y.d,["https://www.youtube.com/embed/",1,"?rel=0&showinfo=0&autoplay=0"]),c=Object(y.b)(c,y.c,["https://player.vimeo.com/video/",3,"?title=0&byline=0&portrait=0"]),c=c.replace(y.a,e=>"https://www.facebook.com/plugins/video.php?"+_.a.stringify({href:e,show_text:0,width:640,height:360})),i.a.createElement("div",{className:"video-wrapper"},i.a.createElement("iframe",{title:e.node.key+"-video",className:"lazy",width:"100%",height:"100%","data-src":c,src:e.isEditing?c:null,frameBorder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowFullScreen:!0}))};class w extends h.a{constructor(...e){super(...e),f()(this,"disableCover",!0)}render(){return this.renderBlock(k,"Edit Video")}}var O=w;function S(e,t,a,n){switch(e.type){case"custom-component":{const t=n.CustomComponent||m.a;return i.a.createElement(t,o()({style:a,className:n.customClass,node:e},n))}case"link":return i.a.createElement(d,o()({node:e},n),t);case"video":return i.a.createElement(O,o()({style:a,className:n.customClass,node:e},n))}}var T=a(47),N=(a(63),a(271),a(173),a(42)),C=a(340),x=a(61),j=a(126),P=a.n(j),A=a(60),D=a.n(A);const R=e=>"number"==typeof e?e+"px":"",F=(e,t)=>{const a=t.split(" ");return e.padding=t,a.length>1?(e["--pad-t"]=a[0],e["--pad-r"]=a[1],e["--pad-b"]=a[2],e["--pad-l"]=a[3]):(e["--pad"]=a,e["--pad-t"]=a,e["--pad-r"]=a,e["--pad-b"]=a,e["--pad-l"]=a),e};function I({hideDesktop:e,hideTablet:t,hideMobile:a}){return e||t||a?[`respond--${e?"hide":"show"}-desktop`,`respond--${t?"hide":"show"}-tablet`,`respond--${a?"hide":"show"}-mobile`].join(" "):""}const M=[["Desktop"],["Tablet","@media(max-width: 1024px)"],["Mobile","@media(max-width: 736px)"]];function L(e,t,a){const n=[];return Object.entries(e).map(([e,o])=>{if(o){const i=`${a}--${D()(e)}`;"sticky"===e?n.push(a+"--is-sticky"):"padding"===e?o.value&&Object.values(o.value).find(e=>e>0)&&n.push(`${a}--has-${e}`):(r=o).startsWith("primary")||r.startsWith("secondary")?(n.push(`${i}-${D()(o)}`),n.push(`${i}-${Object(C.a)(Object(N.a)(o,t))?"is-dark":"is-light"}`)):(n.push(`${i}-${Object(C.a)(o)?"is-dark":"is-light"}`),Object(C.b)(o)&&n.push(i+"-is-white"))}var r}),void 0!==n?n.join(" ").trim():""}function B(e,t){const{background:a,borderWidth:n,padding:o,spacing:r}=e,i={};if(a){const{textColor:e,color:n,borderColor:o}=a,r={textColor:e&&Object(N.a)(e,t),bgColor:n&&Object(N.a)(n,t),borderColor:o&&Object(N.a)(o,t)};i.color=r.textColor,i["--text-color"]=r.textColor,i.backgroundColor=r.bgColor,i["--bg-color"]=r.bgColor,i.borderColor=r.borderColor,i["--border-color"]=r.borderColor}n&&(i.borderStyle="solid");const l=P()(o),s=P()(n);return M.forEach(([t,a])=>{const c="Desktop"!==t?t:"";if(a&&(i[a]={}),l){const e="right"+(c||""),t="bottom"+(c||""),n="left"+(c||""),r=[o["top"+(c||"")]||null,o[e]||null,o[t]||null,o[n]||null];if(r.some(e=>null!==e)){let e=r.map(e=>e||0).join("px ")+"px";F(a?i[a]:i,e)}}else if("number"==typeof e["padding"+c]){const t=e["padding"+c],n=R(t);F(a?i[a]:i,n)}if(s){const e="top"+(c||""),t="right"+(c||""),o="bottom"+(c||""),r="left"+(c||"");if(n[e]||n[t]||n[o]||n[r]){const l=[n[e]||0,n[t]||0,n[o]||0,n[r]||0].join("px ")+"px";a?(i[a]["--border-width"]=l,i[a].borderWidth=l):(i["--border-width"]=l,i.borderWidth=l)}}if(!r)return;const u=r["top"+c],d=r["bottom"+c];if("number"==typeof u){const e=R(u);a?i[a].marginTop=e:i.marginTop=e}if("number"==typeof d){const e=R(d);a?i[a].marginBottom=e:i.marginBottom=e}}),Object.keys(i).length?Object(T.css)(i,""):""}function U(e,t){if(!e)return null;if(e&&-1!==e.indexOf("?")){if(e.indexOf("w=")&&"number"==typeof t)try{const a=new URL(e);return a.searchParams.delete("w"),Object(x.a)(a.toString(),{maxWidth:t})}catch(a){return Object(x.a)(e,{maxWidth:t})}return Object(x.a)(e,{maxWidth:t})}if(-1!==e.indexOf(".gif"))return e;const a=e.replace("https://s3-ap-southeast-2.amazonaws.com/raisely-images/","https://raisely-images.imgix.net/");return Object(x.a)(a,{maxWidth:t})}function H(e,t,a=!1){if(!e||!e.data)return"";const n=e.data.get("editable")||{},{customClass:o}=n,r=n.topMargin&&n.topMargin.value,i=n.bottomMargin&&n.bottomMargin.value,l=function(e,t="margin"){if(0===Object.keys(e).length)return"";const a=e.top||e.bottom?`${t}-top: ${e.top}; ${t}-bottom: ${e.bottom};`:"",n=e.topTablet||e.bottomTablet?`\n\t\t@media(max-width: 1024px) {\n\t\t\t${t}-top: ${e.topTablet};\n\t\t\t${t}-bottom: ${e.bottomTablet};\n\t\t}\n\t`:"",o=!e.topMobile&&e.rawDesktopTop<0?"0px":e.topMobile,r=!e.bottomMobile&&e.rawDesktopBottom<0?"0px":e.bottomMobile,i=o||r?`\n\t\t@media(max-width: 736px) {\n\t\t\t${t}-top: ${o};\n\t\t\t${t}-bottom: ${r};\n\t\t}\n\t`:"";return Object(T.css)(`${a} ${n} ${i}\n\t`,"")}({top:R(r),bottom:R(i),topTablet:R(n.topMarginTablet&&n.topMarginTablet.value),bottomTablet:R(n.bottomMarginTablet&&n.bottomMarginTablet.value),topMobile:R(n.topMarginMobile&&n.topMarginMobile.value),bottomMobile:R(n.bottomMarginMobile&&n.bottomMarginMobile.value),rawDesktopTop:r,rawDesktopBottom:i}),s=I({hideDesktop:n.hideOnDesktop&&n.hideOnDesktop.value,hideTablet:n.hideOnTablet&&n.hideOnTablet.value,hideMobile:n.hideOnMobile&&n.hideOnMobile.value}),c=B({padding:n.padding&&n.padding.value,borderWidth:n.borderWidth&&n.borderWidth.value,background:{color:n.bgColor&&n.bgColor.value,textColor:n.color&&n.color.value,borderColor:n.borderColor&&n.borderColor.value}},t),u=`${l} ${s} ${L({background:n.bgColor&&n.bgColor.value,textColor:n.color&&n.color.value,borderColor:n.borderColor&&n.borderColor.value,padding:n.padding},t,"block")} ${c}`;return!a&&o&&o.value?`${o.value} ${u}`:u.trim()||null}function V(e){const{children:t}=e;switch(e.mark?e.mark.type:e.node.type){case"bold":return i.a.createElement("strong",null,t);case"code":return i.a.createElement("code",null,t);case"italic":return i.a.createElement("em",null,t);case"underlined":return i.a.createElement("u",null,t);default:return""}}var $=a(232),q=a(330);function G(e,t){return`${"number"==typeof e&&`\n\t\t\t--row-vertical-spacing: ${R(e)};\n\n\t\t\t.row__container {\n\t\t\t\tpadding-top: var(--row-vertical-spacing);\n\t\t\t\tpadding-bottom: var(--row-vertical-spacing);\n\t\t\t}\n\t\t`||""} ${"number"==typeof t&&`\n\t\t\t--row-gutter: ${R(2*t)};\n\n\t\t\t.row__container,\n\t\t\t.col {\n\t\t\t\tpadding-left: calc(var(--row-gutter) / 2);\n\t\t\t\tpadding-right: calc(var(--row-gutter) / 2);\n\t\t\t}\n\t\t`||""}`}function z(e,t,a,n,o="content",r=""){const i=`row--align-${n.alignment||"none"} row__layout--${o}`,l=function(e={}){if(0===Object.keys(e).length)return"";const t=G(e.vertical,e.gutter),a=("number"==typeof e.verticalTablet||"number"==typeof e.gutterTablet)&&`\n\t\t@media(max-width: 1024px) {\n\t\t\t${G(e.verticalTablet,e.gutterTablet)}\n\t\t}\n\t`,n="number"==typeof e.gutterMobile?e.gutterMobile:12.5,o=`\n\t\t@media(max-width: 736px) {\n\t\t\t${G(e.verticalMobile,n)}\n\t\t}\n\t`;return Object(T.css)(`${t||""} ${a||""} ${o||""}`,"")}(n.spacing),s=function(e={},t,a){if("video"===e.type)return e.video?"row--has-background row--has-background-video":"";if(0===Object.keys(e).length||!e.url&&!e.responsive)return"";const n=a?Object(q.a)(e,a,{campaign:t},{width:500}):e,o="number"==typeof e.size,r=null===e.size||"tile"===e.size,i=n.responsive,l=i&&i.desktop&&i.desktop.url||n.url,s=i&&i.desktop&&i.desktop.position||n.position,c=e=>{let t=e||"";return"object"==typeof e&&(t=[],Object.values(e).map(e=>t.push(e+"%"))),t.toString().replace(","," ")},u=U(l,2e3),d=`\n\t\t--bg-image: url(${u});\n\n\t\t.row__bg {\n\t\t\tbackground-image: url(${u});\n\t\t\tbackground-repeat: ${o||r?"repeat":"no-repeat"};\n\t\t\tbackground-position: ${s?c(s):"center"};\n\t\t\tbackground-size: ${function(e,t,a){return t?e+"px":a?"auto":e}(e.size,o,r)};\n\t\t\t${e.fixed&&"\n\t\t\t\t@supports not (-webkit-touch-callout: none) { // don't add to ios\n\t\t\t\t\t\tbackground-attachment: fixed;\n\t\t\t\t}\n\t\t\t"}\n\t\t}\n\t`;let m="",p="";if(i){const e=i.tablet&&U(i.tablet.url||l,1.5*parseInt("1024px",10)),t=i.mobile&&U(i.mobile.url||l,1.5*parseInt("736px",10));m=e?`\n\t\t\t\t@media(max-width: 1024px) {\n\t\t\t\t\t--bg-image: url(${e});\n\t\t\t\t\t.row__bg {\n\t\t\t\t\t\tbackground-image: url(\n\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbackground-position: ${i.tablet.position?c(i.tablet.position):"center"};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`:"",p=t?`\n\t\t\t\t@media(max-width: 736px) {\n\t\t\t\t\t--bg-image: url(${t});\n\n\t\t\t\t\t.row__bg {\n\t\t\t\t\t\tbackground-image: url(\n\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbackground-position: ${i.mobile.position?c(i.mobile.position):"center"};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`:""}return`${l?"row--has-background row--has-background-image ":""}${Object(T.css)(`${d} ${m} ${p}\n\t`,"")}`}(n.background,e,t);return`row row--${a} ${i} ${L({background:n.background&&n.background.color,textColor:n.background&&n.background.textColor},e,"row")} ${B(n,e)} ${s} ${l} ${Object(T.css)(`\n\t\t.row__bg {\n\t\t\t${Boolean(n.background)&&Boolean(n.background.alpha)&&Boolean(!n.background.fadeDirection||"none"===n.background.fadeDirection)?`\n\t\t\t\t\t--bg-fade: ${(100-(n.background&&n.background.alpha)||0)/100};\n\t\t\t\t\topacity: var(--bg-fade);\n\t\t\t`:""}\n\n\t\t\t${n.background&&n.background.blur>0?`\n\t\t\t\tfilter: blur(${n.background.blur}px);\n\t\t\t\tbackground-size: 105%;\n\t\t\t\toverflow: hidden;\n\t\t\t`:""}\n\n\t\t\t${n.background&&Boolean(n.background.alpha)&&Boolean(n.background.fadeDirection)&&"none"!==n.background.fadeDirection?`\n\t\t\t\tcontent: '';\n\n\t\t\t\t&:after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\ttransition: inherit;\n\n\t\t\t\t\tbackground: ${function(e,t=0,a){const n=[19,34,47,56.5,65,73,80.2,86.1,91,95.2,98.2],o=[.738,.541,.382,.278,.194,.126,.075,.042,.021,.008,.002],r=t<30?.4*t:.475*t,i=.5*t;let l=[Object($.a)(1,e)+" 0%"];return l.push([`${Object($.a)(1,e)} ${r}%`]),t>5&&t<95?n.forEach((a,n)=>{const s=Object($.a)(o[n],e),c=(t-r)/100*a+i;l.push(`${s} ${c.toFixed(3)}%`)}):l.push(`${Object($.a)(0,e)} ${t}%`),l.push(Object($.a)(0,e)+" 100%"),`linear-gradient(${a}, ${l})`}(Object(N.a)(n.background.color||"#fff",e),100-n.background.fadeDistance||50,"custom"!==n.background.fadeDirection?`\n\t\t\t\t\t\t\tto ${n.background.fadeDirection}\n\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t${n.background.fadeAngle||0}deg\n\t\t\t\t\t\t`)};\n\t\t\t\t\topacity: ${(n.background&&n.background.alpha||0)/100};\n\t\t\t\t}\n\n\t\t\t\t@media (max-width: 736px) {\n\t\t\t\t\topacity: ${(100-(n.background&&n.background.alpha)||0)/100};\n\n\t\t\t\t\t&:after {\n\t\t\t\t\t\tcontent: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`:""}\n\t\t}\n\t`,"")} ${Object(T.css)(`\n\t\t.row__container {\n\t\t\t${n.verticalHeight&&n.verticalHeight>0?`\n\t\t\tmin-height: ${n.verticalHeight}vh;\n\t\t`:""}\n\t\t}\n\t`,"")} ${I({hideDesktop:n.hideOnDesktop,hideTablet:n.hideOnTablet,hideMobile:n.hideOnMobile})} ${r||""}`.trim().replace(/\s+/g," ")}var Y=a(214);const W=(e=!1,t)=>`row__spacing dotted row__spacing row__spacing--${t} ${e?"row__spacing--visible":""}`.trim(),Z=e=>i.a.createElement("div",{className:W(e.visible,e.side)},i.a.createElement("span",null,e.children));const K=({data:e,autoplay:t=!1,editor:a=!1})=>e&&"video"===e.type&&e.video?Object(Y.a)(e.video,t,a):null;function J(e){const{children:t,position:a,variantClass:n="",data:o,RenderSettings:r,customRole:l,showVerticalSpacing:s,editor:c}=e,u=o||{},d=function(e=null){switch(e){case"header":return"header";case"footer":return"footer";default:return"section"}}(u.role||l);let m=d;(u.isHeaderRow||u.isFooterRow)&&(m=u.isHeaderRow?"header":"footer");const p={};if(u.background&&u.background.textColor&&(p.color=Object(N.a)(u.background.textColor,e.campaign)),u.background&&u.background.color&&(p.backgroundColor=Object(N.a)(u.background.color,e.campaign)),e.preview)return i.a.createElement(d,{className:z(e.campaign,e.dynamicImageFields,a,u,m,u.customClass),id:"row--"+a,style:p},i.a.createElement("div",{className:"row__bg"},i.a.createElement(K,{data:u.background,autoplay:!c,editor:c})),i.a.createElement("div",{className:"row__container"},t));const f=`${u.customClass||""} ${n?"row--"+n:""}`;return i.a.createElement(d,{className:z(e.campaign,e.dynamicImageFields,a,u,m,f),id:"row--"+a,style:p},i.a.createElement("div",{className:"row__bg"},i.a.createElement(K,{data:u.background,autoplay:!c,editor:c})),i.a.createElement(Z,{visible:s,side:"top"}),i.a.createElement(Z,{visible:s,side:"bottom"}),i.a.createElement("div",{className:"row__container"},t),r)}var Q=a(51),X=a.n(Q);function ee(e,t){return B(e,t)}function te(e,t,a){const{columns:n,offset:o}=e.data.document.data,r=`col col--${n}${o?" col--offset-"+o:""}`;return e.custom?`${r} ${function(e={},t){return`${I({hideDesktop:e.hideOnDesktop,hideTablet:e.hideOnTablet,hideMobile:e.hideOnMobile})} ${t?L({background:e.background&&e.background.color,textColor:e.background&&e.background.textColor,padding:e.padding,sticky:e.spacing&&e.spacing.sticky},t,"col"):""} ${e.customClass||""}`.trim().replace(/\s+/g," ")}(e.custom,t)} ${a||""}`:`${r} ${a||""}`}const ae=e=>e-.04*e;function ne({custom:e,children:t,campaign:a,setStickyBottom:n}){const o=Object(r.useRef)();return Object(r.useEffect)(()=>{const e=X()(()=>{n(ae(window.innerHeight)<o.current.clientHeight)},200);return o&&o.current&&o.current&&n(ae(window.innerHeight)<o.current.clientHeight),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o,t]),i.a.createElement("div",{className:"col__container "+ee(e,a),ref:o},t)}const oe=e=>e?`calc(calc(${e}px * -1) + 4vh)`:"4vh",re=(e,t)=>e&&e.spacing&&e.spacing.sticky?{top:t?"unset":oe(e.spacing.top),bottom:t&&oe(e.spacing.bottom),alignSelf:t&&"flex-end"}:{};function ie(e){const{cell:t,children:a,extraClass:n,campaign:o}=e,[l,s]=Object(r.useState)(!1),c=t.custom?i.a.createElement(ne,{custom:t.custom,campaign:o,setStickyBottom:s},a):a;return i.a.createElement("div",{className:te(t,o,n),style:re(t.custom,l)},c)}var le=a(37);const se=e=>{var t;const{src:a,alt:n,align:o,href:r,width:l}=e.getValues(),s=useRaisely(),{node:c}=e,u=c.data.get("editable")||{},d=Object(E.a)(null==u||null===(t=u.visibility)||void 0===t?void 0:t.value,s);if(!e.editor&&!d)return null;if(!a||""===a){const{EmptyBlockContent:t}=e.editor?e.editor.props.editorComponents:{};return t?i.a.createElement(t,e):i.a.createElement("div",{className:"raisely-default"},i.a.createElement("i",{className:"material-icons"},"camera_alt"))}return i.a.createElement("div",{className:`image-wrapper image-wrapper--align-${o||"center"} ${r?"image-wrapper--with-link":""}`},i.a.createElement(le.a,{src:a,options:{maxWidth:l?1.5*l:1024},style:{width:l},alt:n||""}),r&&r.includes("http://")&&!r.includes(window.location.host)&&i.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank"},n),r&&(!r.includes("http://")||r.includes(window.location.host))&&i.a.createElement("a",{href:r},n))};class ce extends h.a{constructor(...e){super(...e),f()(this,"disableCover",e=>!e.src)}render(){return this.renderBlock(se,"Edit Image")}}var ue=ce;var de=a(46),me=a.n(de),pe=a(315),fe=a.n(pe);const ge=/([\w.]+@[a-zA-Z_]+?\.[a-zA-Z.]{2,})/gi,be=/(((http|https|ftp):\/\/(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)(?:[#/\w]*))?)(?=[^']*$)(?=[^"]*$)/gim;function he(e,t){e.split(ge).forEach((e,a)=>{a%2!=0?t(i.a.createElement("a",{href:"mailto:"+e},e)):function(e,t){fe()(e.split(be),5).forEach(([e,a])=>{e&&t(e),a&&t(Object(Y.a)(a)||i.a.createElement("a",{href:a},a))})}(e,t)})}function ye(e){if(!e)return"";const t=[];return he(e,e=>t.push(e)),t}var ve=a(3);function _e(e,t){let a=t,n=0;for(;n<e.length;n+=1)a=V({mark:e[n],children:a});return a}function Ee(e){const t=function(e){const t=e.node.nodes.get(0);return t?t.leaves.get(0).marks.toJSON():[]}(e),{tD:a}=Object(ve.d)();if(!e.isEditing){const n=l(e.node.data.get("value"),ye)||i.a.createElement(r.Fragment,null,"");let o;return o=Array.isArray(n)&&"string"==typeof n[0]?a(n[0]):n,_e(t,o)}return _e(t,i.a.createElement("span",o()({},e.attributes,{className:"raisely-dynamic"}),"#"+(e.node.data.get("title")||me()(e.node.data.get("fieldPath")))))}var ke=a(21),we=a.n(ke),Oe=a(342);const Se={animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",lineargradient:"linearGradient",radialgradient:"radialGradient"},Te=e=>{var t;const{html:a}=e.getValues(),{node:n}=e,o=useRaisely(),r=Object(Oe.c)(),l=Boolean(null==r?void 0:r.isRaiselyAdmin),s=n.data.get("editable")||{},c=Object(E.a)(null==s||null===(t=s.visibility)||void 0===t?void 0:t.value,o);if(!e.editor&&!c)return null;if(!a)return i.a.createElement("div",{className:"raisely-default"},i.a.createElement("i",{className:"material-icons"},"code"));try{let t;if(l&&e.isEditing){const e=(null==r?void 0:r.xss)(a);t=we()(e,{transform:Se}),e!==a&&console.log("Sanitised HTML detected")}else t=we()(a,{transform:Se});return i.a.createElement("div",{className:"html-wrapper"},t)}catch(e){return console.error("e",e),i.a.createElement("div",{className:"html-wrapper html-wrapper--error"},"There was an error rendering this block")}};class Ne extends h.a{render(){return this.renderBlock(Te,"Edit HTML")}}var Ce=Ne;function xe(e){const t=e.campaign||useRaisely().campaign,{node:a,attributes:n,style:r,className:l}=e,s=a.data.get("editable")||{},c=s.color?Object(N.a)(s.color.value,t):null,u=Object.assign({},r,{color:c});return i.a.createElement("p",o()({},n,{className:l,style:u}),e.children)}function je(e){var t;const a=e.campaign||useRaisely().campaign,n=useRaisely(),{node:r,style:l,children:s,attributes:c,className:u}=e,d=r.data.get("editable")||{},{value:m}=d.level,p=Object(E.a)(null==d||null===(t=d.visibility)||void 0===t?void 0:t.value,n);if(!e.editor&&!p)return null;d.color&&(l.color=Object(N.a)(d.color.value,a));const f="h"+(m||1);return i.a.createElement(f,o()({},c,{style:l,className:u,id:d.anchor&&d.anchor.value}),i.a.createElement("span",null,s))}const Pe=e=>(e.get||(e.get=t=>e[t],e.toJSON=()=>e),e),Ae=["marks","nodes","leaves"];function De(e,t=!1){t?Pe(e):(Pe(e),Pe(e.data));let a,n=Ae.length;for(;n--;)a=e[Ae[n]],a&&Array.isArray(a)&&(a.forEach(e=>De(e,!0)),Pe(a));return e}function Re({actions:e},t,a={}){const n=m.a.connect(e);function r(e,a,r){const l=De(e),s=V({node:l,children:a});if(s)return s;const c={readOnly:!0,customClass:H(l,t),CustomComponent:n,customNodeRender:S};return"custom-component"===l.type&&(c.locationData=r),function(e,t,a={}){const n=Object.assign({},function(e){if(!e||!e.data)return{};const t=e.data.get("align");return t?{textAlign:t}:{}}(e));if("function"==typeof a.customClassNameModifier&&(a.customClass=a.customClassNameModifier(a.customClass,n,e)),"function"==typeof a.customNodeRender){const o=a.customNodeRender(e,t,n,a);if(o)return o}switch(e.type){case"dynamic-field":return i.a.createElement(Ee,o()({node:e},a),t);case"bold":return i.a.createElement("strong",a,t);case"code":return i.a.createElement("code",a,t);case"italic":return i.a.createElement("em",a,t);case"underlined":return i.a.createElement("u",a,t);case"html":return i.a.createElement(Ce,o()({style:n,className:a.customClass,node:e},a));case"paragraph":return i.a.createElement(xe,o()({style:n,className:a.customClass,node:e},a),t);case"heading":return i.a.createElement(je,o()({style:n,className:a.customClass,node:e},a),t);case"image":return i.a.createElement(ue,o()({style:n,className:a.customClass,node:e},a));case"block-quote":return i.a.createElement("blockquote",o()({style:n,className:a.customClass},a),t);case"ul_list":return i.a.createElement("ul",o()({style:n,className:a.customClass},a),t);case"ol_list":return i.a.createElement("ol",a,t);case"list_item":return i.a.createElement("li",o()({style:n,className:a.customClass},a),t);default:return console.warn(`(object: ${e.object}) "${e.type}" is not a recognized node type and cannot be serialized`),null}}(l,a,c)}function s(e,t){let n=0;const{tD:o}=Object(ve.a)(),s=a.debugIndexing?e=>{const o=i.a.cloneElement(e,{key:n++});return a.debugIndexing(n-1,t),o}:e=>i.a.cloneElement(e,{key:n++}),c=e=>{const a=(e=>{if("string"===e.object)return l(o(e.text))})({object:"string",text:e.text});return e.marks.reduce((e,a)=>{const n=r(a,e,t);if(null!==n){if(n)return s(n);throw new Error(`No serializer defined for mark of type "${a.type}".`)}},a)},u=e=>{if("text"===e.object){const{leaves:t}=e;return t.map(c)}const a=r(e,(e.nodes||[]).map(u)||null,t);if(null!==a){if(a)return s(a);throw new Error(`No serializer defined for node of type "${e.type}".`)}},{document:d}=e;return d.nodes.map(u).filter(Boolean)}function c(e,a){return i.a.createElement(J,o()({},e,{preview:!0,key:e.uuid,position:a,campaign:t}),e.cells.map((n,o)=>i.a.createElement(ie,{key:n.uuid,cell:n,campaign:t},s(n.data,{row:e.uuid,rowIndex:a,cell:n.uuid,cellIndex:o}))))}return function(e,a=null){return a?function(e,a){return e.map((e,n)=>"content"===e.data.role?i.a.createElement(J,{preview:!0,key:e.uuid,position:n,campaign:t},a):c(e,n))}(e,a):e.map(c)}}},333:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"mdiWhatsapp",(function(){return m})),a.d(n,"mdiYoutube",(function(){return p})),a.d(n,"mdiFacebook",(function(){return f})),a.d(n,"mdiTwitter",(function(){return g})),a.d(n,"mdiEmailCustom",(function(){return b})),a.d(n,"mdiInstagram",(function(){return h})),a.d(n,"mdiLinkedin",(function(){return y})),a.d(n,"mdiUndoVariant",(function(){return v})),a.d(n,"mdiRedoVariant",(function(){return _})),a.d(n,"mdiContentDuplicate",(function(){return E})),a.d(n,"mdiLockOutline",(function(){return k})),a.d(n,"mdiLockOpenOutline",(function(){return w})),a.d(n,"mdiHeartMultiple",(function(){return O})),a.d(n,"mdiHeartMultipleOutline",(function(){return S})),a.d(n,"ViewColumnOutline",(function(){return T})),a.d(n,"AlignTop",(function(){return N})),a.d(n,"AlignRight",(function(){return C})),a.d(n,"AlignBottom",(function(){return x})),a.d(n,"AlignLeft",(function(){return j})),a.d(n,"Raisely",(function(){return P})),a.d(n,"ROutlineImage",(function(){return D})),a.d(n,"RLink",(function(){return R})),a.d(n,"RAlignCenterSharp",(function(){return F})),a.d(n,"RAlignCenter",(function(){return I})),a.d(n,"RAlignLeftSharp",(function(){return M})),a.d(n,"RAlignRightSharp",(function(){return L})),a.d(n,"RBoldSharp",(function(){return B})),a.d(n,"RChevronSharp",(function(){return U})),a.d(n,"RDragSharp",(function(){return H})),a.d(n,"REditSharp",(function(){return V})),a.d(n,"RItalicSharp",(function(){return $})),a.d(n,"RListBulletedSharp",(function(){return q})),a.d(n,"RListNumberedSharp",(function(){return G})),a.d(n,"RMoreSharp",(function(){return z})),a.d(n,"RRedoSharp",(function(){return Y})),a.d(n,"RReturnSharp",(function(){return W})),a.d(n,"RSettingsSharp",(function(){return Z})),a.d(n,"RUndoSharp",(function(){return K})),a.d(n,"RWidthContain",(function(){return J})),a.d(n,"RWidthFullWith",(function(){return Q})),a.d(n,"RWidthWide",(function(){return X})),a.d(n,"RStrava",(function(){return ee})),a.d(n,"RFitbit",(function(){return te}));a(5),a(27);var o=a(0),r=a.n(o),i=a(60),l=a.n(i),s=a(655),c=a.n(s),u=a(656),d=a.n(u);const m="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M8.53 7.33C8.37 7.33 8.1 7.39 7.87 7.64C7.65 7.89 7 8.5 7 9.71C7 10.93 7.89 12.1 8 12.27C8.14 12.44 9.76 14.94 12.25 16C12.84 16.27 13.3 16.42 13.66 16.53C14.25 16.72 14.79 16.69 15.22 16.63C15.7 16.56 16.68 16.03 16.89 15.45C17.1 14.87 17.1 14.38 17.04 14.27C16.97 14.17 16.81 14.11 16.56 14C16.31 13.86 15.09 13.26 14.87 13.18C14.64 13.1 14.5 13.06 14.31 13.3C14.15 13.55 13.67 14.11 13.53 14.27C13.38 14.44 13.24 14.46 13 14.34C12.74 14.21 11.94 13.95 11 13.11C10.26 12.45 9.77 11.64 9.62 11.39C9.5 11.15 9.61 11 9.73 10.89C9.84 10.78 10 10.6 10.1 10.45C10.23 10.31 10.27 10.2 10.35 10.04C10.43 9.87 10.39 9.73 10.33 9.61C10.27 9.5 9.77 8.26 9.56 7.77C9.36 7.29 9.16 7.35 9 7.34C8.86 7.34 8.7 7.33 8.53 7.33Z",p="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z",f="M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6C10,3.79 11.79,2 14,2H17Z",g={viewBox:350,path:"M178.57 127.15 290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59h89.34M36.01 19.54H76.66l187.13 262.13h-40.66"},b="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18C2,19.1 2.9,20 4,20H20C21.1,20 22,19.1 22,18V6C22,4.89 21.1,4 20,4Z",h="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2C22,19.4 19.4,22 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8C2,4.6 4.6,2 7.8,2M7.6,4C5.61,4 4,5.61 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4C18.39,20 20,18.39 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5C17.94,5.5 18.5,6.06 18.5,6.75C18.5,7.44 17.94,8 17.25,8C16.56,8 16,7.44 16,6.75C16,6.06 16.56,5.5 17.25,5.5M12,7C14.76,7 17,9.24 17,12C17,14.76 14.76,17 12,17C9.24,17 7,14.76 7,12C7,9.24 9.24,7 12,7M12,9C10.34,9 9,10.34 9,12C9,13.66 10.34,15 12,15C13.66,15 15,13.66 15,12C15,10.34 13.66,9 12,9Z",y="M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3C6.1,3 7,3.9 7,5C7,6.1 6.1,7 5,7C3.9,7 3,6.1 3,5C3,3.9 3.9,3 5,3Z",v="M13.5,7C17.09,7 20,9.91 20,13.5C20,17.09 17.09,20 13.5,20H10V18H13.5C16,18 18,16 18,13.5C18,11 16,9 13.5,9H7.83L10.91,12.09L9.5,13.5L4,8L9.5,2.5L10.92,3.91L7.83,7H13.5M6,18H8V20H6V18Z",_="M10.5,7C6.91,7 4,9.91 4,13.5C4,17.09 6.91,20 10.5,20H14V18H10.5C8,18 6,16 6,13.5C6,11 8,9 10.5,9H16.17L13.09,12.09L14.5,13.5L20,8L14.5,2.5L13.08,3.91L16.17,7H10.5M18,18H16V20H18V18Z",E="M11,17H4C2.9,17 2,16.1 2,15V3C2,1.9 2.9,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7C6,5.9 6.9,5 8,5H19C20.1,5 21,5.9 21,7V21C21,22.1 20.1,23 19,23H8C6.9,23 6,22.1 6,21V19H8V21H19Z",k="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",w="M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10A2,2 0 0,1 6,8H15V6A3,3 0 0,0 12,3A3,3 0 0,0 9,6H7A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,17A2,2 0 0,1 10,15A2,2 0 0,1 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17Z",O="M13.5,20C6.9,13.9 3.5,10.8 3.5,7.1C3.5,4 5.9,1.6 9,1.6C10.7,1.6 12.4,2.4 13.5,3.7C14.6,2.4 16.3,1.6 18,1.6C21.1,1.6 23.5,4 23.5,7.1C23.5,10.9 20.1,14 13.5,20M12,21.1C5.4,15.2 1.5,11.7 1.5,7C1.5,6.8 1.5,6.6 1.5,6.4C0.9,7.3 0.5,8.4 0.5,9.6C0.5,13.4 3.9,16.5 10.5,22.4L12,21.1Z",S="M12,21.1L10.5,22.4C3.9,16.5 0.5,13.4 0.5,9.6C0.5,8.4 0.9,7.3 1.5,6.4C1.5,6.6 1.5,6.8 1.5,7C1.5,11.7 5.4,15.2 12,21.1M13.6,17C18.3,12.7 21.5,9.9 21.6,7C21.6,5 20.1,3.5 18.1,3.5C16.5,3.5 15,4.5 14.5,5.9H12.6C12,4.5 10.5,3.5 9,3.5C7,3.5 5.5,5 5.5,7C5.5,9.9 8.6,12.7 13.4,17L13.5,17.1M18,1.5C21.1,1.5 23.5,3.9 23.5,7C23.5,10.7 20.1,13.8 13.5,19.8C6.9,13.9 3.5,10.8 3.5,7C3.5,3.9 5.9,1.5 9,1.5C10.7,1.5 12.4,2.3 13.5,3.6C14.6,2.3 16.3,1.5 18,1.5Z",T="M21 4H3c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h18c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM8 18H4V6h4v12zm6 0h-4V6h4v12zm6 0h-4V6h4v12z",N="M12,8.1l4.9,4.8h-3.6V20h-2.4v-7.1H7.1L12,8.1z M17.8,4v2.4H6.2V4H17.8z",C="M15.9,12l-4.8,4.9l0-3.6l-7.1,0l0-2.4l7.1,0l0-3.6L15.9,12z M20,17.8l-2.4,0l0-11.7l2.4,0L20,17.8z",x="M12,15.9l-4.9-4.8l3.6,0l0-7.1l2.4,0l0,7.1l3.6,0L12,15.9z M6.2,20l0-2.4l11.7,0V20L6.2,20z",j="M8.1,12l4.8-4.9v3.6H20v2.4h-7.1v3.6L8.1,12z M4,6.2h2.4v11.7H4V6.2z",P={viewBox:27,path:"M22.548 20.18l-9.047-10.172-9.059 10.158A11.19 11.19 0 0 1 2.25 13.5C2.25 7.296 7.296 2.25 13.5 2.25S24.75 7.295 24.75 13.5c0 2.499-.819 4.81-2.202 6.68M13.5 24.75a11.207 11.207 0 0 1-7.54-2.907L13.5 13.39l7.528 8.464a11.206 11.206 0 0 1-7.527 2.897M0 13.5C0 20.956 6.044 27 13.5 27S27 20.956 27 13.5 20.956 0 13.5 0 0 6.044 0 13.5z"},A={baseViewBox:10,viewBox:84},D={viewBox:"24",path:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"},R={...A,path:"M71.41,57.79l-6.47-4.31,5.34-8A11.67,11.67,0,0,0,67,29.32l-.06,0a11.64,11.64,0,0,0-16.09,3.27L45.6,40.51,39.14,36.2l5.29-7.94A19.41,19.41,0,0,1,71.24,22.8l.1.06a19.4,19.4,0,0,1,5.4,26.92ZM59.57,75.56l5.29-8-6.46-4.3-5.29,7.94A11.66,11.66,0,0,1,37,74.53l-.06,0a11.66,11.66,0,0,1-3.24-16.15l5.34-8L32.6,46l-5.34,8A19.39,19.39,0,0,0,32.66,81l.09.07A19.44,19.44,0,0,0,59.57,75.56Zm3.12-32.84L56.2,38.46,41.27,61.16l6.49,4.27Z"},F={...A,path:"M86,36H18V28H86Zm0,20V48H18v8ZM70,76V68H34v8Z"},I={...A,path:"M82,36H22a4,4,0,0,1-4-4h0a4,4,0,0,1,4-4H82a4,4,0,0,1,4,4h0A4,4,0,0,1,82,36Zm4,16h0a4,4,0,0,0-4-4H22a4,4,0,0,0-4,4h0a4,4,0,0,0,4,4H82A4,4,0,0,0,86,52ZM70,72h0a4,4,0,0,0-4-4H38a4,4,0,0,0-4,4h0a4,4,0,0,0,4,4H66A4,4,0,0,0,70,72Z"},M={...A,path:"M86,36H18V28H86Zm0,20V48H18v8ZM54,76V68H18v8Z"},L={...A,path:"M86,36H18V28H86Zm0,20V48H18v8Zm0,20V68H50v8Z"},B={...A,path:"M59.67,81.77h-28V22.23H50.33A17.63,17.63,0,0,1,66.12,47.72a17.64,17.64,0,0,1-6.45,34.05Zm-17-11h17a6.64,6.64,0,0,0,0-13.27h-17Zm0-24.27h7.63a6.64,6.64,0,1,0,0-13.27H42.7Z"},U={...A,path:"M57.56,74.44,35.11,52,57.56,29.56,61.8,33.8,43.6,52,61.8,70.2Z"},H={...A,path:"M42.5,31.5h-10v-10h10Zm0,17.5h-10V59h10Zm0,27.5h-10v10h10Zm29-55h-10v10h10Zm0,27.5h-10V59h10Zm0,27.5h-10v10h10Z"},V={...A,path:"M78,60h8V86H18V18H41.92v8H26V78H78ZM36,48.34l34-34L87.66,32l-34,34H36ZM44,58h6.34l26-26L70,25.66l-26,26Z"},$={...A,path:"M60.5,30.18,51.66,73.82h9.87v8H33v-8H43.5l8.83-43.64H42.47v-8H71v8Z"},q={...A,path:"M88,76H40V68H88Zm0-40V28H40v8Zm0,20V48H40v8ZM32,76V68H20v8Zm0-40V28H20v8Zm0,20V48H20v8Z"},G={...A,path:"M88,76H34V68H88Zm0-40V28H34v8Zm0,20V48H34v8ZM19.63,26.26a1.21,1.21,0,0,0-.49,1.66,1.26,1.26,0,0,0,1.61.63l1-.43v9.8a1.58,1.58,0,0,0,1.57,1.45,1.54,1.54,0,0,0,1.57-1.45V25a.71.71,0,0,0-.7-.7h0a2,2,0,0,0-.77.18Zm1.25,22.55a2,2,0,0,1,1.89-1.3c1.16,0,1.83.67,1.83,1.45a3,3,0,0,1-.78,1.66l-5.33,6.61A1.93,1.93,0,0,0,18,58.42a1,1,0,0,0,1,1h7.49A1.47,1.47,0,0,0,27.88,58a1.44,1.44,0,0,0-1.37-1.47H22.88l3.31-3.84A5.91,5.91,0,0,0,27.74,49,4.55,4.55,0,0,0,23,44.5a4.87,4.87,0,0,0-4.85,3.39A1.41,1.41,0,0,0,19,49.73,1.57,1.57,0,0,0,20.88,48.81Zm.1,19a2.69,2.69,0,0,1,1.43-.42,1.46,1.46,0,0,1,1.48,1.41,1.4,1.4,0,0,1-1.43,1.59h-.59a1.37,1.37,0,0,0-1.25,1.34A1.32,1.32,0,0,0,21.87,73h.72a1.69,1.69,0,0,1,1.86,2,2,2,0,0,1-2.1,1.57,3.42,3.42,0,0,1-1.86-.74,1.47,1.47,0,0,0-2.13.06,1.5,1.5,0,0,0,0,2,5.46,5.46,0,0,0,3.7,1.7c2.93.2,5.53-1.66,5.78-4.17a4.09,4.09,0,0,0-2.51-4,3.39,3.39,0,0,0,1.88-2.86,4.29,4.29,0,0,0-4.34-4.13A5.28,5.28,0,0,0,19,65.81a1.38,1.38,0,0,0-.09,1.91C19.43,68.3,20,68.37,21,67.76Z"},z={...A,path:"M55,35.32H41v-14H55Zm0,11.43H41v14H55Zm0,25.43H41v14H55Z"},Y={...A,path:"M83.24,39,66.39,55.85l-4.24-4.24L71.76,42h-33a12.5,12.5,0,0,0,0,25h18.5v6H38.77a18.5,18.5,0,0,1,0-37h33l-9.61-9.61,4.24-4.24Z"},W={...A,path:"M80,58H33.44l9.61,9.61-4.24,4.24L22,55,38.81,38.15l4.24,4.24L33.44,52H74V39h6Z"},Z={...A,path:"M86,57V47H76.5a24.9,24.9,0,0,0-3.65-8.78l6.73-6.73-7.07-7.07-6.73,6.73A24.9,24.9,0,0,0,57,27.5V18H47v9.5a24.9,24.9,0,0,0-8.78,3.65l-6.73-6.73-7.07,7.07,6.73,6.73A24.9,24.9,0,0,0,27.5,47H18V57h9.5a24.9,24.9,0,0,0,3.65,8.78l-6.73,6.73,7.07,7.07,6.73-6.73A24.9,24.9,0,0,0,47,76.5V86H57V76.5a24.9,24.9,0,0,0,8.78-3.65l6.73,6.73,7.07-7.07-6.73-6.73A24.9,24.9,0,0,0,76.5,57ZM52,67A15,15,0,1,1,67,52,15,15,0,0,1,52,67Z"},K={...A,path:"M81,54.5A18.52,18.52,0,0,1,62.5,73H44V67H62.5a12.5,12.5,0,0,0,0-25h-33l9.61,9.61-4.24,4.24L18,39,34.88,22.15l4.24,4.24L29.51,36h33A18.52,18.52,0,0,1,81,54.5Z"},J={...A,path:"M76.72,80H25.42V72h51.3Zm0-55H25.42v8h51.3ZM78,39H25V66H78ZM33,47H70V58H33Z"},Q={...A,path:"M76.72,80H25.42V72h51.3ZM89,25H15V66H89ZM23,33H81V58H23Z"},X={...A,path:"M76.72,80H25.42V72h51.3Zm0-55H25.42v8h51.3ZM84,39H19V66H84ZM27,47H76V58H27Z"},ee={viewBox:84,path:"M51.9 59.3l-6.1-12h-8.9l15 29.6 15-29.6H58l-6.1 12zM37.5 31l8.3 16.3h12.1L37.5 7.1 17.1 47.3h12.1L37.5 31z"},te={viewBox:84,path:"M45.7 13.2c0 2.8-2.3 5.1-5.1 5.1s-5.1-2.3-5.1-5.1 2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1zm-5.1 9.2c-2.9 0-5.2 2.2-5.3 5.1v.2c0 3 2.3 5.3 5.3 5.3s5.3-2.3 5.3-5.3-2.3-5.3-5.3-5.3zm0 14.2c-3 0-5.5 2.5-5.5 5.5s2.5 5.5 5.5 5.55.5-2.5 5.5-5.5-2.5-5.5-5.5-5.5zm0 14.5c-2.9 0-5.2 2.2-5.3 5.1v.2c0 3 2.3 5.3 5.3 5.3s5.3-2.3 5.3-5.3c0-2.8-2.3-5.3-5.3-5.3zm0 14.7c-2.8 0-5.1 2.3-5.1 5.1s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1-2.3-5.1-5.1-5.1zm14-44.1c-3.2 0-6 2.8-6 6s2.8 6 6 6 6-2.8 6-6-2.7-6-6-6zm0 14.2c-3.4 0-6.2 2.8-6.2 6.2s2.8 6.2 6.2 6.2c3.4 0 6.2-2.8 6.2-6.2 0-3.4-2.7-6.2-6.2-6.2zm0 14.5c-3.2 0-6 2.8-6 6s2.8 6 6 6 6-2.8 6-6c0-3.3-2.7-6-6-6zm14.5-15.2c-3.7 0-6.9 3-6.9 6.9 0 3.7 3 6.9 6.9 6.9s6.9-3 6.9-6.9c-.2-3.9-3.2-6.9-6.9-6.9zM26.4 23c-2.5 0-4.6 2.1-4.6 4.6 0 2.5 2.1 4.6 4.6 4.6 2.5 0 4.6-2.1 4.6-4.6 0-2.5-2.1-4.5-4.6-4.6zm0 14.3c-2.8 0-4.8 2.1-4.8 4.8s2.1 4.8 4.8 4.8 4.8-2.1 4.8-4.8-2.1-4.8-4.8-4.8zm0 14.5c-2.5 0-4.6 2.1-4.6 4.6 0 2.5 2.1 4.6 4.6 4.6 2.5 0 4.6-2.1 4.6-4.6 0-2.6-2.1-4.6-4.6-4.6zM12.1 38C9.8 38 8 39.8 8 42.1s1.8 4.1 4.1 4.1 4.1-1.8 4.1-4.1-1.8-4.1-4.1-4.1z"},ae=d()({},...c()(n).map(([e,t])=>{t||console.warn(e+" does not have an SVG path");const a="string"==typeof t,n=t.baseViewBox||0,o=a?"24":t.viewBox,i=`${n} ${n} ${o} ${o}`,s=a?t:t.path;return{[l()(e.replace(/^mdi/,""))]:({className:t,title:a})=>r.a.createElement("i",{"data-icon-name":e,title:a},r.a.createElement("svg",{viewBox:i,className:t},r.a.createElement("path",{d:s})))}}));t.a=ae},334:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a(2),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(661),s=a(658),c=a(50),u=a.n(c),d=a(51),m=a.n(d),p=a(99),f=a(10);const{baseUrl:g}=f.a,b=(e,t=!1,a="raisely-theme")=>new Promise((n,o)=>{const r=document.querySelector(`link[${a}]`);if(t&&r)return void n(!0);const i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.media="all",i.href=e,i.setAttribute(a,""),i.onload=n,i.onerror=o,r&&(i.onload=()=>{r.parentNode.removeChild(r),n()}),document.head.appendChild(i)});var h=a(100),y=a(657);class v extends r.Component{constructor(...e){super(...e),o()(this,"state",{loaded:!1,initialised:!1,showUpload:!1}),o()(this,"setStateAsync",(...e)=>new Promise(t=>this.setState(...e,t))),o()(this,"setEditorValue",e=>this.editor.summernote("code",e)),o()(this,"getModalClassName",()=>{const{customModal:e,customModalClass:t}=this.props;return e&&!t?null:t||"note-editor-container__upload-modal"}),o()(this,"bindEditorRef",e=>{this.editorRef=e}),o()(this,"basePropOnChange",m()(e=>this.props.onChange({target:{value:e}}),200)),o()(this,"handleChange",e=>{this.state.initialised&&this.props.onChange&&this.basePropOnChange(e)}),o()(this,"handleDefaultPaste",e=>{const t=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");e.preventDefault(),document.execCommand("insertText",!1,t)}),o()(this,"handleClick",e=>{if(!this.state.showUpload)return;const t=this.getModalClassName();if(!t)return;const[a]=document.getElementsByClassName(t);a&&!a.contains(e.target)&&this.setState({showUpload:!1})}),o()(this,"handleImageUpload",e=>{try{e&&this.editor.summernote("insertImage",e,t=>{t.attr("src",e)})}catch(e){console.error(e)}this.setState({showUpload:!1})}),o()(this,"assembleDefaultButtons",e=>({upload:()=>e.ui.button({contents:'<i class="note-icon-picture" />',tooltip:"image",click:()=>setTimeout(()=>this.setState({showUpload:!0}))}).render()})),o()(this,"assembleDefaultToolbar",()=>{const{props:e}=this;if(e.basicMode){const t={style:["bold","italic","underline"],para:[],add:["link"]};e.disableLists||t.para.push("ul","ol"),e.disableAlign||t.para.push("paragraph"),t.para.length||delete t.para;const a=[];return e.disableFullscreen||a.push("fullscreen"),e.disableHTMLMode||a.push("codeview"),e.disableHelp||a.push("help"),a.length&&(t.misc=a),Object.entries(t)}const t={style:["style","bold","italic","underline","strikethrough","clear"],para:[],add:["link"],height:["height"]};e.disableUpload||t.add.push("upload"),e.disableTables||t.add.push("table"),t.add.push("hr"),e.disableLists||t.para.push("ul","ol"),e.disableAlign||t.para.push("paragraph"),t.para.length||delete t.para;const a=[];return e.disableFullscreen||a.push("fullscreen"),e.disableHTMLMode||a.push("codeview"),e.disableHelp||a.push("help"),a.length&&(t.misc=a),Object.entries(t)}),o()(this,"createEditor",e=>{const t={onPaste:this.handleDefaultPaste,...u()(this.props,["onInit","onEnter","onFocus","onBlur","onBlurCodeView","onKeyup","onKeydown","onPaste"]),onChange:this.handleChange,onChangeCodeview:this.handleChange},a={codemirror:{lineWrapping:!0,lineNumbers:!1},styleTags:["p","blockquote","h1","h2","h3","h4","h5","h6",{title:"Button",tag:"a",className:"button button-primary",value:"a"}],disableDragAndDrop:!0,...this.props.options||{}},n={...this.assembleDefaultButtons(e.summernote),...a.createButtons?a.createButtons(e):{}},o=e(this.editorRef).summernote({callbacks:t,toolbar:this.assembleDefaultToolbar(),...a,buttons:n});return e(this.editorRef).summernote("removeModule","autoLink"),o}),o()(this,"renderUploadModal",()=>{const{customModal:e}=this.props;return"function"==typeof e?e(e=>this.handleImageUpload(e)):i.a.createElement("div",{className:this.getModalClassName()},i.a.createElement(s.a,{label:"Select an image",id:"modal-image",change:(e,t)=>this.handleImageUpload(t)}))})}async componentDidMount(){const{value:e,disableHTMLMode:t}=this.props,[n]=await async function(e){const[t,n]=Object(h.a)({asPromise:!0}),[o,r]=Object(h.a)({asPromise:!0});t("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"),t("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/codemirror.min.js"),await n();const i=[b("https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.css",!0,"summernote")];return o("https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.js"),e&&(i.push(b("https://cdnjs.cloudflare.com/ajax/libs/codemirror/3.20.0/codemirror.css",!0,"codemirror-base"),Promise.resolve().then(a.bind(null,657))),Object(y.default)(o)),await Promise.all([r(),...i]),[window.$]}(!t);await this.setStateAsync({loaded:!0}),this.editor=this.createEditor(n),e&&this.setEditorValue(e),await this.setStateAsync({initialised:!0})}componentDidUpdate(e){if(!this.state.initialised)return;const{props:t}=this;t.enableClearProp&&t.clearProp!==e.clearProp?this.setEditorValue(""):t.controlled&&t.value!==this.editor.summernote("code")&&this.setEditorValue(t.value)}componentWillUnmount(){this.editor&&(this.editor.summernote("destroy"),this.purgeFullScreenStyles())}purgeFullScreenStyles(){const{body:e,documentElement:t}=document;t&&t.style.overflow&&(t.style.overflow=null),e&&e.style.overflow&&(e.style.overflow=null)}render(){const{state:e}=this;return e.loaded?i.a.createElement("div",{className:`note-editor-container ${this.props.className||""} ${e.initialised?"note-editor-container--initialised":""}`,onClick:this.handleClick},i.a.createElement("div",{ref:this.bindEditorRef}),e.showUpload&&this.renderUploadModal()):i.a.createElement(p.a,{sceneHeight:"20vh"})}}function _({value:e,options:t,basicMode:a,disableUpload:n,disableTables:o,disableHTMLMode:r,disableHelp:s,disableLists:c,disableAlign:u,disableFullscreen:d,...m}){return i.a.createElement(l.a,m,i.a.createElement(v,{value:e,options:t,basicMode:a,disableUpload:n,disableLists:c,disableAlign:u,disableTables:o,disableHTMLMode:r,disableHelp:s,disableFullscreen:d,onChange:e=>m.change(m.id,e.target.value,!0)}))}t.b=v},35:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(18),s=a(3),c=a(11),u=a(16),d=a(15),m=a(8);function p({children:e,onSubmitClick:t,...a}){const{step:n,updateStep:r}=Object(d.b)();return i.a.createElement("div",o()({className:"signup-form__nav signup-form__navigation"},a),e||i.a.createElement(i.a.Fragment,null,i.a.createElement(f,{onClick:t||(()=>r(n+1))}),n>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(g,null))))}function f({isInForm:e=!0,...t}){const a=Object(l.a)("signup-form__navigation__button--next button button--primary button--full",e&&"in-form--next");return i.a.createElement("button",o()({className:a,type:"submit","data-testid":"next-btn"},t))}function g({children:e,isInForm:t=!0,...a}){const{t:n}=Object(s.d)(),{step:r,updateStep:c,values:m}=Object(d.b)(),p=Object(l.a)("signup-form__navigation__link signup-form__back",t&&"in-form--back");return m.disableBack?null:i.a.createElement("button",o()({className:p,type:"button",onClick:()=>c(r-1),"data-testid":"back-btn"},a),e||i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{name:"chevron_left",size:"small"}),i.a.createElement("span",null,n("Back"))))}p.NextBtn=f,p.BackBtn=g,p.SkipBtn=function({children:e,...t}){const{t:a}=Object(s.d)(),{step:n,updateStep:r}=Object(d.b)();return i.a.createElement(c.a,o()({className:"button--secondary",type:"button",onClick:()=>r(n+1)},t),e||a("Skip"))},p.Total=function({children:e,...t}){const{t:a}=Object(s.d)(),{values:n,currency:r}=Object(d.b)(),l=n.ticketsTotal+n.donationAmount;return l<=0?null:e||i.a.createElement("span",o()({className:"signup-form__nav__total"},t),a("Total")," ",i.a.createElement("b",null,Object(m.f)(l,r)))},t.a=p},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(4),o=a.n(n),r=a(0),i=a.n(r),l=a(61);function s({src:e,isLazy:t=!0,options:a={},...n}){const{className:r,...s}=n,c=Object(l.a)(e,a),u=`${c}&dpr=1 1x, ${c}&dpr=2 2x`,d=null==e?void 0:e.includes(".gif"),m=!d&&t?function(e,t,a,n,o){let r="lazy";e&&(r+=" "+e);return{className:r,"data-srcset":t,srcSet:null,"data-src":a,src:Object(l.a)(n,{...o,quality:1})}}(r,u,c,e,a):{};return i.a.createElement("img",o()({className:r||null,key:e,srcSet:d?null:u,src:c},m,s))}},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(18),s=a(1),c=a.n(s),u=a(707),d=a(222),m=a(664),p=a.n(m),f=a(705),g=a(11),b=a(16),h=a(162);let y=!1;function v(e){const{modalContent:t,customContainerClass:a,modalCelebration:n,button:s,buttonIcon:c,buttonTitle:m,buttonContext:v,buttonTheme:E,automatic:k,promptOnLeave:w,removePadding:O,theme:S,dockToBottom:T,title:N,close:C,onClose:x,classNames:j,styles:P,hasDFv3:A,isModalPreview:D}=e,R=useRaisely(),F=Object(f.a)(R),I=Object(r.useMemo)(()=>!(!k||y)&&(y=!0,!0),[]),[M,L]=Object(r.useState)(I),B=Object(r.useRef)(null),U=()=>{D||(B.current&&Object(d.c)(B.current),L(!1),x&&x(),y=!1)};var H;Object(r.useEffect)(()=>{M?(B.current=document.querySelector(".modal__content-inner"),B.current&&Object(d.b)(B.current)):(y=!1,e.onClose&&e.onClose())},[M]),H=M,Object(r.useEffect)(()=>{var e,t;if(!H)return;const a=null===(e=document.querySelector("#modal-root .modal"))||void 0===e?void 0:e.parentElement;a&&(document.addEventListener("keydown",(function(e){if("Tab"!==e.key)return;const t=_(a),n=t[0],o=t[t.length-1];n&&o&&(e.shiftKey?document.activeElement===n&&(o.focus(),e.preventDefault()):document.activeElement===o&&(n.focus(),e.preventDefault()))})),null===(t=_(a)[0])||void 0===t||t.focus())},[H]),Object(r.useEffect)(()=>{C&&U()},[C]);const V=t=>{if(e.promptOnLeave){1==confirm(e.promptOnLeave)&&t()}else t()};return i.a.createElement(r.Fragment,null,w&&M&&i.a.createElement(u.a,{message:w}),s&&i.a.createElement("div",{className:"modal__button"},v&&i.a.createElement("span",{className:"modal__button-text"},v),i.a.createElement(g.a,{theme:E||"primary",onClick:e=>(e=>{e&&e.preventDefault(),y||(L(!0),y=!0)})(e)},c,m)),t&&M&&i.a.createElement(h.a,{id:"modal-root"},!D&&i.a.createElement("div",{className:"modal__back",onClick:()=>V(U)},A&&i.a.createElement("button",{className:"modal__close outer",onClick:()=>V(U)},i.a.createElement(b.a,{color:"white",name:"close"}))),n&&i.a.createElement(p.a,o()({className:"modal__confetti"},F)),i.a.createElement("div",{className:Object(l.a)("modal modal--"+S,T&&"modal--dock-bottom",j),onKeyDown:t=>{const{noEscape:a}=e;["Escape"].includes(t.key)&&!a&&V(U)},"aria-modal":"true",tabIndex:"-1",role:"dialog",style:P||null},i.a.createElement("div",{className:`modal__container modal__container--${M?"open":"closed"} ${a||""}`},i.a.createElement("div",{className:"modal__content"},"full"===S&&!A&&i.a.createElement("div",{className:"modal__header"},N&&i.a.createElement("h3",{className:"modal__header-title"},N),i.a.createElement("button",{className:"modal__header-close",onClick:()=>V(U)},i.a.createElement(b.a,{color:"white",name:"arrow_back"}))),i.a.createElement("div",{className:"modal__content-box "+(O?"modal__content-box--no-padding":"")},!A&&i.a.createElement("button",{className:"modal__close",onClick:()=>V(U)},i.a.createElement(b.a,{color:"white",name:"close"})),i.a.createElement("div",{className:"modal__content-inner"},A&&i.a.createElement("div",{className:"modal__header"},i.a.createElement("button",{className:"modal__header-close",onClick:()=>V(U)},i.a.createElement(b.a,{color:"black",name:"close"}))),t(U))))))))}function _(e){return e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')}v.propTypes={button:c.a.bool,buttonTitle:c.a.string,buttonContext:c.a.string,buttonIcon:c.a.element,modalContent:c.a.func,automatic:c.a.bool,close:c.a.bool,promptOnLeave:c.a.string,theme:c.a.oneOf(["default","full"]),dockToBottom:c.a.bool,title:c.a.string,onClose:c.a.func},v.defaultProps={button:!0,buttonTitle:"Open",buttonContext:"",modalContent:null,automatic:!1,close:null,promptOnLeave:null,theme:"default"}},383:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.providerContextTypes=void 0;var n=r(a(0)),o=r(a(286));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.providerContextTypes={tag:o.default.string.isRequired,stripe:o.default.object,addStripeLoadListener:o.default.func},l=function(e,t){window.Stripe.__cachedInstances=window.Stripe.__cachedInstances||{};var a="key="+e+" options="+JSON.stringify(t),n=window.Stripe.__cachedInstances[a]||window.Stripe(e,t);return window.Stripe.__cachedInstances[a]=n,n},s=function(e){if(e&&e.elements&&e.createSource&&e.createToken&&e.createPaymentMethod&&e.handleCardPayment)return e;throw new Error("Please pass a valid Stripe object to StripeProvider. You can obtain a Stripe object by calling 'Stripe(...)' with your publishable key.")},c=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));if(n.props.apiKey&&n.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider, not both.");if(n.props.apiKey){if(!window.Stripe)throw new Error("Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements. If Stripe.js isn't available yet (it's loading asynchronously, or you're using server-side rendering), see https://github.com/stripe/react-stripe-elements#advanced-integrations");var o=n.props,r=o.apiKey,i=(o.children,o.stripe,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(o,["apiKey","children","stripe"]));n._meta={tag:"sync",stripe:l(r,i)}}else if(n.props.stripe)n._meta={tag:"sync",stripe:s(n.props.stripe)};else{if(null!==n.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider. If you're using 'stripe' but don't have a Stripe instance yet, pass 'null' explicitly.");n._meta={tag:"async",stripe:null}}return n._didWarn=!1,n._didWakeUpListeners=!1,n._listeners=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){var e=this;return"sync"===this._meta.tag?{tag:"sync",stripe:this._meta.stripe}:{tag:"async",addStripeLoadListener:function(t){e._meta.stripe?t(e._meta.stripe):e._listeners.push(t)}}},t.prototype.componentDidUpdate=function(e){var t=this.props.apiKey&&e.apiKey&&this.props.apiKey!==e.apiKey,a=this.props.stripe&&e.stripe&&this.props.stripe!==e.stripe;if(!this._didWarn&&(t||a)&&window.console&&window.console.error)return this._didWarn=!0,void console.error("StripeProvider does not support changing the apiKey parameter.");if(!this._didWakeUpListeners&&this.props.stripe){this._didWakeUpListeners=!0;var n=s(this.props.stripe);this._meta.stripe=n,this._listeners.forEach((function(e){e(n)}))}},t.prototype.render=function(){return n.default.Children.only(this.props.children)},t}(n.default.Component);c.propTypes={apiKey:o.default.string,stripe:o.default.object,children:o.default.node},c.childContextTypes=i,c.defaultProps={apiKey:void 0,stripe:void 0,children:null},t.default=c},384:function(e,t,a){var n=a(944);e.exports=function(e){return n(e,{weekStartsOn:1})}},40:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return p}));a(5);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(16),s=a(3),c=a(8);const u=["small","medium","large"],d=["standard","hollow","rounded"],m=e=>{let t="progress-bar";return e.forEach(e=>{t+=` progress-bar--${e[0]}-${e[1]}`}),t};function p({profile:e,size:t,style:a,showTotal:r,showGoal:i,statPosition:p,displaySource:f,total:g,goal:b,unit:h,className:y,label:v,progressIcon:_,prependToView:E,appendToView:k}){const w=u.includes(t)?t:"medium",O=d.includes(a)?a:"standard",S=i||r,T=useRaisely(),{t:N}=Object(s.d)(),C=e&&e.currency!==T.campaign.currency||T.detectedCurrency!==T.campaign.currency,[x,j,P,A,D,R]=Object(c.t)(e,f,T.campaign.config.activity,{total:g,goal:b,unit:h,label:v,displayDollarPrefix:C}),F=null===R&&D>0||P>100?"100":P,I=o.a.createElement(n.Fragment,null,r&&o.a.createElement("span",{className:"progress-bar__total","data-total":""+x},x&&`${x} ${A}`),i&&o.a.createElement("span",{className:"progress-bar__goal","data-goal":j},j&&`${j} ${N("goal")}`)),M=useRaisely().campaign.currency,L=e&&e.currency||M,B=Object(c.s)(E,{displayPercentage:F,rawTotal:D,rawGoal:R,campaignCurrency:M,displayCurrency:L}),U=Object(c.s)(k,{displayPercentage:F,rawTotal:D,rawGoal:R,campaignCurrency:M,displayCurrency:L}),H="small"!==t&&"middle"!==p&&_;return o.a.createElement("div",{className:`${y||""} ${m([["size",w],["style",O]])}`},B,"top"===p&&S&&o.a.createElement("div",{className:"progress-bar__stats-outter progress-bar__stats-outter--above"},I),o.a.createElement("div",{className:"progress-bar__progress"},"middle"===p&&I,F>0&&o.a.createElement("span",{className:`progress-bar__bar${F>0?" progress-bar__bar--animated":""} ${H?" progress-bar__bar--has-icon":""}`,style:{width:Math.floor(Math.round(F,100))+"%"}},"middle"===p&&I,H?o.a.createElement(l.a,{name:_,size:"large"==t?"normal":"small"}):null)),"bottom"===p&&S&&o.a.createElement("div",{className:"progress-bar__stats-outter progress-bar__stats-outter--below"},I),U)}p.propTypes={profile:i.a.object,style:i.a.oneOf(d),size:i.a.oneOf(u),showTotal:i.a.bool,showGoal:i.a.bool,total:i.a.number,goal:i.a.number,unit:i.a.string,label:i.a.string,progressIcon:i.a.string,displaySource:i.a.oneOf(["activityTotal","total","exerciseTotal","exerciseTotalTime","custom"]),statPosition:i.a.oneOf(["top","middle","bottom"]),className:i.a.string,prependToView:i.a.oneOfType([i.a.node,i.a.func]),appendToView:i.a.oneOfType([i.a.node,i.a.func])}},400:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return _}));var n=a(0),o=a.n(n),r=a(125),i=a(8),l=a(24),s=a.n(l),c=a(308),u=a(7),d=a.n(u),m=a(3),p=a(16),f=a(53),g=a(202),b=a(90),h=a(29),y=a(60),v=a.n(y);function _({donation:t,inModal:a,...l}){var u;const{user:y,campaign:_}=useRaisely(),{t:E}=Object(m.d)(),k=Object(n.useMemo)(()=>function(t,{showAsLoading:a}){var n;if(a)return{};const{user:o,campaign:r}=useRaisely(),l=t.currency!=(null==r?void 0:r.currency)||((null==o||null===(n=o.profile)||void 0===n?void 0:n.currency)||e.detectedCurrency)!=(null==r?void 0:r.currency);return{displayAmount:a?" ":Object(i.f)(t.displayAmount||t.displayTotal,t.currency,{displayDollarPrefix:l}),timeFrom:s()(t.createdAt).fromNow()}}(t,l),[t&&t.uuid,l.showAsLoading]),w=d()(_,"config.thankyou",{}),O=Object(i.n)(y,t&&t.profile),S=d()(y,"uuid")===d()(t,"user.uuid"),T=`${window.location.protocol}//${window.location.host}`,{beforeNames:N,names:C,afterNames:x}=Object(g.b)(t,y),j=({name:e,value:a})=>{if("target"===e)return o.a.createElement(h.a,{key:e||a,to:"/"+t.profile.path},a);if(["firstName","lastName","fullName"].includes(e)){const t=v()(e);return o.a.createElement("em",{key:e||a,className:"dashboard-donation-stream__item__"+t},a)}return o.a.createElement("span",{key:e||a,className:"dashboard-donation-stream__item__verb"},a)};return o.a.createElement("article",{className:"dashboard-donation-stream__item "+(a?"dashboard-donation-stream__item--in-modal":"")},l.showAsLoading?o.a.createElement(r.a,{reverse:!0,style:{height:"3rem",width:"100%"}}):o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"dashboard-donation-stream__item__content"},N.map(j),C.map(j),x.map(j)," ",o.a.createElement("em",{className:"dashboard-donation-stream__item__amount"},k.displayAmount),t.message&&o.a.createElement("p",{className:"dashboard-donation-stream__item__message"},`"${t.message}"`),o.a.createElement("p",{className:"dashboard-donation-stream__item__timestamp"},k.timeFrom)),w.enabled&&O&&!S&&l.displayThanksForm?o.a.createElement(c.a,{size:"small",donation:t,thankyou:t.thankyou,onSuccess:l.onThanksSuccess,onFailure:l.onThanksFailure,expandThanksForm:l.expandThanksForm}):null,w.enabled&&l.displayThanks&&null!==(u=t.thankyou)&&void 0!==u&&u.message?o.a.createElement("div",{className:"dashboard-donation-stream__item__thanks"},o.a.createElement("div",{className:"dashboard-donation-stream__item__thanks__message"},t.thankyou.isPrivate&&o.a.createElement(p.a,{name:"lock-outline",size:"small",theme:"inherit",title:E("Only the donor can see this message")}),t.thankyou.message),o.a.createElement("div",{className:"dashboard-donation-stream__item__thanks__share"},o.a.createElement(f.a,{network:{iconName:"facebook",buildUrl:()=>b.b.facebook.buildUrl(`${T}/${t.profile.path}?donation=${t.uuid}`)},networkName:"facebook",theme:"filled-inverse",size:"icon"}),o.a.createElement(f.a,{network:{iconName:"twitter",buildUrl:()=>b.b.twitter.buildUrl(`${T}/${t.profile.path}?donation=${t.uuid}`)},networkName:"twitter",theme:"filled-inverse",size:"icon"}))):null))}}).call(this,a(106))},41:function(e,t,a){"use strict";a.d(t,"c",(function(){return v})),a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return E}));a(5),a(63);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(29),s=a(7),c=a.n(s),u=a(159),d=a.n(u),m=a(3),p=a(6),f=a(108),g=a(40),b=a(11),h=a(125),y=a(8);const v=["default","inverted"],_=["default","user","post","minimal"];function E(e){const{profile:t,displaySource:a,openNewTab:r}=e,{global:i,actions:s}=useRaisely(!0),{t:u}=Object(m.d)();if(!t&&!e.showAsLoading)return"";const v=_.includes(e.detail)?e.detail:"default",E=t.currency!==i.campaign.currency||i.detectedCurrency!==i.campaign.currency,[k]=t?Object(y.t)(t,a,i.campaign.config.activity,{displayDollarPrefix:E}):[],w=Object(n.useMemo)(()=>Boolean(Array.isArray(window.pageSchemas)&&window.pageSchemas.some(e=>"/:id/edit"===e.path)),[]),[O,S]=Object(n.useState)(!1);function T(){s.history.push(`${Object(p.b)(t.type)}${t.path}`)}let N=e.defaultImage?e.defaultImage:c()(i,"campaign.config.theme.defaultProfileUrl");return N||(N=null),o.a.createElement(n.Fragment,null,e.header,o.a.createElement("div",{className:"profile-tile profile-tile--detail-"+v,onClick:e.onClick},!e.showAsLoading&&!e.showInviteLink&&o.a.createElement(l.a,{className:"profile-tile__overlay",to:`${Object(p.b)(t.type)}${t.path}`,shouldOpenInNewTab:r},`${u("Link to")} ${t.name}`),o.a.createElement(f.a,{defaultImage:N,profile:t||{},onClick:e.showInviteLink?T:null}),o.a.createElement("div",{className:"profile-tile__content"},e.showAsLoading&&o.a.createElement(h.a,{longer:!0,style:{height:"2.8rem",width:"100%"}}),!e.showAsLoading&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"profile-tile__content-inner"},o.a.createElement("p",{className:"profile-tile__name",onClick:e.showInviteLink?T:null},t.name,t.pronouns&&"INDIVIDUAL"==t.type?o.a.createElement("span",{className:"profile-tile__pronouns"},`(${t.pronouns.trim()})`):null),"user"===v&&o.a.createElement("span",{className:"profile-tile__edit"},o.a.createElement(l.a,{to:`/${t.type===p.h.group?"t/":""}${t.path}${w?"/edit":"?edit=1"}`,shouldOpenInNewTab:r},u("Edit"))),"minimal"!==v&&"user"!==v&&o.a.createElement("span",{className:"profile-tile__total"},k),"minimal"!==v&&o.a.createElement(g.a,{profile:t,displaySource:a,showTotal:!1,showGoal:!1,size:"small",style:"rounded"}),"post"===v&&o.a.createElement(l.a,{className:"button--primary",to:"/"+t.path},u("Back to [[target]]",{target:t.name})),e.showRank?o.a.createElement("div",{className:"profile-tile__rank","data-rank":t.rank},t.rank):null),e.showInviteLink&&o.a.createElement(b.a,{onClick:()=>{return e=`${i.campaign.url}signup?parentId=${t.path}`,S(!0),d()(e),void setTimeout(()=>S(!1),500);var e}},O?"Copied!":"Copy link")))))}E.propTypes={profile:i.a.object.isRequired,detail:i.a.oneOf(_),showRank:i.a.bool,displaySource:i.a.oneOf(["activityTotal","total","donors","exerciseTotal","exerciseTotalTime"]),defaultImage:i.a.string,openNewTab:i.a.bool}},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(4),o=a.n(n),r=a(2),i=a.n(r),l=(a(27),a(5),a(39),a(0)),s=a.n(l),c=a(1),u=a.n(c),d=a(90);const m=["left","center","right"],p={INDIVIDUAL:{owner:"IndividualOwner",supporter:"IndividualSupporter"},GROUP:{owner:"GroupOwner",supporter:"GroupSupporter"},ORGANISATION:{owner:"OrganisationOwner",supporter:"OrganisationSupporter"}},f=e=>({hashtags:e.twitterHashtag?e.twitterHashtag.replace("#",""):null,via:e.twitterHandle?e.twitterHandle.replace("@",""):"raisely"});class g extends l.Component{constructor(...e){super(...e),i()(this,"resolveNetworks",(e,t)=>{if("campaign"===e){const e=[];return t.facebookEnabled&&e.push("facebook"),t.twitterEnabled&&e.push("twitter"),t.whatsappEnabled&&e.push("whatsapp"),t.emailEnabled&&e.push("email"),t.copyEnabled&&e.push("link"),e}return Array.isArray(e)?e:[]}),i()(this,"resolveShareUrl",e=>{const{global:t}=this.props,a=`${window.location.protocol}//${window.location.host}`;if(this.props.profile)return`${a}/${this.props.profile.path}`;if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/"))return e;if(t.isEmbed)return a;if("current"===e){if(t.current&&t.current.profile){const{profile:e,post:n}=t.current;return n?`${a}/${e.path}/posts/${n.path}`:`${a}/${e.path}`}return t.user&&t.user.profile?`${a}/${t.user.profile.path}`:"/embed"===window.location.pathname?window.location.href.replace(window.location.pathname,""):window.location.href.split("?")[0]}return"profile"===e&&t.user&&t.user.profile?`${a}/${t.user.profile.path}`:a}),i()(this,"campaignShareValues",(e,t)=>({subject:t.emailSubject,body:t.emailBody,text:t.twitterTweet,...f(t),hashtags:t.twitterHashtag,via:t.twitterHandle?t.twitterHandle.replace("@"):"raisely",whatsappMessage:t.whatsappMessage})),i()(this,"profileShareValues",(e,t,a)=>{const{user:n}=this.props.global;let o="";var r;if(t&&n&&t.user&&t.user.uuid===n.uuid)o=null===(r=p[t.type])||void 0===r?void 0:r.owner;else if(t){var i;o=null===(i=p[t.type])||void 0===i?void 0:i.supporter}return t?{subject:a[`email${o}Subject`]||a.emailSubject,body:a[`email${o}Body`]||a.emailBody,text:a[`twitter${o}Tweet`]||a.twitterTweet,...f(a),whatsappMessage:a.whatsappMessage,targetProfile:t}:this.campaignShareValues(e,a)}),i()(this,"resolveShareValues",(e,t,a)=>{const{global:n}=this.props;if(this.props.profile)return this.profileShareValues(e,this.props.profile,a);switch(t){case"current":return n.current.profile?this.profileShareValues(e,n.current.profile,a):"/dashboard"===window.location.pathname?this.profileShareValues(e,{...n.user?n.user.profile:{},user:n.user},a):this.campaignShareValues(e,a);case"profile":return this.profileShareValues(e,n.user&&{...n.user?n.user.profile:{},user:n.user},a);default:return this.campaignShareValues(e,a)}}),i()(this,"parseShareConfig",(e,t)=>{const{global:a,profile:n}=this.props,o={...a.campaign.config.social},r=n||("current"===t?"/dashboard"===window.location.pathname?a.user&&a.user.profile:a.current.profile:"profile"===t?a.user&&a.user.profile:null),i={campaign:a.campaign.name,profile:r?r.name:"",link:e,url:e,description:r?r.description:a.campaign.profile.description};return["emailSubject","emailBody","twitterTweet","whatsappMessage","twitterIndividualOwnerTweet","twitterGroupOwnerTweet","twitterOrganisationOwnerTweet","twitterIndividualSupporterTweet","twitterGroupSupporterTweet","twitterOrganisationSupporterTweet","emailIndividualOwnerSubject","emailIndividualOwnerBody","emailGroupOwnerSubject","emailGroupOwnerBody","emailOrganisationOwnerSubject","emailOrganisationOwnerBody","emailIndividualSupporterSubject","emailIndividualSupporterBody","emailGroupSupporterSubject","emailGroupSupporterBody","emailOrganisationSupporterSubject","emailOrganisationSupporterBody"].forEach(e=>{o[e]&&(o[e]=o[e].replace(/(\[)(campaign|profile|link|url|description)(\])/g,(e,t,a)=>i[a]||""))}),o})}render(){const{theme:e,size:t,align:a,onShare:n,networks:r,url:i}=this.props,l=i||"current",c=this.resolveShareUrl(l),u=this.parseShareConfig(c,l),p=this.resolveShareValues(c,l,u),f=this.resolveNetworks(r,u);return s.a.createElement(d.a,o()({networks:f,size:t,url:c,theme:e,onShare:n,align:a,validAlignment:m},p))}}g.propTypes={networks:u.a.oneOfType([u.a.string,u.a.arrayOf(u.a.oneOf(["campaign","facebook","twitter","whatsapp","email","linkedin","link"]))]),url:u.a.string,theme:u.a.oneOf(d.d),size:u.a.oneOf(d.c),align:u.a.oneOf(m),global:u.a.object,onShare:u.a.func}},47:function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"flush",(function(){return i})),a.d(t,"hydrate",(function(){return l})),a.d(t,"cx",(function(){return s})),a.d(t,"merge",(function(){return c})),a.d(t,"getRegisteredStyles",(function(){return u})),a.d(t,"injectGlobal",(function(){return d})),a.d(t,"keyframes",(function(){return m})),a.d(t,"css",(function(){return p})),a.d(t,"sheet",(function(){return f})),a.d(t,"caches",(function(){return g}));var n=a(700),o=void 0!==e?e:{},r=Object(n.a)(o),i=r.flush,l=r.hydrate,s=r.cx,c=r.merge,u=r.getRegisteredStyles,d=r.injectGlobal,m=r.keyframes,p=r.css,f=r.sheet,g=r.caches}.call(this,a(106))},52:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),o=a.n(n),r=a(1),i=a.n(r);function l({message:e,prefix:t}){return o.a.createElement("div",{className:t+"--empty"},o.a.createElement("div",{className:"empty-message"},e))}l.propTypes={message:i.a.string,prefix:i.a.string}},53:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));a(5);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(10),s=a(3),c=a(16);const u=(e,t,a)=>`share-button share-button--${e} share-button--${t} share-button--${a}`,d=["filled","outlined","outlined-inverted","filled-inverted","monotone","monotone-inverted"],m=["icon","small","medium","large"];function p({network:e,networkName:t,theme:a,size:r,url:i,extra:p,onShare:f}){const{global:g,actions:b,integrations:h}=useRaisely(!0),{t:y,tD:v}=Object(s.d)(),_=g.user&&g.user.profiles?g.user.profiles.concat(g.user.collectiveProfiles):[],[E,k]=Object(n.useState)(!1),w=async()=>{if(p.targetProfile&&_.find(e=>e.uuid===p.targetProfile.uuid)&&!1===p.targetProfile.shared){const e=(await l.a.profiles.update({id:p.targetProfile.uuid,data:{data:{shared:!0}}})).result();b.addUserProfile(e)}h.broadcast("share",{pageType:Boolean(p.targetProfile)?"profile":"page",profileUuid:p&&p.targetProfile?p.targetProfile.uuid:null,isLoggedIn:Boolean(p.targetProfile)}),f&&f(t),e.onClick&&(e.onClick(i,p),"link"===t&&(k(!0),setTimeout(()=>k(!1),3e3)))},O=d.includes(a)?a:"outlined",S=m.includes(r)?r:"medium",T="string"==typeof t?t:"unknown",N=-1!==(""+O).indexOf("inverted"),C=E?y("Copied!"):"",x=o.a.createElement(c.a,{name:e.iconName,theme:N?"inverted":"default"}),j=o.a.createElement(o.a.Fragment,null,x,"icon"!==S&&(C||e.label)?o.a.createElement("span",{className:"share-button__label"},C||v(e.label)):C),P=e.buildUrl||(e=>e);return"function"==typeof e.onClick?o.a.createElement("button",{title:v(e.label),onClick:w,className:u(O,S,T)},j):o.a.createElement("a",{title:v(e.label),href:P(i,p),target:"_blank",onClick:w,className:u(O,S,T)},j)}p.propTypes={network:i.a.shape({label:i.a.string,iconName:i.a.string,buildUrl:i.a.func,onClick:i.a.func}),url:i.a.string,networkName:i.a.string,theme:i.a.oneOf(d),size:i.a.oneOf(m),extra:i.a.object}},56:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=a(0),i=a.n(r),l=(a(5),a(249)),s=a.n(l),c=a(13),u=a(20),d=a(160),m=a(254);const p=Object(c.e)("activity-measure");function f({measure:e,unit:t,label:a,unitLabel:n,onChange:o,onChangeUnit:l,disableUnit:f,required:g=!1,errors:b=[],touched:h=!0}){const[y,v]=Object(r.useMemo)(()=>{const e=Object(u.h)(t);if(!e)return[i.a.createElement("option",{value:t},t),[t]];const a=Object.entries(e);return[a.map(([t,a])=>i.a.createElement("option",{value:t,title:e[t]},a)),a.map(([e,t])=>({label:s()(t),value:e}))]},[t]),_=Object(r.useMemo)(()=>a||(e=>{const t=Object(u.j)(e);return["time","distance"].includes(t)?[s()(t),"("+Object(u.m)(e,2,!0)+")"].join(" "):["Amount of",Object(u.m)(e,2)].join(" ")})(t),[a,t]),E=y.length>1||!f;return i.a.createElement("div",{className:"activity-measure"},i.a.createElement("div",{className:p(e,b,"activity-measure__full "+(E?" activity-measure__full--hide-mobile":""),h)},g&&i.a.createElement(c.c,null),i.a.createElement(c.b,{label:_,id:"measure"}),i.a.createElement("div",{className:"activity-measure__full-wrap"},i.a.createElement("input",{"aria-required":g,className:"activity-measure__measure",type:"text",name:"measure",value:e,onChange:e=>o(e.target.value)}),i.a.createElement("span",{className:"activity-measure__unit"},t,E&&i.a.createElement(r.Fragment,null,i.a.createElement("i",{className:"material-icons"},"arrow_drop_down"),i.a.createElement("select",{title:n,name:"unit",value:t,onChange:e=>l(e.target.value)},y)))),i.a.createElement(c.a,{errors:b,touched:h})),E&&i.a.createElement("div",{className:"activity-measure__mobile"},i.a.createElement(m.a,{id:"measure",value:e,label:_,change:(e,t)=>o(t)}),i.a.createElement(d.a,{id:"unit",value:t,label:n,change:(e,t)=>l(t),options:v})))}var g=a(3),b=a(988),h=a(989),y=a(990),v=a(991),_=a(992),E=a(993),k=a(994),w=a(995),O=a(662),S=a(997),T=a(998),N=a(658),C=a(999),x=a(1e3),j=a(663),P=a(996),A=a(1001),D=a(21),R=a.n(D);t.a=e=>{const{tD:t}=Object(g.a)();switch(e.type){case"interval":return i.a.createElement(b.a,e);case"password":return i.a.createElement(h.a,e);case"number":return i.a.createElement(y.a,e);case"array":return i.a.createElement(v.a,e);case"boolean":return i.a.createElement(_.a,e);case"select":return i.a.createElement(d.a,e);case"textarea":return i.a.createElement(E.a,e);case"currency":return i.a.createElement(k.a,e);case"select-currency":return i.a.createElement(w.a,e);case"path":return i.a.createElement(O.a,e);case"checkbox":return i.a.createElement(S.a,e);case"date":return i.a.createElement(T.a,e);case"heading":return i.a.createElement("h3",{className:"form-heading"},t(e.default));case"rich-description":return i.a.createElement("div",{className:"form-description"},-1!==e.default.indexOf("</")?R()(e.default):R()(`<p>${e.default}</p>`));case"file":return i.a.createElement(N.a,e);case"image":return i.a.createElement(N.a,o()({},e,{isImage:!0}));case"hidden":return i.a.createElement(C.a,e);case"phone":return i.a.createElement(x.a,e);case"address":return i.a.createElement(j.a,e);case"country-select":return i.a.createElement(P.a,e);case"exercise-goal":return i.a.createElement(A.a,e);case"activity-measure":return i.a.createElement(f,e);default:return i.a.createElement(m.a,e)}};m.a,O.a,E.a,y.a,d.a,k.a,w.a,_.a,v.a,h.a,b.a,C.a,S.a,T.a,N.a,x.a,j.a,A.a,P.a},57:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m}));var n=a(0),o=a(1),r=a.n(o),i=a(89),l=a.n(i),s=a(7),c=a.n(s),u=a(8);function d(e,t){const a=useRaisely();return Object(n.useMemo)(()=>(t||function(e,t=null){return c()(e,["customFields",t],[])}(a,e)).map(e=>{const t=l()(e);if(["goal"].includes(t.id)&&t.default&&!isNaN(t.default)&&!t.converted){const e=Object(u.a)(t.default,a.campaign.currency);return t.default=e,t.converted=!0,t}return t}),[e,t])}function m({name:e,fields:t,children:a}){return("function"==typeof a?a:()=>null)(d(e,t))}m.propTypes={children:r.a.func.isRequired,name:r.a.string,fields:r.a.array}},632:function(e,t){e.exports=function(e){return e instanceof Date}},633:function(e,t,a){var n=a(176),o=a(384);e.exports=function(e){var t=n(e),a=t.getFullYear(),r=new Date(0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);var i=o(r),l=new Date(0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);var s=o(l);return t.getTime()>=i.getTime()?a+1:t.getTime()>=s.getTime()?a:a-1}},64:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a(5);var n=a(0),o=a.n(n),r=a(317);a(98);const i=new r.EventEmitter;function l(e,{mode:t,onStoreUpdate:a}={},n=o.a){const r=n.useRef(),[l,s]=n.useState(null),[c,u]=n.useState();return r.current=c,n.useEffect(()=>{const n="store"===t?i.addListener(e,(e={})=>{u(("function"==typeof a?a:e=>e)({...r.current||{},...e}))}):i.addListener(e,e=>{u(e)});return s({emit:t=>i.emit(e,t)}),()=>n.remove()},[e,t]),{channel:l,send:l&&l.emit,current:c}}function s({channelId:e,children:t,...a}){return t(l(e,a))}s.primaryChannel=i,t.a=s},657:function(e,t,a){"use strict";function n(e){["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/mode/xml/xml.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/search/search.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/search/jump-to-line.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/search/match-highlighter.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/search/matchesonscrollbar.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/search/searchcursor.min.js"].map(t=>e(t))}a.r(t),a.d(t,"default",(function(){return n}))},66:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdealBankElement=t.IbanElement=t.PaymentRequestButtonElement=t.CardCVCElement=t.CardCvcElement=t.CardExpiryElement=t.CardNumberElement=t.CardElement=t.Elements=t.injectStripe=t.StripeProvider=void 0;var n=s(a(383)),o=s(a(902)),r=s(a(287)),i=s(a(903)),l=s(a(905));function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)("card",{impliedTokenType:"card",impliedSourceType:"card",impliedPaymentMethodType:"card"}),u=(0,i.default)("cardNumber",{impliedTokenType:"card",impliedSourceType:"card",impliedPaymentMethodType:"card"}),d=(0,i.default)("cardExpiry"),m=(0,i.default)("cardCvc"),p=m,f=(0,i.default)("iban",{impliedTokenType:"bank_account",impliedSourceType:"sepa_debit"}),g=(0,i.default)("idealBank",{impliedSourceType:"ideal"});t.StripeProvider=n.default,t.injectStripe=o.default,t.Elements=r.default,t.CardElement=c,t.CardNumberElement=u,t.CardExpiryElement=d,t.CardCvcElement=m,t.CardCVCElement=p,t.PaymentRequestButtonElement=l.default,t.IbanElement=f,t.IdealBankElement=g},69:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(5),a(27);var n=a(0),o=a(3),r=a(17),i=a(21),l=a.n(i),s=a(8),c=a(311),u=a(7),d=a.n(u);const m=/(\[(donation\..+?|donor\..+?)\])/g;function p(e,t=!0){const{tD:a}=Object(o.d)(),{result:i,amount:u,currency:p,feeOptIn:f}=Object(r.b)().values,{calculatedTotal:g}=Object(r.b)();return Object(n.useMemo)(()=>{let n;i?n={...i,amount:Object(s.f)(i.feeOptIn&&t?i.amount+i.fee:i.amount,i.currency),total:Object(s.f)(i.total,i.currency),fee:Object(s.f)(i.fee,i.currency)}:g&&(n={amount:Object(s.f)(f&&t?g:u,p),total:Object(s.f)(g,p),fee:Object(s.f)(g-u,p)});const o={donation:n,donor:n},r=e&&a(e),b=Object(c.decodeHTML)(r&&r.replace(m,(e,t,a)=>d()(o,a)||"")).split(/(\r\n|\n\r|\r|\n)+/g).join("<br />");return l()(b)},[e,t,Boolean(i),g])}},70:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(47);a.d(t,"a",(function(){return r.css})),a.d(t,"c",(function(){return r.keyframes}));var i=a(704),l=Object(i.a)(r,o.a);t.b=l},71:function(e,t,a){"use strict";var n=a(103);a.d(t,"a",(function(){return n.a}))},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(5);var n=a(0);function o({form:e,stage:t,data:a,options:n={}}){return null!=a&&a.isDisabled?[()=>{}]:r[t]({form:e,data:a,options:n})}const r={user:function({form:e,data:t,options:a}){const{integrations:o}=useRaisely(!0),r=Object(n.useRef)(!0);Object(n.useEffect)(()=>{r.current?r.current=!1:o.broadcast(e+"Form.detailsCompleted",{user:null==t?void 0:t.user})},[t.user])},ticket:function({form:e,data:t}){const{integrations:a}=useRaisely(!0),o=Object(n.useRef)(null),r=Object(n.useRef)(!0);Object(n.useEffect)(()=>{r.current&&(o.current={prevTickets:t.selectedTickets},r.current=!1)},[t.selectedTickets]),Object(n.useEffect)(()=>{if(!o.current)return;const{prevTickets:n}=o.current,{selectedTickets:r,ticketTypes:i}=t,l=Object.entries(r).find(([e,t])=>n[e]!==t);if(!l)return;const[s,c]=l,u=(n[s]||0)<c?"ticketAdded":"ticketRemoved",d=i.find(e=>e.uuid===s);a.broadcast(`${e}Form.${u}`,{productName:d.name,productUuid:d.uuid,amount:d.price,currency:t.currency}),o.current={prevTickets:r}},[t.selectedTickets]);return[Object(n.useCallback)((n,o,r)=>{if(a.broadcast(e+"Form.ticketFormCompleted"),!Object.keys(n).length)return;const l=i(n,o,t.currency);a.broadcast(e+"Form.ticketsConfirmed",{value:r,currency:t.currency,items:l})},[])]},attendee:function({form:e}){const{integrations:t}=useRaisely(!0);return[Object(n.useCallback)(()=>{t.broadcast(e+"Form.attendeeDetailsCompleted")},[])]},profile:function(){const{integrations:e}=useRaisely(!0);return[Object(n.useCallback)(()=>{e.broadcast("signupForm.profileCompleted")},[])]},donation:function({form:e,data:t}){const{integrations:a}=useRaisely(!0);return[Object(n.useCallback)(n=>{a.broadcast(e+"Form.donationCompleted"),n?a.broadcast(e+"Form.donationAdded",{amount:n,currency:t.currency}):a.broadcast(e+"Form.donationSkipped")},[])]},giftAid:function({form:e,data:t}){const{integrations:a}=useRaisely(!0),o=Object(n.useRef)(!0);Object(n.useEffect)(()=>{if(o.current)return void(o.current=!1);const n=`${e}Form.giftAid${t.giftAid?"Checked":"Unchecked"}`;a.broadcast(n)},[t.giftAid])},payment:function({form:e,data:t}){const{integrations:a,global:o}=useRaisely(!0);Object(n.useEffect)(()=>{t.promoCode&&a.broadcast(e+"Form.promoCodeAdded",{code:t.promoCode})},[t.promoCode]);return[Object(n.useCallback)((t,n,r)=>{const{tickets:l,promoCode:s,donationAmount:c}=t,u=(null==r?void 0:r.currency)||o.campaign.currency,d=i(l,n,u);c&&d.push({productUuid:"donation",productName:"donation",currency:u,amount:c,type:"DONATION",quantity:1}),a.broadcast(e+"Form.formSubmitted",{value:(null==r?void 0:r.amount)||0,currency:u,coupon:s,payment_type:null==r?void 0:r.methodType,items:d})},[])]}};function i(e=[],t,a){const n=[];return Object.entries(e).forEach(([e,o])=>{if(!o)return;const{price:r,name:i}=t.find(t=>t.uuid===e),l={productUuid:e,productName:i,type:"TICKET",amount:r,currency:a,quantity:o};n.push(l)}),n}},76:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(3),s=a(35),c=a(15),u=a(22),d=a(28);t.a=function({onBack:e,onSubmit:t,actionText:a,disabled:n,isSubmitting:r=!1,hideNext:m=!1}){var p;const{t:f,tD:g}=Object(l.d)(),{step:b,values:h,joinTeamEnabled:y,joinOrgEnabled:v}=Object(c.b)(),_=(b>0||!(null!==(p=h.profile)&&void 0!==p&&p.parentPreSelected)&&(y||v))&&!h.disableBack;return i.a.createElement(s.a,{className:"signup-form__nav"},_&&i.a.createElement(s.a.BackBtn,o()({className:"back in-form--back"},e?{onClick:e}:{}),i.a.createElement(d.Icon,{name:"chevron_left",size:"small","aria-hidden":!0}),i.a.createElement("span",{className:"visually-hidden"},f("Back"))),!m&&i.a.createElement(s.a.NextBtn,{className:"next in-form--next",onClick:t,disabled:n},i.a.createElement(u.d,{isTransitioning:r}),g(a)||f("Next")))}},77:function(e,t,a){"use strict";a.r(t),a.d(t,"generateId",(function(){return y})),a.d(t,"getFieldById",(function(){return v})),a.d(t,"mapPropsToValues",(function(){return k})),a.d(t,"processDefaultValue",(function(){return w})),a.d(t,"conditionalLogic",(function(){return T})),a.d(t,"validate",(function(){return N})),a.d(t,"filterValuesFromFields",(function(){return C}));a(63),a(27),a(5);var n=a(123),o=a(23),r=a.n(o),i=a(7),l=a.n(i),s=a(44),c=a.n(s),u=a(650),d=a.n(u),m=a(30),p=a.n(m),f=a(10),g=a(3),b=a(14),h=a(43);const y=({id:e,core:t,confidential:a,private:n})=>{if(t)return e;if(!e)return e;const o=n||a?"private":"public",r=e.split(".");return r.splice(r.length-1,0,o),r.join(".")},v=(e,t)=>e.find(e=>e.id===t),_=e=>null==e?"":"string"==typeof e?e.trim():""+e,E=/({{(.*?)}})/,k=e=>{const t=p()(e.values),a=window.location.href.split("?")[1],n=a?r.a.parse(a.split("#")[0]):{},o=c()(e,"global.current.profile"),i=c()(e,"global.campaign.profile");return e.fields.forEach(a=>{var r;const s=y(a);if(c()(e.values,s)&&null!==e.values[s])return;if(!a.default)return void("checkbox"===a.type&&t.set(s,!1));const u=(e=>{let t=null;return e.replace(E,(e,a,n)=>(t=n,"")),t})(a.default);let d=a.default;if(!u)return"checkbox"===a.type&&"true"===d&&(d=!0),void t.set(s,d);if(u.startsWith("profile."))o?d=l()(e,"global.current."+u,""):i&&(d=l()(e,"global.campaign."+u,""));else if(u.startsWith("user.")&&null!==(r=e.global)&&void 0!==r&&r.userAuthAttempted||u.startsWith("campaign."))d=l()(e,"global."+u,"");else{let e=null;a.default.replace(/{{(\$root\.query|query)\.(.+)}}/,(t,a,n=null)=>{e=n}),e&&(d=n[e]||"")}const m=a.default.replace(E,()=>d);t.set(s,""===m?null:m)}),t.value()},w=(e,t)=>k({values:{},fields:[{name:"$",private:!1,core:!0,default:e}],global:t}),O=d()(async(e,t,a,o)=>{const r=y(e),i=Object(n.a)(t,r);let l=null;try{const e=await f.a.utils.profileUrl.get({query:{campaignUuid:o||window.campaignData.uuid,name:Object(n.a)(t,"name"),url:i}}),{available:a}=e.body().data();a&&(l=!0)}catch(e){l=!1}l||(c()(a,r)||(a[r]=[]),a[r].push("Sorry, that page URL is already taken. Please choose another one."))},250);function S(e,t){if(!t.field)return!0;if(!t.value&&!["exists","notexists","checked","notchecked"].includes(t.comparison))return!0;const a=e=>{const t=new Date,a=new Date(e);let n=t.getFullYear()-a.getFullYear();const o=t.getMonth()-a.getMonth();return(o<0||0===o&&t.getDate()<a.getDate())&&(n-=1),n};switch(t.comparison){case"eq":return e===t.value;case"ne":return e!==t.value;case"gt":return e>t.value;case"lt":return e<t.value;case"exists":return!!e;case"notexists":return!e;case"checked":return"true"===e;case"notchecked":return"true"!==e;case"ageLt":return e&&e instanceof Date&&a(e)<t.value;case"ageGt":return e&&e instanceof Date&&a(e)>t.value;case"dateLt":return e<new Date(t.value);case"dateGt":return e>new Date(t.value);case"contains":return e&&e.toString().toLowerCase().includes(t.value.toString().toLowerCase());default:return!1}}const T=(e,t,a)=>{const n="function"==typeof a,o=[];return e.forEach(e=>{if(!e.rules||!e.rules.conditions||0===e.rules.conditions.length)return o.push(e),!0;const r=[];e.rules.conditions.forEach(o=>{let i=l()(t,o.field);if("string"==typeof i&&(i=i.toLowerCase(),isNaN(i)||(i=parseFloat(i))),"string"==typeof o.value&&(o.value=o.value.toLowerCase(),isNaN(o.value)||(o.value=parseFloat(o.value))),"boolean"==typeof i&&(i=i.toString()),"boolean"==typeof o.value&&(o.value=o.value.toString()),n){const n=a({value:i,condition:o,test:S,field:e,values:t});if("boolean"==typeof n)return void r.push(n)}r.push(S(i,o))});const i=r.filter(e=>e).length;"all"===e.rules.match&&i===r.length&&o.push(e),"any"===e.rules.match&&i>0&&o.push(e)}),o},N=async(e,t)=>{const{t:a,tD:o}=Object(g.a)(),r={},i=[],s=T(t.fields,e,t.handleCustomConditions),u=e.currency;try{s.forEach(d=>{var m;const p=y(d),f=Object(n.a)(e,p);if("boolean"!=typeof d.active||!1!==d.active){if("custom"===d.type&&"function"==typeof d.validate&&d.validate(p,s,e,r),"date"===d.type&&f instanceof Error)return c()(r,p)||(r[p]=[]),void r[p].push(f.message?o(f.message):a("Please enter a valid date"));if(d.required||null!=f&&""!==f){if(d.required)switch(d.type){case"checkbox":!0!==f&&(c()(r,p)||(r[p]=[]),r[p].push(a("This field is required")));break;case"address":{const o=["user"===t.formType?"address1":p+"Address1","user"===t.formType?"suburb":p+"Suburb","user"===t.formType?"postcode":p+"Postcode","user"===t.formType?"country":p+"Country"];let i=!1;o.forEach(t=>{const o=Object(n.a)(e,t);_(o)||(c()(r,t)||(r[t]=[]),r[t].push(a("This field is required")),i=!0)}),i&&(c()(r,p)||(r[p]=[]),r[p].push(a("This field is required")));break}default:_(f)||(c()(r,p)||(r[p]=[]),r[p].push(a("This field is required")))}switch(d.type){case"currency":let n,o;if(l()(d,"config.minimum",!1)&&(n=Math.ceil(Object(b.b)(d.config.minimum,d.config.maxMinCurrency,u))),l()(d,"config.maximum",!1)&&(o=Math.ceil(Object(b.b)(d.config.maximum,d.config.maxMinCurrency,u))),/^-?\d*\.?\d*$/g.test(f)){if(d.config&&l()(d,"config.minimum",!1)&&f<n&&(null===(m=d.options)||void 0===m||!m.minimumValue)){c()(r,p)||(r[p]=[]);const e=l()(t,"global.campaign.currency",!1);if(e){const{symbol:t,zeroDecimal:o}=h[e],i=o?Number(n):Number(n)/100;r[p].push(a(`Please enter an amount above ${t}${i}`))}else r[p].push(a("Please enter a larger dollar amount"))}else if(d.config&&l()(d,"config.maximum",!1)&&f>o){c()(r,p)||(r[p]=[]);const e=l()(t,"global.campaign.currency",!1);if(e){const{symbol:t,zeroDecimal:n}=h[e],i=n?Number(o):Number(o)/100;r[p].push(a(`Please enter an amount below ${t}${i}`))}else r[p].push(a("Please enter a smaller dollar amount"))}}else c()(r,p)||(r[p]=[]),r[p].push("Please enter a dollar amount");break;case"number":/^[0-9]*$/g.test(f)||l()(d,"config.allowDecimal")||(c()(r,p)||(r[p]=[]),r[p].push(a("Please enter a whole number")));break;case"email":!f||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(f)&&-1===f.indexOf("..")||(c()(r,p)||(r[p]=[]),r[p].push(a("Please enter a valid email address")));break;case"path":if(/[^A-Za-z0-9-]/g.test(f))c()(r,p)||(r[p]=[]),r[p].push(a("Sorry, your page URL can only be letters, numbers and hyphens."));else{if(t.comparePathTo&&t.comparePathTo===f){c()(r,p)||(r[p]=[]),r[p].push(a("Your page URL must not match the one you previously specified."));break}const{campaignUuid:n}=t;i.push(O(d,e,r,n))}break;case"password":{const e=d.minLength||6;f&&f.length<e&&(c()(r,p)||(r[p]=[]),r[p].push(a("Your password needs to be at least [[length]] characters",{length:e})));break}}if(c()(d,"compare")){const o=v(t.fields,d.compare),i=Object(n.a)(e,y(o));o&&f!==i&&(c()(r,p)||(r[p]=[]),r[p].push(a("This value needs to match '[[label]]' field",{label:o.label})))}if(c()(d,"compareDuplicate")){const o=v(t.fields,d.compareDuplicate),i=Object(n.a)(e,y(o));o&&f===i&&(c()(r,p)||(r[p]=[]),r[p].push(a("This value needs to match '[[label]]' field",{label:o.label})))}if(c()(d,"validations")&&d.validations.forEach(({regex:e,message:t})=>{new RegExp(...e).test(f)||(c()(r,p)||(r[p]=[]),r[p].push(o(t)))}),d.validation)try{new RegExp(d.validation).test(f)||(c()(r,p)||(r[p]=[]),r[p].push(a("This field doesn't look right")))}catch(e){}if(d.validateFunction)try{d.validateFunction(f,d,u)}catch(e){"string"==typeof e?(c()(r,p)||(r[p]=[]),r[p].push(e)):console.log(e)}}}}),i.length&&await Promise.all(i)}catch(e){throw console.error("Raisely validation error",e),e}if(Object.keys(r).length)throw r};function C(e,t){const a=Array.isArray(t)?t:[];if(!a.length)return e;const n=p()(e);a.forEach(e=>{["rich-description","heading"].includes(e.type)&&(e.core?n.del([e.id]):e.private?n.del(["private",e.id]):n.del(["public",e.id]))});const o=n.value();return["public","private"].forEach(e=>{o[e]&&0===Object.keys(o[e]).length&&delete o[e]}),o}},78:function(e,t,a){"use strict";a.d(t,"b",(function(){return N})),a.d(t,"a",(function(){return C})),a.d(t,"c",(function(){return x}));a(5);var n=a(0),o=a(96),r=a.n(o),i=a(10),l=a(59),s=a(672);const c=["en_US","ar_EG","de_DE","nl_NL","fr_FR","pt_BR","zh_CN","cs_CZ","da_DK","ru_RU","fi_FI","el_GR","hu_HU","id_ID","he_IL","it_IT","ja_JP","no_NO","pl_PL","pt_PT","sk_SK","ko_KR","es_ES","sv_SE","th_TH"],u=(e,t)=>{const a=parseInt(t.feeFixed+Math.round(e*t.feePercent),10);return t.feeMax&&a>t.feeMax?t.feeMax:a};class d extends Error{constructor(e,t){super(e),this.errorDetailsObject=t}}let m=null;const p=Object(s.a)(1);function f({currency:e,paypalProvider:t,isLive:a}){return p(async()=>{let n="",o="";var r,i,s,u;t.accountId?(o="merchant-id="+t.accountId,n=a?"AQcuISwJA9t6KjaE0Wm4AnZwigOMxbbrO30TzIyZ6zN5Nq1Cj_ksyE9OLHyrWcgyBAp5x8XjjDNNOqjR":"AUUwDCofoqNVQbgJmui4iIEfRw8iPqxn6iMPlpvZ_gZ0gr7UL4YM-jqcVtGOfQ0AQ2uMGhqmLOcGyMo8"):n=a?(null===(r=t.data)||void 0===r?void 0:r.liveClientId)||(null===(i=t.public)||void 0===i?void 0:i.liveClientId):(null===(s=t.data)||void 0===s?void 0:s.testClientId)||(null===(u=t.public)||void 0===u?void 0:u.testClientId);const d=`${n}-${e}`;if(m===d)return d;m&&(Object(l.b)(m),Object.keys(window).forEach(e=>{/paypal|zoid|post_robot/.test(e)&&delete window[e]})),m=d;const p=(()=>{let e;return window.detectedLang&&(e=c.find(e=>e.startsWith(window.detectedLang))),e?"&locale="+e:""})();return await Object(l.a)(`https://www.paypal.com/sdk/js?${o}&client-id=${n}&currency=${e}${p}`,null,d),d})}function g(e,t,a,o){const r=useRaisely(),[l,s]=Object(n.useState)(m),c=Object(n.useRef)(null),p=e=>{c.current=e},g="LIVE"===r.campaign.mode,b=/MicroMessenger/i.test(navigator&&navigator.userAgent);async function h(e=null){const t=e&&{status:"CANCELLED",message:e};await i.a.donations.cancel.create({id:c.current,data:{data:{result:t}}}),console.log("Paypal Donation cancelled",c.current),p(null)}return Object(n.useEffect)(()=>{e&&!b&&f({paypalProvider:e,currency:o.currency.toUpperCase(),isLive:g}).then(e=>s(e))},[e,g,o,b]),{paypalDonationUuid:c.current,paypalScriptLoaded:l,setPaypalPaymentUuid:p,setUpPaypalPayment:async function(e,n,o){const l=function(e,t,a,n,o){var r,i;const l={currency:(null==t?void 0:t.currency.toUpperCase())||(null==n?void 0:n.currency.toUpperCase()),campaignUuid:null===(r=e.campaign)||void 0===r?void 0:r.uuid,profileUuid:a,type:"ONLINE",method:"PAYPAL",gatewayVersion:null!=o&&o.accountId?"connect":"v2",total:n.total,amount:n.amount,anonymous:t.anonymous,items:[],interval:"ONCE",count:1,isExpress:0===t.step,...t.details,public:t.details.public,private:t.details.private};if(null===(i=n.raiselyOptIn)||void 0===i||!i.customFee)return l.feeOptIn=t.feeOptIn,l.fee=t.feeOptIn?u(t.amount,n.raiselyOptIn):0,l;if(t.feeOptIn){const e=u(t.amount,n.raiselyOptIn);l.feeOptIn=!1,l.fee=0,l.amount=t.amount+e,n.raiselyOptIn.includeInTotals||(l.items=[...l.items||[],{amount:e,description:"Fee",includeInTotals:!1,type:"OTHER"}]),l.public={...t.public||{},customFee:!0,customFeeAmount:e}}else l.fee=0,l.public={...t.public||{},customFee:!1,customFeeAmount:0};return l}(r,e,t,n,o);if(!l.total)throw new d("No value passed to payment");const{paymentUuid:s,paypalOrderId:c}=await async function(e){var t,n,o;const r=a?await a.awaitSolution():null;let l,s,c;try{l=await i.a.donations.create({data:e,challengeSolution:r})}catch(e){var u,m;throw a&&(null==a||a.reset({startNow:!0})),new d(null==e||null===(u=e.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.detail,e)}if(null===(t=l)||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.data)||void 0===o||!o.uuid)throw new Error("Unexpected error has occurred - Valid response is missing from Raisely");return l&&(s=l.data.data.uuid,c=l.data.data.token,a&&(null==a||a.reset())),{paymentUuid:s,paypalOrderId:c}}(l);return{createPaypalId:c,paymentUuid:s}},processPaypalPayment:async function(e,t){var a;let n;try{n=(await i.a.donations.confirm.create({id:c.current,data:{data:{orderId:t.data.orderID,payerId:t.data.payerID}}})).data}catch(e){var o,r;throw new Error(null==e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.detail)}return{result:n.data,token:null===(a=n.token)||void 0===a?void 0:a.token}},cancelPaypalPayment:h,handlePaypalError:async function(e,t){const{error:a}=e,n=(null==a?void 0:a.message)||(null==a?void 0:a.detail)||(null==a?void 0:a.error);return t&&c.current&&h(n),function(e){try{return e.includes("No value passed to payment")||/Please donate.+or more/.test(e)?e:e.includes("Cannot read property 'feeFixed' of undefined")?"No donation amount selected":e.includes("CURRENCY_NOT_SUPPORTED")?"Your currency is not supported":e.includes("Client Authentication failed")||e.includes("INVALID_EXPERIENCE_PROFILE_ID")?"PayPal configuration is incorrect":"An unexpected error has occurred. If your PayPal account has been charged, it is not necessary to try again."}catch(e){return console.log(e),"An unexpected error has occurred. If your PayPal account has been charged, it is not necessary to try again."}}(n)}}}a(63);var b=a(7),h=a.n(b),y=a(54),v=a(8),_=a(673),E=a.n(_);async function k(e,t=!1){const a=await e.canMakePayment();if(!a)return null;const{googlePay:n,applePay:o}=a;return{paymentRequest:e,instantMethods:{googlePay:n,applePay:!t&&o,browserPay:!1}}}function w(e,t,a,o,r){const{integrations:l,global:s}=useRaisely(!0),c="LIVE"===s.campaign.mode,u=null==e?void 0:e.accountId,d=Object(n.useMemo)(()=>{if(!u)return null;const e=window.stripeLoaded;return new Promise((t,a)=>{e.then(()=>{console.log("Initialising stripe, accountId",u);try{const e=window.Stripe(c?"pk_live_IuO9apxOM1AclLg9TOTxjUS0":"pk_test_F4jZ0EjLCG6xXvdpqjGyUiSv",{stripeAccount:u,locale:window.detectedLang||"en"});t(e)}catch(e){a(e)}})})},[c,u]);async function m({pendingDonationResult:e,isSubscription:t,elements:a,paymentMethodResult:n,paymentRequest:l,donationIntent:s,billingDetails:c}){const u=await d;let m;const p=e.providerUser.setupSecret,f=p.startsWith("pi_"),{stripeMethod:g,resultKey:b}={stripeMethod:f?u.confirmCardPayment:u.confirmCardSetup,resultKey:f?"paymentIntent":"setupIntent"},h=t?i.a.subscriptions.confirm.create:i.a.donations.confirm.create,v=["APPLE_PAY","GOOGLE_PAY","BROWSER_PAY"].includes(e.methodType);if(s&&!v)m=t?await u.confirmSetup({elements:a,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:c}},redirect:"if_required"}):await u.confirmPayment({elements:a,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:c}},redirect:"if_required"});else{const e=a&&(a.getElement(y.CardNumberElement)||a.getElement(y.CardElement)),t={payment_method:n?n.paymentMethod.id:{card:e}};m=await g(p,t,{handleActions:!1})}if(m.error)return l&&n.complete("fail"),{result:null,error:m.error};if(l&&n.complete("success"),"requires_source_action"===m[b].status){const{error:e}=await u.confirmCardPayment(p);if(e)return{result:null,error:e}}if(o)return;let _;try{_=(await h({id:e.uuid})).result()}catch(e){if(t)throw s&&r({forceCreate:!0}),e;const a=new Error("An unexpected error has occurred but your donation was successful.",{cause:"raiselyConfirm"});throw a.apiData={...e.errorData},a}return{donationResult:_,stripeResult:m[b]}}return{stripePromise:d,processStripePayment:async function(e,{paymentRequest:n,elements:r,optInAmount:c,raiselyOptIn:u,disableAnalytics:d}){const p=this.donationIntent;let f;try{var g,b,y;n&&(l.broadcast("donation.walletOpened",{formUuid:e.formUuid,amount:e.amount,currency:e.currency,methodType:e.methodType}),f=await async function({paymentRequest:e}){return await new Promise((t,a)=>{e.on("paymentmethod",t),e.on("cancel",()=>{const e=new Error("User cancelled payment");e.isUserCancel=!0,e.code="user_cancelled",a(e)})})}(n));const{details:_}=e,k=((null==n?void 0:n.instantMethods.applePay)?"APPLE_PAY":(null==n?void 0:n.instantMethods.googlePay)&&"GOOGLE_PAY")||["APPLE_PAY","GOOGLE_PAY","CARD","DD_BACS","DD_BECS","DD_SEPA","DD_ACH","DD_CA"].includes(e.methodType)&&e.methodType||"CARD";if(!d){const t=n?"donation.walletSubmitted":"donation.paymentDetailsEntered";l.broadcast(t,{formUuid:e.formUuid,amount:e.amount,currency:e.currency,methodType:e.methodType})}let w;null!==(g=f)&&void 0!==g&&g.payerName&&Object(v.k)(f.payerName)&&(w=f.payerName.trim().split(" "),w=w.filter(Boolean));let O,S="STRIPE_INTENT";switch(e.methodType){case"DD_BACS":O=E()().businessAdd(5,"days")}const T={amount:e.amount+e.additionalAmount,currency:e.currency,type:"ONLINE",method:S,methodType:k,anonymous:e.anonymous,feeOptIn:e.feeOptIn||!1,campaignUuid:s.campaign.uuid,profileUuid:t,idempotencyKey:e.idempotencyKey,items:e.items||[],isExpress:0===e.step,public:e.public,private:e.private,..._,email:_.email||(null===(b=f)||void 0===b?void 0:b.payerEmail),fullName:_.fullName,preferredName:_.preferredName,lastName:_.lastName||(_.firstName?null:w&&w.pop()),firstName:_.firstName||w&&w.join(" ")||(null===(y=f)||void 0===y?void 0:y.payerName),...p&&{token:p.id},...O&&{nextPayment:O}},N=function(e){const t={name:e.fullName||e.firstName+" "+e.lastName,email:e.email,address:{}};e.country&&(t.address.country=e.country);e.address1&&e.suburb&&e.state&&e.postcode&&(t.address.line1=e.address1,t.address.line2=e.address2,t.address.city=e.suburb,t.address.state=e.state,t.address.postal_code=e.postcode);return t}(T);null!=u&&u.customFee&&T.feeOptIn?(T.fee=0,T.feeOptIn=!1,T.amount+=c,null!=u&&u.includeInTotals||(T.items=[...T.items||[],{amount:c,description:"Fee",includeInTotals:!1,type:"OTHER"}]),T.public={...T.public||{},customFee:!0,customFeeAmount:c}):T.feeOptIn&&(T.fee=c);const C="ONCE"!==e.interval;C&&(T.interval=e.interval,T.count=e.count);const x=C?i.a.subscriptions.create:i.a.donations.create,j=await a.awaitSolution();if(o)return T._forRegistration=!0,T.isExpress=!1,void await o({data:T,processSCADonation:async e=>await m({pendingDonationResult:e.data,isSubscription:C,elements:r,paymentMethodResult:f,paymentRequest:n,donationIntent:p,billingDetails:N}),preferSCAMode:!0});const{token:P,data:A}=(await x({data:T,challengeSolution:j})).data,{donationResult:D,stripeResult:R,error:F}=await m({pendingDonationResult:A,isSubscription:C,elements:r,paymentMethodResult:f,paymentRequest:n,donationIntent:p,billingDetails:N});return F?(f&&f.complete("fail"),C&&s.user&&await i.a.subscriptions.update({id:A.uuid,data:{data:{status:"FAILED",error:F.message,errorStack:F,declineCode:F.code,failedAt:new Date}}}),{error:F}):(C&&["email","firstName","lastName","preferredName","fullName"].forEach(e=>{D[e]=T[e]}),{donationResult:D,result:R,error:null,tempToken:P,profileName:e.name||h()(s.current.profile,"name",s.campaign.profile.name)})}catch(e){var _,k;if(f)return f.complete("fail"),{error:{message:(null===(_=e.response)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.detail)||e.message}};throw e}},setupExpressPaymentRequest:k}}var O=a(48);const S=e=>t=>t.providerType===e,T=e=>({stripeProvider:e&&e.find(S("STRIPE")),paypalProvider:e&&e.find(S("PAYPAL"))}),N=()=>r()();function C(e,t,a,o,r,l,s,c){const{campaign:u}=useRaisely(),[d,m]=Object(n.useState)(null),[p,f]=Object(n.useState)(!1),[b,h]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1),{selectedProviders:_,isPaymentRoutingReady:E,isLoading:k,setIsLoading:S,hasRouting:N,routingError:C}=function(e,t,a,o){const{campaign:r}=useRaisely(),[l,s]=Object(n.useState)(!0),[c,u]=Object(n.useState)(null),[d,m]=Object(n.useState)(null),p=Object(n.useRef)(null==a?void 0:a.amount),[f,g]=(r.mode,Object(n.useState)(!0)),b=[...a.items||[]];return o&&b.push({amount:o,type:"REGISTRATION",includeInTotals:!1,description:"Registration Fee"}),Object(n.useEffect)(()=>{if(!f)return;if(p.current!==(null==a?void 0:a.amount))return void(p.current=null==a?void 0:a.amount);const n={...(null==a?void 0:a.details)||{},currency:a.currency,items:b};delete n.password,s(!0);let o=!0;if(t)n.profile=t;else if(e)n.profileUuid=e;else{o=!1;const e=new Error("Donation form has not been supplied a profileUuid or profile for payment routing");console.error(e),m(e),window.raiselyReportError&&window.raiselyReportError(e,{isCriticalComponent:!0})}r.mock||o&&async function(){let e=2,t=!1;do{try{const e=await i.a.campaigns.providers.select({id:r.uuid,data:n});m(null);const t=e.result(),a=T(t);u(a),s(!1);const o=e.body().data();g(o.totalProviders!==t.length)}catch(a){console.error(a),404===a.status?u(T(null)):(t=!0,1===e&&(m("Sorry. There is a problem taking payments. Please try refreshing your browser. If the problem persists please contact us"),window.raiselyReportError&&window.raiselyReportError(a,{isCriticalComponent:!0})))}e--}while(e&&t)}()},[e,JSON.stringify(t),a.amount,a.currency,a.details]),{selectedProviders:c||{},isPaymentRoutingReady:null!==c,isLoading:l,setIsLoading:s,hasRouting:f,routingError:d}}(e,t,a,r);!function(e,t,a,o,r,i,l,s,c){var u,d,m,p;const{campaign:f}=useRaisely(),g=Object(n.useRef)(null==l||null===(u=l.stripeProvider)||void 0===u?void 0:u.uuid);Object(n.useEffect)(()=>{var n,u;Boolean(null==l?void 0:l.stripeProvider)&&((null===(n=f.config)||void 0===n||null===(u=n.payments)||void 0===u?void 0:u.directDebitEnabled)||e)&&!i&&"payment"===t.stepName&&!s&&(a||(r(!0),o&&g.current!==l.stripeProvider.uuid?(c({forceCreate:!0}),g.current=l.stripeProvider.uuid):c()))},[e,a,o,t.stepName,null==l||null===(d=l.stripeProvider)||void 0===d?void 0:d.uuid,null===(m=f.config)||void 0===m||null===(p=m.payments)||void 0===p?void 0:p.directDebitEnabled])}(c,a,k,N,S,o,_,y,e=>P(e));const x=Object(O.c)("donation",u)[2];Object(n.useEffect)(()=>x.destroy(),[]);const j=Object(n.useRef)(),P=async({forceCreate:e=!1,forceUpdate:t=!1}={})=>{if(null!=_&&_.stripeProvider){var n;const y=(null==d?void 0:d.interval)!==(null==a?void 0:a.interval)||(null==d?void 0:d.email)!==(null==a||null===(n=a.details)||void 0===n?void 0:n.email)||(null==d?void 0:d.currency)!==(null==a?void 0:a.currency)||e,E=j.current!==l,k=!y&&(E||t);if(k||y){f(!0);const e=await x.awaitSolution();y&&null!=d&&d.id&&m(null);try{var o,r,c,p;const t=await async function(e,t){return t.shouldCreateIntent?await i.a.campaigns.donations.createStripeDonationIntent({id:e,data:t}):await i.a.campaigns.donations.updateStripeDonationIntent({id:e,data:t})}(u.uuid,{email:null==a||null===(o=a.details)||void 0===o?void 0:o.email,firstName:null==a||null===(r=a.details)||void 0===r?void 0:r.firstName,lastName:null==a||null===(c=a.details)||void 0===c?void 0:c.lastName,providerUuid:null==_||null===(p=_.stripeProvider)||void 0===p?void 0:p.uuid,amount:l,currency:null==a?void 0:a.currency,interval:null==a?void 0:a.interval,...d&&{id:d.id},challengeSolution:e,shouldCreateIntent:y});if(f(!1),t.data&&y){var g;const e=Object.assign(t.data.data,{email:null==a||null===(g=a.details)||void 0===g?void 0:g.email,interval:null==a?void 0:a.interval,currency:null==a?void 0:a.currency});m(e)}h(k)}catch(e){var b;s(null===(b=e.errorData)||void 0===b?void 0:b.message),v(!0)}}}else s("No Stripe Provider available for receiving payments from Stripe Payment Elements");j.current=l,S(!1)},A=g(_.paypalProvider,e,x,a),D=w(_.stripeProvider,e,x,o,P),R=()=>{d&&m(null)};return Object(n.useMemo)(()=>({routingError:C,isLoading:k,hasRouting:N,campaignStripeProvider:_.stripeProvider,campaignPaypalProvider:_.paypalProvider,noAvailableProviders:Boolean(E&&!_.stripeProvider&&!_.paypalProvider),onlySupportsPaypal:Boolean(E&&_.paypalProvider&&!_.stripeProvider),...D,...A,friendlyChallenge:x,donationIntent:d,createOrUpdateDonationIntent:P,clearDonationIntent:R,isUpdatingDonationIntent:p,donationIntentUpdated:b,setDonationIntentError:v}),[a,N,C,k,A.paypalDonationUuid,A.paypalScriptLoaded,_,d,p,b])}function x(e,t={}){const{profile:a,teamProfile:n,organisationProfile:o,teamProfileUuid:r}=t;if(!a)return;const i={...a};if(n)i.parent=n;else if(o)i.parent=o;else if(!i.parentUuid){var l;i.parentUuid=r||(null==e||null===(l=e.profile)||void 0===l?void 0:l.uuid)}return i}},8:function(e,t,a){"use strict";a.d(t,"j",(function(){return $})),a.d(t,"p",(function(){return q})),a.d(t,"f",(function(){return G})),a.d(t,"a",(function(){return z})),a.d(t,"h",(function(){return Y})),a.d(t,"u",(function(){return W})),a.d(t,"m",(function(){return Z})),a.d(t,"q",(function(){return K})),a.d(t,"o",(function(){return J})),a.d(t,"i",(function(){return Q})),a.d(t,"t",(function(){return X})),a.d(t,"e",(function(){return ee})),a.d(t,"n",(function(){return te})),a.d(t,"b",(function(){return ae})),a.d(t,"s",(function(){return ne})),a.d(t,"k",(function(){return oe})),a.d(t,"v",(function(){return re}));a(27),a(63),a(5);var n=a(21),o=a.n(n);a.d(t,"l",(function(){return o.a}));var r=a(51),i=a.n(r),l=a(7),s=a.n(l),c=a(60),u=a.n(c),d=a(46),m=a.n(d),p=a(250),f=a.n(p),g=a(98),b=a.n(g),h=a(251),y=a.n(h),v=a(387),_=a.n(v),E=a(119),k=a.n(E),w=a(50),O=a.n(w),S=a(646),T=a.n(S),N=a(30),C=a.n(N),x=a(181),j=a(24),P=a.n(j),A=a(23),D=a.n(A),R=a(43);a.d(t,"c",(function(){return R}));var F=a(14);a.d(t,"w",(function(){return F.b}));var I=a(59),M=a(388),L=a(20);a.d(t,"g",(function(){return L.g}));var B=a(61),U=a(3),H=a(6),V=a(77);function $(e,t,a){return t===a?e:Object(F.b)(e,t,a,!0)}function q(e){return Promise.resolve({body:()=>({data:()=>({data:e,pagination:{total:e.length},mock:!0})}),result:()=>e})}function G(e,t=null,a={}){const n=a.displayCurrencyCodeSuffix||!1,o=a.displayDollarPrefix||!1,r=R[t];if(!r)return"";const i=r.zeroDecimal?Math.round(e):function(e,t={}){const a=""+(e/100).toFixed(2);return t.showFull?a:t.hideCents?a.split(/\.\d\d$/)[0]:a.split(/\.00$/)[0]}(e,a);if(a.raw)return i;const l=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(i);return`${o&&"$"==r.symbol?r.code.substring(0,2):""}${r.symbol||""}${l} ${!r.symbol||n?r.code:""}`.trim()}function z(e,t=null){const a=R[t];if(!a)return console.warn(`currency ${t} is not recognized`),"";return a.zeroDecimal?e:function(e){return(100*e).toFixed(0)}(e)}function Y(e,t){const a=e.filter(e=>e.campaignUuid===t).sort((e,t)=>(e.type===H.h.group)-(t.type===H.h.group)).sort((e,t)=>(e.type===H.h.organisation)-(t.type===H.h.organisation));return a.length?a[0]:null}function W(e,t,a=null){const n=["string","boolean","number"],o=(a||Object.keys(t)).filter(e=>{const a=t[e];return null===a||n.includes(typeof a)});let r=o.length,i=null;for(;r--;)if(i=o[r],e[i]!==t[i]&&!Number.isNaN(t[i]))return!0;return!1}a.d(t,"r",(function(){return V.processDefaultValue}));const Z=e=>""!==e&&!Number.isNaN(Number(e)),K=e=>e.trim().replace(/\s+/g," "),J=i()((e,t,a,n)=>{const o=!n.touched.path&&["name"].includes(t),r=!s()(n.touched,"teamProfile.path")&&["teamProfile.name"].includes(t);o&&n.setFieldValue("path",u()(e.name).replace(/[-]/g,""),!1),r&&n.setFieldValue("teamProfile.path",u()(e.teamProfile.name).replace(/[-]/g,""),!1)},300);function Q(e){return Array.isArray(e)?Object.assign({},...e.map(e=>{const t=e.field.replace("profile.","");return"matches"===e.condition?{[t+"GTE"]:e.filter,[t+"LTE"]:e.filter}:{[`${t}${e.condition}`]:e.filter}})||{}):{}}const X=(e,t,a,n={})=>{const{t:o}=Object(U.a)(),r=a||{};if("custom"===t)return[n.total,n.goal,n.total/n.goal*100,n.unit];const i={total:"total",goal:"goal"};let l=t=>G(t,e.currency,{hideCents:!0,displayDollarPrefix:n.displayDollarPrefix}),s=n&&n.label||o("raised");if("activityTotal"===t){i.total="activityTotal",i.goal="exerciseGoal";const e=r.unit||"m",t=Object(L.k)(e)&&"ft"!==e?2:0;l=a=>Object(L.c)(a,e,{precision:t}),s=Object(L.g)(r.type)}else if("exerciseTotal"===t){i.total="exerciseTotal",i.goal="exerciseGoal";const e=r.unit||"m",t=Object(L.k)(e)&&"ft"!==e?2:0;l=a=>Object(L.c)(a,e,{precision:t}),s=Object(L.g)(r.type)}else if("exerciseTotalTime"===t){i.total="exerciseTotalTime",i.goal="exerciseGoalTime";const e=r.unit||r.timeUnit||"hr";l=t=>Object(L.c)(t,e,{precision:0}),s=Object(L.g)(r.type)}const c=e[i.total],u=e[i.goal],d=null!==c&&null!==u&&c/u*100;return[null!=c&&l(c),null!=u&&l(u),d,s,c,u]};function ee(e,t,a={}){const{unit:n}=Object(L.f)(t.config),o=Object(L.k)(n)&&"ft"!==n?2:0;return a.noUnit?Object(L.b)(e,n,{precision:o,...a}):Object(L.c)(e,n,{precision:o,...a})}function te(e,t){var a,n;if(e.mock)return!0;if(!e||!e.profile||!t)return!1;const{uuid:o}=t;return!(!e.profiles||!e.profiles.map(e=>e.uuid).includes(o))||((null===(a=e.teamProfile)||void 0===a?void 0:a.uuid)===o||(null===(n=e.organisationProfile)||void 0===n?void 0:n.uuid)===o||!(!t.user||t.user.uuid!==e.uuid))}function ae(e,t){const{rules:a,condition:n}=e;return T()({rules:a&&a.map(e=>({op:e.comparison,property:"string"==typeof e.field?e.field.trim():e.field,value:"string"==typeof e.value?e.value.trim():e.value})).filter(e=>e.property),satisfy:n},t)}function ne(e,...t){return"function"==typeof e?e(...t):e}t.d={isProfileOwnedByUser:te,htmr:o(),displayCurrency:G,apiCurrency:z,currencies:R,toOtherCurrency:F.b,isNumber:Z,prettifyClassName:K,generateRangeQuery:Q,shallowCompareProps:W,findMostRelevantProfile:Y,exerciseTypeToActionLabel:L.g,resolveProfileValuesByDisplaySource:X,responsiveImageHelper:B.a,mirrorPathValueFromProfileName:J,asyncLoadRemote:I.a,asyncLoadRemoteLink:M.a,op:C(),dayjs:P(),Downshift:x.a,get:s(),set:y(),debounce:i(),startCase:m(),kebabCase:u(),groupBy:f(),isEqual:b(),sumBy:_(),times:k(),pick:O(),qs:D(),processDefaultValue:V.processDefaultValue,exerciseGoalFromConfig:L.e,exerciseMultiplierFromConfig:L.f,checkRules:ae,renderFunctionOrPass:ne};const oe=e=>/\s+/g.test(e),re=[{label:"Standard",value:"filled"},{label:"Outlined",value:"outlined"},{label:"Inverted Outline",value:"outlined-inverted"},{label:"Inverted Fill",value:"filled-inverted"},{label:"Monotone",value:"monotone"},{label:"Monotone Inverted",value:"monotone-inverted"}]},84:function(e,t,a){"use strict";var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(18),s=a(15);function c({numSteps:e,children:t,exclude:a,offset:n,...r}){const l=Array(e).fill();return i.a.createElement("div",o()({className:"signup-form__stages"},r),t||i.a.createElement("div",{className:"signup-form__stages__inner"},l.map((e,t)=>{if(a!==t)return i.a.createElement(u,{key:t,index:t,offset:n})})))}function u({index:e,children:t,offset:a=1,...n}){const{step:r,updateStep:c,values:u,updateValues:d}=Object(s.b)(),m=!(r>e)||u.disableBack,p=Object(l.a)("signup-form__stage",r===e&&"signup-form__stage--active",m&&"signup-form__stage--past-step");return i.a.createElement("button",o()({"aria-label":"Stage "+(e+a),className:p,disabled:m,onClick:function(){m||d({optInAmount:0,discount:0},()=>c(e),["promoCode"])}},n),i.a.createElement("span",null,t||e+a))}c.StepBtn=u,t.a=c},9:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"g",(function(){return d}));a(39);var n=a(7),o=a.n(n),r=a(33);a.d(t,"c",(function(){return r.a})),a.d(t,"d",(function(){return r.b}));var i=a(71);function l(e=null){if(!e)return;const{name:t,displayName:a,editorName:n,schema:o,internalEditable:r,description:i,group:l,icon:s,restrictions:c,hide:u}=e,d={type:"custom-component",object:"block"};"function"==typeof o?d.schemaFunction=o:Object.assign(d,o);const m=a||t;window["CustomComponent"+m]={html:e,name:m,editorName:n,restrictions:c,schema:d,internalEditable:r,description:i};const p={name:m,editorName:n,status:"COMMON",latestSchema:d,restrictions:c,description:i,group:l,icon:s,hide:u};Array.isArray(window.CommonCustomComponents)?window.CommonCustomComponents.push(p):window.CommonCustomComponents=[p]}a.d(t,"a",(function(){return i.a}));const s=!1;function c(e,t){Object.assign(e,t||{}),l(e)}const u={campaign:"campaign.profile",current:"current.profile",user:"user.profile"};function d(e,t,a="profile",n={}){const r=t.data.get("editable")[a];if(!r||!r.value)return null;const{value:i}=r,l=u[i];if(l){const t=o()(e,l,null);if(t)return t;if(!n.strict)return o()(e,"campaign.profile",null);if(n.strict)return null}return{uuid:i}}},90:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return y}));a(27);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),l=a(3),s=a(159),c=a.n(s),u=a(23),d=a(32),m=a.n(d),p=a(53);function f(e){return e?encodeURIComponent(e):""}function g(){const{t:e,tD:t}=Object(l.a)();return{facebook:{iconName:"facebook",label:e("Share"),buildUrl:e=>"http://facebook.com/sharer/sharer.php?"+Object(u.stringify)({u:e})},twitter:{iconName:"twitter",label:e("Post"),buildUrl:(e,{text:t,hashtags:a,via:n}={})=>"http://twitter.com/intent/tweet?"+Object(u.stringify)({url:e,text:t,hashtags:a,via:n})},whatsapp:{iconName:"whatsapp",label:e("WhatsApp"),buildUrl:(e,{text:a,whatsappMessage:n})=>"https://api.whatsapp.com/send?"+Object(u.stringify)({text:t(n)||`${t(a)||""}\n${e||""}`})},email:{iconName:"email",label:e("Email"),buildUrl:(e,{body:a,subject:n})=>`mailto:?subject=${f((""+n).replace(/\n/g,""))}&body=${f(""+t(a))}`},linkedin:{iconName:"linkedin",label:e("LinkedIn"),buildUrl:e=>"https://www.linkedin.com/sharing/share-offsite/?"+Object(u.stringify)({url:e})},link:{iconName:"r-link",label:e("Copy Link"),onClick:e=>c()(e)}}}a.d(t,"d",(function(){return p.c})),a.d(t,"c",(function(){return p.b}));const b=g(),h=(e,t,a)=>`share share--${e} share--${t}  share--align-${a}`;function y(e){if(!e.networks.length)return"";const t=p.c.includes(e.theme)?e.theme:"outlined",a=p.b.includes(e.size)?e.size:"medium",n=e.validAlignment.includes(e.align)?e.align:"left",r=g();return o.a.createElement("div",{className:h(t,a,n)},e.networks.map(n=>o.a.createElement(p.a,{key:m()(),networkName:n,network:r[n],theme:t,size:a,url:e.url,extra:e,onShare:e.onShare})))}y.propTypes={networks:i.a.arrayOf(i.a.oneOf(["facebook","twitter","whatsapp","email","linkedin","link"])),url:i.a.string.isRequired,theme:i.a.oneOf(p.c),size:i.a.oneOf(p.b),text:i.a.string,hashtags:i.a.string,via:i.a.string,whatsappMessage:i.a.string,subject:i.a.string,body:i.a.string}},900:function(e,t,a){"use strict";var n=a(901);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,a,o,r,i){if(i!==n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return a.PropTypes=a,a}},901:function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},902:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(0),l=(n=i)&&n.__esModule?n:{default:n},s=a(287),c=a(383);function u(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.withRef,f=void 0!==i&&i;return a=t=function(t){function a(e,n){if(d(this,a),!n||!n.getRegisteredElements)throw new Error("It looks like you are trying to inject Stripe context outside of an Elements context.\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.");var o=m(this,t.call(this,e,n));return o.parseElementOrData=function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&e._frame&&"object"===r(e._frame)&&e._frame.id&&"string"==typeof e._frame.id&&"string"==typeof e._componentName?{type:"element",element:e}:{type:"data",data:e}},o.findElement=function(e,t){var a=o.context.getRegisteredElements().filter((function(t){return t[e]})),n="auto"===t?a:a.filter((function(a){return a[e]===t}));if(1===n.length)return n[0].element;if(n.length>1)throw new Error("You did not specify the type of Source, Token, or PaymentMethod to create.\n        We could not infer which Element you want to use for this operation.");return null},o.requireElement=function(e,t){var a=o.findElement(e,t);if(a)return a;throw new Error("You did not specify the type of Source, Token, or PaymentMethod to create.\n        We could not infer which Element you want to use for this operation.")},o.wrappedCreateToken=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&"object"===(void 0===t?"undefined":r(t))){var n=t,i=n.type,l=u(n,["type"]),s="string"==typeof i?i:"auto",c=o.requireElement("impliedTokenType",s);return e.createToken(c,l)}if("string"==typeof t){var d=t;return e.createToken(d,a)}throw new Error("Invalid options passed to createToken. Expected an object, got "+(void 0===t?"undefined":r(t))+".")}},o.wrappedCreateSource=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&"object"===(void 0===t?"undefined":r(t))){if("string"!=typeof t.type)throw new Error("Invalid Source type passed to createSource. Expected string, got "+r(t.type)+".");var a=o.findElement("impliedSourceType",t.type);return a?e.createSource(a,t):e.createSource(t)}throw new Error("Invalid options passed to createSource. Expected an object, got "+(void 0===t?"undefined":r(t))+".")}},o.wrappedCreatePaymentMethod=function(e){return function(t,a,n){if(!t||"string"!=typeof t)throw new Error("Invalid PaymentMethod type passed to createPaymentMethod. Expected a string, got "+(void 0===t?"undefined":r(t))+".");var i=o.parseElementOrData(a);if("element"===i.type){var l=i.element;return n?e.createPaymentMethod(t,l,n):e.createPaymentMethod(t,l)}var s=i.data,c=o.findElement("impliedPaymentMethodType",t);if(c)return s?e.createPaymentMethod(t,c,s):e.createPaymentMethod(t,c);if(s&&"object"===(void 0===s?"undefined":r(s)))return e.createPaymentMethod(t,s);throw s?new Error("Invalid data passed to createPaymentMethod. Expected an object, got "+(void 0===s?"undefined":r(s))+"."):new Error("Could not find an Element that can be used to create a PaymentMethod of type: "+t+".")}},o.wrappedHandleCardX=function(e,t){return function(a,n,i){if(!a||"string"!=typeof a)throw new Error("Invalid PaymentIntent client secret passed to handleCardPayment. Expected string, got "+(void 0===a?"undefined":r(a))+".");var l=o.parseElementOrData(n);if("element"===l.type){var s=l.element;return i?e[t](a,s,i):e[t](a,s)}var c=l.data,u=o.findElement("impliedPaymentMethodType","card");return u?c?e[t](a,u,c):e[t](a,u):c?e[t](a,c):e[t](a)}},"sync"===o.context.tag?o.state={stripe:o.stripeProps(o.context.stripe)}:o.state={stripe:null},o}return p(a,t),a.prototype.componentDidMount=function(){var e=this;"async"===this.context.tag&&this.context.addStripeLoadListener((function(t){e.setState({stripe:e.stripeProps(t)})}))},a.prototype.getWrappedInstance=function(){if(!f)throw new Error("To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`");return this.wrappedInstance},a.prototype.stripeProps=function(e){return o({},e,{createToken:this.wrappedCreateToken(e),createSource:this.wrappedCreateSource(e),createPaymentMethod:this.wrappedCreatePaymentMethod(e),handleCardPayment:this.wrappedHandleCardX(e,"handleCardPayment"),handleCardSetup:this.wrappedHandleCardX(e,"handleCardSetup")})},a.prototype.render=function(){var t=this;return l.default.createElement(e,o({},this.props,{stripe:this.state.stripe,ref:f?function(e){t.wrappedInstance=e}:null}))},a}(l.default.Component),t.contextTypes=o({},c.providerContextTypes,s.injectContextTypes),t.displayName="InjectStripe("+(e.displayName||e.name||"Component")+")",a}},903:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(0)),o=l(a(286)),r=l(a(904)),i=a(287);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(){},m=function(e){e.id,e.className,e.onChange,e.onFocus,e.onBlur,e.onReady;return function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["id","className","onChange","onFocus","onBlur","onReady"])},p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.default=function(e){var t,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a=t=function(t){function a(e,n){s(this,a);var o=c(this,t.call(this,e,n));o.getElement=function(){return o._element},o.handleRef=function(e){o._ref=e},o._element=null;var r=m(o.props);return o._options=r,o}return u(a,t),a.prototype.componentDidMount=function(){var t=this;this.context.addElementsLoadListener((function(a){if(t._ref){var n=a.create(e,t._options);t._element=n,t._setupEventListeners(n),n.mount(t._ref),(l.impliedTokenType||l.impliedSourceType||l.impliedPaymentMethodType)&&t.context.registerElement(n,l.impliedTokenType,l.impliedSourceType,l.impliedPaymentMethodType)}}))},a.prototype.componentDidUpdate=function(){var e=m(this.props);0===Object.keys(e).length||(0,r.default)(e,this._options)||(this._options=e,this._element&&this._element.update(e))},a.prototype.componentWillUnmount=function(){if(this._element){var e=this._element;e.destroy(),this.context.unregisterElement(e)}},a.prototype._setupEventListeners=function(e){var t=this;e.on("ready",(function(){t.props.onReady(t._element)})),e.on("change",(function(e){t.props.onChange(e)})),e.on("blur",(function(){var e;return(e=t.props).onBlur.apply(e,arguments)})),e.on("focus",(function(){var e;return(e=t.props).onFocus.apply(e,arguments)}))},a.prototype.render=function(){return n.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},a}(n.default.Component),t.propTypes={id:o.default.string,className:o.default.string,onChange:o.default.func,onBlur:o.default.func,onFocus:o.default.func,onReady:o.default.func},t.defaultProps={id:void 0,className:void 0,onChange:d,onBlur:d,onFocus:d,onReady:d},t.contextTypes=i.elementContextTypes,t.displayName=p(e)+"Element",a}},904:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,a){if("object"!==(void 0===t?"undefined":n(t))||"object"!==(void 0===a?"undefined":n(a)))return t===a;if(null===t||null===a)return t===a;var o=Array.isArray(t);if(o!==Array.isArray(a))return!1;var r="[object Object]"===Object.prototype.toString.call(t);if(r!==("[object Object]"===Object.prototype.toString.call(a)))return!1;if(!r&&!o)return!1;var i=Object.keys(t),l=Object.keys(a);if(i.length!==l.length)return!1;for(var s={},c=0;c<i.length;c+=1)s[i[c]]=!0;for(var u=0;u<l.length;u+=1)s[l[u]]=!0;var d=Object.keys(s);if(d.length!==i.length)return!1;var m=t,p=a;return d.every((function(t){return e(m[t],p[t])}))}},905:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=s(a(0)),r=s(a(286)),i=s(a(906)),l=a(287);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){},u=function(e){e.id,e.className,e.onBlur,e.onClick,e.onFocus,e.onReady,e.paymentRequest;return function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["id","className","onBlur","onClick","onFocus","onReady","paymentRequest"])},d=function(e){function t(a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a,n));o.handleRef=function(e){o._ref=e};var r=u(a);return o._options=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this.context.addElementsLoadListener((function(t){e._element=t.create("paymentRequestButton",n({paymentRequest:e.props.paymentRequest},e._options)),e._element.on("ready",(function(){e.props.onReady(e._element)})),e._element.on("focus",(function(){var t;return(t=e.props).onFocus.apply(t,arguments)})),e._element.on("click",(function(){var t;return(t=e.props).onClick.apply(t,arguments)})),e._element.on("blur",(function(){var t;return(t=e.props).onBlur.apply(t,arguments)})),e._element.mount(e._ref)}))},t.prototype.componentDidUpdate=function(e){this.props.paymentRequest!==e.paymentRequest&&console.warn("Unsupported prop change: paymentRequest is not a customizable property.");var t=u(this.props);0===Object.keys(t).length||(0,i.default)(t,this._options)||(this._options=t,this._element.update(t))},t.prototype.componentWillUnmount=function(){this._element.destroy()},t.prototype.render=function(){return o.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},t}(o.default.Component);d.propTypes={id:r.default.string,className:r.default.string,onBlur:r.default.func,onClick:r.default.func,onFocus:r.default.func,onReady:r.default.func,paymentRequest:r.default.shape({canMakePayment:r.default.func.isRequired,on:r.default.func.isRequired,show:r.default.func.isRequired}).isRequired},d.defaultProps={id:void 0,className:void 0,onBlur:c,onClick:c,onFocus:c,onReady:c},d.contextTypes=l.elementContextTypes,t.default=d},906:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var a=Object.keys(e),n=Object.keys(t);return a.length===n.length&&a.every((function(a){return t.hasOwnProperty(a)&&t[a]===e[a]}))}},92:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"c",(function(){return f}));a(5);var n=a(0),o=a.n(n),r=a(3);a(923);const i=/:DEB=([a-zA-Z]+)/g;function l(e,t){return t>5?{message:e.message,errorClass:"Generic:SomethingIsCooked",isFatal:!0}:function(e,t){var a;if(e.donationFormErrorSubClass===t)return!0;const n=Array.from((null===(a=e.stack)||void 0===a?void 0:a.matchAll(i))||[]);if(n.length){if(n[0][1]===t)return!0}return!1}(e,"IntelligentAmounts")?t>3?{message:"IntelligentAmounts hook code disabled",errorClass:"IntelligentAmounts:FullDisable",isFatal:!1}:{message:e.message,errorClass:"IntelligentAmounts",isFatal:!1}:{message:e.message,errorClass:"Generic",isFatal:!0}}class s extends n.Component{componentDidCatch(e){this.props.onCaptureError(e)}render(){return this.props.children}}const c=Object(n.createContext)({});function u({children:e}){const{integrations:t}=useRaisely(!0),{t:a}=Object(r.d)(),[i,u]=Object(n.useState)(0),[d,m]=Object(n.useState)(new Map),[p,f]=Object(n.useState)(null),g=Object(n.useCallback)(e=>{console.warn("INTERCEPTED ERROR",e,{errorCount:i});const{message:a,errorClass:n,isFatal:o}=l(e,i+1);console.warn("PROCESSED ERROR",e,{message:a,errorClass:n,isFatal:o}),d.set(n,a),m(d),u(i+1),o&&f(n),t.broadcast("donation.error",{message:a,errorClass:n,isFatal:o,originalError:e,errorCount:i+1})},[t.broadcast,i,d,l]);if(p){const e=d.get(p)||a("Please try again later");return o.a.createElement("div",{className:"donation-form__error"},o.a.createElement("h3",{className:"donation-form__error-title"},a("Something went wrong!")),o.a.createElement("p",{className:"donation-form__error-description"},a("We've encountered an unexpected error:")," "+e))}const b=null!=p?p:`${d.size}-${i}`;return o.a.createElement(c.Provider,{value:d,key:b},o.a.createElement(s,{onCaptureError:g},e))}function d(e){return function(t,a,n){return e(()=>{try{return t()}catch(e){throw e.message=`${n} | ${e.message}`,e.donationFormErrorSubClass=n,e}},[n,...a])}}d(n.useEffect);const m=d(n.useMemo);d(n.useCallback);function p(e,t){return Object.defineProperty(e,"name",{value:`${e.name}:DEB=${t}`,writable:!1}),e}function f(e,t=""){const a=Object(n.useContext)(c);return a&&"function"==typeof a.has&&a.has(t)?e:null}},93:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return P})),a.d(t,"c",(function(){return F}));var n=a(2),o=a.n(n),r=a(4),i=a.n(r),l=(a(5),a(27),a(63),a(0)),s=a.n(l),c=a(66),u=a(21),d=a.n(u),m=a(13),p=a(46),f=a.n(p),g=a(7),b=a.n(g),h=a(115),y=a(26),v=a(8),_=a(289),E=a(11),k=a(33),w=a(143),O=a(48),S=a(3),T=a(24),N=a.n(T);const C=Object(m.e)("text","stripe"),x=({children:e,label:t,error:a,errorPlural:n,value:o,classes:r,touched:i})=>s.a.createElement("label",{className:C(o,a,r,i)},s.a.createElement(m.b,{label:n&&a?t+"'s":t,errors:a}),e,a&&s.a.createElement("span",{className:"form-field__error"},s.a.createElement("i",{className:"material-icons"},"warning"))),j=({brandName:e})=>e?s.a.createElement("img",{src:`https://admin.raisely.com/public/cards/${e}.png`,className:"form-field__card-logo",alt:e}):s.a.createElement("i",{className:"material-icons form-field__card-logo"},"credit_card"),P=({finalTotal:e,isProcessing:t,global:a,disabled:n,targetCurrency:o,paymentButton:r,values:i})=>{const l=t,c="string"==typeof r&&r||f()(a.campaign.config.language.donate)||"Donate";return"function"==typeof r?s.a.createElement(E.a,{disabled:n,type:"submit",className:"donation-form__submit-button"},l?"Loading ...":r(Object(v.f)(e,o),i)):s.a.createElement(E.a,{disabled:n,type:"submit",className:"donation-form__submit-button"},l?"Loading ...":(t=>t.includes("{amount}")?t.replace("{amount}",Object(v.f)(e,o)):`${t} ${Object(v.f)(e,o)} ${Object(w.a)(i)}`.trim())(c))};function A({onSubmit:t,appendToForm:a,targetCurrency:n,formProps:o,setError:r,autoFocus:u=!0,...d}){const{t:m}=Object(S.d)(),[p,f]=Object(l.useState)("unknown"),[g,y]=Object(l.useState)(null),[v,_]=Object(l.useState)(!1),[E,k]=Object(l.useState)({}),w=Boolean(e.env.TEST_FORCE_VALID_STATE)||!1,[O,T]=Object(l.useState)(w),C=Object(l.useRef)();let P=b()(d.global,"campaign.config.fraud.attackModeUntil",null);const A=P&&N()(P).isAfter(N()()),D=b()(d.global,"campaign.config.hideCvc")&&!A,R={visa:"Visa",mastercard:"MasterCard",discover:"Discover",diners:"Diners Club",amex:"American Express",jcb:"JCB"}[p],F=o.stripeStyles||{base:{"::placeholder":{color:"#d1d1d1"}}},I=d.useSingleCard||o.useSingleCard,M=e=>{const t={...E};t[e.elementType]=e;let a,n=I?["card"]:["cardNumber","cardExpiry","cardCvc"];D&&(n=n.filter(e=>"cardCvc"!==e));let o=!0;n.forEach(e=>{const n=t[e];n?(n.error&&(a=a||n.error.message),o=o&&n.complete&&!n.error):o=!1}),r(a),k(t),T(o)};return s.a.createElement("form",{onSubmit:e=>t(e,C,O)},I?s.a.createElement(x,{label:m("Card"),classes:"form-field--stripe form-field--stripe-1line donation-form__card-1line",error:g,errorPlural:v,touched:!0},s.a.createElement(c.CardElement,{id:"cardnumber",onChange:e=>{y(e.error?(e=>{switch(!0){case e.includes("Your card's"):return _(!0),e.replace("Your card's","");case e.includes("Your card"):return _(!1),e.replace("Your card","");case e.includes("Your postal"):return _(!0),e.replace("Your","");case e.includes("Your"):return _(!1),e.replace("Your","");default:return _(!1),e}})(e.error.message):null),M(e)},style:F,onReady:e=>{C.current=e,u&&e.focus()}})):s.a.createElement("div",{className:"stripe-inputs"},s.a.createElement(x,{label:m("Card number"),classes:"form-field--stripe__card-number donation-form__card-number"},s.a.createElement(c.CardNumberElement,{id:"cardnumber",style:F,onChange:e=>{f(e.brand),M(e)},onReady:e=>{C.current=e,u&&e.focus()}}),s.a.createElement(j,{brandName:R})),s.a.createElement(x,{label:m("Expiry date"),classes:"form-field--stripe__expiration-date donation-form__expiration-date"},s.a.createElement(c.CardExpiryElement,{style:F,onChange:M}),s.a.createElement("i",{className:"material-icons"},"calendar_today")),!D&&s.a.createElement(x,{label:m("CVC"),classes:"form-field--stripe__cvc donation-form__cvc"},s.a.createElement(c.CardCVCElement,{style:F,onChange:M}),s.a.createElement("i",{className:"material-icons"},"credit_card"))),d.appendInput,!o.hideFee&&s.a.createElement(h.a,i()({},d,{formProps:o,targetCurrency:n})),!d.minimal&&s.a.createElement("p",{className:"donation-form__currency-message"},d.paymentIntervalLabel,h.d[n].name),a)}function D({stripe:e,values:t,country:a,targetCurrency:n,onSubmit:o}){const[r,i]=Object(l.useState)(null);return Object(l.useEffect)(()=>{const r=e.paymentRequest({country:a,currency:n.toLowerCase(),total:{label:"Online Donation",amount:t.amount}});r.on("token",({complete:e,token:t})=>{o(t),e("success")}),r.canMakePayment().then(e=>{if(!e)return console.warn("RaiselyPayment: Apple Pay could not be initialised. canMakePayment resolved as",e),void i(null);i(r)})},[a,o,e,n,t.amount]),r?s.a.createElement(c.PaymentRequestButtonElement,{paymentRequest:r,className:"PaymentRequestButton",style:{paymentRequestButton:{theme:"light",height:"64px"}}}):null}const R=Object(c.injectStripe)((function(e){const t=Object(y.k)(e),a=parseInt(e.values.amount)+(e.values.feeOptIn?parseInt(t):0),n="function"==typeof e.CustomAppendDonationForm?e.CustomAppendDonationForm:()=>null,o="function"==typeof e.CustomDonateButton?e.CustomDonateButton:P,[r,c]=Object(l.useState)(null),u=e.error||r,{friendlyChallenge:m}=e;return s.a.createElement(h.c,{isProcessing:e.isProcessing,showWhenProcessing:e.showWhenProcessing,finalTotal:a},!e.minimal&&s.a.createElement("h3",{className:"donation-form__title"},d()(Object(y.d)({lastResult:{...e.values,currency:e.values.currency||e.targetCurrency}},[e.paymentHeading||"Your Payment Details"],!1)[0])),e.formProps.existingCards&&e.global.user&&s.a.createElement(_.a,{select:t=>e.createDonation(e.stripe,{existingCard:t}),global:e.global,extra:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",null),s.a.createElement("label",null,"Or enter a new one"))}),s.a.createElement(A,i()({},e,{setError:c,feeAmount:t,onSubmit:(t,a,n)=>{t.preventDefault(),n&&e.createDonation(e.stripe,{elementRef:a})},appendToForm:s.a.createElement(l.Fragment,null,s.a.createElement(n,e),u&&s.a.createElement("p",{className:"donation-form__message donation-form__message--error"},u),e.minimal?parseInt(e.values.amount)>0&&s.a.createElement(o,i()({},e,{finalTotal:a})):s.a.createElement("div",{className:"donation-form__stripe-buttons"},s.a.createElement(o,i()({},e,{finalTotal:a}))),s.a.createElement(O.b,{context:"donation"}))})),!e.preferSCAMode&&e.enableApplePay&&s.a.createElement(D,i()({},e,{onSubmit:t=>e.createDonation(e.stripe,{tokenFromApplePay:t})})))}));class F extends l.Component{constructor(...e){super(...e),o()(this,"state",{isProcessing:!1}),o()(this,"initStripe",()=>{const{props:e}=this,{preferSCAMode:t,currentProvider:a}=e,n={};t&&(n.stripeAccount=a.accountId);const o=this.props.isLive?"pk_live_IuO9apxOM1AclLg9TOTxjUS0":"pk_test_F4jZ0EjLCG6xXvdpqjGyUiSv";try{const e=window.Stripe(o,n);this.setState({stripe:e,loaded:!0})}catch(e){console.error(e),this.setError(e.message,e)}}),o()(this,"setError",(e,t)=>{const{props:a}=this;"ONCE"===a.values.interval?a.integrations.broadcast("donation.error",t):a.integrations.broadcast("subscription.error",t),a.setError&&a.setError(t),this.setState({error:e})}),o()(this,"setProcessing",e=>this.setState({isProcessing:e}))}componentDidMount(){this.load()}async load(){window.Stripe?this.initStripe():window.stripeLoaded.then(this.initStripe)}render(){const{currentProvider:e,createProviderDonation:t,friendlyChallenge:a,...n}=this.props,{error:o,isProcessing:r,stripe:l}=this.state,u=a.error?"There is a problem loading payment processing. Please contact support":o;if(!l)return s.a.createElement(k.b,null);return s.a.createElement(c.StripeProvider,{stripe:l},s.a.createElement(c.Elements,null,s.a.createElement(R,i()({},n,{friendlyChallenge:a,isProcessing:r,country:e.country,enableApplePay:!1,error:u,createDonation:(e,o={})=>t(e,{...n,...o,friendlyChallenge:a,setProcessing:this.setProcessing,setError:this.setError})}))))}}}).call(this,a(367))},938:function(e,t,a){var n=a(176),o=a(940),r=a(941);e.exports=function(e){var t=n(e);return r(t,o(t))+1}},939:function(e,t){e.exports=function(e){var t=new Date(e.getTime()),a=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*a+t.getTime()%6e4}},94:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return _}));a(5);var n=a(0),o=a.n(n),r=a(54),i=a(24),l=a.n(i),s=a(677),c=a.n(s),u=a(32),d=a.n(u),m=a(17),p=a(93),f=a(3);function g(t,a,n){const{t:o}=Object(f.a)();if(e.env.TEST_FORCE_VALID_STATE)return[];if(!Object.keys(t).length)return[o("Payment details incomplete")];const r=n?["card"]:["cardNumber","cardExpiry"];n||a||r.push("cardCvc");const i=[];return r.forEach(e=>{const a=t[e];a?a.error&&i.push(a.error.message):i.push(o("Payment details incomplete"))}),c()(i)}const b=Object(n.createContext)();function h(){return Object(n.useContext)(b)}function y({onSubmit:e,useSingleCard:t,children:a}){var i;const s=Object(n.useMemo)(()=>d()(),[]);Object(n.useEffect)(()=>{const e=(e=>{let t=document.querySelector(`form[data-form-uuid="${e}"]`);if(!t)return null;for(;t!==document.body;){if(t.className&&-1!==t.className.indexOf("row__container"))return t;t=t.parentNode}return null})(s);e&&e.classList.add("row__container--contains-form")},[]);const c=useRaisely(),u=(null===(i=c.campaign.config.fraud)||void 0===i?void 0:i.attackModeUntil)||null,p=u&&l()(u).isAfter(l()()),f=c.campaign.config.hideCvc&&!p,[h,y,v,_]=function(e,t,a){const[o,i]=Object(n.useState)("unknown"),[l,s]=Object(n.useState)({}),{setError:c,showStripePaymentElements:u}=Object(m.b)(),d=Object(r.useElements)(),p=Object(n.useMemo)(()=>{let e=4;return t&&(e-=1),a&&(e=1),Object.keys(l).length!==e?[]:g(l,t,a)},[l,t,a]);return[e=>{let t;const a={};e&&(a[e.elementType]=e,e.brand&&e.brand!==o&&(t=e.brand)),t&&i(t),s(e=>({...e,...a}))},n=>{if(null==n||n.preventDefault(),!u){const e=g(l,t,a);if(c(e[0]||null),e[0])return}e(n,d)},o,p]}(e,f,t);return o.a.createElement(b.Provider,{value:{onCardChange:h,validateFormAndSubmit:y,hideCvc:f,cardFormValidationErrors:_,cardBrand:v,useSingleCard:t}},o.a.createElement("form",{"data-form-uuid":s,onSubmit:y},a))}const v=({brandName:e})=>e?o.a.createElement("img",{src:`https://admin.raisely.com/public/cards/${e}.png`,className:"form-field__card-logo",alt:e}):o.a.createElement("i",{className:"material-icons form-field__card-logo"},"credit_card");function _({autoFocus:e}){const{t:t}=Object(f.d)(),{onCardChange:a,hideCvc:i,cardBrand:l,useSingleCard:s}=h(),{disablePayment:c}=Object(m.b)(),u={base:{"::placeholder":{color:"#d1d1d1"}}},d={visa:"Visa",mastercard:"MasterCard",discover:"Discover",diners:"Diners Club",amex:"American Express",jcb:"JCB"}[l];return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"stripe-inputs"},s?o.a.createElement(p.a,{label:t("Payment Details"),classes:"form-field--stripe-1line"},o.a.createElement(r.CardElement,{id:"cardnumber",options:{disabled:c},style:u,onChange:a})):o.a.createElement(n.Fragment,null,o.a.createElement(p.a,{label:t("Card number"),classes:"form-field--stripe__card-number donation-form__card-number"},o.a.createElement(r.CardNumberElement,{id:"cardnumber",style:u,options:{disabled:c},onChange:a,onReady:t=>{e&&t.focus()}}),o.a.createElement(v,{brandName:d})),o.a.createElement(p.a,{label:t("Expiry date"),classes:"form-field--stripe__expiration-date donation-form__expiration-date"},o.a.createElement(r.CardExpiryElement,{style:u,options:{disabled:c},onChange:a}),o.a.createElement("i",{className:"material-icons"},"calendar_today")),!i&&o.a.createElement(p.a,{label:t("CVC"),classes:"form-field--stripe__cvc donation-form__cvc"},o.a.createElement(r.CardCvcElement,{style:u,options:{disabled:c},onChange:a}),o.a.createElement("i",{className:"material-icons"},"credit_card")))))}}).call(this,a(367))},940:function(e,t,a){var n=a(176);e.exports=function(e){var t=n(e),a=new Date(0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}},941:function(e,t,a){var n=a(942);e.exports=function(e,t){var a=n(e),o=n(t),r=a.getTime()-6e4*a.getTimezoneOffset(),i=o.getTime()-6e4*o.getTimezoneOffset();return Math.round((r-i)/864e5)}},942:function(e,t,a){var n=a(176);e.exports=function(e){var t=n(e);return t.setHours(0,0,0,0),t}},943:function(e,t,a){var n=a(176),o=a(384),r=a(945);e.exports=function(e){var t=n(e),a=o(t).getTime()-r(t).getTime();return Math.round(a/6048e5)+1}},944:function(e,t,a){var n=a(176);e.exports=function(e,t){var a=t&&Number(t.weekStartsOn)||0,o=n(e),r=o.getDay(),i=(r<a?7:0)+r-a;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}},945:function(e,t,a){var n=a(633),o=a(384);e.exports=function(e){var t=n(e),a=new Date(0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),o(a)}},946:function(e,t,a){var n=a(632);e.exports=function(e){if(n(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},947:function(e,t,a){var n=a(948),o=a(949);e.exports={distanceInWords:n(),format:o()}},948:function(e,t){e.exports=function(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,a,n){var o;return n=n||{},o="string"==typeof e[t]?e[t]:1===a?e[t].one:e[t].other.replace("{{count}}",a),n.addSuffix?n.comparison>0?"in "+o:o+" ago":o}}}},949:function(e,t,a){var n=a(950);e.exports=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Su","Mo","Tu","We","Th","Fr","Sa"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["AM","PM"],l=["am","pm"],s=["a.m.","p.m."],c={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return a[e.getDay()]},ddd:function(e){return o[e.getDay()]},dddd:function(e){return r[e.getDay()]},A:function(e){return e.getHours()/12>=1?i[1]:i[0]},a:function(e){return e.getHours()/12>=1?l[1]:l[0]},aa:function(e){return e.getHours()/12>=1?s[1]:s[0]}};return["M","D","DDD","d","Q","W"].forEach((function(e){c[e+"o"]=function(t,a){return function(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(a[e](t))}})),{formatters:c,formattingTokensRegExp:n(c)}}},95:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return p})),a.d(t,"d",(function(){return f}));var n=a(4),o=a.n(n),r=(a(5),a(0)),i=a.n(r),l=a(3),s=a(17),c=a(8),u=a(28);function d({children:e}){const{values:t}=Object(s.b)(),{t:a}=Object(l.d)(),n=Object(c.f)(t.amount,t.currency),o="ONCE"!==t.interval?function(e,t){const{t:a}=Object(l.a)();if("WEEK"===e){if(1===t)return a("weekly");if(2===t)return a("every 2 weeks");if(4===t)return a("every 4 weeks")}if("MONTH"===e){if(1===t)return a("monthly");if(3===t)return a("every 3 months")}if("YEAR"===e)return a("yearly")}(t.interval,t.count):"";return i.a.createElement("div",{className:"donation-form__giving-label"},e,a("Donating [[amount]] [[frequency]]",{amount:n,frequency:o}))}function m(){return i.a.createElement(d,null,i.a.createElement(p,{delay:300}))}function p({delay:e}){const{values:t}=Object(s.b)(),[a,n]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{e?setTimeout(()=>n(!0),e):n(!0)},[e]),"ONCE"===t.interval?null:i.a.createElement("div",{className:"donation-form__giving-label__animated-heart"+(a?" animate":""),"aria-hidden":"true"},i.a.createElement(f,{name:"favorite_border"}),i.a.createElement(f,{className:"animated center"}),i.a.createElement(f,{className:"animated left-up"}),i.a.createElement(f,{className:"animated right-up"}),i.a.createElement(f,{className:"animated center-up"}))}function f(e){return i.a.createElement(u.Icon,o()({name:"favorite",size:"small",theme:"inherit",color:"#F74440","aria-hidden":"true"},e))}},950:function(e,t){var a=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var o=a.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+o.join("|")+"|.)","g")}},965:function(e,t,a){"use strict";(function(e){var t=a(4),n=a.n(t),o=a(2),r=a.n(o),i=a(0),l=a.n(i),s=a(295),c=a(9),u=a(25);const d=Object(u.b)(),{render:m}=d;class p extends i.Component{render(){const t=this.props.getValues();return l.a.createElement(s.a,n()({header:l.a.createElement(m,n()({},t.heading,{campaign:e.campaign}))},t))}}r()(p,"description","Show key details for an event"),r()(p,"icon","event"),r()(p,"internalEditable",{...d.internalEditable,name:{id:"name",type:"text",label:"Event Name"},freeText:{id:"freeText",type:"textarea",label:"Event Description"},address:{id:"address",type:"textarea",label:"Address",default:"4068 Golden Hill Rd., Church Creek, MD 21622",help:"We'll attempt to generate a map with this address."},startDate:{id:"startDate",type:"date",label:"Start Date & Time",default:""},endDate:{id:"endDate",type:"date",label:"End Date & Time",default:""},showCalendarInvite:{id:"showCalendarInvite",type:"boolean",label:"Add to calendar button",default:!0},showMap:{id:"showMap",type:"boolean",label:"Show a map of the event location",default:!0}}),r()(p,"schema",{data:{customComponent:"RaiselyEventOverview",editable:{...d.editable,name:{value:"My Ticketed Event"},freeText:{value:"Use this space to describe your event or add your own free text."},address:{value:"4068 Golden Hill Rd., Church Creek, MD 21622"},showCalendarInvite:{value:!0},showMap:{value:!0}}}}),p.displayName="RaiselyEventOverview",Object(c.f)(p)}).call(this,a(106))},99:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(70),i=a(7),l=a.n(i);let s,c,u,d,m=e=>e;const p=Object(r.c)(s||(s=m`
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
`)),f=Object(r.b)("div")(c||(c=m`
	display: flex;
	align-items: center;
	justify-content: center;
	height: ${0};
`),e=>e.sceneHeight||"200px"),g=Object(r.b)("div")(u||(u=m`
	width: ${0};
	height: ${0};
	position: relative;

	animation: ${0} 0.66667s linear infinite;
`),({size:e})=>e+"px",({size:e})=>e+"px",p),b=Object(r.b)("span")(d||(d=m`
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;

	border: ${0}px solid
		${0};
	border-right-color: transparent;
	border-bottom-color: transparent;
	border-top-color: transparent;

	border-radius: 50%;

	animation: loadStroke cubic-bezier(0.23, 0, 0.77, 1) 2s infinite;

	${0}

	@keyframes loadStroke {
		50% {
			transform: rotate(130deg);
		}
	}
`),({size:e})=>3*e,({color:e,theme:t})=>e?((e,t)=>l()(t.colors,e)||t.colors.primary.mid)(e,t):"#333",({ix:e})=>1===e&&"\n\t\tanimation-delay: 0.5s;\n\t");t.a=e=>o.a.createElement(f,e,o.a.createElement(g,{size:40*(e.size||1)},o.a.createElement(b,{className:"spinner_stroke",size:e.size||1,ix:0,color:e.color}),o.a.createElement(b,{className:"spinner_stroke",size:e.size||1,ix:1,color:e.color})))}}]);